{"version":3,"file":"main.js","sources":["../../../../common/temp/node_modules/.pnpm/svelte@3.42.4/node_modules/svelte/internal/index.mjs","../../../../common/temp/node_modules/.pnpm/page@1.11.6/node_modules/page/page.js","../../src/App.svelte","../../../../libs/direction-indicator/lib/dependencyInjection/Token.js","../../../../libs/direction-indicator/lib/dependencyInjection/InjectionApplication.js","../../../../libs/direction-indicator/lib/dependencyInjection/InjectionDomain.js","../../../../libs/direction-indicator/lib/Context.js","../../../../libs/direction-indicator/lib/tokens.js","../../../../libs/direction-indicator/lib/dependencyInjection/ChildContainer.js","../../../../libs/direction-indicator/lib/dependencyInjection/Container.js","../../../../libs/direction-indicator/lib/dependencyInjection/RootContainer.js","../../../../libs/direction-indicator/lib/dependencyInjection/InversionOfControl.js","../../../../libs/direction-indicator/lib/dependencyInjection/Injectable.js","../../../../apis/terminal-map/lib/core/UpdateState.js","../../../../apis/terminal-map/lib/metadata/RepositoryEntityType.js","../../../../apis/ground-control/lib/impl/query/TableMap.js","../../../../apis/ground-control/lib/impl/query/ColumnMap.js","../../../../apis/ground-control/lib/impl/query/DbApplicationUtils.js","../../../../apis/ground-control/lib/impl/query/ApplicationMap.js","../../../../apis/ground-control/lib/impl/sync/SyncColumnMap.js","../../../../apis/ground-control/lib/impl/sync/SyncTableMap.js","../../../../apis/ground-control/lib/impl/sync/SyncApplicationMap.js","../../../../apis/ground-control/lib/impl/sync/SyncStatus.js","../../../../apis/ground-control/lib/lingo/core/entity/Dictionary.js","../../../../apis/ground-control/lib/lingo/core/entity/Relation.js","../../../../apis/ground-control/lib/lingo/core/field/FieldInOrderBy.js","../../../../apis/ground-control/lib/lingo/core/field/Functions.js","../../../../apis/ground-control/lib/lingo/core/field/JSONClause.js","../../../../apis/ground-control/lib/lingo/core/operation/EntityStateManager.js","../../../../apis/ground-control/lib/lingo/core/operation/Operation.js","../../../../apis/ground-control/lib/lingo/data/sync/TransactionType.js","../../../../apis/ground-control/lib/lingo/data/ChangeType.js","../../../../apis/ground-control/lib/lingo/data/DistributionStrategy.js","../../../../apis/ground-control/lib/lingo/data/IStoreOperator.js","../../../../apis/ground-control/lib/lingo/data/PatformType.js","../../../../apis/ground-control/lib/lingo/data/storeInfo.js","../../../../apis/ground-control/lib/lingo/query/facade/Query.js","../../../../apis/ground-control/lib/lingo/query/QueryResultType.js","../../../../apis/ground-control/lib/lingo/application/Operation.js","../../../../apis/ground-control/lib/lingo/application/ApplicationStatus.js","../../../../apis/ground-control/lib/impl/utils/DatastructureUtils.js","../../../../apis/ground-control/lib/lingo/ITransactionalConnector.js","../../../../apis/ground-control/lib/tokens.js","../../../../common/temp/node_modules/.pnpm/tslib@2.1.0/node_modules/tslib/tslib.es6.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/isFunction.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/Subscription.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/config.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/noop.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/errorContext.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/Subscriber.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/symbol/observable.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/identity.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/pipe.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/Observable.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/lift.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/Subject.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/isPromise.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/isIterable.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/operators/observeOn.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/observable/from.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/operators/map.js","../../../../common/temp/node_modules/.pnpm/rxjs@7.4.0/node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js","../../../../apis/terminal-map/lib/store/theState.js","../../../../apis/terminal-map/lib/store/TerminalStore.js","../../../../libs/direction-indicator/lib/dependencyInjection/decorators.js","../../../../apis/air-traffic-control/lib/impl/core/entity/metadata/ColumnDecorators.js","../../../../apis/air-traffic-control/lib/impl/core/entity/Aliases.js","../../../../apis/air-traffic-control/lib/impl/core/operation/Operation.js","../../../../apis/air-traffic-control/lib/impl/core/operation/LogicalOperation.js","../../../../apis/air-traffic-control/lib/impl/core/entity/Relation.js","../../../../apis/air-traffic-control/lib/impl/core/operation/BooleanOperation.js","../../../../apis/air-traffic-control/lib/impl/core/field/FieldInOrderBy.js","../../../../apis/air-traffic-control/lib/impl/core/field/Field.js","../../../../apis/air-traffic-control/lib/impl/core/field/OperableField.js","../../../../apis/air-traffic-control/lib/impl/core/field/BooleanField.js","../../../../apis/air-traffic-control/lib/impl/core/operation/DateOperation.js","../../../../apis/air-traffic-control/lib/impl/core/field/DateField.js","../../../../apis/air-traffic-control/lib/impl/core/operation/NumberOperation.js","../../../../apis/air-traffic-control/lib/impl/core/field/NumberField.js","../../../../apis/air-traffic-control/lib/impl/core/operation/StringOperation.js","../../../../apis/air-traffic-control/lib/impl/core/field/StringField.js","../../../../apis/air-traffic-control/lib/impl/core/operation/UntypedOperation.js","../../../../apis/air-traffic-control/lib/impl/core/field/UntypedField.js","../../../../apis/air-traffic-control/lib/impl/utils/qApplicationBuilderUtils.js","../../../../apis/air-traffic-control/lib/impl/core/entity/OneToManyRelation.js","../../../../apis/air-traffic-control/lib/impl/core/field/NullFunction.js","../../../../apis/air-traffic-control/lib/impl/core/field/WrapperFunctions.js","../../../../apis/air-traffic-control/lib/impl/core/field/Functions.js","../../../../apis/air-traffic-control/lib/impl/query/facade/AbstractQuery.js","../../../../apis/air-traffic-control/lib/impl/query/facade/NonEntityQuery.js","../../../../apis/air-traffic-control/lib/impl/query/facade/TreeQuery.js","../../../../apis/air-traffic-control/lib/impl/core/Joins.js","../../../../apis/air-traffic-control/lib/impl/core/entity/Entity.js","../../../../apis/air-traffic-control/lib/impl/core/entity/JoinTreeNode.js","../../../../apis/air-traffic-control/lib/impl/core/entity/RelationManager.js","../../../../apis/air-traffic-control/lib/impl/query/api/Lookup.js","../../../../apis/air-traffic-control/lib/impl/query/api/EntityLookup.js","../../../../apis/air-traffic-control/lib/impl/query/api/EntityFind.js","../../../../apis/air-traffic-control/lib/impl/query/api/EntityFindOne.js","../../../../apis/air-traffic-control/lib/impl/query/facade/FieldQuery.js","../../../../apis/air-traffic-control/lib/impl/query/facade/SheetQuery.js","../../../../apis/air-traffic-control/lib/impl/query/api/NonEntityFind.js","../../../../apis/air-traffic-control/lib/impl/query/api/NonEntityFindOne.js","../../../../apis/air-traffic-control/lib/impl/query/api/NonEntitySearch.js","../../../../apis/air-traffic-control/lib/impl/query/api/NonEntitySearchOne.js","../../../../apis/air-traffic-control/lib/impl/query/facade/AbstractInsertValues.js","../../../../apis/air-traffic-control/lib/impl/query/facade/AbstractUpdate.js","../../../../apis/air-traffic-control/lib/impl/query/facade/Delete.js","../../../../apis/air-traffic-control/lib/impl/query/facade/EntityQuery.js","../../../../apis/air-traffic-control/lib/impl/query/facade/InsertColumnValues.js","../../../../apis/air-traffic-control/lib/impl/query/facade/InsertValues.js","../../../../apis/air-traffic-control/lib/impl/query/facade/UpdateColumns.js","../../../../apis/air-traffic-control/lib/impl/query/facade/UpdateProperties.js","../../../../apis/air-traffic-control/lib/impl/Utils.js","../../../../apis/air-traffic-control/lib/impl/utils/EntityUtils.js","../../../../apis/air-traffic-control/lib/impl/utils/FieldUtils.js","../../../../apis/air-traffic-control/lib/impl/utils/QMetadataUtils.js","../../../../apis/air-traffic-control/lib/impl/utils/QueryUtils.js","../../../../apis/air-traffic-control/lib/lingo/query/facade/Query.js","../../../../apis/air-traffic-control/lib/impl/utils/ApplicationUtils.js","../../../../apis/air-traffic-control/lib/impl/Constants.js","../../../../apis/air-traffic-control/lib/lingo/core/entity/metadata/ColumnDecorators.js","../../../../apis/air-traffic-control/lib/tokens.js","../../../../apis/check-in/lib/EntityDatabaseFacade.js","../../../../apis/check-in/lib/dao/DaoFindOneStub.js","../../../../apis/check-in/lib/dao/DaoFindStub.js","../../../../apis/check-in/lib/dao/DaoSearchOneStub.js","../../../../apis/check-in/lib/dao/DaoSearchStub.js","../../../../apis/check-in/lib/dao/DaoStub.js","../../../../apis/check-in/lib/dao/Dao.js","../../../../apis/check-in/lib/dao/DaoQueryDecorators.js","../../../../apis/check-in/lib/api/ApiOperation.js","../../../../apis/check-in/lib/Duo.js","../../../../apis/check-in/lib/Selector.js","../../../../apis/check-in/lib/SequenceGenerator.js","../../../../apis/check-in/lib/tokens.js","../../../../apis/terminal-map/lib/tokens.js","../../../../engines/terminal/lib/core/repository/RepositoryLoader.js","../../../../common/temp/node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/rng.js","../../../../common/temp/node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/regex.js","../../../../common/temp/node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/validate.js","../../../../common/temp/node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/stringify.js","../../../../common/temp/node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v4.js","../../../../engines/terminal/lib/core/repository/RepositoryManager.js","../../../../schemas/holding-pattern/lib/ddl/history/OperationHistory.js","../../../../apis/air-traffic-control/lib/impl/core/entity/metadata/EntityDecorators.js","../../../../schemas/holding-pattern/lib/ddl/history/RecordHistory.js","../../../../schemas/holding-pattern/lib/ddl/history/RecordHistoryNewValue.js","../../../../schemas/holding-pattern/lib/ddl/history/RecordHistoryOldValue.js","../../../../schemas/holding-pattern/lib/ddl/history/RepositoryTransactionType.js","../../../../schemas/holding-pattern/lib/ddl/history/RepositoryTransactionHistory.js","../../../../schemas/holding-pattern/lib/ddl/history/TransactionHistory.js","../../../../schemas/holding-pattern/lib/ddl/infrastructure/Actor.js","../../../../schemas/holding-pattern/lib/ddl/repository/Repository.js","../../../../schemas/holding-pattern/lib/ddl/repository/RepositoryEntity.js","../../../../schemas/holding-pattern/lib/ddl/repository/RepositoryApplication.js","../../../../schemas/holding-pattern/lib/ddl/traditional/ChildRepoRow.js","../../../../schemas/holding-pattern/lib/ddl/traditional/ChildRow.js","../../../../schemas/holding-pattern/lib/ddl/traditional/ImmutableRepoRow.js","../../../../schemas/holding-pattern/lib/ddl/traditional/ImmutableRow.js","../../../../schemas/holding-pattern/lib/ddl/traditional/MutableRepoRow.js","../../../../schemas/holding-pattern/lib/ddl/traditional/MutableRow.js","../../../../schemas/holding-pattern/lib/ddl/traditional/ReferenceRow.js","../../../../schemas/holding-pattern/lib/generated/qApplication.js","../../../../schemas/holding-pattern/lib/generated/baseDaos.js","../../../../schemas/holding-pattern/lib/generated/baseDuos.js","../../../../schemas/holding-pattern/lib/dao/history/RecordHistoryNewValueDao.js","../../../../schemas/holding-pattern/lib/dao/history/RecordHistoryOldValueDao.js","../../../../schemas/holding-pattern/lib/dao/history/RepositoryTransactionHistoryDao.js","../../../../schemas/holding-pattern/lib/dao/infrastructure/ActorDao.js","../../../../schemas/holding-pattern/lib/dao/repository/RepositoryDao.js","../../../../schemas/holding-pattern/lib/duo/history/OperationHistoryDuo.js","../../../../schemas/holding-pattern/lib/duo/history/RecordHistoryDuo.js","../../../../schemas/holding-pattern/lib/duo/history/RecordHistoryNewValueDuo.js","../../../../schemas/holding-pattern/lib/duo/history/RecordHistoryOldValueDuo.js","../../../../schemas/holding-pattern/lib/duo/history/RepositoryTransactionHistoryDuo.js","../../../../schemas/holding-pattern/lib/duo/history/TransactionHistoryDuo.js","../../../../schemas/holding-pattern/lib/tokens.js","../../../../schemas/travel-document-checkpoint/lib/ddl/Agt.js","../../../../schemas/travel-document-checkpoint/lib/ddl/Continent.js","../../../../schemas/travel-document-checkpoint/lib/ddl/Country.js","../../../../schemas/travel-document-checkpoint/lib/ddl/Terminal.js","../../../../schemas/travel-document-checkpoint/lib/ddl/TerminalAgt.js","../../../../schemas/travel-document-checkpoint/lib/ddl/User.js","../../../../schemas/travel-document-checkpoint/lib/ddl/UserTerminal.js","../../../../schemas/travel-document-checkpoint/lib/ddl/UserTerminalAgt.js","../../../../schemas/travel-document-checkpoint/lib/generated/qApplication.js","../../../../schemas/travel-document-checkpoint/lib/generated/baseDaos.js","../../../../schemas/travel-document-checkpoint/lib/dao/TerminalDao.js","../../../../schemas/travel-document-checkpoint/lib/dao/UserDao.js","../../../../schemas/travel-document-checkpoint/lib/api/UserApi.js","../../../../apis/check-in/lib/api/Api.js","../../../../schemas/travel-document-checkpoint/lib/to_be_generated/api-tokens.js","../../../../schemas/travel-document-checkpoint/lib/to_be_generated/internal-tokens.js","../../../../engines/terminal/lib/data/InternalRecordManager.js","../../../../engines/terminal/lib/net/InternalTransactionalConnector.js","../../../../engines/terminal/lib/net/OnlineManager.js","../../../../apis/apron/lib/isolate/IsolateMessage.js","../../../../apis/apron/lib/state/ApplicationState.js","../../../../apis/apron/lib/state/theApplicationState.js","../../../../apis/apron/lib/state/ApplicationStore.js","../../../../apis/apron/lib/tokens.js","../../../../engines/terminal/lib/net/TransactionalReceiver.js","../../../../engines/terminal/lib/net/TransactionalServer.js","../../../../engines/terminal/lib/orchestration/AbstractMutationManager.js","../../../../schemas/airport-code/lib/generated/application.js","../../../../libs/blueprint/lib/index.js","../../../../schemas/travel-document-checkpoint/lib/generated/application.js","../../../../schemas/airspace/lib/generated/application.js","../../../../schemas/holding-pattern/lib/generated/application.js","../../../../schemas/moving-walkway/lib/generated/application.js","../../../../engines/terminal/lib/orchestration/DatabaseManager.js","../../../../engines/terminal/lib/orchestration/DeleteManager.js","../../../../engines/terminal/lib/orchestration/HistoryManager.js","../../../../engines/terminal/lib/orchestration/InsertManager.js","../../../../engines/terminal/lib/orchestration/QueryManager.js","../../../../engines/terminal/lib/orchestration/TransactionManager.js","../../../../engines/terminal/lib/orchestration/UpdateManager.js","../../../../engines/terminal/lib/processing/CascadeGraphVerifier.js","../../../../engines/terminal/lib/processing/DependencyGraphResolver.js","../../../../engines/terminal/lib/processing/EntityGraphReconstructor.js","../../../../engines/terminal/lib/processing/OperationContext.js","../../../../engines/terminal/lib/processing/OperationManager.js","../../../../engines/terminal/lib/processing/StructuralEntityValidator.js","../../../../engines/terminal/lib/serialize/QueryParameterDeserializer.js","../../../../engines/terminal/lib/serialize/QueryResultsSerializer.js","../../../../engines/terminal/lib/shared/PlatformUtils.js","../../../../engines/terminal/lib/ClientQueryManager.js","../../../../schemas/airspace/lib/ddl/application/Domain.js","../../../../schemas/airspace/lib/ddl/application/Application.js","../../../../schemas/airspace/lib/ddl/application/VersionedApplicationObject.js","../../../../schemas/airspace/lib/ddl/application/ApplicationColumn.js","../../../../schemas/airspace/lib/ddl/application/ApplicationCurrentVersion.js","../../../../schemas/airspace/lib/ddl/application/ApplicationEntity.js","../../../../schemas/airspace/lib/ddl/application/ApplicationOperation.js","../../../../schemas/airspace/lib/ddl/application/ApplicationProperty.js","../../../../schemas/airspace/lib/ddl/application/ApplicationPropertyColumn.js","../../../../schemas/airspace/lib/ddl/application/ApplicationReference.js","../../../../schemas/airspace/lib/ddl/application/ApplicationRelation.js","../../../../schemas/airspace/lib/ddl/application/ApplicationRelationColumn.js","../../../../schemas/airspace/lib/ddl/application/ApplicationVersion.js","../../../../schemas/airspace/lib/generated/qApplication.js","../../../../schemas/airspace/lib/generated/baseDaos.js","../../../../schemas/airspace/lib/generated/baseDuos.js","../../../../schemas/airspace/lib/dao/DomainDao.js","../../../../schemas/airspace/lib/dao/ApplicationColumnDao.js","../../../../schemas/airspace/lib/dao/ApplicationDao.js","../../../../schemas/airspace/lib/dao/ApplicationEntityDao.js","../../../../schemas/airspace/lib/dao/ApplicationPropertyColumnDao.js","../../../../schemas/airspace/lib/dao/ApplicationPropertyDao.js","../../../../schemas/airspace/lib/dao/ApplicationReferenceDao.js","../../../../schemas/airspace/lib/dao/ApplicationRelationColumnDao.js","../../../../schemas/airspace/lib/dao/ApplicationRelationDao.js","../../../../schemas/airspace/lib/dao/ApplicationVersionDao.js","../../../../schemas/airspace/lib/duo/ApplicationVersionDuo.js","../../../../schemas/airspace/lib/tokens.js","../../../../libs/fuel-hydrant-system/lib/orderBy/EntityOrderByParser.js","../../../../libs/fuel-hydrant-system/lib/orderBy/AbstractEntityOrderByParser.js","../../../../libs/fuel-hydrant-system/lib/orderBy/ExactOrderByParser.js","../../../../libs/fuel-hydrant-system/lib/orderBy/MappedOrderByParser.js","../../../../libs/fuel-hydrant-system/lib/result/entity/GraphMtoMapper.js","../../../../libs/fuel-hydrant-system/lib/result/entity/GraphOtmMapper.js","../../../../libs/fuel-hydrant-system/lib/result/entity/IEntityResultParser.js","../../../../libs/fuel-hydrant-system/lib/result/entity/EntityGraphResultParser.js","../../../../libs/fuel-hydrant-system/lib/result/TreeResultParser.js","../../../../libs/fuel-hydrant-system/lib/result/entity/EntityTreeResultParser.js","../../../../libs/fuel-hydrant-system/lib/result/entity/ObjectResultParserFactory.js","../../../../libs/fuel-hydrant-system/lib/result/TreeQueryResultParser.js","../../../../libs/fuel-hydrant-system/lib/sql/core/SQLWhereBase.js","../../../../libs/fuel-hydrant-system/lib/sql/core/SQLNoJoinQuery.js","../../../../libs/fuel-hydrant-system/lib/sql/core/SQLDelete.js","../../../../libs/fuel-hydrant-system/lib/sql/core/SQLInsertValues.js","../../../../libs/fuel-hydrant-system/lib/sql/core/SQLQuery.js","../../../../libs/fuel-hydrant-system/lib/sql/core/SQLUpdate.js","../../../../libs/fuel-hydrant-system/lib/sql/SqlFunctionField.js","../../../../libs/fuel-hydrant-system/lib/sql/NonEntitySQLQuery.js","../../../../libs/fuel-hydrant-system/lib/sql/FieldSQLQuery.js","../../../../libs/fuel-hydrant-system/lib/sql/TreeSQLQuery.js","../../../../libs/fuel-hydrant-system/lib/sql/core/SubStatementSqlGenerator.js","../../../../libs/fuel-hydrant-system/lib/sql/EntitySQLQuery.js","../../../../libs/fuel-hydrant-system/lib/sql/SheetSQLQuery.js","../../../../libs/fuel-hydrant-system/lib/store/ActiveQueries.js","../../../../libs/fuel-hydrant-system/lib/store/IdGenerator.js","../../../../libs/fuel-hydrant-system/lib/store/RecordState.js","../../../../libs/fuel-hydrant-system/lib/store/SqlDriver.js","../../../../libs/fuel-hydrant-system/lib/validation/Validator.js","../../../../libs/fuel-hydrant-system/lib/tokens.js","../../../../libs/ground-transport/lib/adapters/DebugSynchronizationAdapter.js","../../../../libs/ground-transport/lib/adapters/SynchronizationAdapterLoader.js","../../../../libs/ground-transport/lib/synchronization/in/checker/SyncInActorChecker.js","../../../../libs/ground-transport/lib/synchronization/in/checker/SyncInApplicationChecker.js","../../../../libs/ground-transport/lib/synchronization/in/checker/SyncInApplicationVersionChecker.js","../../../../libs/ground-transport/lib/synchronization/in/checker/SyncInChecker.js","../../../../libs/ground-transport/lib/synchronization/in/checker/SyncInDataChecker.js","../../../../libs/ground-transport/lib/synchronization/in/checker/SyncInRepositoryChecker.js","../../../../libs/ground-transport/lib/synchronization/in/checker/SyncInTerminalChecker.js","../../../../libs/ground-transport/lib/synchronization/in/checker/SyncInUserChecker.js","../../../../schemas/moving-walkway/lib/ddl/conflict/SynchronizationConflict.js","../../../../schemas/moving-walkway/lib/ddl/conflict/SynchronizationConflictType.js","../../../../schemas/moving-walkway/lib/ddl/conflict/SynchronizationConflictValues.js","../../../../schemas/moving-walkway/lib/ddl/values/DataOrigin.js","../../../../schemas/moving-walkway/lib/ddl/values/ApplicationChangeStatus.js","../../../../schemas/moving-walkway/lib/ddl/RecordUpdateStage.js","../../../../schemas/moving-walkway/lib/generated/qApplication.js","../../../../schemas/moving-walkway/lib/generated/baseDaos.js","../../../../schemas/moving-walkway/lib/dao/conflict/SynchronizationConflictDao.js","../../../../schemas/moving-walkway/lib/dao/conflict/SynchronizationConflictValuesDao.js","../../../../schemas/moving-walkway/lib/dao/RecordUpdateStageDao.js","../../../../schemas/moving-walkway/lib/tokens.js","../../../../libs/ground-transport/lib/synchronization/in/Stage1SyncedInDataProcessor.js","../../../../libs/ground-transport/lib/synchronization/in/Stage2SyncedInDataProcessor.js","../../../../libs/ground-transport/lib/synchronization/in/SynchronizationInManager.js","../../../../libs/ground-transport/lib/synchronization/in/SyncInUtils.js","../../../../libs/ground-transport/lib/synchronization/in/TwoStageSyncedInDataProcessor.js","../../../../libs/ground-transport/lib/synchronization/out/converter/SyncOutDataSerializer.js","../../../../libs/ground-transport/lib/synchronization/out/SynchronizationOutManager.js","../../../../nonhub/client/lib/NonhubClient.js","../../../../nonhub/client/lib/tokens.js","../../../../libs/ground-transport/lib/tokens.js","../../../../engines/terminal/lib/tokens.js","../../../../engines/terminal/lib/index.js","../../../../engines/tower/lib/core/api/ApiRegistry.js","../../../../engines/tower/lib/core/api/ApiValidator.js","../../../../engines/tower/lib/core/api/LocalApiServer.js","../../../../engines/tower/lib/core/api/OperationDeserializer.js","../../../../engines/tower/lib/core/data/EntityCopier.js","../../../../engines/tower/lib/core/data/UpdateCacheManager.js","../../../../engines/tower/lib/core/EntityStateManager.js","../../../../engines/tower/lib/facade/DatabaseFacade.js","../../../../engines/tower/lib/facade/QueryFacade.js","../../../../engines/tower/lib/AirportDatabase.js","../../../../engines/tower/lib/tokens.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/util.js","../../../../common/temp/node_modules/.pnpm/@babel/runtime@7.16.7/node_modules/@babel/runtime/helpers/interopRequireDefault.js","../../../../common/temp/node_modules/.pnpm/@babel/runtime@7.16.7/node_modules/@babel/runtime/helpers/typeof.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/methods/native.js","../../../../common/temp/node_modules/.pnpm/oblivious-set@1.0.0/node_modules/oblivious-set/dist/es/index.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/options.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/methods/indexed-db.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/methods/localstorage.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/methods/simulate.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/method-chooser.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/broadcast-channel.js","../../../../common/temp/node_modules/.pnpm/unload@2.3.1/node_modules/unload/dist/es/browser.js","../../../../common/temp/node_modules/.pnpm/unload@2.3.1/node_modules/unload/dist/es/index.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/leader-election.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/index.js","../../../../common/temp/node_modules/.pnpm/broadcast-channel@4.9.0/node_modules/broadcast-channel/dist/lib/index.es5.js","../../../web-terminal/lib/WebMessageReceiver.js","../../../web-terminal/lib/DomainRetriever.js","../../../../generators/landing/lib/builder/SqlApplicationBuilder.js","../../../../generators/landing/lib/checker/ApplicationChecker.js","../../../../generators/landing/lib/locator/ApplicationLocator.js","../../../../generators/landing/lib/recorder/ApplicationComposer.js","../../../../generators/landing/lib/recorder/ApplicationRecorder.js","../../../../schemas/airport-code/lib/ddl/Sequence.js","../../../../schemas/airport-code/lib/ddl/SystemWideOperationId.js","../../../../schemas/airport-code/lib/ddl/TerminalRun.js","../../../../schemas/airport-code/lib/generated/qApplication.js","../../../../schemas/airport-code/lib/generated/baseDaos.js","../../../../schemas/airport-code/lib/dao/TerminalRunDao.js","../../../../schemas/airport-code/lib/dao/SequenceDao.js","../../../../schemas/airport-code/lib/tokens.js","../../../../generators/takeoff/lib/AirportDatabasePopulator.js","../../../../generators/takeoff/lib/DdlObjectLinker.js","../../../../generators/takeoff/lib/DdlObjectRetriever.js","../../../../generators/takeoff/lib/QueryEntityClassCreator.js","../../../../generators/takeoff/lib/QueryObjectInitializer.js","../../../../generators/takeoff/lib/tokens.js","../../../../generators/landing/lib/ApplicationInitializer.js","../../../../generators/landing/lib/tokens.js","../../../web-terminal/lib/WebApplicationInitializer.js","../../../web-terminal/lib/WebTransactionalReceiver.js","../../../web-terminal/lib/tokens.js","../../../../db/sequence/lib/SequenceGenerator.js","../../../../db/sequence/lib/tokens.js","../../../../db/sqlite/lib/SqLiteDriver.js","../../../../db/sqlite/lib/SqLiteQueryAdaptor.js","../../../../libs/fuel-hydrant-system/lib/adaptor/SQLQueryAdaptor.js","../../../../db/sqlite/lib/SqLiteApplicationBuilder.js","../../../../db/sqlite/lib/tokens.js","../../../../db/sqljs/lib/SqlJsTransaction.js","../../../../libs/fuel-hydrant-system/lib/store/SqlTransaction.js","../../../../db/sqljs/lib/SqlJsDriver.js","../../../../db/sqljs/lib/SqlJsQueryAdaptor.js","../../../../db/sqljs/lib/tokens.js","../../../web-terminal/lib/index.js","../../src/main.ts","../../src/framework.ts","../../../../db/sqljs/lib/index.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.42.4' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.page = factory());\n}(this, (function () { 'use strict';\n\nvar isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {String} str\n * @return {Array}\n */\nfunction parse (str) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var suffix = res[6];\n    var asterisk = res[7];\n\n    var repeat = suffix === '+' || suffix === '*';\n    var optional = suffix === '?' || suffix === '*';\n    var delimiter = prefix || '/';\n    var pattern = capture || group || (asterisk ? '.*' : '[^' + delimiter + ']+?');\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      pattern: escapeGroup(pattern)\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {String}   str\n * @return {Function}\n */\nfunction compile (str) {\n  return tokensToFunction(parse(str))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^' + tokens[i].pattern + '$');\n    }\n  }\n\n  return function (obj) {\n    var path = '';\n    var data = obj || {};\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received \"' + value + '\"')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encodeURIComponent(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = encodeURIComponent(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {String} str\n * @return {String}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  var tokens = parse(path);\n  var re = tokensToRegExp(tokens, options);\n\n  // Attach keys back to the regexp.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] !== 'string') {\n      keys.push(tokens[i]);\n    }\n  }\n\n  return attachKeys(re, keys)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {Array}  tokens\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction tokensToRegExp (tokens, options) {\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n  var lastToken = tokens[tokens.length - 1];\n  var endsWithSlash = typeof lastToken === 'string' && /\\/$/.test(lastToken);\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = token.pattern;\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (prefix) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)';\n  }\n\n  return new RegExp('^' + route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || [];\n\n  if (!isarray(keys)) {\n    options = keys;\n    keys = [];\n  } else if (!options) {\n    options = {};\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options)\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(path, keys, options)\n  }\n\n  return stringToRegexp(path, keys, options)\n}\n\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/**\n   * Module dependencies.\n   */\n\n  \n\n  /**\n   * Short-cuts for global-object checks\n   */\n\n  var hasDocument = ('undefined' !== typeof document);\n  var hasWindow = ('undefined' !== typeof window);\n  var hasHistory = ('undefined' !== typeof history);\n  var hasProcess = typeof process !== 'undefined';\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = hasDocument && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var isLocation = hasWindow && !!(window.history.location || window.location);\n\n  /**\n   * The page instance\n   * @api private\n   */\n  function Page() {\n    // public things\n    this.callbacks = [];\n    this.exits = [];\n    this.current = '';\n    this.len = 0;\n\n    // private things\n    this._decodeURLComponents = true;\n    this._base = '';\n    this._strict = false;\n    this._running = false;\n    this._hashbang = false;\n\n    // bound functions\n    this.clickHandler = this.clickHandler.bind(this);\n    this._onpopstate = this._onpopstate.bind(this);\n  }\n\n  /**\n   * Configure the instance of page. This can be called multiple times.\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.configure = function(options) {\n    var opts = options || {};\n\n    this._window = opts.window || (hasWindow && window);\n    this._decodeURLComponents = opts.decodeURLComponents !== false;\n    this._popstate = opts.popstate !== false && hasWindow;\n    this._click = opts.click !== false && hasDocument;\n    this._hashbang = !!opts.hashbang;\n\n    var _window = this._window;\n    if(this._popstate) {\n      _window.addEventListener('popstate', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('popstate', this._onpopstate, false);\n    }\n\n    if (this._click) {\n      _window.document.addEventListener(clickEvent, this.clickHandler, false);\n    } else if(hasDocument) {\n      _window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    }\n\n    if(this._hashbang && hasWindow && !hasHistory) {\n      _window.addEventListener('hashchange', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('hashchange', this._onpopstate, false);\n    }\n  };\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {string} path\n   * @api public\n   */\n\n  Page.prototype.base = function(path) {\n    if (0 === arguments.length) return this._base;\n    this._base = path;\n  };\n\n  /**\n   * Gets the `base`, which depends on whether we are using History or\n   * hashbang routing.\n\n   * @api private\n   */\n  Page.prototype._getBase = function() {\n    var base = this._base;\n    if(!!base) return base;\n    var loc = hasWindow && this._window && this._window.location;\n\n    if(hasWindow && this._hashbang && loc && loc.protocol === 'file:') {\n      base = loc.pathname;\n    }\n\n    return base;\n  };\n\n  /**\n   * Get or set strict path matching to `enable`\n   *\n   * @param {boolean} enable\n   * @api public\n   */\n\n  Page.prototype.strict = function(enable) {\n    if (0 === arguments.length) return this._strict;\n    this._strict = enable;\n  };\n\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.start = function(options) {\n    var opts = options || {};\n    this.configure(opts);\n\n    if (false === opts.dispatch) return;\n    this._running = true;\n\n    var url;\n    if(isLocation) {\n      var window = this._window;\n      var loc = window.location;\n\n      if(this._hashbang && ~loc.hash.indexOf('#!')) {\n        url = loc.hash.substr(2) + loc.search;\n      } else if (this._hashbang) {\n        url = loc.search + loc.hash;\n      } else {\n        url = loc.pathname + loc.search + loc.hash;\n      }\n    }\n\n    this.replace(url, null, true, opts.dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  Page.prototype.stop = function() {\n    if (!this._running) return;\n    this.current = '';\n    this.len = 0;\n    this._running = false;\n\n    var window = this._window;\n    this._click && window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    hasWindow && window.removeEventListener('popstate', this._onpopstate, false);\n    hasWindow && window.removeEventListener('hashchange', this._onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} dispatch\n   * @param {boolean=} push\n   * @return {!Context}\n   * @api public\n   */\n\n  Page.prototype.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {string} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object=} state\n   * @api public\n   */\n\n  Page.prototype.back = function(path, state) {\n    var page = this;\n    if (this.len > 0) {\n      var window = this._window;\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      hasHistory && window.history.back();\n      this.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    } else {\n      setTimeout(function() {\n        page.show(page._getBase(), state);\n      });\n    }\n  };\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {string} from - if param 'to' is undefined redirects to 'from'\n   * @param {string=} to\n   * @api public\n   */\n  Page.prototype.redirect = function(from, to) {\n    var inst = this;\n\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page.call(this, from, function(e) {\n        setTimeout(function() {\n          inst.replace(/** @type {!string} */ (to));\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        inst.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} init\n   * @param {boolean=} dispatch\n   * @return {!Context}\n   * @api public\n   */\n\n\n  Page.prototype.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n\n  Page.prototype.dispatch = function(ctx, prev) {\n    var i = 0, j = 0, page = this;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled.call(page, ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  Page.prototype.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return this.exit('*', path);\n    }\n\n    var route = new Route(path, null, this);\n    for (var i = 1; i < arguments.length; ++i) {\n      this.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Handle \"click\" events.\n   */\n\n  /* jshint +W054 */\n  Page.prototype.clickHandler = function(e) {\n    if (1 !== this._which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n    // ensure link\n    // use shadow dom when available if not, fall back to composedPath()\n    // for browsers that only have shady\n    var el = e.target;\n    var eventPath = e.path || (e.composedPath ? e.composedPath() : null);\n\n    if(eventPath) {\n      for (var i = 0; i < eventPath.length; i++) {\n        if (!eventPath[i].nodeName) continue;\n        if (eventPath[i].nodeName.toUpperCase() !== 'A') continue;\n        if (!eventPath[i].href) continue;\n\n        el = eventPath[i];\n        break;\n      }\n    }\n\n    // continue ensure link\n    // el.nodeName for svg links are 'a' instead of 'A'\n    while (el && 'A' !== el.nodeName.toUpperCase()) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName.toUpperCase()) return;\n\n    // check if link is inside an svg\n    // in this case, both href and target are always inside an object\n    var svg = (typeof el.href === 'object') && el.href.constructor.name === 'SVGAnimatedString';\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if(!this._hashbang && this._samePath(el) && (el.hash || '#' === link)) return;\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    // svg target is an object and its desired value is in .baseVal property\n    if (svg ? el.target.baseVal : el.target) return;\n\n    // x-origin\n    // note: svg links that are not relative don't call click events (and skip page.js)\n    // consequently, all svg links tested inside page.js are relative and in the same origin\n    if (!svg && !this.sameOrigin(el.href)) return;\n\n    // rebuild path\n    // There aren't .pathname and .search properties in svg links, so we use href\n    // Also, svg href is an object and its desired value is in .baseVal property\n    var path = svg ? el.href.baseVal : (el.pathname + el.search + (el.hash || ''));\n\n    path = path[0] !== '/' ? '/' + path : path;\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (hasProcess && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n    var pageBase = this._getBase();\n\n    if (path.indexOf(pageBase) === 0) {\n      path = path.substr(pageBase.length);\n    }\n\n    if (this._hashbang) path = path.replace('#!', '');\n\n    if (pageBase && orig === path && (!isLocation || this._window.location.protocol !== 'file:')) {\n      return;\n    }\n\n    e.preventDefault();\n    this.show(orig);\n  };\n\n  /**\n   * Handle \"populate\" events.\n   * @api private\n   */\n\n  Page.prototype._onpopstate = (function () {\n    var loaded = false;\n    if ( ! hasWindow ) {\n      return function () {};\n    }\n    if (hasDocument && document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      var page = this;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else if (isLocation) {\n        var loc = page._window.location;\n        page.show(loc.pathname + loc.search + loc.hash, undefined, undefined, false);\n      }\n    };\n  })();\n\n  /**\n   * Event button.\n   */\n  Page.prototype._which = function(e) {\n    e = e || (hasWindow && this._window.event);\n    return null == e.which ? e.button : e.which;\n  };\n\n  /**\n   * Convert to a URL object\n   * @api private\n   */\n  Page.prototype._toURL = function(href) {\n    var window = this._window;\n    if(typeof URL === 'function' && isLocation) {\n      return new URL(href, window.location.toString());\n    } else if (hasDocument) {\n      var anc = window.document.createElement('a');\n      anc.href = href;\n      return anc;\n    }\n  };\n\n  /**\n   * Check if `href` is the same origin.\n   * @param {string} href\n   * @api public\n   */\n  Page.prototype.sameOrigin = function(href) {\n    if(!href || !isLocation) return false;\n\n    var url = this._toURL(href);\n    var window = this._window;\n\n    var loc = window.location;\n\n    /*\n       When the port is the default http port 80 for http, or 443 for\n       https, internet explorer 11 returns an empty string for loc.port,\n       so we need to compare loc.port with an empty string if url.port\n       is the default port 80 or 443.\n       Also the comparition with `port` is changed from `===` to `==` because\n       `port` can be a string sometimes. This only applies to ie11.\n    */\n    return loc.protocol === url.protocol &&\n      loc.hostname === url.hostname &&\n      (loc.port === url.port || loc.port === '' && (url.port == 80 || url.port == 443)); // jshint ignore:line\n  };\n\n  /**\n   * @api private\n   */\n  Page.prototype._samePath = function(url) {\n    if(!isLocation) return false;\n    var window = this._window;\n    var loc = window.location;\n    return url.pathname === loc.pathname &&\n      url.search === loc.search;\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {string} val - URL component to decode\n   * @api private\n   */\n  Page.prototype._decodeURLEncodedURIComponent = function(val) {\n    if (typeof val !== 'string') { return val; }\n    return this._decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  };\n\n  /**\n   * Create a new `page` instance and function\n   */\n  function createPage() {\n    var pageInstance = new Page();\n\n    function pageFn(/* args */) {\n      return page.apply(pageInstance, arguments);\n    }\n\n    // Copy all of the things over. In 2.0 maybe we use setPrototypeOf\n    pageFn.callbacks = pageInstance.callbacks;\n    pageFn.exits = pageInstance.exits;\n    pageFn.base = pageInstance.base.bind(pageInstance);\n    pageFn.strict = pageInstance.strict.bind(pageInstance);\n    pageFn.start = pageInstance.start.bind(pageInstance);\n    pageFn.stop = pageInstance.stop.bind(pageInstance);\n    pageFn.show = pageInstance.show.bind(pageInstance);\n    pageFn.back = pageInstance.back.bind(pageInstance);\n    pageFn.redirect = pageInstance.redirect.bind(pageInstance);\n    pageFn.replace = pageInstance.replace.bind(pageInstance);\n    pageFn.dispatch = pageInstance.dispatch.bind(pageInstance);\n    pageFn.exit = pageInstance.exit.bind(pageInstance);\n    pageFn.configure = pageInstance.configure.bind(pageInstance);\n    pageFn.sameOrigin = pageInstance.sameOrigin.bind(pageInstance);\n    pageFn.clickHandler = pageInstance.clickHandler.bind(pageInstance);\n\n    pageFn.create = createPage;\n\n    Object.defineProperty(pageFn, 'len', {\n      get: function(){\n        return pageInstance.len;\n      },\n      set: function(val) {\n        pageInstance.len = val;\n      }\n    });\n\n    Object.defineProperty(pageFn, 'current', {\n      get: function(){\n        return pageInstance.current;\n      },\n      set: function(val) {\n        pageInstance.current = val;\n      }\n    });\n\n    // In 2.0 these can be named exports\n    pageFn.Context = Context;\n    pageFn.Route = Route;\n\n    return pageFn;\n  }\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {string|!Function|!Object} path\n   * @param {Function=} fn\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page.call(this, '*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(/** @type {string} */ (path), null, this);\n      for (var i = 1; i < arguments.length; ++i) {\n        this.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      this['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      this.start(path);\n    }\n  }\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n    var page = this;\n    var window = page._window;\n\n    if (page._hashbang) {\n      current = isLocation && this._getBase() + window.location.hash.replace('#!', '');\n    } else {\n      current = isLocation && window.location.pathname + window.location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    isLocation && (window.location.href = ctx.canonicalPath);\n  }\n\n  /**\n   * Escapes RegExp characters in the given string.\n   *\n   * @param {string} s\n   * @api private\n   */\n  function escapeRegExp(s) {\n    return s.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1');\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} state\n   * @api public\n   */\n\n  function Context(path, state, pageInstance) {\n    var _page = this.page = pageInstance || page;\n    var window = _page._window;\n    var hashbang = _page._hashbang;\n\n    var pageBase = _page._getBase();\n    if ('/' === path[0] && 0 !== path.indexOf(pageBase)) path = pageBase + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    var re = new RegExp('^' + escapeRegExp(pageBase));\n    this.path = path.replace(re, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = (hasDocument && window.document.title);\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? _page._decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = _page._decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = this.pathname = parts[0];\n      this.hash = _page._decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    var page = this.page;\n    var window = page._window;\n    var hashbang = page._hashbang;\n\n    page.len++;\n    if (hasHistory) {\n        window.history.pushState(this.state, this.title,\n          hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    var page = this.page;\n    if (hasHistory) {\n        page._window.history.replaceState(this.state, this.title,\n          page._hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} options\n   * @api private\n   */\n\n  function Route(path, options, page) {\n    var _page = this.page = page || globalPage;\n    var opts = options || {};\n    opts.strict = opts.strict || _page._strict;\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathToRegexp_1(this.path, this.keys = [], opts);\n  }\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) {\n        ctx.routePath = self.path;\n        return fn(ctx, next);\n      }\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {string} path\n   * @param {Object} params\n   * @return {boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    delete params[0];\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = this.page._decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Module exports.\n   */\n\n  var globalPage = createPage();\n  var page_js = globalPage;\n  var default_1 = globalPage;\n\npage_js.default = default_1;\n\nreturn page_js;\n\n})));\n","<style type=\"text/css\">\r\n</style>\r\n\r\n<script lang=\"ts\">\r\nimport { onMount } from 'svelte';\r\nimport page from 'page';\r\n\r\npage('/:uiPath', (context) => {\r\n  console.log(context);\r\n});\r\npage();\r\n\r\nonMount(async () => {});\r\n</script>\r\n","export class DependencyInjectionToken {\n    constructor(application, descriptor) {\n        this.application = application;\n        this.descriptor = descriptor;\n    }\n    get dependencyConfiguration() {\n        return this.getInheritedDependencyConfiguration(this.descriptor.class);\n    }\n    getPath() {\n        return this.application.domain.name + ':' + this.application.name + ':'\n            + this.descriptor.token;\n    }\n    setDependencies(dependencyConfiguration) {\n        if (this.descriptor.class.dependencyConfiguration) {\n            this.descriptor.class.dependencyConfiguration = {\n                ...this.descriptor.class.dependencyConfiguration,\n                ...dependencyConfiguration\n            };\n        }\n        else {\n            this.descriptor.class.dependencyConfiguration = dependencyConfiguration;\n        }\n    }\n    getInheritedDependencyConfiguration(aClass) {\n        const parentClass = Object.getPrototypeOf(aClass);\n        let returnedDependencyConfiguration = {};\n        if (parentClass) {\n            returnedDependencyConfiguration = this.getInheritedDependencyConfiguration(parentClass);\n        }\n        const dependencyConfiguration = aClass.dependencyConfiguration;\n        if (dependencyConfiguration) {\n            returnedDependencyConfiguration = {\n                ...returnedDependencyConfiguration,\n                ...dependencyConfiguration\n            };\n        }\n        return returnedDependencyConfiguration;\n    }\n}\n//# sourceMappingURL=Token.js.map","import { AIRPORT_DOMAIN } from './InjectionDomain';\nimport { DependencyInjectionToken } from './Token';\nexport class InjectionApplication {\n    constructor(name, domain) {\n        this.name = name;\n        this.domain = domain;\n        this.tokenMap = new Map();\n        this.autopilot = true;\n    }\n    token(descriptor) {\n        const existingToken = this.tokenMap.get(descriptor.token);\n        if (existingToken) {\n            throw new Error(`Token with name '${name}' has already been created`);\n        }\n        const diToken = new DependencyInjectionToken(this, descriptor);\n        this.tokenMap.set(descriptor.token, diToken);\n        return diToken;\n    }\n}\nexport function lib(libraryName) {\n    return AIRPORT_DOMAIN.app(libraryName);\n}\n//# sourceMappingURL=InjectionApplication.js.map","import { InjectionApplication } from './InjectionApplication';\nexport class InjectionDomain {\n    constructor(name) {\n        this.name = name;\n        this.applicationMap = {};\n    }\n    app(applicationName) {\n        if (this.applicationMap[applicationName]) {\n            throw new Error(`\r\n\t\t\tApplication already defined.\r\n\t\t\tDomain:      ${this.name}\r\n\t\t\tApplication: ${applicationName}\r\n\t\t\t`);\n        }\n        const application = new InjectionApplication(applicationName, this);\n        this.applicationMap[applicationName] = application;\n        return application;\n    }\n    getApp(applicationName) {\n        return this.applicationMap[applicationName];\n    }\n}\nconst DOMAIN_MAP = {};\nexport function domain(domainName) {\n    if (DOMAIN_MAP[domainName]) {\n        return DOMAIN_MAP[domainName];\n    }\n    const domain = new InjectionDomain(domainName);\n    DOMAIN_MAP[domainName] = domain;\n    return domain;\n}\nexport const AIRPORT_DOMAIN = domain('turbase.app');\n//# sourceMappingURL=InjectionDomain.js.map","export var ContextType;\n(function (ContextType) {\n    ContextType[\"DB\"] = \"DB\";\n    ContextType[\"UI\"] = \"UI\";\n})(ContextType || (ContextType = {}));\nexport class Context {\n    constructor(id, type) {\n        this.id = id;\n        this.type = type;\n    }\n}\n//# sourceMappingURL=Context.js.map","import { lib } from \"./dependencyInjection/InjectionApplication\";\nconst directionIndicator = lib('di');\ndirectionIndicator.autopilot = false;\nexport const AUTOPILOT_API_LOADER = directionIndicator.token({\n    class: null,\n    interface: 'IAutopilotApiLoader',\n    token: 'AUTOPILOT_API_LOADER'\n});\n//# sourceMappingURL=tokens.js.map","import { AUTOPILOT_API_LOADER } from \"../tokens\";\nimport { Container } from \"./Container\";\nimport { domain } from \"./InjectionDomain\";\nexport class ChildContainer extends Container {\n    constructor(rootContainer, context) {\n        super();\n        this.rootContainer = rootContainer;\n        this.context = context;\n        // TODO: implement continuous upgrading\n        // classes: any[]  = []\n        // numPendingInits = 0\n        // theObjects: any[]  = []\n        this.objectMap = new Map();\n    }\n    doEventuallyGet(tokens, successCallback, errorCallback) {\n        let { firstDiNotSetClass, firstMissingClassToken, objects } = this.doGetCore(tokens);\n        if (firstMissingClassToken || firstDiNotSetClass) {\n            setTimeout(() => {\n                this.doEventuallyGet(tokens, successCallback, errorCallback);\n            }, 100);\n        }\n        else {\n            if (objects.length > 1) {\n                successCallback(objects);\n            }\n            else {\n                successCallback(objects[0]);\n            }\n        }\n    }\n    doGet(tokens, successCallback, errorCallback) {\n        const { firstDiNotSetClass, firstMissingClassToken, objects } = this.doGetCore(tokens);\n        if (firstDiNotSetClass) {\n            console.log(`Dependency Injection is not ready for token ${firstMissingClassToken.getPath()}\r\n\t\t\t, class: ${firstDiNotSetClass.name}. Delaying injection by 100ms`);\n            setTimeout(() => {\n                this.doGet(tokens, successCallback, errorCallback);\n            }, 100);\n            return;\n        }\n        else if (objects.filter(object => object && !object.__initialized__).length) {\n            const notInitializedObjectIndexes = objects.map((object, index) => object.__initialized__ ? -1 : index)\n                .filter(index => index !== -1);\n            const objectPaths = [];\n            for (const index of notInitializedObjectIndexes) {\n                objectPaths.push(tokens[index].getPath());\n            }\n            console.log(`Dependency Injection is not ready for tokens:\r\n\t\t\t\t ${objectPaths.join('\\n')}\r\n\t\t\t, these classes are not yet initialized, delaying injection by 100ms`);\n            setTimeout(() => {\n                this.doGet(tokens, successCallback, errorCallback);\n            }, 100);\n            return;\n        }\n        if (firstMissingClassToken) {\n            const message = 'Dependency Injection could not find class for token: '\n                + firstMissingClassToken.getPath();\n            console.log(message);\n            errorCallback(message);\n        }\n        else {\n            if (objects.length > 1) {\n                successCallback(objects);\n            }\n            else {\n                successCallback(objects[0]);\n            }\n        }\n    }\n    doGetCore(tokens) {\n        let firstMissingClassToken;\n        let firstDiNotSetClass;\n        const objects = tokens.map(token => {\n            if (firstMissingClassToken || firstDiNotSetClass) {\n                return;\n            }\n            let object = this.objectMap.get(token.descriptor.token);\n            if (!object) {\n                if (!this.rootContainer.isFramework && token.application.autopilot) {\n                    object = this.getSync(AUTOPILOT_API_LOADER)\n                        .loadApiAutopilot(token);\n                }\n                else {\n                    // NOTE: object pooling is not supported, see RootContainer for why\n                    // const rootObjectPool = this.rootContainer.objectPoolMap.get(token.descriptor.token);\n                    // if (rootObjectPool && rootObjectPool.length) {\n                    //     object = rootObjectPool.pop()\n                    // } else {\n                    const aClass = token.descriptor.class;\n                    if (!aClass) {\n                        firstMissingClassToken = token;\n                        return;\n                    }\n                    if (aClass.diSet && !aClass.diSet()) {\n                        firstMissingClassToken = token;\n                        firstDiNotSetClass = aClass;\n                        return;\n                    }\n                    object = new aClass();\n                    this.setDependencyGetters(object, token);\n                    // }\n                }\n                object.__container__ = this;\n                this.objectMap.set(token.descriptor.token, object);\n                if (!token.application.autopilot && object.init) {\n                    const result = object.init();\n                    if (result instanceof Promise) {\n                        result.then(_ => {\n                            object.__initialized__ = true;\n                            console.log(`${token.getPath()} initialized.`);\n                        });\n                    }\n                    else {\n                        object.__initialized__ = true;\n                        console.log(`${token.getPath()} initialized.`);\n                    }\n                }\n                else {\n                    object.__initialized__ = true;\n                }\n            }\n            return object;\n        });\n        return {\n            firstDiNotSetClass,\n            firstMissingClassToken,\n            objects\n        };\n    }\n    setDependencyGetters(object, token) {\n        if (!token.dependencyConfiguration) {\n            return;\n        }\n        const dependencyConfiguration = token.dependencyConfiguration;\n        for (let propertyName in dependencyConfiguration) {\n            delete object[propertyName];\n            const dependencyToken = dependencyConfiguration[propertyName];\n            Object.defineProperty(object, propertyName, {\n                get() {\n                    this.__container__;\n                    return this.__container__.getSync(dependencyToken);\n                }\n            });\n            object['get' + propertyName + 'Async'] = async function () {\n                await this.get(dependencyToken);\n            };\n        }\n    }\n    async getByNames(domainName, applicationName, tokenName) {\n        const injectionDomain = domain(domainName);\n        if (!injectionDomain) {\n            throw new Error(`Could nof find\r\n\tDomain:\r\n\t\t${domainName}\r\n\t\t`);\n        }\n        const application = domain(domainName).getApp(applicationName);\n        if (!application) {\n            throw new Error(`Could not find\r\n\tDomain:\r\n\t\t${domainName}\r\n\tApplication:\r\n\t\t${applicationName}\r\n\t\t`);\n        }\n        const token = application.tokenMap.get(tokenName);\n        if (!token) {\n            throw new Error(`Could not find token: ${tokenName}\r\n\tin Domain:\r\n\t\t${domainName}\r\n \tApplication:\r\n\t\t\t${applicationName}\r\n\t\t`);\n        }\n        return await this.get(token);\n    }\n    get(...tokens) {\n        return new Promise((resolve, reject) => {\n            this.doGet(tokens, resolve, reject);\n        });\n    }\n    eventuallyGet(...tokens) {\n        return new Promise((resolve, reject) => {\n            this.doEventuallyGet(tokens, resolve, reject);\n        });\n    }\n    getSync(...tokens) {\n        const { firstDiNotSetClass, firstMissingClassToken, objects } = this.doGetCore(tokens);\n        if (firstMissingClassToken) {\n            throw new Error('Dependency Injection could not find class for token: '\n                + firstMissingClassToken.getPath());\n        }\n        else if (firstDiNotSetClass) {\n            throw new Error('Dependency Injection is not ready for class: '\n                + firstDiNotSetClass.name);\n        }\n        if (objects.length > 1) {\n            return objects;\n        }\n        else {\n            return objects[0];\n        }\n    }\n}\n//# sourceMappingURL=ChildContainer.js.map","import { domain } from './InjectionDomain';\nimport { lib } from './InjectionApplication';\nimport { RootContainer } from './RootContainer';\nimport { InversionOfControl } from './InversionOfControl';\nexport class Container {\n    set(token, aClass) {\n        token.descriptor.class = aClass;\n    }\n}\nexport const DEPENDENCY_INJECTION = new RootContainer();\nif (typeof window !== 'undefined') {\n    window.DEPENDENCY_INJECTION = DEPENDENCY_INJECTION;\n    window.lib = lib;\n    window.domain = domain;\n}\nexport const IOC = new InversionOfControl();\n//# sourceMappingURL=Container.js.map","import { Context, ContextType } from \"../Context\";\nimport { ChildContainer } from \"./ChildContainer\";\nimport { Container } from \"./Container\";\nexport class RootContainer extends Container {\n    constructor() {\n        super(...arguments);\n        this.isFramework = false;\n        this.uiContainers = new Set();\n    }\n    // NOTE: Object pooling is not supported because of possible callbacks\n    // that are out of synchronous flow of a transaction.  Thus objects are\n    // retained in the container even after the container is removed\n    // in order to allow for transactionId reference\n    // objectPoolMap: Map<string, any[]> = new Map();\n    db(id) {\n        let dbContainer = this.dbContainerMap.get(id);\n        if (!dbContainer) {\n            dbContainer = new ChildContainer(this, new Context(id, ContextType.DB));\n            this.dbContainerMap.set(id, dbContainer);\n        }\n        return dbContainer;\n    }\n    remove(container) {\n        if (!container) {\n            return;\n        }\n        const dbContainer = this.dbContainerMap.get(container.context.id);\n        if (dbContainer) {\n            this.dbContainerMap.delete(container.context.id);\n            // NOTE: objectPooling is not supported, see above\n            // const objectTokens = dbContainer.objectMap.keys()\n            // for (const objectToken of objectTokens) {\n            // const object = dbContainer.objectMap.get(objectToken)\n            // let objectPool = this.objectPoolMap.get(objectToken)\n            // if (!objectPool) {\n            //     objectPool = []\n            //     this.objectPoolMap.set(objectToken, objectPool)\n            // }\n            // objectPool.push(object)\n            // }\n        }\n        else {\n            this.uiContainers.delete(container);\n        }\n    }\n    ui(componentName) {\n        const context = new Context(componentName, ContextType.UI);\n        const childContainer = new ChildContainer(this, context);\n        this.uiContainers.add(childContainer);\n        return childContainer;\n    }\n}\n//# sourceMappingURL=RootContainer.js.map","import { DEPENDENCY_INJECTION } from \"./Container\";\nexport class InversionOfControl {\n    async get(...tokens) {\n        return await DEPENDENCY_INJECTION.db().get(...tokens);\n    }\n    async eventuallyGet(...tokens) {\n        return await DEPENDENCY_INJECTION.db().eventuallyGet(...tokens);\n    }\n    getSync(...tokens) {\n        return DEPENDENCY_INJECTION.db().getSync(...tokens);\n    }\n}\n//# sourceMappingURL=InversionOfControl.js.map","import { Container } from './Container';\nexport function container(injectable) {\n    const iocContainer = injectable.__container__;\n    if (!iocContainer) {\n        throw new Error('\"container\" is not set on injectable object.');\n    }\n    if (!(iocContainer instanceof Container)) {\n        throw new Error('\"container\" property of injectable is not an' +\n            'instance of @airport/direction-indicator Container');\n    }\n    return iocContainer;\n}\n//# sourceMappingURL=Injectable.js.map","export var UpdateState;\n(function (UpdateState) {\n    UpdateState[\"GO_ONLINE\"] = \"GO_ONLINE\";\n    UpdateState[\"REMOTE\"] = \"REMOTE\";\n    UpdateState[\"LOCAL\"] = \"LOCAL\";\n})(UpdateState || (UpdateState = {}));\n//# sourceMappingURL=UpdateState.js.map","/**\n * Created by Papa on 4/16/2017.\n */\nexport var RepositoryEntityType;\n(function (RepositoryEntityType) {\n    RepositoryEntityType[\"NOT_REPOSITORY_ENTITY\"] = \"NOT_REPOSITORY_ENTITY\";\n    RepositoryEntityType[\"REPOSITORY_ENTITY\"] = \"REPOSITORY_ENTITY\";\n})(RepositoryEntityType || (RepositoryEntityType = {}));\nexport const REPOSITORY_ID = 'REPOSITORY_ID';\nexport const REPOSITORY_FIELD = 'repository';\n//# sourceMappingURL=RepositoryEntityType.js.map","import { ColumnMap } from \"./ColumnMap\";\n/**\n * Created by Papa on 9/10/2016.\n */\nexport const ALL_TABLE_COLUMNS = 'A';\nexport class TableMap {\n    constructor(applicationVersionId, tableMap = {}) {\n        this.applicationVersionId = applicationVersionId;\n        this.tableMap = tableMap;\n    }\n    ensure(tableIndex, allColumns = false, ColumnMapConstructor = ColumnMap) {\n        let tableColumnMap = this.tableMap[tableIndex];\n        if (!tableColumnMap) {\n            tableColumnMap = new ColumnMapConstructor(tableIndex, allColumns);\n            this.tableMap[tableIndex] = tableColumnMap;\n        }\n        return tableColumnMap;\n    }\n    existsByStructure(tableIndex, columnIndex) {\n        let tableColumnMap = this.tableMap[tableIndex];\n        if (!tableColumnMap) {\n            return false;\n        }\n        return !!tableColumnMap.columnMap[columnIndex];\n    }\n}\n//# sourceMappingURL=TableMap.js.map","import { ALL_TABLE_COLUMNS } from \"./TableMap\";\nexport class ColumnMap {\n    constructor(tableIndex, allColumns = false) {\n        this.tableIndex = tableIndex;\n        this.columnMap = {};\n        if (allColumns) {\n            this.columnMap[ALL_TABLE_COLUMNS] = true;\n        }\n    }\n    ensure(columnIndex) {\n        this.columnMap[columnIndex] = true;\n    }\n}\n//# sourceMappingURL=ColumnMap.js.map","export function getFullApplicationName({ domain, name, }) {\n    if (domain.name) {\n        domain = domain.name;\n    }\n    return getFullApplicationNameFromDomainAndName(domain, name);\n}\nexport function getFullApplicationNameFromDomainAndName(domainName, applicationName) {\n    if (domainName.indexOf('___') > -1) {\n        throw new Error('Domain Name cannot contain \"___\" (3 consecutive underscores) in it.');\n    }\n    if (domainName.endsWith('.')\n        || domainName.endsWith('-')\n        || domainName.endsWith(':')\n        || domainName.endsWith('__')) {\n        throw new Error('Domain Name cannot end with \".\", \"-\", \":\" or \"__\"');\n    }\n    const domainPrefix = domainName\n        .replace(/\\./g, '_dot_')\n        .replace(/-/g, '_dash_')\n        .replace(/:/g, '_colon_');\n    if (domainPrefix.indexOf('___') > -1) {\n        throw new Error('Domain Name cannot have with \".\", \"-\", \":\", or \"_\" right next to each other.');\n    }\n    if (applicationName.indexOf('_') > -1) {\n        throw new Error('Application Name cannot contain \"_\" in it.');\n    }\n    if (applicationName.indexOf('@') !== applicationName.lastIndexOf('@')) {\n        throw new Error('Application Name cannot have more than one \"@\" in it.');\n    }\n    if (applicationName.indexOf('@') > 0) {\n        throw new Error('Application Name cannot contain \"@\" after the first character in it.');\n    }\n    if (applicationName.indexOf('/') !== applicationName.lastIndexOf('/')) {\n        throw new Error('Application Name cannot have more than one \"/\" in it.');\n    }\n    const applicationPrefix = applicationName\n        .replace(/@/g, '_at_')\n        .replace(/\\//g, '_slash_')\n        .replace(/-/g, '_dash_');\n    if (applicationPrefix.endsWith('_')) {\n        throw new Error('Application Name cannot end with \"@\", \"/\" or \".\"');\n    }\n    if (applicationPrefix.indexOf('___') > -1) {\n        throw new Error('Application Name cannot have with \"@\", \"/\", \".\" or \"_\" right next to each other.');\n    }\n    return `${domainPrefix}___${applicationPrefix}`;\n}\nexport function getSequenceName(prefixedTableName, columnName) {\n    return `${prefixedTableName}_${columnName}__SEQUENCE`;\n}\n//# sourceMappingURL=DbApplicationUtils.js.map","import { TableMap } from \"./TableMap\";\nexport class ApplicationMap {\n    constructor(applicationMap = {}) {\n        this.applicationMap = applicationMap;\n    }\n    ensureEntity(entity, allColumns = false, TableMapConstructor = TableMap) {\n        return this.ensure(entity.applicationVersion.id, entity.index, allColumns, TableMapConstructor);\n    }\n    ensure(applicationIndex, tableIndex, allColumns = false, TableMapConstructor = TableMap) {\n        let tableMap = this.applicationMap[applicationIndex];\n        if (!tableMap) {\n            tableMap = new TableMapConstructor(applicationIndex);\n            this.applicationMap[applicationIndex] = tableMap;\n        }\n        return tableMap.ensure(tableIndex, allColumns);\n    }\n    existsByStructure(applicationIndex, tableIndex, columnIndex) {\n        let tableMap = this.applicationMap[applicationIndex];\n        if (!tableMap) {\n            return false;\n        }\n        return tableMap.existsByStructure(tableIndex, columnIndex);\n    }\n}\n//# sourceMappingURL=ApplicationMap.js.map","import { ColumnMap } from \"../query/ColumnMap\";\nexport class SyncColumnMap extends ColumnMap {\n    constructor(tableIndex, allColumns = false) {\n        super(tableIndex, allColumns);\n    }\n}\n//# sourceMappingURL=SyncColumnMap.js.map","import { ALL_TABLE_COLUMNS, TableMap } from \"../query/TableMap\";\nimport { SyncColumnMap } from \"./SyncColumnMap\";\n/**\n * Created by Papa on 10/7/2016.\n */\nexport class SyncTableMap extends TableMap {\n    constructor(applicationIndex, tableMap) {\n        super(applicationIndex, tableMap);\n    }\n    ensureEntity(tableIndex, allColumns = false) {\n        return super.ensure(tableIndex, allColumns, SyncColumnMap);\n    }\n    intersects(columnMap) {\n        for (let tableIndex in this.tableMap) {\n            if (columnMap.tableMap[tableIndex]) {\n                let tableColumnMap = this.tableMap[tableIndex];\n                let otherTableColumnMap = columnMap.tableMap[tableIndex];\n                if (tableColumnMap[ALL_TABLE_COLUMNS] || tableColumnMap[ALL_TABLE_COLUMNS]) {\n                    return true;\n                }\n                for (let columnIndex in tableColumnMap.columnMap) {\n                    if (otherTableColumnMap.columnMap[columnIndex]) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n}\n//# sourceMappingURL=SyncTableMap.js.map","import { ApplicationMap } from \"../query/ApplicationMap\";\nimport { SyncTableMap } from \"./SyncTableMap\";\nexport class SyncApplicationMap extends ApplicationMap {\n    constructor(applicationMap) {\n        super(applicationMap);\n    }\n    ensureEntity(entity, allColumns = false) {\n        return super.ensureEntity(entity, allColumns, SyncTableMap);\n    }\n    intersects(applicationMap) {\n        for (const applicationIndex in this.applicationMap) {\n            if (applicationMap.applicationMap[applicationIndex]) {\n                const syncTableMap = new SyncTableMap(parseInt(applicationIndex), this.applicationMap[applicationIndex].tableMap);\n                if (syncTableMap.intersects(applicationMap.applicationMap[applicationIndex])) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n}\n//# sourceMappingURL=SyncApplicationMap.js.map","export var BlockSyncStatus;\n(function (BlockSyncStatus) {\n    // Sync request has been sent but no reply has come yet\n    BlockSyncStatus[\"SYNCHRONIZING\"] = \"SYNCHRONIZING\";\n    // Sync has been acknowledged by the AGT\n    BlockSyncStatus[\"SYNCHRONIZED\"] = \"SYNCHRONIZED\";\n    // Sync has not been acked by AGT so, requesting sync status from AGT\n    BlockSyncStatus[\"REQUESTING_SYNC_STATUS\"] = \"REQUESTING_SYNC_STATUS\";\n    /*\n       Do not re-sync until AGT starts responds with a request for more data.\n       NOTE: no need of a separate status, state is maintained on SharingNode level.\n     */\n    // RESYNC_SUSPENDED = 'RESYNC_SUSPENDED',\n    // AGT requested re-sync for this block, send it again\n    BlockSyncStatus[\"RESYNC_REQUESTED\"] = \"RESYNC_REQUESTED\";\n})(BlockSyncStatus || (BlockSyncStatus = {}));\nexport var RepositorySyncStatus;\n(function (RepositorySyncStatus) {\n    // Actively syncing this repository\n    RepositorySyncStatus[\"ACTIVE\"] = \"ACTIVE\";\n    // AGT is not responding, temporarily pending AGT responses\n    RepositorySyncStatus[\"PENDING\"] = \"PENDING\";\n    // AGT (or TM) delayed sync of this repository (for a period of time)\n    RepositorySyncStatus[\"DELAYED\"] = \"DELAYED\";\n    // AGT (or TM) suspended sync of this repository\n    RepositorySyncStatus[\"SUSPENDED\"] = \"SUSPENDED\";\n    // AGT (or TM) temporarily rerouted syncing of this repository to a different AGT\n    RepositorySyncStatus[\"TEMPORARILY_REROUTED\"] = \"TEMPORARILY_REROUTED\";\n    // AGT (or TM) permanently rerouted syncing of this repository to a different AGT\n    RepositorySyncStatus[\"PERMANENTLY_REROUTED\"] = \"PERMANENTLY_REROUTED\";\n})(RepositorySyncStatus || (RepositorySyncStatus = {}));\nexport var TerminalSyncStatus;\n(function (TerminalSyncStatus) {\n    // Terminal is actively syncing\n    TerminalSyncStatus[\"ACTIVE\"] = \"ACTIVE\";\n    // Terminal syncing has been suspended\n    TerminalSyncStatus[\"SUSPENDED\"] = \"SUSPENDED\";\n})(TerminalSyncStatus || (TerminalSyncStatus = {}));\n//# sourceMappingURL=SyncStatus.js.map","/**\n * Column keys.\n */\nexport var column;\n(function (column) {\n    /**\n     * Name property of the column.\n     * @type {string}\n     */\n    column.NAME = 'name';\n    /**\n     * Column data types.\n     */\n    let type;\n    (function (type) {\n        type.ANY = 'any';\n        type.BOOLEAN = 'boolean';\n        type.DATE = 'Date';\n        type.NUMBER = 'number';\n        type.STRING = 'string';\n    })(type = column.type || (column.type = {}));\n})(column || (column = {}));\n/**\n * File level keys.\n */\nexport var file;\n(function (file) {\n    file.ENTITY = 'Entity';\n    file.TABLE = 'Table';\n})(file || (file = {}));\n/**\n * Entity configuration keys.\n */\nexport var entity;\n(function (entity) {\n    entity.DATABASES = 'databases';\n})(entity || (entity = {}));\n/**\n * Foreign Key configuration keys.\n */\nexport var foreignkey;\n(function (foreignkey) {\n    foreignkey.DEFINITION = 'foreignKeyDefinition';\n    foreignkey.NAME = 'name';\n    foreignkey.VALUE = 'value';\n})(foreignkey || (foreignkey = {}));\n/**\n * Index configuration keys.\n */\nexport var index;\n(function (index) {\n    index.COLUMN_LIST = 'columnList';\n    index.NAME = 'name';\n    index.UNIQUE = 'unique';\n})(index || (index = {}));\n/**\n * JoinColumn configuration keys.\n */\nexport var joincolumn;\n(function (joincolumn) {\n    joincolumn.FOREIGN_KEY = 'foreignKey';\n    joincolumn.REFERENCED_COLUMN_NAME = 'referencedColumnName';\n    joincolumn.VALUE = 'value';\n})(joincolumn || (joincolumn = {}));\n/**\n * Property annotation keys.\n */\nexport var property;\n(function (property) {\n    property.COLUMN = 'Column';\n    property.ENUM_TYPE = 'Enum';\n    property.ID = 'Id';\n    property.JOIN_COLUMN = 'JoinColumn';\n    property.JOIN_COLUMNS = 'JoinColumns';\n    property.JSON_TYPE = 'Json';\n    property.MANY_TO_ONE = 'ManyToOne';\n    property.ONE_TO_MANY = 'OneToMany';\n    // R_JOIN_COLUMN(s) are not needed since Repository relations are now\n    // standardized - simple (@ManyToOne) and (@OneToMany) suffice.\n    // export const R_JOIN_COLUMN    = 'RJoinColumn';\n    // export const R_JOIN_COLUMNS   = 'RJoinColumns';\n    property.SUB_QUERY = 'SubQuery';\n    // export const WHERE_JOIN_TABLE = 'WhereJoinTable';\n})(property || (property = {}));\n/**\n * OneToMany configuration keys.\n */\nexport var onetomany;\n(function (onetomany) {\n    onetomany.MAPPED_BY = 'mappedBy';\n})(onetomany || (onetomany = {}));\n/**\n * Table configuration keys.\n */\nexport var table;\n(function (table) {\n    table.INDEXES = 'indexes';\n    table.NAME = 'name';\n    table.PRIMARY_KEY = 'primaryKey';\n    table.APPLICATION = 'application';\n})(table || (table = {}));\n/**\n * Name of the RepositoryId column\n * @type {string}\n */\nexport var repositoryEntity;\n(function (repositoryEntity) {\n    repositoryEntity.ACTOR_ID = 'ACTOR_ID';\n    repositoryEntity.ACTOR_RECORD_ID = 'ACTOR_RECORD_ID';\n    repositoryEntity.ENTITY_NAME = 'RepositoryEntity';\n    repositoryEntity.FOREIGN_KEY = 'REPOSITORY_ID';\n    repositoryEntity.LOCAL_ENTITY_NAME = 'LocalRepositoryEntity';\n    repositoryEntity.REPOSITORY_ID = 'REPOSITORY_ID';\n    repositoryEntity.ORIGINAL_ACTOR_ID = 'ORIGINAL_ACTOR_ID';\n    repositoryEntity.ORIGINAL_ACTOR_RECORD_ID = 'ORIGINAL_ACTOR_RECORD_ID';\n    repositoryEntity.ORIGINAL_REPOSITORY_ID = 'ORIGINAL_REPOSITORY_ID';\n    repositoryEntity.SYS_WIDE_OP_ID_APPLICATION = 'air____at_airport_slash_airport_dash_code';\n    repositoryEntity.SYS_WIDE_OP_ID_ENTITY = 'SystemWideOperationId';\n    repositoryEntity.systemWideOperationId = 'systemWideOperationId';\n    repositoryEntity.SYSTEM_WIDE_OPERATION_ID = 'SYSTEM_WIDE_OPERATION_ID';\n})(repositoryEntity || (repositoryEntity = {}));\n//# sourceMappingURL=Dictionary.js.map","/**\n * SQL Join contentType.\n */\nexport var JoinType;\n(function (JoinType) {\n    JoinType[\"FULL_JOIN\"] = \"FULL_JOIN\";\n    JoinType[\"INNER_JOIN\"] = \"INNER_JOIN\";\n    JoinType[\"LEFT_JOIN\"] = \"LEFT_JOIN\";\n    JoinType[\"RIGHT_JOIN\"] = \"RIGHT_JOIN\";\n})(JoinType || (JoinType = {}));\n/**\n * Type of Entity Relation\n */\nexport var EntityRelationType;\n(function (EntityRelationType) {\n    EntityRelationType[\"ONE_TO_MANY\"] = \"ONE_TO_MANY\";\n    EntityRelationType[\"MANY_TO_ONE\"] = \"MANY_TO_ONE\";\n})(EntityRelationType || (EntityRelationType = {}));\n/**\n * Serialized relation contentType.\n */\nexport var JSONRelationType;\n(function (JSONRelationType) {\n    // Join of an entity with the ON clause\n    JSONRelationType[\"ENTITY_JOIN_ON\"] = \"ENTITY_JOIN_ON\";\n    // Join of an entity via a application relation\n    JSONRelationType[\"ENTITY_APPLICATION_RELATION\"] = \"ENTITY_APPLICATION_RELATION\";\n    // The root entity in a join\n    JSONRelationType[\"ENTITY_ROOT\"] = \"ENTITY_ROOT\";\n    // Join of a sub-query (with the ON clause)\n    JSONRelationType[\"SUB_QUERY_JOIN_ON\"] = \"SUB_QUERY_JOIN_ON\";\n    // The root sub-query in a join\n    JSONRelationType[\"SUB_QUERY_ROOT\"] = \"SUB_QUERY_ROOT\";\n})(JSONRelationType || (JSONRelationType = {}));\n//# sourceMappingURL=Relation.js.map","/**\n * Order of a sorted field, as specified in the ORDER BY clause.\n */\nexport var SortOrder;\n(function (SortOrder) {\n    SortOrder[\"ASCENDING\"] = \"ASCENDING\";\n    SortOrder[\"DESCENDING\"] = \"DESCENDING\";\n})(SortOrder || (SortOrder = {}));\n//# sourceMappingURL=FieldInOrderBy.js.map","/**\n * Extracted from http://www.w3schools.com/sql/sql_functions.asp\n */\nexport var SqlFunction;\n(function (SqlFunction) {\n    // SQL Aggregate Functions\n    // SQL aggregate functions return a single value, calculated from values in a column.\n    // Useful Aggregate functions:\n    SqlFunction[\"ABS\"] = \"ABS\";\n    SqlFunction[\"AVG\"] = \"AVG\";\n    SqlFunction[\"COUNT\"] = \"COUNT\";\n    //FIRST, // not in SqLite: Returns the first value\n    //LAST, // not in SqLite: Returns the last value\n    SqlFunction[\"MAX\"] = \"MAX\";\n    SqlFunction[\"MIN\"] = \"MIN\";\n    SqlFunction[\"SUM\"] = \"SUM\";\n    //SQL Scalar functions\n    //SQL scalar functions return a single value, based on the input value.\n    // Useful scalar functions:\n    SqlFunction[\"UCASE\"] = \"UCASE\";\n    SqlFunction[\"LCASE\"] = \"LCASE\";\n    SqlFunction[\"MID\"] = \"MID\";\n    SqlFunction[\"LEN\"] = \"LEN\";\n    SqlFunction[\"ROUND\"] = \"ROUND\";\n    SqlFunction[\"NOW\"] = \"NOW\";\n    SqlFunction[\"FORMAT\"] = \"FORMAT\";\n    // Added\n    SqlFunction[\"REPLACE\"] = \"REPLACE\";\n    SqlFunction[\"TRIM\"] = \"TRIM\";\n    // Other\n    SqlFunction[\"DISTINCT\"] = \"DISTINCT\";\n    SqlFunction[\"EXISTS\"] = \"EXISTS\";\n    // Algebra Operators\n    SqlFunction[\"DIVIDE\"] = \"DIVIDE\";\n    SqlFunction[\"MINUS\"] = \"MINUS\";\n    SqlFunction[\"MODULUS\"] = \"MODULUS\";\n    SqlFunction[\"MULTIPLY\"] = \"MULTIPLY\";\n    SqlFunction[\"PLUS\"] = \"PLUS\";\n    // Concatenate '||' functions\n    SqlFunction[\"CONCATENATE\"] = \"CONCATENATE\";\n    // Other functions\n    SqlFunction[\"COALESCE\"] = \"COALESCE\";\n})(SqlFunction || (SqlFunction = {}));\n//# sourceMappingURL=Functions.js.map","/**\n * All possible types of serialized JSON clauses.\n */\nexport var JSONClauseObjectType;\n(function (JSONClauseObjectType) {\n    JSONClauseObjectType[\"FIELD\"] = \"FIELD\";\n    JSONClauseObjectType[\"FIELD_FUNCTION\"] = \"FIELD_FUNCTION\";\n    JSONClauseObjectType[\"FIELD_QUERY\"] = \"FIELD_QUERY\";\n    JSONClauseObjectType[\"DISTINCT_FUNCTION\"] = \"DISTINCT_FUNCTION\";\n    JSONClauseObjectType[\"EXISTS_FUNCTION\"] = \"EXISTS_FUNCTION\";\n    JSONClauseObjectType[\"MANY_TO_ONE_RELATION\"] = \"MANY_TO_ONE_RELATION\"; // A many-to-one relation (used in a query)\n})(JSONClauseObjectType || (JSONClauseObjectType = {}));\n/**\n * Types of data\n */\nexport var SQLDataType;\n(function (SQLDataType) {\n    // Allowing ANY allows developers to de-type their data\n    SQLDataType[\"ANY\"] = \"ANY\";\n    SQLDataType[\"BOOLEAN\"] = \"BOOLEAN\";\n    SQLDataType[\"DATE\"] = \"DATE\";\n    // Allowing JSON allows developers to de-normalize their data\n    SQLDataType[\"JSON\"] = \"JSON\";\n    SQLDataType[\"NUMBER\"] = \"NUMBER\";\n    SQLDataType[\"STRING\"] = \"STRING\";\n})(SQLDataType || (SQLDataType = {}));\nexport function getSqlDataType(type) {\n    switch (type) {\n        case 'any':\n            return SQLDataType.ANY;\n        case 'boolean':\n            return SQLDataType.BOOLEAN;\n        case 'Date':\n            return SQLDataType.DATE;\n        case 'Json':\n            return SQLDataType.JSON;\n        case 'number':\n            return SQLDataType.NUMBER;\n        case 'string':\n            return SQLDataType.STRING;\n        default:\n            throw new Error(`Uknown type: ${type}`);\n    }\n}\n//# sourceMappingURL=JSONClause.js.map","export var EntityState;\n(function (EntityState) {\n    EntityState[\"CREATE\"] = \"CREATE\";\n    EntityState[\"DATE\"] = \"DATE\";\n    EntityState[\"DELETE\"] = \"DELETE\";\n    // TODO: PARENT_ID is currently not implemented.  It is meant for @ManyToOne()\n    // references when nothing is returned except for the id fields of the relation\n    EntityState[\"PARENT_ID\"] = \"PARENT_ID\";\n    EntityState[\"PASS_THROUGH\"] = \"PASS_THROUGH\";\n    EntityState[\"STUB\"] = \"STUB\";\n    EntityState[\"UPDATE\"] = \"UPDATE\";\n    // Json fields promote application de-normalization and a currently not implemented\n    // except for internal APIs\n    // RESULT_JSON = 'RESULT_JSON',\n    // RESULT_JSON_ARRAY = 'RESULT_JSON_ARRAY'\n})(EntityState || (EntityState = {}));\n//# sourceMappingURL=EntityStateManager.js.map","/**\n * Category of a SQL contentType\n */\nexport var OperationCategory;\n(function (OperationCategory) {\n    OperationCategory[\"BOOLEAN\"] = \"BOOLEAN\";\n    OperationCategory[\"DATE\"] = \"DATE\";\n    OperationCategory[\"FUNCTION\"] = \"FUNCTION\";\n    OperationCategory[\"LOGICAL\"] = \"LOGICAL\";\n    OperationCategory[\"NUMBER\"] = \"NUMBER\";\n    OperationCategory[\"STRING\"] = \"STRING\";\n    OperationCategory[\"UNTYPED\"] = \"UNTYPED\"; // Operation on an untyped field\n})(OperationCategory || (OperationCategory = {}));\nexport var SqlOperator;\n(function (SqlOperator) {\n    SqlOperator[\"AND\"] = \"AND\";\n    SqlOperator[\"EQUALS\"] = \"EQUALS\";\n    SqlOperator[\"EXISTS\"] = \"EXISTS\";\n    SqlOperator[\"GREATER_THAN\"] = \"GREATER_THAN\";\n    SqlOperator[\"GREATER_THAN_OR_EQUALS\"] = \"GREATER_THAN_OR_EQUALS\";\n    SqlOperator[\"IN\"] = \"IN\";\n    SqlOperator[\"IS_NOT_NULL\"] = \"IS_NOT_NULL\";\n    SqlOperator[\"IS_NULL\"] = \"IS_NULL\";\n    SqlOperator[\"LESS_THAN\"] = \"LESS_THAN\";\n    SqlOperator[\"LESS_THAN_OR_EQUALS\"] = \"LESS_THAN_OR_EQUALS\";\n    SqlOperator[\"LIKE\"] = \"LIKE\";\n    SqlOperator[\"OR\"] = \"OR\";\n    SqlOperator[\"NOT\"] = \"NOT\";\n    SqlOperator[\"NOT_EQUALS\"] = \"NOT_EQUALS\";\n    SqlOperator[\"NOT_IN\"] = \"NOT_IN\";\n})(SqlOperator || (SqlOperator = {}));\nexport var CRUDOperation;\n(function (CRUDOperation) {\n    CRUDOperation[\"CREATE\"] = \"CREATE\";\n    CRUDOperation[\"READ\"] = \"READ\";\n    CRUDOperation[\"UPDATE\"] = \"UPDATE\";\n    CRUDOperation[\"DELETE\"] = \"DELETE\";\n})(CRUDOperation || (CRUDOperation = {}));\n//# sourceMappingURL=Operation.js.map","export var TransactionType;\n(function (TransactionType) {\n    TransactionType[\"LOCAL\"] = \"LOCAL\";\n    TransactionType[\"REMOTE_SYNC\"] = \"REMOTE_SYNC\";\n})(TransactionType || (TransactionType = {}));\n//# sourceMappingURL=TransactionType.js.map","export var ChangeType;\n(function (ChangeType) {\n    ChangeType[\"DELETE_ROWS\"] = \"DELETE_ROWS\";\n    ChangeType[\"INSERT_VALUES\"] = \"INSERT_VALUES\";\n    ChangeType[\"UPDATE_ROWS\"] = \"UPDATE_ROWS\";\n})(ChangeType || (ChangeType = {}));\n//# sourceMappingURL=ChangeType.js.map","/**\n * Possible distribution strategies for Change List Federations.\n *\n * A common (and only currently supported) basic setup:\n *\n * There is always a Single Shared Store (S3).\n * There are always at least one or more 'Personal' Stores.\n *\n * The stores communicate via servers that propagate data from\n * personal stores to the shared store.\n *\n * What differs is how this propagation is accomplished.\n *\n * In the future, we'll add a truly distributed setup, without any S3s.\n */\nexport var DistributionStrategy;\n(function (DistributionStrategy) {\n    /**\n     *  The server is aware of all Personal Stores and it\n     *  subscribes to any possible changes in any of these stores.\n     *  It is the server's responsibility to update the S3.\n     */\n    DistributionStrategy[\"S3_SECURE_POLL\"] = \"S3_SECURE_POLL\";\n    /**\n     * There is no need for a server, all clients are aware of S3\n     * and are responsible for pushing their changes to it.\n     */\n    DistributionStrategy[\"S3_DISTIBUTED_PUSH\"] = \"S3_DISTIBUTED_PUSH\";\n})(DistributionStrategy || (DistributionStrategy = {}));\n//# sourceMappingURL=DistributionStrategy.js.map","export var QueryType;\n(function (QueryType) {\n    QueryType[\"DDL\"] = \"DDL\";\n    QueryType[\"SELECT\"] = \"SELECT\";\n    QueryType[\"MUTATE\"] = \"MUTATE\";\n})(QueryType || (QueryType = {}));\n//# sourceMappingURL=IStoreOperator.js.map","export var PlatformType;\n(function (PlatformType) {\n    PlatformType[\"GOOGLE_DOCS\"] = \"GOOGLE_DOCS\";\n    PlatformType[\"IN_MEMORY\"] = \"IN_MEMORY\";\n    PlatformType[\"OFFLINE\"] = \"OFFLINE\";\n    PlatformType[\"STUB\"] = \"STUB\";\n})(PlatformType || (PlatformType = {}));\n//# sourceMappingURL=PatformType.js.map","export var StoreType;\n(function (StoreType) {\n    StoreType[\"COCKROACHDB\"] = \"COCKROACHDB\";\n    StoreType[\"MYSQL\"] = \"MYSQL\";\n    StoreType[\"POSTGRESQL\"] = \"POSTGRESQL\";\n    StoreType[\"REMOTE\"] = \"REMOTE\";\n    StoreType[\"SQLITE\"] = \"SQLITE\";\n    StoreType[\"SQLJS\"] = \"SQLJS\";\n    StoreType[\"WEB_SQL\"] = \"WEB_SQL\";\n})(StoreType || (StoreType = {}));\nexport var IdGeneration;\n(function (IdGeneration) {\n    IdGeneration[\"ENTITY_CHANGE_ID\"] = \"ENTITY_CHANGE_ID\";\n})(IdGeneration || (IdGeneration = {}));\n//# sourceMappingURL=storeInfo.js.map","export var JsonStatementType;\n(function (JsonStatementType) {\n    JsonStatementType[\"ENTITY_QUERY\"] = \"ENTITY_QUERY\";\n    JsonStatementType[\"NON_ENTITY_QUERY\"] = \"NON_ENTITY_QUERY\";\n})(JsonStatementType || (JsonStatementType = {}));\n//# sourceMappingURL=Query.js.map","export var QueryResultType;\n(function (QueryResultType) {\n    // Ordered query result with bridging for all MtOs and OtM\n    QueryResultType[\"ENTITY_GRAPH\"] = \"ENTITY_GRAPH\";\n    // Ordered query result, with objects grouped hierarchically by entity\n    QueryResultType[\"ENTITY_TREE\"] = \"ENTITY_TREE\";\n    // Ordered query result, with objects grouped hierarchically by mapping\n    QueryResultType[\"TREE\"] = \"TREE\";\n    // Flat array query result, with no forced ordering or grouping\n    QueryResultType[\"SHEET\"] = \"SHEET\";\n    // A single field query result, with no forced ordering or grouping\n    QueryResultType[\"FIELD\"] = \"FIELD\";\n    // Raw result, returned by a SQL string query\n    QueryResultType[\"RAW\"] = \"RAW\";\n    // ENTITY_GRAPH with all arrays returned as a MappedEntityArray\n    QueryResultType[\"MAPPED_ENTITY_GRAPH\"] = \"MAPPED_ENTITY_GRAPH\";\n    // ENTITY_TREE with all arrays returned as a MappedEntityArray\n    QueryResultType[\"MAPPED_ENTITY_TREE\"] = \"MAPPED_ENTITY_TREE\";\n})(QueryResultType || (QueryResultType = {}));\n//# sourceMappingURL=QueryResultType.js.map","export var OperationType;\n(function (OperationType) {\n    OperationType[\"DELETE\"] = \"DELETE\";\n    OperationType[\"FIND_ONE_GRAPH\"] = \"FIND_ONE_GRAPH\";\n    OperationType[\"FIND_ONE_TREE\"] = \"FIND_ONE_TREE\";\n    OperationType[\"FIND_GRAPH\"] = \"FIND_GRAPH\";\n    OperationType[\"FIND_TREE\"] = \"FIND_TREE\";\n    OperationType[\"SAVE\"] = \"SAVE\";\n    OperationType[\"SEARCH_ONE_GRAPH\"] = \"SEARCH_ONE_GRAPH\";\n    OperationType[\"SEARCH_ONE_TREE\"] = \"SEARCH_ONE_TREE\";\n    OperationType[\"SEARCH_GRAPH\"] = \"SEARCH_GRAPH\";\n    OperationType[\"SEARCH_TREE\"] = \"SEARCH_TREE\";\n})(OperationType || (OperationType = {}));\nexport var QueryInputKind;\n(function (QueryInputKind) {\n    QueryInputKind[\"PARAMETER\"] = \"PARAMETER\";\n    QueryInputKind[\"Q\"] = \"Q\";\n    QueryInputKind[\"QENTITY\"] = \"QENTITY\";\n})(QueryInputKind || (QueryInputKind = {}));\nexport var QueryParameterType;\n(function (QueryParameterType) {\n    QueryParameterType[\"BOOLEAN\"] = \"BOOLEAN\";\n    QueryParameterType[\"DATE\"] = \"DATE\";\n    QueryParameterType[\"NUMBER\"] = \"NUMBER\";\n    QueryParameterType[\"STRING\"] = \"STRING\";\n})(QueryParameterType || (QueryParameterType = {}));\n//# sourceMappingURL=Operation.js.map","export var ApplicationStatus;\n(function (ApplicationStatus) {\n    ApplicationStatus[\"CURRENT\"] = \"CURRENT\";\n    ApplicationStatus[\"MISSING\"] = \"MISSING\";\n    ApplicationStatus[\"NEEDS_UPGRADES\"] = \"NEEDS_UPGRADES\";\n    ApplicationStatus[\"STUB\"] = \"STUB\";\n})(ApplicationStatus || (ApplicationStatus = {}));\n//# sourceMappingURL=ApplicationStatus.js.map","export function ensureChildArray(parentContainer, index) {\n    let childArray;\n    if (parentContainer instanceof Map) {\n        childArray = parentContainer.get(index);\n    }\n    else {\n        childArray = parentContainer[index];\n    }\n    if (!childArray) {\n        childArray = [];\n        if (parentContainer instanceof Map) {\n            parentContainer.set(index, childArray);\n        }\n        else {\n            parentContainer[index] = childArray;\n        }\n    }\n    return childArray;\n}\nexport function ensureChildMap(parentContainer, index) {\n    let childObject;\n    if (parentContainer instanceof Map) {\n        childObject = parentContainer.get(index);\n        if (!childObject) {\n            childObject = {};\n            parentContainer.set(index, childObject);\n        }\n    }\n    else {\n        childObject = parentContainer[index];\n        if (!childObject) {\n            childObject = {};\n            parentContainer[index] = childObject;\n        }\n    }\n    return childObject;\n}\nexport function ensureChildJsMap(parentContainer, index) {\n    let childMap = parentContainer.get(index);\n    if (!childMap) {\n        childMap = new Map();\n        parentContainer.set(index, childMap);\n    }\n    return childMap;\n}\nexport function ensureChildJsSet(parentContainer, index) {\n    let childSet = parentContainer.get(index);\n    if (!childSet) {\n        childSet = new Set();\n        parentContainer.set(index, childSet);\n    }\n    return childSet;\n}\nexport function undefinedToNull(value) {\n    return value === undefined ? null : value;\n}\n//# sourceMappingURL=DatastructureUtils.js.map","export const INTERNAL_APP = '@airport/terminal';\nexport const INTERNAL_DOMAIN = 'internal://domain';\n//# sourceMappingURL=ITransactionalConnector.js.map","import { lib } from '@airport/direction-indicator';\nconst groundControl = lib('ground-control');\ngroundControl.autopilot = false;\nexport const ENTITY_STATE_MANAGER = groundControl.token({\n    class: null,\n    interface: 'IEntityStateManager',\n    token: 'ENTITY_STATE_MANAGER'\n});\nexport const INTER_APP_API_CLIENT = groundControl.token({\n    class: null,\n    interface: 'IInterAppAPIClient',\n    token: 'INTER_APP_API_CLIENT'\n});\nexport const OPERATION_CONTEXT_LOADER = groundControl.token({\n    class: null,\n    interface: 'IOperationContextLoader',\n    token: 'OPERATION_CONTEXT_LOADER'\n});\nexport const TRANSACTIONAL_CONNECTOR = groundControl.token({\n    class: null,\n    interface: 'ITransactionalConnector',\n    token: 'TRANSACTIONAL_CONNECTOR'\n});\n//# sourceMappingURL=tokens.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._teardowns = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialTeardown = this.initialTeardown;\n            if (isFunction(initialTeardown)) {\n                try {\n                    initialTeardown();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _teardowns = this._teardowns;\n            if (_teardowns) {\n                this._teardowns = null;\n                try {\n                    for (var _teardowns_1 = __values(_teardowns), _teardowns_1_1 = _teardowns_1.next(); !_teardowns_1_1.done; _teardowns_1_1 = _teardowns_1.next()) {\n                        var teardown_1 = _teardowns_1_1.value;\n                        try {\n                            execTeardown(teardown_1);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_teardowns_1_1 && !_teardowns_1_1.done && (_b = _teardowns_1.return)) _b.call(_teardowns_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execTeardown(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._teardowns = (_a = this._teardowns) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _teardowns = this._teardowns;\n        _teardowns && arrRemove(_teardowns, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execTeardown(teardown) {\n    if (isFunction(teardown)) {\n        teardown();\n    }\n    else {\n        teardown.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) || setTimeout).apply(void 0, __spreadArray([], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends, __read, __spreadArray } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var next;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            (next = observerOrNext.next, error = observerOrNext.error, complete = observerOrNext.complete);\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n            }\n            else {\n                context_1 = observerOrNext;\n            }\n            next = next === null || next === void 0 ? void 0 : next.bind(context_1);\n            error = error === null || error === void 0 ? void 0 : error.bind(context_1);\n            complete = complete === null || complete === void 0 ? void 0 : complete.bind(context_1);\n        }\n        _this.destination = {\n            next: next ? wrapForErrorHandling(next, _this) : noop,\n            error: wrapForErrorHandling(error !== null && error !== void 0 ? error : defaultErrorHandler, _this),\n            complete: complete ? wrapForErrorHandling(complete, _this) : noop,\n        };\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction wrapForErrorHandling(handler, instance) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        try {\n            handler.apply(void 0, __spreadArray([], __read(args)));\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                captureError(err);\n            }\n            else {\n                reportUnhandledError(err);\n            }\n        }\n    };\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    subscription === null || subscription === void 0 ? void 0 : subscription.unsubscribe();\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        var closed = this.closed;\n        _super.prototype.unsubscribe.call(this);\n        !closed && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                var copy = _this.observers.slice();\n                try {\n                    for (var copy_1 = __values(copy), copy_1_1 = copy_1.next(); !copy_1_1.done; copy_1_1 = copy_1.next()) {\n                        var observer = copy_1_1.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (copy_1_1 && !copy_1_1.done && (_a = copy_1.return)) _a.call(copy_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        return hasError || isStopped\n            ? EMPTY_SUBSCRIPTION\n            : (observers.push(subscriber), new Subscription(function () { return arrRemove(observers, subscriber); }));\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        !subscription.closed && subscriber.next(this._value);\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;\n        if (hasError) {\n            throw thrownError;\n        }\n        this._throwIfClosed();\n        return _value;\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, (this._value = value));\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","export function executeSchedule(parentSubscription, scheduler, work, delay, repeat) {\n    if (delay === void 0) { delay = 0; }\n    if (repeat === void 0) { repeat = false; }\n    var scheduleSubscription = scheduler.schedule(function () {\n        work();\n        if (repeat) {\n            parentSubscription.add(this.schedule(null, delay));\n        }\n        else {\n            this.unsubscribe();\n        }\n    }, delay);\n    parentSubscription.add(scheduleSubscription);\n    if (!repeat) {\n        return scheduleSubscription;\n    }\n}\n//# sourceMappingURL=executeSchedule.js.map","import { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { OperatorSubscriber } from './OperatorSubscriber';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        source.subscribe(new OperatorSubscriber(subscriber, function (value) { return executeSchedule(subscriber, scheduler, function () { return subscriber.next(value); }, delay); }, function () { return executeSchedule(subscriber, scheduler, function () { return subscriber.complete(); }, delay); }, function (err) { return executeSchedule(subscriber, scheduler, function () { return subscriber.error(err); }, delay); }));\n    });\n}\n//# sourceMappingURL=observeOn.js.map","import { operate } from '../util/lift';\nexport function subscribeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        subscriber.add(scheduler.schedule(function () { return source.subscribe(subscriber); }, delay));\n    });\n}\n//# sourceMappingURL=subscribeOn.js.map","import { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleAsyncIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        executeSchedule(subscriber, scheduler, function () {\n            var iterator = input[Symbol.asyncIterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                iterator.next().then(function (result) {\n                    if (result.done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(result.value);\n                    }\n                });\n            }, 0, true);\n        });\n    });\n}\n//# sourceMappingURL=scheduleAsyncIterable.js.map","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        if (isAsyncIterable(input)) {\n            return scheduleAsyncIterable(input, scheduler);\n        }\n        if (isIterable(input)) {\n            return scheduleIterable(input, scheduler);\n        }\n        if (isReadableStreamLike(input)) {\n            return scheduleReadableStreamLike(input, scheduler);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\n//# sourceMappingURL=scheduled.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function scheduleObservable(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=scheduleObservable.js.map","import { Observable } from '../Observable';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var i = 0;\n        return scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n            }\n            else {\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    this.schedule();\n                }\n            }\n        });\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function schedulePromise(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=schedulePromise.js.map","import { Observable } from '../Observable';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleIterable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var iterator;\n        executeSchedule(subscriber, scheduler, function () {\n            iterator = input[Symbol_iterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                var _a;\n                var value;\n                var done;\n                try {\n                    (_a = iterator.next(), value = _a.value, done = _a.done);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                }\n            }, 0, true);\n        });\n        return function () { return isFunction(iterator === null || iterator === void 0 ? void 0 : iterator.return) && iterator.return(); };\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map","import { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nexport function scheduleReadableStreamLike(input, scheduler) {\n    return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n//# sourceMappingURL=scheduleReadableStreamLike.js.map","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { operate } from '../util/lift';\nimport { OperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(new OperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { OperatorSubscriber } from './OperatorSubscriber';\nexport function distinctUntilChanged(comparator, keySelector) {\n    if (keySelector === void 0) { keySelector = identity; }\n    comparator = comparator !== null && comparator !== void 0 ? comparator : defaultCompare;\n    return operate(function (source, subscriber) {\n        var previousKey;\n        var first = true;\n        source.subscribe(new OperatorSubscriber(subscriber, function (value) {\n            var currentKey = keySelector(value);\n            if (first || !comparator(previousKey, currentKey)) {\n                first = false;\n                previousKey = currentKey;\n                subscriber.next(value);\n            }\n        }));\n    });\n}\nfunction defaultCompare(a, b) {\n    return a === b;\n}\n//# sourceMappingURL=distinctUntilChanged.js.map","/**\n * For logic classes to be hot-swappable for quick upgrades all state is contained\n * in one non-reloadable BehaviorSubject.\n */\nimport { INTERNAL_DOMAIN } from \"@airport/ground-control\";\nimport { BehaviorSubject } from \"rxjs\";\nexport const internalTerminalState = new BehaviorSubject({\n    applicationActors: [],\n    applications: [],\n    domains: [],\n    frameworkActor: null,\n    internalConnector: {\n        dbName: '',\n        internalCredentials: {\n            application: null,\n            domain: INTERNAL_DOMAIN,\n            methodName: null,\n            objectName: null\n        },\n        serverUrl: ''\n    },\n    lastIds: {\n        columns: 0,\n        domains: 0,\n        entities: 0,\n        properties: 0,\n        propertyColumns: 0,\n        relations: 0,\n        relationColumns: 0,\n        applications: 0,\n        applicationVersions: 0\n    },\n    receiver: {\n        initializedApps: new Set(),\n        initializingApps: new Set(),\n    },\n    terminal: null,\n    transactionManager: {\n        pendingTransactionQueue: [],\n        rootTransactionInProgressMap: new Map(),\n        transactionInProgressMap: new Map()\n    },\n    webReceiver: {\n        domainPrefix: '',\n        localDomain: '',\n        mainDomainFragments: [],\n        onClientMessageCallback: null,\n        pendingApplicationCounts: new Map(),\n        pendingHostCounts: new Map(),\n        pendingInterAppApiCallMessageMap: new Map(),\n        subsriptionMap: new Map()\n    }\n});\n//# sourceMappingURL=theState.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ensureChildJsMap } from '@airport/ground-control';\nimport { internalTerminalState } from './theState';\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet TerminalStore = class TerminalStore {\n    async init() {\n        this.state = internalTerminalState;\n        this.getTerminalState = this.selectorManager.createRootSelector(this.state);\n        this.getApplicationActors = this.selectorManager.createSelector(this.getTerminalState, terminal => terminal.applicationActors);\n        this.getApplicationActorMapByDomainAndApplicationNames = this.selectorManager.createSelector(this.getApplicationActors, applicationActors => {\n            const applicationActorsByDomainAndApplicationNames = new Map();\n            for (const applicationActor of applicationActors) {\n                const applicationActorMapForDomain = ensureChildJsMap(applicationActorsByDomainAndApplicationNames, applicationActor.application.domain.name);\n                let actorsForApplication = applicationActorMapForDomain\n                    .get(applicationActor.application.name);\n                if (!actorsForApplication) {\n                    actorsForApplication = [];\n                    applicationActorMapForDomain.set(applicationActor.application.name, actorsForApplication);\n                }\n                actorsForApplication.push(applicationActor);\n            }\n            return applicationActorsByDomainAndApplicationNames;\n        });\n        this.getDomains = this.selectorManager.createSelector(this.getTerminalState, terminal => terminal.domains);\n        this.getDomainMapByName = this.selectorManager.createSelector(this.getDomains, domains => {\n            const domainsByName = new Map();\n            for (const domain of domains) {\n                domainsByName.set(domain.name, domain);\n            }\n            return domainsByName;\n        });\n        this.getFrameworkActor = this.selectorManager.createSelector(this.getTerminalState, terminal => terminal.frameworkActor);\n        this.getInternalConnector = this.selectorManager.createSelector(this.getTerminalState, terminalState => terminalState.internalConnector);\n        this.getLastIds = this.selectorManager.createSelector(this.getTerminalState, terminalState => terminalState.lastIds);\n        this.getLatestApplicationVersionMapByNames = this.selectorManager.createSelector(this.getDomains, domains => {\n            const latestApplicationVersionMapByNames = new Map();\n            for (const domain of domains) {\n                const mapForDomain = ensureChildJsMap(latestApplicationVersionMapByNames, domain.name);\n                for (const application of domain.applications) {\n                    mapForDomain.set(application.name, application.currentVersion[0].applicationVersion);\n                }\n            }\n            return latestApplicationVersionMapByNames;\n        });\n        this.getLatestApplicationVersionMapByFullApplicationName = this.selectorManager.createSelector(this.getLatestApplicationVersionMapByNames, (latestApplicationVersionMapByNames) => {\n            const latestApplicationVersionMapByFullApplicationName = new Map();\n            for (const applicationVersionsForDomainName of latestApplicationVersionMapByNames.values()) {\n                for (const applicationVersion of applicationVersionsForDomainName.values()) {\n                    latestApplicationVersionMapByFullApplicationName.set(applicationVersion.application.fullName, applicationVersion);\n                }\n            }\n            return latestApplicationVersionMapByFullApplicationName;\n        });\n        this.getAllApplicationVersionsByIds = this.selectorManager.createSelector(this.getDomains, domains => {\n            const allApplicationVersionsByIds = [];\n            for (const domain of domains) {\n                for (const application of domain.applications) {\n                    for (const applicationVersion of application.versions) {\n                        allApplicationVersionsByIds[applicationVersion.id] = applicationVersion;\n                    }\n                }\n            }\n            return allApplicationVersionsByIds;\n        });\n        this.getLatestApplicationVersionsByApplicationIndexes = this.selectorManager.createSelector(this.getDomains, domains => {\n            const latestApplicationVersionsByApplicationIndexes = [];\n            for (const domain of domains) {\n                for (const application of domain.applications) {\n                    latestApplicationVersionsByApplicationIndexes[application.index]\n                        = application.currentVersion[0].applicationVersion;\n                }\n            }\n            return latestApplicationVersionsByApplicationIndexes;\n        });\n        this.getApplications = this.selectorManager.createSelector(this.getTerminalState, terminal => terminal.applications);\n        this.getAllEntities = this.selectorManager.createSelector(this.getLatestApplicationVersionsByApplicationIndexes, latestApplicationVersionsByApplicationIndexes => {\n            const allEntities = [];\n            for (const latestApplicationVersion of latestApplicationVersionsByApplicationIndexes) {\n                if (!latestApplicationVersion) {\n                    continue;\n                }\n                for (const entity of latestApplicationVersion.entities) {\n                    allEntities[entity.id] = entity;\n                }\n            }\n            return allEntities;\n        });\n        this.getAllColumns = this.selectorManager.createSelector(this.getAllEntities, allEntities => {\n            const allColumns = [];\n            for (const entity of allEntities) {\n                if (!entity) {\n                    continue;\n                }\n                for (const column of entity.columns) {\n                    allColumns[column.id] = column;\n                }\n            }\n            return allColumns;\n        });\n        this.getAllRelations = this.selectorManager.createSelector(this.getAllEntities, allEntities => {\n            const allRelations = [];\n            for (const entity of allEntities) {\n                if (!entity) {\n                    continue;\n                }\n                for (const relation of entity.relations) {\n                    allRelations[relation.id] = relation;\n                }\n            }\n            return allRelations;\n        });\n        this.getReceiver = this.selectorManager.createSelector(this.getTerminalState, terminal => terminal.receiver);\n        this.getTransactionManager = this.selectorManager.createSelector(this.getTerminalState, terminal => terminal.transactionManager);\n        this.getWebReceiver = this.selectorManager.createSelector(this.getTerminalState, terminal => terminal.webReceiver);\n    }\n    tearDown() {\n    }\n};\n__decorate([\n    Inject()\n], TerminalStore.prototype, \"selectorManager\", void 0);\nTerminalStore = __decorate([\n    Injected()\n], TerminalStore);\nexport { TerminalStore };\n//# sourceMappingURL=TerminalStore.js.map","export const Injected = function () {\n    return function (constructor) {\n        // No runtime logic required.\n    };\n};\nexport const Inject = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\n//# sourceMappingURL=decorators.js.map","/**\n * Created by Papa on 8/20/2016.\n */\nexport const Id = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const Column = function (columnConfiguration) {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const JoinColumn = function (joinColumnConfiguration) {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const JoinColumns = function (joinColumnConfigurations) {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\n/**\n * Function used to add a clause to a Join\n export interface AddToJoinFunction<QOtm extends IQEntity, QMto extends IQEntity> {\n    (\n        otm: QOtm, // One-to-Many IQEntity\n        mto: QMto // Many-to-One IQEntity\n    ): JSONBaseOperation;\n}\n */\n// export const WhereJoinTable: WhereJoinTableDecorator<any, any> = function <QOtm extends\n// IQEntityInternal, QMto extends IQEntityInternal>( addToJoinFunction: AddToJoinFunction<QOtm,\n// QMto>, // Function to add to the join joinFunctionWithOperator?: andOperator | orOperator //\n// How to add the function to the join ) { return function ( targetObject: any, propertyKey:\n// string ) { // No runtime logic required. } };\nexport const SubQuery = function (addToJoinFunction) {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const RJoinColumn = function (rJoinColumnConfiguration) {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const RJoinColumns = function (joinColumnConfigurations) {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const Json = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const DbAny = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const DbBoolean = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const DbDate = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const DbNumber = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const DbString = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const Transient = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const ManyToOne = function (elements) {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const OneToMany = function (elements) {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const GeneratedValue = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const SequenceGenerator = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\nexport const TraditionalServerSeq = function () {\n    return function (targetObject, propertyKey) {\n        // No runtime logic required.\n    };\n};\n//# sourceMappingURL=ColumnDecorators.js.map","/**\n * Created by Papa on 10/18/2016.\n */\nconst ALIASES = ['a', 'b', 'c', 'd', 'e',\n    'f', 'g', 'h', 'i', 'j',\n    'k', 'l', 'm', 'n', 'o',\n    'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z'];\nexport class AliasCache {\n    constructor(aliasPrefix = '') {\n        this.aliasPrefix = aliasPrefix;\n        this.reset();\n    }\n    getFollowingAlias() {\n        let currentAlias = this.lastAlias;\n        for (var i = 2; i >= 0; i--) {\n            let currentIndex = currentAlias[i];\n            currentIndex = (currentIndex + 1) % 26;\n            currentAlias[i] = currentIndex;\n            if (currentIndex !== 0) {\n                break;\n            }\n        }\n        let aliasString = this.aliasPrefix;\n        for (var i = 0; i < 3; i++) {\n            aliasString += ALIASES[currentAlias[i]];\n        }\n        if (aliasString === 'add') {\n            aliasString = this.getFollowingAlias();\n        }\n        return aliasString;\n    }\n    reset() {\n        this.lastAlias = [-1, -1, -1];\n    }\n}\nexport class AliasMap {\n    constructor(aliasCache) {\n        this.aliasCache = aliasCache;\n        this.aliasMap = new Map();\n    }\n    getNextAlias(object) {\n        if (this.hasAliasFor(object)) {\n            return this.getExistingAlias(object);\n        }\n        let aliasString = this.aliasCache.getFollowingAlias();\n        this.aliasMap.set(object, aliasString);\n        return aliasString;\n    }\n    hasAliasFor(object) {\n        return this.aliasMap.has(object);\n    }\n}\nexport class EntityAliases extends AliasMap {\n    constructor(entityAliasCache = new AliasCache('E'), columnAliasCache = new AliasCache('C'), parameterAliasCache = new AliasCache('P')) {\n        super(entityAliasCache);\n        this.columnAliasCache = columnAliasCache;\n        this.parameterAliases = new ParameterAliases(parameterAliasCache);\n    }\n    getParams( //\n    ) {\n        return this.parameterAliases;\n    }\n    getNewFieldColumnAliases() {\n        return new FieldColumnAliases(this, this.columnAliasCache);\n    }\n    getExistingAlias(entity) {\n        if (!this.hasAliasFor(entity)) {\n            throw new Error(`No alias found for entity ${entity.__driver__.dbEntity.name}`);\n        }\n        return this.aliasMap.get(entity);\n    }\n    getOnlyAlias( //\n    ) {\n        if (this.aliasMap.size !== 1) {\n            return `Expecting only 1 entry in Field's alias map`;\n        }\n        return this.aliasMap.get(this.aliasMap.keys().next().value);\n    }\n}\nexport class ParameterAliases extends AliasMap {\n    constructor(aliasCache) {\n        super(aliasCache);\n    }\n    getNextAlias(object) {\n        if (this.hasAliasFor(object)) {\n            return this.getExistingAlias(object).alias;\n        }\n        let aliasString = this.aliasCache.getFollowingAlias();\n        let parameter = {\n            alias: aliasString,\n            value: object.value\n        };\n        this.aliasMap.set(object, parameter);\n        return aliasString;\n    }\n    getExistingAlias(field) {\n        if (!this.hasAliasFor(field)) {\n            throw new Error(`No alias found for a parameter`);\n        }\n        return this.aliasMap.get(field);\n    }\n    getParameters( //\n    ) {\n        let parameters = {};\n        this.aliasMap.forEach((value, key) => {\n            parameters[value.alias] = value;\n        });\n        return parameters;\n    }\n}\nexport class FieldColumnAliases extends AliasMap {\n    constructor(_entityAliases, aliasCache) {\n        super(aliasCache);\n        this._entityAliases = _entityAliases;\n    }\n    get entityAliases( //\n    ) {\n        return this._entityAliases;\n    }\n    getExistingAlias(field) {\n        if (!this.hasAliasFor(field)) {\n            const qField = field;\n            throw new Error(`No alias found for property ${qField.dbProperty.entity.name}.${qField.dbProperty.name}`);\n        }\n        return this.aliasMap.get(field);\n    }\n}\n//# sourceMappingURL=Aliases.js.map","import { SqlOperator } from \"@airport/ground-control\";\n/**\n * Created by Papa on 4/21/2016.\n */\nexport class Operation {\n    constructor(category) {\n        this.category = category;\n    }\n}\nexport class ValueOperation extends Operation {\n    constructor(category) {\n        super(category);\n        this.category = category;\n    }\n    equals(lValue, rValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.EQUALS,\n            r: rValue\n        };\n    }\n    greaterThan(lValue, rValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.GREATER_THAN,\n            r: rValue\n        };\n    }\n    greaterThanOrEquals(lValue, rValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.GREATER_THAN_OR_EQUALS,\n            r: rValue\n        };\n    }\n    isNotNull(lValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.IS_NOT_NULL\n        };\n    }\n    isNull(lValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.IS_NULL\n        };\n    }\n    in(lValue, rValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.IN,\n            r: rValue\n        };\n    }\n    lessThan(lValue, rValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.LESS_THAN,\n            r: rValue\n        };\n    }\n    lessThanOrEquals(lValue, rValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.LESS_THAN_OR_EQUALS,\n            r: rValue\n        };\n    }\n    notEquals(lValue, rValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.NOT_EQUALS,\n            r: lValue\n        };\n    }\n    notIn(lValue, rValue) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.NOT_IN,\n            r: rValue\n        };\n    }\n}\n//# sourceMappingURL=Operation.js.map","import { OperationCategory, SqlOperator } from \"@airport/ground-control\";\nimport { Operation } from \"./Operation\";\n/**\n * Created by Papa on 4/21/2016.\n */\nexport const and = function (...ops) {\n    return new LogicalOperation().and(ops);\n};\nexport const or = function (...ops) {\n    return new LogicalOperation().or(ops);\n};\nexport const not = function (op) {\n    return new LogicalOperation().not(op);\n};\nexport class LogicalOperation extends Operation {\n    constructor() {\n        super(null);\n    }\n    static verifyChildOps(ops) {\n        if (!ops || !ops.length) {\n            throw new Error(`No child operations provided`);\n        }\n    }\n    and(ops) {\n        return {\n            c: OperationCategory.LOGICAL,\n            o: SqlOperator.AND,\n            v: ops\n        };\n    }\n    or(ops) {\n        return {\n            c: OperationCategory.LOGICAL,\n            o: SqlOperator.OR,\n            v: ops\n        };\n    }\n    not(op) {\n        return {\n            c: OperationCategory.LOGICAL,\n            o: SqlOperator.NOT,\n            v: op\n        };\n    }\n}\n//# sourceMappingURL=LogicalOperation.js.map","import { JoinType } from '@airport/ground-control';\nimport { extend } from '../../utils/qApplicationBuilderUtils';\nimport { and } from '../operation/LogicalOperation';\n/**\n * Created by Papa on 4/26/2016.\n */\n/*\n * Cannot use 'class' syntax because it brakes dynamic creation of subclasses.\n * With 'class' browser reports:\n *   Class constructor QRelation cannot be invoked without 'new'\n * When calling:\n *   Q...Relation.base.constructor.call(this, relation, qEntity)\n */\nexport function QRelation(dbRelation, parentQ, appliationUtils, relationManager) {\n    this.dbRelation = dbRelation;\n    this.parentQ = parentQ;\n    this.appliationUtils = appliationUtils;\n    this.relationManager = relationManager;\n}\nQRelation.prototype.innerJoin = function () {\n    return this.getNewQEntity(JoinType.INNER_JOIN);\n};\nQRelation.prototype.leftJoin = function () {\n    return this.getNewQEntity(JoinType.LEFT_JOIN);\n};\nQRelation.prototype.getNewQEntity = function (joinType) {\n    const dbEntity = this.dbRelation.relationEntity;\n    const qEntityConstructor = this.applicationUtils.getQEntityConstructor(this.dbRelation.relationEntity);\n    let newQEntity = new qEntityConstructor(dbEntity, this.appliationUtils, this.relationManager, this.relationManager.getNextChildJoinPosition(this.parentQ.__driver__), this.dbRelation, joinType, this.appliationUtils, this.relationManager);\n    newQEntity.__driver__.parentJoinEntity = this.parentQ;\n    return newQEntity;\n};\nexport function QRepositoryEntityRelation(dbRelation, parentQ) {\n    QRepositoryEntityRelation.base.constructor.call(this, dbRelation, parentQ);\n}\nQRepositoryEntityRelation.prototype.equals = function (entity) {\n    let thisRelation = this;\n    let other = entity;\n    return and(thisRelation.actor.id.equals(other.actor.id), thisRelation.actorRecordId.equals(other.actorRecordId), thisRelation.id.equals(other.repository.id));\n};\nextend(QRelation, QRepositoryEntityRelation, {});\n//# sourceMappingURL=Relation.js.map","import { OperationCategory, } from \"@airport/ground-control\";\nimport { ValueOperation } from \"./Operation\";\n/**\n * Created by Papa on 6/20/2016.\n */\nexport class BooleanOperation extends ValueOperation {\n    constructor() {\n        super(OperationCategory.BOOLEAN);\n    }\n}\n//# sourceMappingURL=BooleanOperation.js.map","/**\n * Created by Papa on 10/16/2016.\n */\nexport class FieldInOrderBy {\n    constructor(field, sortOrder) {\n        this.field = field;\n        this.sortOrder = sortOrder;\n    }\n    toJSON(columnAliases) {\n        if (!columnAliases.hasAliasFor(this.field)) {\n            throw new Error(`Field used in order by clause is not present in select clause`);\n        }\n        return {\n            fa: columnAliases.getExistingAlias(this.field),\n            so: this.sortOrder\n        };\n    }\n    toEntityJSON() {\n        let qField = this.field;\n        return {\n            fa: undefined,\n            ci: qField.dbColumn.index,\n            pi: qField.dbProperty.index,\n            ti: qField.dbProperty.entity.index,\n            si: qField.dbProperty.entity.applicationVersion.id,\n            so: this.sortOrder\n        };\n    }\n}\n//# sourceMappingURL=FieldInOrderBy.js.map","import { JSONClauseObjectType, SortOrder } from '@airport/ground-control';\nimport { FieldInOrderBy } from './FieldInOrderBy';\n/**\n * Created by Papa on 4/21/2016.\n */\nexport class QField {\n    constructor(dbColumn, dbProperty, q, objectType) {\n        this.dbColumn = dbColumn;\n        this.dbProperty = dbProperty;\n        this.q = q;\n        this.objectType = objectType;\n        this.__appliedFunctions__ = [];\n    }\n    /**\n     protected getFieldKey() {\n        let rootEntityPrefix = columnAliases.entityAliases.getExistingAlias(this.parentQ.getRootJoinEntity());\n        let key = `${relationManager.getPositionAlias(rootEntityPrefix, this.parentQ.fromClausePosition)}.${this.fieldName}`;\n        return key;\n    }\n     */\n    applySqlFunction(sqlFunctionCall) {\n        let appliedField = this.getInstance();\n        appliedField.__appliedFunctions__.push(sqlFunctionCall);\n        return appliedField;\n    }\n    toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager) {\n        let alias;\n        if (forSelectClause) {\n            alias = columnAliases.getNextAlias(this);\n        }\n        let rootEntityPrefix;\n        if (this.__fieldSubQuery__) {\n            rootEntityPrefix = columnAliases.entityAliases.getOnlyAlias();\n        }\n        else {\n            rootEntityPrefix = columnAliases.entityAliases.getExistingAlias(this.q.__driver__.getRootJoinEntity());\n        }\n        let jsonField = {\n            appliedFunctions: this.appliedFunctionsToJson(this.__appliedFunctions__, columnAliases, queryUtils, fieldUtils, relationManager),\n            si: this.dbProperty.entity.applicationVersion.id,\n            ti: this.dbProperty.entity.index,\n            fa: alias,\n            pi: this.dbProperty.index,\n            ci: this.dbColumn.index,\n            ta: relationManager.getPositionAlias(rootEntityPrefix, this.q.__driver__.fromClausePosition),\n            ot: this.objectType,\n            dt: this.dbColumn.type\n        };\n        if (this.__fieldSubQuery__) {\n            jsonField.fieldSubQuery = fieldUtils.getFieldQueryJson(this.__fieldSubQuery__, columnAliases.entityAliases, queryUtils);\n            jsonField.ot = JSONClauseObjectType.FIELD_QUERY;\n        }\n        return jsonField;\n    }\n    asc() {\n        return new FieldInOrderBy(this, SortOrder.ASCENDING);\n    }\n    desc() {\n        return new FieldInOrderBy(this, SortOrder.DESCENDING);\n    }\n    addSubQuery(subQuery) {\n        let appliedField = this.getInstance();\n        appliedField.__fieldSubQuery__ = subQuery;\n        return appliedField;\n    }\n    operableFunctionToJson(functionObject, columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager) {\n        let alias;\n        if (forSelectClause) {\n            alias = columnAliases.getNextAlias(this);\n        }\n        return {\n            appliedFunctions: this.appliedFunctionsToJson(this.__appliedFunctions__, columnAliases, queryUtils, fieldUtils, relationManager),\n            fa: alias,\n            ot: this.objectType,\n            dt: this.dbColumn.type,\n            v: this.valueToJSON(functionObject, columnAliases, false, true, queryUtils, fieldUtils, relationManager)\n        };\n    }\n    copyFunctions(field) {\n        field.__appliedFunctions__ = this.__appliedFunctions__.slice();\n        return field;\n    }\n    appliedFunctionsToJson(appliedFunctions, columnAliases, queryUtils, fieldUtils, relationManager) {\n        if (!appliedFunctions) {\n            return appliedFunctions;\n        }\n        return appliedFunctions.map((appliedFunction) => {\n            return this.functionCallToJson(appliedFunction, columnAliases, queryUtils, fieldUtils, relationManager);\n        });\n    }\n    functionCallToJson(functionCall, columnAliases, queryUtils, fieldUtils, relationManager) {\n        let parameters;\n        if (functionCall.p) {\n            parameters = functionCall.p.map((parameter) => {\n                return this.valueToJSON(parameter, columnAliases, false, false, queryUtils, fieldUtils, relationManager);\n            });\n        }\n        return {\n            ft: functionCall.ft,\n            p: parameters\n        };\n    }\n    valueToJSON(functionObject, columnAliases, forSelectClause, fromFunctionObject, queryUtils, fieldUtils, relationManager) {\n        if (!functionObject) {\n            throw new Error(`Function object must be provided to valueToJSON function.`);\n        }\n        if (!fromFunctionObject && functionObject instanceof QField) {\n            return functionObject.toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager);\n        }\n        let value = functionObject.value;\n        switch (typeof value) {\n            case 'boolean':\n            case 'number':\n            case 'string':\n                return columnAliases.entityAliases.getParams()\n                    .getNextAlias(functionObject);\n            case 'object':\n                if (value instanceof Date) {\n                    return columnAliases.entityAliases.getParams()\n                        .getNextAlias(functionObject);\n                }\n                else if (value instanceof Array) {\n                    return columnAliases.entityAliases.getParams()\n                        .getNextAlias(functionObject);\n                }\n                else if (value === null) {\n                    return columnAliases.entityAliases.getParams()\n                        .getNextAlias(functionObject);\n                }\n                else {\n                    throw new Error(`Unexpected query parameter type allowed types are:\r\nboolean | Date | Date[] | number | number[] | string | string[]\r\n`);\n                }\n            case 'undefined':\n                throw new Error(`Undefined is not allowed as a query parameter`);\n            default:\n                throw new Error(`Unexpected query parameter type allowed types are:\r\nboolean | Date | Date[] | number | number[] | string | string[]\r\n`);\n        }\n        // TODO: this never gets called, is this needed?\n        /*\n        if (value === null || value instanceof Date) {\n            return columnAliases.entityAliases.getParams()\n                .getNextAlias(functionObject as IQFunction<any>)\n        }\n        if (value instanceof QField) {\n            return value.toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager)\n        }\n        // must be a field sub-query\n        let rawFieldQuery: RawFieldQuery<any> = value\n        return fieldUtils.getFieldQueryJson(\n            rawFieldQuery, columnAliases.entityAliases, queryUtils)\n         */\n    }\n}\n//# sourceMappingURL=Field.js.map","import { QField } from \"./Field\";\n/**\n * Created by Papa on 10/25/2016.\n */\nexport class QOperableField extends QField {\n    constructor(dbColumn, dbProperty, q, objectType, operation) {\n        super(dbColumn, dbProperty, q, objectType);\n        this.operation = operation;\n    }\n    equals(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.equals(this, value);\n    }\n    greaterThan(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.greaterThan(this, value);\n    }\n    greaterThanOrEquals(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.greaterThanOrEquals(this, value);\n    }\n    isNotNull() {\n        return this.operation.isNotNull(this);\n    }\n    isNull() {\n        return this.operation.isNull(this);\n    }\n    in(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.in(this, value);\n    }\n    lessThan(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.lessThan(this, value);\n    }\n    lessThanOrEquals(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.lessThanOrEquals(this, value);\n    }\n    notEquals(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.notEquals(this, value);\n    }\n    notIn(values) {\n        values = values.map((value) => {\n            if (value instanceof Function) {\n                return value();\n            }\n            return value;\n        });\n        return this.operation.notIn(this, values);\n    }\n}\n//# sourceMappingURL=OperableField.js.map","import { JSONClauseObjectType, SQLDataType } from '@airport/ground-control';\nimport { BooleanOperation } from '../operation/BooleanOperation';\nimport { QOperableField } from './OperableField';\nexport class QBooleanField extends QOperableField {\n    constructor(dbColumn, dbProperty, q, objectType = JSONClauseObjectType.FIELD) {\n        super(dbColumn, dbProperty, q, objectType, new BooleanOperation());\n    }\n    getInstance(qEntity = this.q) {\n        return this.copyFunctions(new QBooleanField(this.dbColumn, this.dbProperty, qEntity, this.objectType));\n    }\n}\nexport class QBooleanFunction extends QBooleanField {\n    constructor(value, isQueryParameter = false) {\n        super({ type: SQLDataType.BOOLEAN }, null, null, JSONClauseObjectType.FIELD_FUNCTION);\n        this.value = value;\n        this.isQueryParameter = isQueryParameter;\n    }\n    getInstance() {\n        return this.copyFunctions(new QBooleanFunction(this.value));\n    }\n    toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager) {\n        let json = this.operableFunctionToJson(this, columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager);\n        if (this.isQueryParameter) {\n            this.parameterAlias = json.v;\n        }\n        return json;\n    }\n}\n//# sourceMappingURL=BooleanField.js.map","import { OperationCategory } from \"@airport/ground-control\";\nimport { ValueOperation } from \"./Operation\";\n/**\n * Created by Papa on 6/20/2016.\n */\nexport class DateOperation extends ValueOperation {\n    constructor() {\n        super(OperationCategory.DATE);\n    }\n}\n//# sourceMappingURL=DateOperation.js.map","import { JSONClauseObjectType, SQLDataType } from '@airport/ground-control';\nimport { DateOperation } from '../operation/DateOperation';\nimport { QOperableField } from './OperableField';\nexport class QDateField extends QOperableField {\n    constructor(dbColumn, dbProperty, q, objectType = JSONClauseObjectType.FIELD) {\n        super(dbColumn, dbProperty, q, objectType, new DateOperation());\n    }\n    getInstance(qEntity = this.q) {\n        return this.copyFunctions(new QDateField(this.dbColumn, this.dbProperty, qEntity, this.objectType));\n    }\n}\nexport class QDateFunction extends QDateField {\n    constructor(value, isQueryParameter = false) {\n        super({ type: SQLDataType.DATE }, null, null, JSONClauseObjectType.FIELD_FUNCTION);\n        this.value = value;\n        this.isQueryParameter = isQueryParameter;\n    }\n    getInstance() {\n        return this.copyFunctions(new QDateFunction(this.value, this.isQueryParameter));\n    }\n    toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager) {\n        let json = this.operableFunctionToJson(this, columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager);\n        if (this.isQueryParameter) {\n            this.parameterAlias = json.v;\n        }\n        return json;\n    }\n}\nexport class QDateArrayFunction extends QDateFunction {\n    constructor(value, isQueryParameter) {\n        super(value, isQueryParameter);\n        this.value = value;\n    }\n    getInstance() {\n        return this.copyFunctions(new QDateArrayFunction(this.value, this.isQueryParameter));\n    }\n}\n//# sourceMappingURL=DateField.js.map","import { OperationCategory } from \"@airport/ground-control\";\nimport { ValueOperation } from \"./Operation\";\n/**\n * Created by Papa on 6/20/2016.\n */\nexport class NumberOperation extends ValueOperation {\n    constructor() {\n        super(OperationCategory.NUMBER);\n    }\n}\n//# sourceMappingURL=NumberOperation.js.map","import { JSONClauseObjectType, SQLDataType } from '@airport/ground-control';\nimport { NumberOperation } from '../operation/NumberOperation';\nimport { QOperableField } from './OperableField';\nexport class QNumberField extends QOperableField {\n    constructor(dbColumn, dbProperty, q, objectType = JSONClauseObjectType.FIELD) {\n        super(dbColumn, dbProperty, q, objectType, new NumberOperation());\n    }\n    getInstance(qEntity = this.q) {\n        return this.copyFunctions(new QNumberField(this.dbColumn, this.dbProperty, qEntity, this.objectType));\n    }\n}\nexport class QNumberFunction extends QNumberField {\n    constructor(value, isQueryParameter = false) {\n        super({ type: SQLDataType.NUMBER }, null, null, JSONClauseObjectType.FIELD_FUNCTION);\n        this.value = value;\n        this.isQueryParameter = isQueryParameter;\n    }\n    getInstance() {\n        return this.copyFunctions(new QNumberFunction(this.value, this.isQueryParameter));\n    }\n    toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager) {\n        let json = this.operableFunctionToJson(this, columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager);\n        if (this.isQueryParameter) {\n            this.parameterAlias = json.v;\n        }\n        return json;\n    }\n}\nexport class QNumberArrayFunction extends QNumberFunction {\n    constructor(value, isQueryParameter) {\n        super(value, isQueryParameter);\n        this.value = value;\n    }\n    getInstance() {\n        return this.copyFunctions(new QNumberArrayFunction(this.value, this.isQueryParameter));\n    }\n}\n//# sourceMappingURL=NumberField.js.map","import { OperationCategory, SqlOperator } from \"@airport/ground-control\";\nimport { ValueOperation } from \"./Operation\";\n/**\n * Created by Papa on 6/20/2016.\n */\nexport class StringOperation extends ValueOperation {\n    constructor() {\n        super(OperationCategory.STRING);\n    }\n    like(lValue, rValue\n    // TODO: implement ReqExp\n    //| RegExp\n    ) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.LIKE,\n            r: rValue\n        };\n    }\n}\n//# sourceMappingURL=StringOperation.js.map","import { JSONClauseObjectType, SQLDataType } from '@airport/ground-control';\nimport { StringOperation } from '../operation/StringOperation';\nimport { QOperableField } from './OperableField';\nexport class QStringField extends QOperableField {\n    constructor(dbColumn, dbProperty, q, objectType = JSONClauseObjectType.FIELD) {\n        super(dbColumn, dbProperty, q, objectType, new StringOperation());\n    }\n    getInstance(qEntity = this.q) {\n        return this.copyFunctions(new QStringField(this.dbColumn, this.dbProperty, qEntity, this.objectType));\n    }\n    like(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.like(this, value);\n    }\n}\nexport class QStringFunction extends QStringField {\n    constructor(value, isQueryParameter = false) {\n        super({ type: SQLDataType.STRING }, null, null, JSONClauseObjectType.FIELD_FUNCTION);\n        this.value = value;\n        this.isQueryParameter = isQueryParameter;\n    }\n    getInstance() {\n        return this.copyFunctions(new QStringFunction(this.value, this.isQueryParameter));\n    }\n    toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager) {\n        let json = this.operableFunctionToJson(this, columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager);\n        if (this.isQueryParameter) {\n            this.parameterAlias = json.v;\n        }\n        return json;\n    }\n}\nexport class QStringArrayFunction extends QStringFunction {\n    constructor(value, isQueryParameter) {\n        super(value, isQueryParameter);\n        this.value = value;\n    }\n    getInstance() {\n        return this.copyFunctions(new QStringArrayFunction(this.value, this.isQueryParameter));\n    }\n}\n//# sourceMappingURL=StringField.js.map","import { OperationCategory, SqlOperator } from \"@airport/ground-control\";\nimport { ValueOperation } from \"./Operation\";\n/**\n * Created by papa on 7/13/17.\n */\nexport class UntypedOperation extends ValueOperation {\n    constructor() {\n        super(OperationCategory.UNTYPED);\n    }\n    like(lValue, rValue\n    // TODO: implement ReqExp\n    //| RegExp\n    ) {\n        return {\n            c: this.category,\n            l: lValue,\n            o: SqlOperator.LIKE,\n            r: rValue\n        };\n    }\n}\n//# sourceMappingURL=UntypedOperation.js.map","import { JSONClauseObjectType } from '@airport/ground-control';\nimport { UntypedOperation } from '../operation/UntypedOperation';\nimport { QOperableField } from './OperableField';\nexport class QUntypedField extends QOperableField {\n    constructor(dbColumn, dbProperty, q, objectType = JSONClauseObjectType.FIELD) {\n        super(dbColumn, dbProperty, q, objectType, new UntypedOperation());\n    }\n    getInstance(qEntity = this.q) {\n        return this.copyFunctions(new QUntypedField(this.dbColumn, this.dbProperty, qEntity, this.objectType));\n    }\n    like(value) {\n        if (value instanceof Function) {\n            value = value();\n        }\n        return this.operation.like(this, value);\n    }\n}\nexport class QUntypedFunction extends QUntypedField {\n    constructor(value, isQueryParameter = false) {\n        // super(<any>{type: SQLDataType.ANY}, null, null, JSONClauseObjectType.FIELD_FUNCTION)\n        super({ type: null }, null, null, JSONClauseObjectType.FIELD_FUNCTION);\n        this.value = value;\n        this.isQueryParameter = isQueryParameter;\n        throw new Error(`Untyped data type is not supported`);\n    }\n    getInstance() {\n        return this.copyFunctions(new QUntypedFunction(this.value));\n    }\n    toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager) {\n        let json = this.operableFunctionToJson(this, columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager);\n        if (this.isQueryParameter) {\n            this.parameterAlias = json.v;\n        }\n        return json;\n    }\n}\n//# sourceMappingURL=UntypedField.js.map","import { EntityRelationType, SQLDataType } from '@airport/ground-control';\nimport { QEntity } from '../core/entity/Entity';\nimport { QOneToManyRelation, QRepositoryEntityOneToManyRelation } from '../core/entity/OneToManyRelation';\nimport { QRelation, QRepositoryEntityRelation } from '../core/entity/Relation';\nimport { QBooleanField } from '../core/field/BooleanField';\nimport { QDateField } from '../core/field/DateField';\nimport { QNumberField } from '../core/field/NumberField';\nimport { QStringField } from '../core/field/StringField';\nimport { QUntypedField } from '../core/field/UntypedField';\n/**\n * From:\n * http://js-bits.blogspot.com/2010/08/javascript-inheritance-done-right.html\n * Via:\n * https://stackoverflow.com/questions/6617780/how-to-call-parent-constructor\n */\nexport function extend(base, sub, methods) {\n    sub.prototype = Object.create(base.prototype);\n    sub.prototype.constructor = sub;\n    sub.base = base.prototype;\n    // Copy the methods passed in to the prototype\n    for (const name in methods) {\n        sub.prototype[name] = methods[name];\n    }\n    // so we can define the constructor inline\n    return sub;\n}\nexport function getColumnQField(entity, property, q, column) {\n    switch (column.type) {\n        case SQLDataType.ANY:\n            return new QUntypedField(column, property, q);\n        case SQLDataType.BOOLEAN:\n            return new QBooleanField(column, property, q);\n        case SQLDataType.DATE:\n            return new QDateField(column, property, q);\n        case SQLDataType.NUMBER:\n            return new QNumberField(column, property, q);\n        case SQLDataType.JSON:\n        case SQLDataType.STRING:\n            return new QStringField(column, property, q);\n        default:\n            throw new Error(`Unsupported data type for property ${entity.applicationVersion.application.name}.${entity.name}.${property.name}`);\n    }\n}\nexport function getQRelation(entity, property, q, allQApplications, applicationUtils, relationManager) {\n    const relation = property.relation[0];\n    switch (relation.relationType) {\n        case EntityRelationType.MANY_TO_ONE:\n            const relationEntity = relation.relationEntity;\n            const relationApplication = relationEntity.applicationVersion.application;\n            const qIdRelationConstructor = allQApplications[relationApplication.index]\n                .__qIdRelationConstructors__[relationEntity.index];\n            // return new qIdRelationConstructor(relationEntity, property, q)\n            return new qIdRelationConstructor(relation.relationEntity, relation, q);\n        case EntityRelationType.ONE_TO_MANY:\n            if (entity.isRepositoryEntity) {\n                return new QRepositoryEntityOneToManyRelation(relation, q, applicationUtils, relationManager);\n            }\n            else {\n                return new QOneToManyRelation(relation, q, applicationUtils, relationManager);\n            }\n        default:\n            throw new Error(`Unknown EntityRelationType: ${relation.relationType}.`);\n    }\n}\nexport function getQEntityConstructor(allQApplications) {\n    // ChildQEntity refers to the constructor\n    var ChildQEntity = function (entity, applicationUtils, relationManager, nextChildJoinPosition, dbRelation, joinType) {\n        ChildQEntity.base.constructor.call(this, entity, nextChildJoinPosition, dbRelation, joinType);\n        entity.properties.forEach((property) => {\n            let qFieldOrRelation;\n            if (property.relation && property.relation.length) {\n                qFieldOrRelation = getQRelation(entity, property, this, allQApplications, applicationUtils, relationManager);\n                for (const propertyColumn of property.propertyColumns) {\n                    addColumnQField(entity, property, this, propertyColumn.column);\n                }\n            }\n            else {\n                qFieldOrRelation = addColumnQField(entity, property, this, property.propertyColumns[0].column);\n            }\n            this[property.name] = qFieldOrRelation;\n        });\n        // entity.__qConstructor__ = ChildQEntity\n    };\n    extend(QEntity, ChildQEntity, {});\n    return ChildQEntity;\n}\nexport function addColumnQField(entity, property, q, column) {\n    const qFieldOrRelation = getColumnQField(entity, property, q, column);\n    q.__driver__.allColumns[column.index]\n        = qFieldOrRelation;\n    if (column.idIndex || column.idIndex === 0) {\n        q.__driver__.idColumns[column.idIndex]\n            = qFieldOrRelation;\n    }\n    return qFieldOrRelation;\n}\nexport function getQEntityIdRelationConstructor(dbEntity) {\n    function QEntityIdRelation(entity, relation, qEntity) {\n        QEntityIdRelation.base.constructor.call(this, relation, qEntity);\n        getQEntityIdFields(this, entity, qEntity, relation.property);\n        // (<any>entity).__qConstructor__.__qIdRelationConstructor__ = QEntityIdRelation\n    }\n    if (dbEntity.isRepositoryEntity) {\n        extend(QRepositoryEntityRelation, QEntityIdRelation, {});\n    }\n    else {\n        extend(QRelation, QEntityIdRelation, {});\n    }\n    return QEntityIdRelation;\n}\n/**\n * Set all fields behind an id relation.  For example\n *\n * QA.id\n *\n * or\n *\n * QA.rel1.id\n *\n * or\n *\n * QA.rel2.otherRel.id\n * QA.rel2.id\n *\n * @param addToObject  Object to add to (Ex: QA | QA.rel1 | QA.rel2.otherRel\n * @param relationEntity  Entity to which the fields belong (Ex: QA, QRel1, QRel2, QOtherRel)\n * @param utils\n * @param parentProperty  The parent property from which the current property was\n *    navigated to\n * @param relationColumnMap  DbColumn map for the current path of properties\n *  (QA.rel2.otherRel), keyed by the column from the One side of the relation\n */\nexport function getQEntityIdFields(addToObject, relationEntity, qEntity, parentProperty, relationColumnMap) {\n    if (!relationColumnMap) {\n        const parentRelation = parentProperty.relation[0];\n        const relationColumns = parentRelation.manyRelationColumns;\n        relationColumnMap = new Map();\n        for (const relationColumn of relationColumns) {\n            relationColumnMap.set(relationColumn.oneColumn, relationColumn.manyColumn);\n        }\n    }\n    relationEntity.properties.forEach((property) => {\n        if (!property.isId) {\n            return;\n        }\n        let qFieldOrRelation;\n        // If it's a relation property (and therefore has backing columns)\n        if (property.relation && property.relation.length) {\n            const relation = property.relation[0];\n            const relationColumns = relation.manyRelationColumns;\n            for (const relationColumn of relationColumns) {\n                const originalColumn = relationColumnMap.get(relationColumn.manyColumn);\n                // Remove the mapping of the parent relation\n                relationColumnMap.delete(relationColumn.manyColumn);\n                // And replace it with the nested relation\n                relationColumnMap.set(relationColumn.oneColumn, originalColumn);\n            }\n            qFieldOrRelation = getQEntityIdFields({}, relation.relationEntity, qEntity, parentProperty, relationColumnMap);\n        }\n        else {\n            const originalColumn = relationColumnMap.get(property.propertyColumns[0].column);\n            qFieldOrRelation = getColumnQField(relationEntity, parentProperty, qEntity, originalColumn);\n        }\n        addToObject[property.name] = qFieldOrRelation;\n    });\n    return addToObject;\n}\nexport function setQApplicationEntities(application, qApplication, allQApplications) {\n    // const entities = orderEntitiesByIdDependencies(application.currentVersion[0].applicationVersion.entities,\n    // application)\n    qApplication.__qIdRelationConstructors__ = [];\n    qApplication.__qConstructors__ = {};\n    // let haveMissingDependencies\n    // do {\n    // \thaveMissingDependencies = false\n    // NOTE: only need to compute the keys of entities for Many-to-One(s)\n    // Many-to-Ones must reference the table by primary key in order to\n    // guarantee a single record.  Any other type of join may return multiple\n    // records and is in fact a Many-to-Many\n    application.currentVersion[0].applicationVersion.entities.forEach((\n    // entities.forEach((\n    entity) => {\n        // NOTE: an @Id column is guaranteed to be present in only one property\n        for (const idColumn of entity.idColumns) {\n            if (idColumn.manyRelationColumns\n                && idColumn.manyRelationColumns.length) {\n                const oneColumn = idColumn.manyRelationColumns[0].oneColumn;\n                const relatedEntity = oneColumn.entity;\n                const relatedQApplication = allQApplications[relatedEntity.applicationVersion.application.index];\n                if (!relatedQApplication) {\n                    throw new Error(`QApplication not yet initialized for ID relation:\r\n\t\t\t\t\t${entity.name}.${oneColumn.name}\r\n\t\t\t\t\t`);\n                }\n                // const manyColumn = idColumn.manyRelationColumns[0].manyColumn\n                // if (relatedEntity.id === manyColumn.entity.id\n                // \t&& relatedEntity.applicationVersion.application.index\n                // \t=== manyColumn.entity.applicationVersion.application.index) {\n                // \tcontinue\n                // }\n                // const relatedQEntityConstructor =\n                // qApplication.__qConstructors__[relatedEntity.index] if (!relatedQEntityConstructor)\n                // { throw new Error(`QEntity not yet initialized for ID relation:\n                // ${entity.name}.${manyColumn.name} `) haveMissingDependencies = true }\n            }\n        }\n        const qIdRelationConstructor = getQEntityIdRelationConstructor(entity);\n        qApplication.__qIdRelationConstructors__[entity.index] = qIdRelationConstructor;\n        // TODO: compute many-to-many relations\n        const qConstructor = getQEntityConstructor(allQApplications);\n        qApplication.__qConstructors__[entity.index] = qConstructor;\n        if (!Object.getOwnPropertyNames(qApplication)\n            .filter(propertyName => propertyName === entity.name).length) {\n            Object.defineProperty(qApplication, entity.name, {\n                get: function () {\n                    return new this.__qConstructors__[entity.index](entity);\n                }\n            });\n        }\n    });\n    // } while (haveMissingDependencies)\n}\nexport function orderApplicationsInOrderOfPrecedence(applications) {\n    const applicationWithDepsMap = new Map();\n    const applicationsWithDeps = applications.map(application => {\n        const dependencies = new Set();\n        for (const applicationReference of application.currentVersion[0]\n            .applicationVersion.references) {\n            dependencies.add(applicationReference.referencedApplicationVersion.application.index);\n        }\n        const applicationWithDependencies = {\n            application,\n            dependencies\n        };\n        applicationWithDepsMap.set(application.index, applicationWithDependencies);\n        return applicationWithDependencies;\n    });\n    applicationsWithDeps.sort((orderedApplication1, orderedApplication2) => {\n        if (applicationDependsOn(orderedApplication1, orderedApplication2.application.index, applicationWithDepsMap)) {\n            return 1;\n        }\n        else if (applicationDependsOn(orderedApplication2, orderedApplication1.application.index, applicationWithDepsMap)) {\n            return -1;\n        }\n        return 0;\n    });\n    return applicationsWithDeps.map(applicationWithDeps => applicationWithDeps.application);\n}\nexport function applicationDependsOn(dependantApplication, dependsOnApplicationIndex, applicationWithDepsMap) {\n    if (dependantApplication.dependencies.has(dependsOnApplicationIndex)) {\n        return true;\n    }\n    // for(const dependencyApplicationIndex of dependantApplication.dependencies) {\n    //\n    // }\n    return false;\n}\n//# sourceMappingURL=qApplicationBuilderUtils.js.map","import { extend } from '../../utils/qApplicationBuilderUtils';\nimport { QRelation, QRepositoryEntityRelation } from './Relation';\n/**\n * Created by Papa on 10/25/2016.\n */\n/*\n * Cannot use 'class' syntax because it brakes dynamic creation of subclasses.\n * With 'class' browser reports:\n *   Class constructor QRelation cannot be invoked without 'new'\n * When calling:\n *   Q...Relation.base.constructor.call(this, relation, qEntity)\n */\nexport function QOneToManyRelation(dbRelation, parentQ, applicationUtils, repationManager) {\n    QOneToManyRelation.base.constructor.call(this, dbRelation, parentQ, applicationUtils, repationManager);\n}\nextend(QRelation, QOneToManyRelation, {});\nexport function QRepositoryEntityOneToManyRelation(dbRelation, parentQ, applicationUtils, repationManager) {\n    QRepositoryEntityOneToManyRelation.base.constructor.call(this, dbRelation, parentQ, applicationUtils, repationManager);\n}\nextend(QRepositoryEntityRelation, QRepositoryEntityOneToManyRelation, {});\n//# sourceMappingURL=OneToManyRelation.js.map","import { JSONClauseObjectType } from '@airport/ground-control';\nimport { QField } from './Field';\n/**\n * Created by Papa on 11/29/2016.\n */\nexport class QNullFunction extends QField {\n    constructor() {\n        super(null, null, null, JSONClauseObjectType.FIELD_FUNCTION);\n        this.value = null;\n    }\n    getInstance() {\n        return this.copyFunctions(new QNullFunction());\n    }\n    toJSON(columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager) {\n        return this.operableFunctionToJson(this, columnAliases, forSelectClause, queryUtils, fieldUtils, relationManager);\n    }\n}\n//# sourceMappingURL=NullFunction.js.map","import { SQLDataType } from '@airport/ground-control';\nimport { QBooleanFunction } from './BooleanField';\nimport { QDateFunction } from './DateField';\nimport { QNullFunction } from './NullFunction';\nimport { QNumberFunction } from './NumberField';\nimport { QStringFunction } from './StringField';\n/**\n * Created by Papa on 12/31/2016.\n */\nexport const bool = function (primitive) {\n    if (typeof primitive !== 'boolean') {\n        throw new Error(`bool() accepts booleans only.`);\n    }\n    return new QBooleanFunction(primitive);\n};\nexport const date = function (primitive) {\n    if (!(primitive instanceof Date)) {\n        throw new Error(`date() accepts Dates only.`);\n    }\n    return new QDateFunction(primitive);\n};\nexport const num = function (primitive) {\n    if (typeof primitive !== 'number') {\n        throw new Error(`num() accepts numbers only.`);\n    }\n    return new QNumberFunction(primitive);\n};\nexport const str = function (primitive) {\n    if (typeof primitive !== 'string') {\n        throw new Error(`str() accepts strings only.`);\n    }\n    return new QStringFunction(primitive);\n};\nexport function wrapPrimitive(value) {\n    switch (typeof value) {\n        case 'boolean':\n            return bool(value);\n        case 'number':\n            return num(value);\n        case 'string':\n            return str(value);\n        case 'undefined':\n            throw new Error(`Cannot use an 'undefined' value in an operation.`);\n    }\n    if (value === null) {\n        return new QNullFunction();\n    }\n    if (value instanceof Date) {\n        return date(value);\n    }\n    return value;\n}\nexport function getPrimitiveValue(value, dbColumn, rowIndex, datesToNumbers = true) {\n    switch (dbColumn.type) {\n        case SQLDataType.ANY: {\n            assertDataType([\n                'boolean', 'number', 'object', 'string'\n            ], dbColumn, rowIndex, value);\n            break;\n        }\n        case SQLDataType.BOOLEAN: {\n            assertDataType([\n                'boolean'\n            ], dbColumn, rowIndex, value);\n            break;\n        }\n        case SQLDataType.DATE: {\n            assertDataType([\n                'number', 'object'\n            ], dbColumn, rowIndex, value);\n            break;\n        }\n        case SQLDataType.JSON: {\n            assertDataType([\n                'object'\n            ], dbColumn, rowIndex, value);\n            break;\n        }\n        case SQLDataType.NUMBER: {\n            assertDataType([\n                'number'\n            ], dbColumn, rowIndex, value);\n            break;\n        }\n        case SQLDataType.STRING: {\n            assertDataType([\n                'string'\n            ], dbColumn, rowIndex, value);\n            break;\n        }\n        default:\n            throw new Error('Unexpected SQLDataType: ' + dbColumn.type);\n    }\n    switch (typeof value) {\n        case 'boolean':\n            return value ? 1 : 0;\n        case 'number':\n        case 'string':\n            // FIXME: prevent SQL injection\n            return value;\n        case 'object': {\n            if (value === null) {\n                return value;\n            }\n            if (value instanceof Date) {\n                if (dbColumn.type !== SQLDataType.DATE) {\n                    throw new Error(`Unexpected Date object for row: ${rowIndex + 1}, column: ${getColumnName(dbColumn)}`);\n                }\n                return datesToNumbers ? value.getTime() : value;\n            }\n            else {\n                if (dbColumn.type !== SQLDataType.JSON) {\n                    throw new Error(`Unexpected Json object for row: ${rowIndex + 1}, column: ${getColumnName(dbColumn)}`);\n                }\n                return JSON.stringify(value);\n            }\n        }\n        case 'undefined':\n            throw new Error(`Cannot use an 'undefined' value in an operation.`);\n        default:\n            throw new Error(`Unexpected object in operation.`);\n    }\n}\nfunction assertDataType(typesOfData, dbColumn, rowIndex, value) {\n    if (typesOfData.indexOf(typeof value) < -1) {\n        const expectedDataTypes = typesOfData.join(', ');\n        throw new Error(`Unexpected typeof value for row: ${rowIndex + 1}, column: ${getColumnName(dbColumn)}.  Expecting: ${expectedDataTypes}`);\n    }\n}\nfunction getColumnName(dbColumn) {\n    return dbColumn.name\n        ? dbColumn.name\n        : dbColumn.propertyColumns[0].property.name;\n}\n//# sourceMappingURL=WrapperFunctions.js.map","import { JSONClauseObjectType, OperationCategory, SQLDataType, SqlFunction, SqlOperator } from '@airport/ground-control';\nimport { QBooleanField, QBooleanFunction } from './BooleanField';\nimport { QDateField, QDateFunction } from './DateField';\nimport { QNumberField, QNumberFunction } from './NumberField';\nimport { QOperableField } from './OperableField';\nimport { QStringField, QStringFunction } from './StringField';\nimport { bool, date, num, str } from './WrapperFunctions';\nfunction getSqlFunctionCall(sqlFunction, parameters) {\n    if (parameters) {\n        parameters = parameters.map((parameter) => {\n            switch (typeof parameter) {\n                case 'boolean':\n                    return bool(parameter);\n                case 'number':\n                    return num(parameter);\n                case 'string':\n                    return str(parameter);\n                case 'undefined':\n                    throw new Error(`'undefined' cannot be used as a function parameter`);\n            }\n            if (parameter instanceof Date) {\n                return date(parameter);\n            }\n            return parameter;\n        });\n    }\n    return {\n        ft: sqlFunction,\n        p: parameters\n    };\n}\nexport const abs = function (numeric) {\n    if (numeric instanceof QNumberField) {\n        return numeric.applySqlFunction(getSqlFunctionCall(SqlFunction.AVG));\n    }\n    else {\n        return new QNumberFunction(numeric).applySqlFunction(getSqlFunctionCall(SqlFunction.ABS));\n    }\n};\nexport const avg = function (numeric) {\n    if (numeric instanceof QNumberField) {\n        return numeric.applySqlFunction(getSqlFunctionCall(SqlFunction.AVG));\n    }\n    else {\n        return new QNumberFunction(numeric).applySqlFunction(getSqlFunctionCall(SqlFunction.AVG));\n    }\n};\nexport function getFunctionObject(value) {\n    switch (typeof value) {\n        case 'boolean':\n            return new QBooleanFunction(value);\n        case 'number':\n            return new QNumberFunction(value);\n        case 'string':\n            return new QStringFunction(value);\n    }\n    if (value instanceof Date) {\n        return new QDateFunction(value);\n    }\n    let selectClause = value.select;\n    if (selectClause instanceof QDistinctFunction) {\n        selectClause = selectClause.getSelectClause();\n    }\n    if (selectClause instanceof QBooleanField) {\n        return new QBooleanFunction(value);\n    }\n    else if (selectClause instanceof QDateField) {\n        return new QDateFunction(value);\n    }\n    else if (selectClause instanceof QNumberField) {\n        return new QNumberFunction(value);\n    }\n    else if (selectClause instanceof QStringField) {\n        return new QStringFunction(value);\n    }\n    throw new Error(`Function rValue must be a primitive, Date, Field or Field query`);\n}\nexport const count = function (value) {\n    if (value instanceof QOperableField) {\n        return value.applySqlFunction(getSqlFunctionCall(SqlFunction.COUNT));\n    }\n    else {\n        return getFunctionObject(value)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.COUNT));\n    }\n};\nexport const max = function (value) {\n    if (value instanceof QOperableField) {\n        return value.applySqlFunction(getSqlFunctionCall(SqlFunction.MAX));\n    }\n    else {\n        return getFunctionObject(value)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.MAX));\n    }\n};\nexport const min = function (value) {\n    if (value instanceof QOperableField) {\n        return value.applySqlFunction(getSqlFunctionCall(SqlFunction.MIN));\n    }\n    else {\n        return getFunctionObject(value)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.MIN));\n    }\n};\nexport const sum = function (numeric) {\n    if (numeric instanceof QNumberField) {\n        return numeric.applySqlFunction(getSqlFunctionCall(SqlFunction.SUM));\n    }\n    else {\n        return new QNumberFunction(numeric)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.SUM));\n    }\n};\nexport const plus = function (numeric1, numeric2) {\n    if (numeric1 instanceof QNumberField) {\n        return numeric1.applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, [numeric2]));\n    }\n    else {\n        return new QNumberFunction(numeric1)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, [numeric2]));\n    }\n};\nexport function coalesce(...values) {\n    if (!values || !values.length) {\n        throw new Error(`No arguments provided to the coalesce function`);\n    }\n    let dataType;\n    const firstValue = values[0];\n    // if (firstValue instanceof QUntypedField) {\n    // \tdataType = SQLDataType.ANY\n    // } else \n    if (firstValue instanceof QBooleanField || typeof firstValue === 'boolean') {\n        dataType = SQLDataType.BOOLEAN;\n    }\n    else if (firstValue instanceof QDateField || firstValue instanceof Date) {\n        dataType = SQLDataType.DATE;\n    }\n    else if (firstValue instanceof QNumberField || typeof firstValue === 'number') {\n        dataType = SQLDataType.NUMBER;\n    }\n    else if (firstValue instanceof QStringField || typeof firstValue === 'string') {\n        dataType = SQLDataType.STRING;\n    }\n    else {\n        throw new Error(`Unexpected Field Type: ${firstValue.constructor.name}`);\n        // dataType = SQLDataType.ANY\n    }\n    const otherValues = values.slice(1, values.length);\n    if (firstValue instanceof QOperableField) {\n        return firstValue.applySqlFunction(getSqlFunctionCall(SqlFunction.COALESCE, otherValues));\n    }\n    else {\n        switch (dataType) {\n            // case SQLDataType.ANY:\n            // \treturn new QUntypedFunction(<any>firstValue)\n            // \t\t.applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, otherValues))\n            case SQLDataType.BOOLEAN:\n                return new QBooleanFunction(firstValue)\n                    .applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, otherValues));\n            case SQLDataType.DATE:\n                return new QDateFunction(firstValue)\n                    .applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, otherValues));\n            case SQLDataType.NUMBER:\n                return new QNumberFunction(firstValue)\n                    .applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, otherValues));\n            case SQLDataType.STRING:\n                return new QStringFunction(firstValue)\n                    .applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, otherValues));\n            default:\n                throw new Error(`Unexpected SQLDataType: ` + dataType);\n        }\n    }\n}\nexport const ucase = function (stringValue) {\n    if (stringValue instanceof QStringField) {\n        return stringValue.applySqlFunction(getSqlFunctionCall(SqlFunction.UCASE));\n    }\n    else {\n        return new QStringFunction(stringValue)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.UCASE));\n    }\n};\nexport const lcase = function (stringValue) {\n    if (stringValue instanceof QStringField) {\n        return stringValue.applySqlFunction(getSqlFunctionCall(SqlFunction.LCASE));\n    }\n    else {\n        return new QStringFunction(stringValue)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.LCASE));\n    }\n};\nexport const mid = function (stringValue, start, length) {\n    if (stringValue instanceof QStringField) {\n        return stringValue.applySqlFunction(getSqlFunctionCall(SqlFunction.MID, [start, length]));\n    }\n    else {\n        return new QStringFunction(stringValue)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.MID, [start, length]));\n    }\n};\nexport const len = function (stringValue) {\n    if (stringValue instanceof QStringField) {\n        return stringValue.applySqlFunction(getSqlFunctionCall(SqlFunction.LEN));\n    }\n    else {\n        return new QStringFunction(stringValue)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.LEN));\n    }\n};\nexport const round = function (numeric, digits = 0) {\n    if (numeric instanceof QNumberField) {\n        return numeric.applySqlFunction(getSqlFunctionCall(SqlFunction.ROUND, [digits]));\n    }\n    else {\n        return new QNumberFunction(numeric)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.ROUND, [digits]));\n    }\n};\nexport const now = function () {\n    return new QDateFunction(null)\n        .applySqlFunction(getSqlFunctionCall(SqlFunction.NOW));\n};\nexport const format = function (format, ...formatParameters) {\n    if (format instanceof QStringField) {\n        return format.applySqlFunction(getSqlFunctionCall(SqlFunction.FORMAT, formatParameters));\n    }\n    else {\n        return new QStringFunction(format)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.FORMAT, formatParameters));\n    }\n};\nexport const replace = function (stringValue, toReplace, replaceWith) {\n    if (stringValue instanceof QStringField) {\n        return stringValue.applySqlFunction(getSqlFunctionCall(SqlFunction.REPLACE, [toReplace, replaceWith]));\n    }\n    else {\n        return new QStringFunction(stringValue)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.REPLACE, [toReplace, replaceWith]));\n    }\n};\nexport const trim = function (stringField) {\n    if (stringField instanceof QStringField) {\n        return stringField.applySqlFunction(getSqlFunctionCall(SqlFunction.TRIM));\n    }\n    else {\n        return new QStringFunction(stringField)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.TRIM));\n    }\n};\nexport class StandAloneFunction {\n}\nexport const distinct = function (selectClause) {\n    let distinctFunction = new QDistinctFunction(selectClause);\n    distinctFunction.applySqlFunction(getSqlFunctionCall(SqlFunction.DISTINCT));\n    return distinctFunction;\n};\nexport class QDistinctFunction extends StandAloneFunction {\n    constructor(selectClause) {\n        super();\n        this.selectClause = selectClause;\n        this.__appliedFunctions__ = [];\n    }\n    static getSelect(distinct) {\n        return distinct.__appliedFunctions__[0].p[0];\n    }\n    applySqlFunction(sqlFunctionCall) {\n        this.__appliedFunctions__.push(sqlFunctionCall);\n        return this;\n    }\n    getSelectClause() {\n        return this.selectClause;\n    }\n    toJSON(parsedSelectClause) {\n        if (this.__appliedFunctions__.length != 1) {\n            throw new Error(`Not expecting and parent or child functions on \"distinct\"`);\n        }\n        if (!this.selectClause) {\n            throw new Error(`SELECT clause is missing in \"distinct\" function.`);\n        }\n        let appliedFunctions = [\n            getSqlFunctionCall(SqlFunction.DISTINCT)\n        ];\n        return {\n            appliedFunctions: appliedFunctions,\n            dt: null,\n            fa: null,\n            ot: JSONClauseObjectType.DISTINCT_FUNCTION,\n            v: parsedSelectClause\n        };\n    }\n}\nexport const exists = function (rawQuery) {\n    let selectClause = rawQuery.select;\n    if (!selectClause) {\n        throw new Error(`Sub-Query must have SELECT clause defined to be used in EXITS function`);\n    }\n    let existsFunction = new QExistsFunction(rawQuery);\n    return existsFunction.applySqlFunction(getSqlFunctionCall(SqlFunction.EXISTS));\n};\nexport class QExistsFunction extends StandAloneFunction {\n    constructor(subQuery) {\n        super();\n        this.subQuery = subQuery;\n        this.__appliedFunctions__ = [];\n        this.operator = SqlOperator.EXISTS;\n        this.o = SqlOperator.EXISTS;\n        this.category = OperationCategory.FUNCTION;\n        this.c = OperationCategory.FUNCTION;\n    }\n    applySqlFunction(sqlFunctionCall) {\n        this.__appliedFunctions__.push(sqlFunctionCall);\n        return this;\n    }\n    getQuery() {\n        return this.subQuery;\n    }\n    toJSON(parsedQuery) {\n        if (this.__appliedFunctions__.length != 1) {\n            throw new Error(`Not expecting and parent or child functions on \"exists\"`);\n        }\n        if (!this.subQuery) {\n            throw new Error(`Subquery is not defined in \"exists\" function.`);\n        }\n        let appliedFunctions = [\n            getSqlFunctionCall(SqlFunction.EXISTS)\n        ];\n        return {\n            c: this.category,\n            ob: {\n                appliedFunctions: appliedFunctions,\n                dt: null,\n                ot: JSONClauseObjectType.EXISTS_FUNCTION,\n                v: parsedQuery\n            },\n            o: this.operator\n        };\n    }\n}\n// Algebra Operators\nexport const divide = function (numeric1, numeric2) {\n    if (numeric1 instanceof QNumberField) {\n        return numeric1.applySqlFunction(getSqlFunctionCall(SqlFunction.DIVIDE, [numeric2]));\n    }\n    else {\n        return new QNumberFunction(numeric1)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.DIVIDE, [numeric2]));\n    }\n};\nexport const subtract = function (numeric1, numeric2) {\n    if (numeric1 instanceof QNumberField) {\n        return numeric1.applySqlFunction(getSqlFunctionCall(SqlFunction.MINUS, [numeric2]));\n    }\n    else {\n        return new QNumberFunction(numeric1)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.MINUS, [numeric2]));\n    }\n};\nexport const modulus = function (numeric1, numeric2) {\n    if (numeric1 instanceof QNumberField) {\n        return numeric1.applySqlFunction(getSqlFunctionCall(SqlFunction.MODULUS, [numeric2]));\n    }\n    else {\n        return new QNumberFunction(numeric1)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.MODULUS, [numeric2]));\n    }\n};\nexport const multiply = function (numeric1, numeric2) {\n    if (numeric1 instanceof QNumberField) {\n        return numeric1.applySqlFunction(getSqlFunctionCall(SqlFunction.MULTIPLY, [numeric2]));\n    }\n    else {\n        return new QNumberFunction(numeric1)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.MULTIPLY, [numeric2]));\n    }\n};\nexport const add = function (numeric1, numeric2) {\n    if (numeric1 instanceof QNumberField) {\n        return numeric1.applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, [numeric2]));\n    }\n    else {\n        return new QNumberFunction(numeric1)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.PLUS, [numeric2]));\n    }\n};\nexport const concat = function (//\n...fragments) {\n    if (fragments.length > 2) {\n        throw new Error(`Less than two operands passed to 'concat' function.`);\n    }\n    let firstFragment = fragments[0];\n    let restOfFragments = fragments.slice(1);\n    if (firstFragment instanceof QStringField) {\n        return firstFragment.applySqlFunction(getSqlFunctionCall(SqlFunction.CONCATENATE, restOfFragments));\n    }\n    else {\n        return new QStringFunction(firstFragment)\n            .applySqlFunction(getSqlFunctionCall(SqlFunction.CONCATENATE, restOfFragments));\n    }\n};\n/**\n * A\n * UNION\n * B\n */\nexport const union = function (...rawQueries) {\n    throw new Error('not implemented');\n};\n/**\n * A\n * UNION ALL\n * B\n */\nexport const unionAll = function (...rawQueries) {\n    throw new Error('not implemented');\n};\n/**\n * A\n * INTERSECT\n * B\n */\nexport const intersect = function (...rawQueries) {\n    throw new Error('not implemented');\n};\n/**\n * A\n * MINUS\n * B\n */\nexport const except = function (...rawQueries) {\n    throw new Error('not implemented');\n};\n/**\n * A\n * MINUS\n * B\n */\nexport const minus = except;\n//# sourceMappingURL=Functions.js.map","import { EntityAliases, } from '../../core/entity/Aliases';\nimport { QEntity, QTree } from '../../core/entity/Entity';\n/**\n * Created by Papa on 10/27/2016.\n */\nexport class AbstractQuery {\n    constructor(entityAliases = new EntityAliases(), columnAliases = entityAliases.getNewFieldColumnAliases()) {\n        this.entityAliases = entityAliases;\n        this.columnAliases = columnAliases;\n        this.isEntityQuery = false;\n    }\n    getParameters( //\n    ) {\n        return this.entityAliases.getParams().getParameters();\n    }\n    getNonEntityQuery(rawQuery, jsonQuery, createSelectCallback, queryUtils, fieldUtils, relationManager) {\n        let from = this.fromClauseToJSON(rawQuery.from, queryUtils, fieldUtils, relationManager);\n        jsonQuery.F = from;\n        if (createSelectCallback) {\n            createSelectCallback(jsonQuery);\n        }\n        jsonQuery.W = queryUtils.whereClauseToJSON(rawQuery.where, this.columnAliases);\n        jsonQuery.GB = this.groupByClauseToJSON(rawQuery.groupBy);\n        jsonQuery.H = queryUtils.whereClauseToJSON(rawQuery.having, this.columnAliases);\n        jsonQuery.OB = this.orderByClauseToJSON(rawQuery.orderBy);\n        jsonQuery.L = rawQuery.limit;\n        jsonQuery.O = rawQuery.offset;\n        return jsonQuery;\n    }\n    fromClauseToJSON(fromClause, queryUtils, fieldUtils, relationManager) {\n        if (!fromClause) {\n            if (this.isEntityQuery) {\n                return [];\n            }\n            else {\n                throw new Error('From clause must be present in a non-Entity based query.');\n            }\n        }\n        return fromClause.map((fromEntity) => {\n            if (!(fromEntity instanceof QEntity)) {\n                throw new Error(`FROM clause can contain only Views or Entities.`);\n            }\n            if (this.isEntityQuery) {\n                if (fromEntity instanceof QTree) {\n                    throw new Error(`Entity FROM clauses can contain only Entities.`);\n                }\n            }\n            return fromEntity.__driver__\n                .getRelationJson(this.columnAliases, queryUtils, fieldUtils, relationManager);\n        });\n    }\n    groupByClauseToJSON(groupBy) {\n        if (!groupBy || !groupBy.length) {\n            return null;\n        }\n        return groupBy.map((field) => {\n            if (!this.columnAliases.hasAliasFor(field)) {\n                throw new Error(`Field used in group by clause is not present in select clause`);\n            }\n            return {\n                fa: this.columnAliases.getExistingAlias(field)\n            };\n        });\n    }\n    orderByClauseToJSON(orderBy) {\n        if (!orderBy || !orderBy.length) {\n            return null;\n        }\n        return orderBy.map((field) => {\n            return field.toJSON(this.columnAliases);\n        });\n    }\n}\n//# sourceMappingURL=AbstractQuery.js.map","import { QDistinctFunction } from '../../core/field/Functions';\nimport { AbstractQuery } from './AbstractQuery';\n/**\n * Created by Papa on 10/24/2016.\n */\nexport const NON_ENTITY_SELECT_ERROR_MESSAGE = `Unsupported entry in Non-Entity SELECT clause, must be a(n): Entity Field | ManyToOne Relation | primitive wrapped by \"bool\",\"date\",\"num\",\"str\" | query wrapped by \"field\"`;\nexport class DistinguishableQuery extends AbstractQuery {\n    constructor(entityAliases) {\n        super(entityAliases);\n        this.isHierarchicalEntityQuery = false;\n    }\n    selectClauseToJSON(rawSelect, queryUtils, fieldUtils, relationManager) {\n        if (rawSelect instanceof QDistinctFunction) {\n            if (this.isHierarchicalEntityQuery) {\n                throw new Error(`Distinct cannot be used in SELECT of Hierarchical/Bridged Entity queries.`);\n            }\n            let rawInnerSelect = rawSelect.getSelectClause();\n            let innerSelect = this.nonDistinctSelectClauseToJSON(rawInnerSelect, queryUtils, fieldUtils, relationManager);\n            return rawSelect.toJSON(innerSelect);\n        }\n        else {\n            return this.nonDistinctSelectClauseToJSON(rawSelect, queryUtils, fieldUtils, relationManager);\n        }\n    }\n}\n//# sourceMappingURL=NonEntityQuery.js.map","import { EntityAliases } from '../../core/entity/Aliases';\nimport { QOneToManyRelation, QRepositoryEntityOneToManyRelation } from '../../core/entity/OneToManyRelation';\nimport { QField } from '../../core/field/Field';\nimport { DistinguishableQuery, NON_ENTITY_SELECT_ERROR_MESSAGE } from './NonEntityQuery';\n/**\n * Created by Papa on 10/24/2016.\n */\nexport const FIELD_IN_SELECT_CLAUSE_ERROR_MESSAGE = `Entity SELECT clauses can only contain fields assigned: null | undefined | boolean | Date | number | string | Relation SELECT`;\n/**\n * A query whose select facade is a collection of properties.\n */\nexport class MappableQuery extends DistinguishableQuery {\n    nonDistinctSelectClauseToJSON(rawSelect, queryUtils, fieldUtils, relationManager) {\n        let select = {};\n        for (let property in rawSelect) {\n            let value = rawSelect[property];\n            if (value instanceof QField) {\n                if (this.isEntityQuery) {\n                    throw new Error(FIELD_IN_SELECT_CLAUSE_ERROR_MESSAGE);\n                }\n                // The same value may appear in the select clause more than once.\n                // In that case the last one will set the alias for all of them.\n                // Because the alias only matters for GROUP BY and ORDER BY\n                // that is OK.\n                select[property] = value.toJSON(this.columnAliases, true, queryUtils, fieldUtils, relationManager);\n            }\n            else if (value instanceof QOneToManyRelation\n                || value instanceof QRepositoryEntityOneToManyRelation) {\n                throw new Error(`@OneToMany relation objects can cannot be used in SELECT clauses`);\n            } // Must be a primitive\n            else {\n                let isChildObject = false;\n                try {\n                    // Must be an entity query here\n                    switch (typeof value) {\n                        case 'boolean':\n                        case 'number':\n                        case 'string':\n                        case 'undefined':\n                            continue;\n                        case 'object':\n                            if (value instanceof Date) {\n                            }\n                            else if (value === null) {\n                            }\n                            else {\n                                isChildObject = true;\n                                select[property] = this.nonDistinctSelectClauseToJSON(value, queryUtils, fieldUtils, relationManager);\n                            }\n                    }\n                }\n                finally {\n                    if (!isChildObject && !this.isEntityQuery) {\n                        throw new Error(NON_ENTITY_SELECT_ERROR_MESSAGE);\n                    }\n                }\n            }\n        }\n        return select;\n    }\n}\nexport class TreeQuery extends MappableQuery {\n    constructor(rawQuery, entityAliases = new EntityAliases()) {\n        super(entityAliases);\n        this.rawQuery = rawQuery;\n    }\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        let jsonMappedQuery = this.getNonEntityQuery(this.rawQuery, {}, (jsonQuery) => {\n            jsonQuery.S = this.selectClauseToJSON(this.rawQuery.select, queryUtils, fieldUtils, relationManager);\n        }, queryUtils, fieldUtils, relationManager);\n        return jsonMappedQuery;\n    }\n}\n//# sourceMappingURL=TreeQuery.js.map","import { QEntity, QTree } from \"./entity/Entity\";\nimport { QField } from \"./field/Field\";\n/**\n * Created by Papa on 10/25/2016.\n */\nexport function tree(query) {\n    let queryDefinition;\n    if (query instanceof Function) {\n        queryDefinition = query();\n    }\n    else {\n        queryDefinition = query;\n    }\n    let view = new QTree([], queryDefinition);\n    let customEntity = queryDefinition.select;\n    view = convertMappedEntitySelect(customEntity, queryDefinition, view, view, 'f');\n    return view;\n}\nfunction convertMappedEntitySelect(customEntity, queryDefinition, view, selectProxy, fieldPrefix) {\n    let fieldIndex = 0;\n    for (let property in customEntity) {\n        let alias = `${fieldPrefix}${++fieldIndex}`;\n        let value = customEntity[property];\n        if (value instanceof QField) {\n            let field = value.getInstance(view);\n            field.alias = alias;\n            field.q = view;\n            selectProxy[property] = field;\n        }\n        else {\n            if (value instanceof Object && !(value instanceof Date)) {\n                selectProxy[value] = convertMappedEntitySelect(value, queryDefinition, view, {}, `${alias}_`);\n            }\n            else {\n                throw new Error(`All SELECT clause entries of a Mapped query must be Fields or Functions`);\n            }\n        }\n    }\n    return view;\n}\n/**\n * Sub-queries in select clause\n * @param query\n * @returns {IQF}\n */\nexport function field(query) {\n    let queryDefinition;\n    if (query instanceof Function) {\n        queryDefinition = query();\n    }\n    else {\n        queryDefinition = query;\n    }\n    let customField = queryDefinition.select;\n    customField = customField.addSubQuery(queryDefinition);\n    // Field query cannot be joined to any other query so don't have set the positional fields\n    return customField;\n}\nexport class JoinFields {\n    constructor(joinTo) {\n        this.joinTo = joinTo;\n        if (!(this.joinTo instanceof QEntity)) {\n            throw new Error(`Right value in join must be a View or an Entity`);\n        }\n    }\n    on(joinOperation) {\n        let joinChild = this.joinTo;\n        joinChild.__driver__.joinWhereClause = joinOperation(this.joinTo);\n        return this.joinTo;\n    }\n}\n//# sourceMappingURL=Joins.js.map","import { JoinType, JSONRelationType } from '@airport/ground-control';\nimport { TreeQuery } from '../../query/facade/TreeQuery';\nimport { extend } from '../../utils/qApplicationBuilderUtils';\nimport { JoinFields } from '../Joins';\nexport function QEntity(dbEntity, applicationUtils, relationManager, fromClausePosition = [], dbRelation = null, joinType = null, QDriver = QEntityDriver) {\n    this.__driver__ = new QDriver(dbEntity, fromClausePosition, dbRelation, joinType, this, applicationUtils, relationManager);\n}\nQEntity.prototype.fullJoin = function (right) {\n    return this.__driver__.join(right, JoinType.FULL_JOIN);\n};\nQEntity.prototype.innerJoin = function (right) {\n    return this.__driver__.join(right, JoinType.INNER_JOIN);\n};\nQEntity.prototype.leftJoin = function (right) {\n    return this.__driver__.join(right, JoinType.LEFT_JOIN);\n};\nQEntity.prototype.rightJoin = function (right) {\n    return this.__driver__.join(right, JoinType.RIGHT_JOIN);\n};\nexport class QEntityDriver {\n    constructor(dbEntity, applicationUtils, relationManager, fromClausePosition = [], dbRelation = null, joinType = null, qEntity) {\n        this.dbEntity = dbEntity;\n        this.applicationUtils = applicationUtils;\n        this.relationManager = relationManager;\n        this.fromClausePosition = fromClausePosition;\n        this.dbRelation = dbRelation;\n        this.joinType = joinType;\n        this.qEntity = qEntity;\n        this.entityFieldMap = {};\n        this.entityRelations = [];\n        this.idColumns = [];\n        this.allColumns = [];\n        this.relations = [];\n        this.currentChildIndex = -1;\n    }\n    getInstance() {\n        const qEntityConstructor = this.applicationUtils\n            .getQEntityConstructor(this.dbEntity);\n        let instance = new qEntityConstructor(this.dbEntity, this.applicationUtils, this.relationManager, this.fromClausePosition, this.dbRelation, this.joinType);\n        instance.__driver__.currentChildIndex = this.currentChildIndex;\n        instance.__driver__.joinWhereClause = this.joinWhereClause;\n        instance.__driver__.entityFieldMap = this.entityFieldMap;\n        instance.__driver__.entityRelations = this.entityRelations;\n        return instance;\n    }\n    /*\n    addEntityRelation<R extends IQEntityInternal>(\n        relation: IQInternalRelation<R>\n    ): void {\n        this.entityRelations[relation.parentRelationIndex] = relation;\n    }\n\n    addEntityField<T, IQF extends IQOperableFieldInternal<T, JSONBaseOperation, any, any>>(\n        field: IQF\n    ): void {\n        this.entityFieldMap[field.fieldName] = field;\n    }\n    */\n    /*\n    getRelationPropertyName(): string {\n        return QMetadataUtils.getRelationPropertyName(QMetadataUtils.getRelationByIndex(this.qEntity, this.relationIndex));\n    }\n*/\n    getRelationJson(columnAliases, queryUtils, fieldUtils, relationManager) {\n        // FIXME: this does not work for non-entity tree queries, as there is not dbEntity\n        // see ApplicationDao.findMaxVersionedMapByApplicationAndDomainNames for an example\n        let jsonRelation = {\n            currentChildIndex: this.currentChildIndex,\n            ti: this.dbEntity.index,\n            fromClausePosition: this.fromClausePosition,\n            jt: this.joinType,\n            rt: null,\n            rep: columnAliases.entityAliases.getNextAlias(this.getRootJoinEntity()),\n            si: this.dbEntity.applicationVersion.application.index\n        };\n        if (this.joinWhereClause) {\n            this.getJoinRelationJson(jsonRelation, columnAliases, queryUtils, fieldUtils, relationManager);\n        }\n        else if (this.dbRelation) {\n            this.getEntityRelationJson(jsonRelation);\n        }\n        else {\n            this.getRootRelationJson(jsonRelation, columnAliases, queryUtils, fieldUtils, relationManager);\n        }\n        return jsonRelation;\n    }\n    getJoinRelationJson(jsonRelation, columnAliases, queryUtils, fieldUtils, relationManager) {\n        jsonRelation.rt = JSONRelationType.ENTITY_JOIN_ON;\n        jsonRelation.joinWhereClause = queryUtils.whereClauseToJSON(this.joinWhereClause, columnAliases);\n        return jsonRelation;\n    }\n    getEntityRelationJson(jsonRelation) {\n        jsonRelation.rt = JSONRelationType.ENTITY_APPLICATION_RELATION;\n        jsonRelation.ri = this.dbRelation.index;\n        // if (!this.dbRelation.whereJoinTable) {\n        return jsonRelation;\n        // }\n        // let otmQEntity;\n        // let mtoQEntity;\n        // switch (this.dbRelation.relationType) {\n        // \tcase EntityRelationType.ONE_TO_MANY:\n        // \t\tmtoQEntity = this.qEntity;\n        // \t\totmQEntity = this.parentJoinEntity;\n        // \t\tbreak;\n        // \tcase EntityRelationType.MANY_TO_ONE:\n        // \t\totmQEntity = this.qEntity;\n        // \t\tmtoQEntity = this.parentJoinEntity;\n        // \t\tbreak;\n        // \tdefault:\n        // \t\tthrow new Error(`Unknown EntityRelationType: ${this.dbRelation.relationType}`);\n        // }\n        //\n        // let joinWhereClause = this.dbRelation.whereJoinTable.addToJoinFunction(otmQEntity,\n        // mtoQEntity, this.airportDb, this.airportDb.F); jsonRelation.joinWhereClause    =\n        // this.utils.Query.whereClauseToJSON(joinWhereClause, columnAliases);\n        // jsonRelation.joinWhereClauseOperator   = this.dbRelation.joinFunctionWithOperator;  return\n        // jsonRelation;\n    }\n    getRootRelationJson(jsonRelation, columnAliases, queryUtils, fieldUtils, relationManager) {\n        jsonRelation.rt = (this instanceof QTreeDriver) ? JSONRelationType.SUB_QUERY_ROOT : JSONRelationType.ENTITY_ROOT;\n        return jsonRelation;\n    }\n    getQ() {\n        return this.qEntity;\n    }\n    join(right, joinType) {\n        let joinChild = right\n            .__driver__.getInstance();\n        joinChild.__driver__.currentChildIndex = 0;\n        let nextChildPosition = this.relationManager.getNextChildJoinPosition(this);\n        joinChild.__driver__.fromClausePosition = nextChildPosition;\n        joinChild.__driver__.joinType = joinType;\n        joinChild.__driver__.parentJoinEntity = this.qEntity;\n        return new JoinFields(joinChild);\n    }\n    isRootEntity() {\n        return !this.parentJoinEntity;\n    }\n    getRootJoinEntity() {\n        let rootEntity = this.qEntity;\n        while (rootEntity.__driver__.parentJoinEntity) {\n            rootEntity = rootEntity.__driver__.parentJoinEntity;\n        }\n        return rootEntity;\n    }\n}\nexport function QTree(fromClausePosition = [], subQuery) {\n    QTree.base.constructor.call(this, null, fromClausePosition, null, null, QTreeDriver);\n    this.__driver__.subQuery = subQuery;\n}\nextend(QEntity, QTree, {});\nexport class QTreeDriver extends QEntityDriver {\n    getInstance() {\n        let instance = super.getInstance();\n        instance.__driver__\n            .subQuery = this.subQuery;\n        return instance;\n    }\n    // getRelationPropertyName(): string {\n    // \tthrow new Error(`not implemented`);\n    // }\n    getJoinRelationJson(jsonRelation, columnAliases, queryUtils, fieldUtils, relationManager) {\n        jsonRelation = super.getJoinRelationJson(jsonRelation, columnAliases, queryUtils, fieldUtils, relationManager);\n        jsonRelation.rt = JSONRelationType.SUB_QUERY_JOIN_ON;\n        jsonRelation.subQuery = new TreeQuery(this.subQuery, columnAliases.entityAliases)\n            .toJSON(queryUtils, fieldUtils, relationManager);\n        return jsonRelation;\n    }\n    getRootRelationJson(jsonRelation, columnAliases, queryUtils, fieldUtils, relationManager) {\n        jsonRelation = super.getJoinRelationJson(jsonRelation, columnAliases, queryUtils, fieldUtils, relationManager);\n        jsonRelation.rt = JSONRelationType.SUB_QUERY_ROOT;\n        jsonRelation.subQuery = new TreeQuery(this.subQuery, columnAliases.entityAliases)\n            .toJSON(queryUtils, fieldUtils, relationManager);\n        return jsonRelation;\n    }\n}\n//# sourceMappingURL=Entity.js.map","import { JoinType, JSONRelationType } from \"@airport/ground-control\";\n/**\n * Created by Papa on 10/18/2016.\n */\nexport class JoinTreeNode {\n    constructor(jsonRelation, childNodes, parentNode) {\n        this.jsonRelation = jsonRelation;\n        this.childNodes = childNodes;\n        this.parentNode = parentNode;\n    }\n    addChildNode(joinTreeNode) {\n        let childFromClausePositionArray = joinTreeNode.jsonRelation.fromClausePosition;\n        let childPosition = childFromClausePositionArray[childFromClausePositionArray.length - 1];\n        this.childNodes[childPosition] = joinTreeNode;\n    }\n    getEntityRelationChildNode(dbRelation) {\n        return this.getEntityRelationChildNodeByIndexes(dbRelation.property.entity.applicationVersion.id, dbRelation.property.entity.index, dbRelation.index);\n    }\n    getEntityRelationChildNodeByIndexes(applicationIndex, tableIndex, relationIndex) {\n        let matchingNodes = this.childNodes.filter((childNode) => {\n            return childNode.jsonRelation.ri === relationIndex;\n        });\n        switch (matchingNodes.length) {\n            case 0:\n                break;\n            case 1:\n                return matchingNodes[0];\n            default:\n                throw new Error(`More than one child node matched relation property index '${relationIndex}'`);\n        }\n        // No node matched, this must be reference to a sub-entity in select clause (in a Entity\n        // query)\n        let childPosition = this.jsonRelation.fromClausePosition.slice();\n        childPosition.push(this.childNodes.length);\n        let rootEntityPrefix;\n        if (this.parentNode) {\n            rootEntityPrefix = this.parentNode.jsonRelation.rep;\n        }\n        else {\n            rootEntityPrefix = this.jsonRelation.rep;\n        }\n        let jsonEntityRelation = {\n            currentChildIndex: 0,\n            fromClausePosition: childPosition,\n            ti: tableIndex,\n            jt: JoinType.LEFT_JOIN,\n            rt: JSONRelationType.ENTITY_APPLICATION_RELATION,\n            rep: rootEntityPrefix,\n            ri: relationIndex,\n            si: applicationIndex\n        };\n        let childTreeNode = new JoinTreeNode(jsonEntityRelation, [], this);\n        this.addChildNode(childTreeNode);\n        return childTreeNode;\n    }\n}\n//# sourceMappingURL=JoinTreeNode.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet RelationManager = class RelationManager {\n    getPositionAlias(rootEntityPrefix, fromClausePosition) {\n        return `${rootEntityPrefix}_${fromClausePosition.join('_')}`;\n    }\n    getAlias(jsonRelation) {\n        return this.getPositionAlias(jsonRelation.rep, jsonRelation.fromClausePosition);\n    }\n    getParentAlias(jsonRelation) {\n        let fromClausePosition = jsonRelation.fromClausePosition;\n        if (fromClausePosition.length === 0) {\n            throw new Error(`Cannot find alias of a parent entity for the root entity`);\n        }\n        return this.getPositionAlias(jsonRelation.rep, fromClausePosition.slice(0, fromClausePosition.length - 1));\n    }\n    createRelatedQEntity(joinRelation, context) {\n        const dbEntity = this.applicationUtils.getDbEntity(joinRelation.si, joinRelation.ti);\n        let QEntityConstructor = this.applicationUtils.getQEntityConstructor(dbEntity);\n        return new QEntityConstructor(dbEntity, this.applicationUtils, this, joinRelation.fromClausePosition, dbEntity.relations[joinRelation.ri], joinRelation.jt);\n    }\n    getNextChildJoinPosition(joinParentDriver) {\n        let nextChildJoinPosition = joinParentDriver.fromClausePosition.slice();\n        nextChildJoinPosition.push(++joinParentDriver.currentChildIndex);\n        return nextChildJoinPosition;\n    }\n};\n__decorate([\n    Inject()\n], RelationManager.prototype, \"applicationUtils\", void 0);\nRelationManager = __decorate([\n    Injected()\n], RelationManager);\nexport { RelationManager };\n//# sourceMappingURL=RelationManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { QueryResultType } from '@airport/ground-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nexport class LookupProxy {\n    constructor(dao) {\n        this.dao = dao;\n    }\n    ensureContext(context) {\n        return doEnsureContext(context);\n    }\n    async lookup(rawQuery, queryResultType, search, one, QueryClass, context, mapResults) {\n        return await this.dao.lookup.lookup(rawQuery, queryResultType, search, one, QueryClass, context, mapResults);\n    }\n}\nlet Lookup = class Lookup {\n    ensureContext(context) {\n        return doEnsureContext(context);\n    }\n    async lookup(rawQuery, queryResultType, search, one, QueryClass, context, mapResults) {\n        let query;\n        if (QueryClass) {\n            const rawNonEntityQuery = this.entityUtils.getQuery(rawQuery);\n            query = new QueryClass(rawNonEntityQuery);\n        }\n        else {\n            query = this.entityUtils.getEntityQuery(rawQuery);\n            queryResultType = this.getQueryResultType(queryResultType, mapResults);\n        }\n        let queryMethod;\n        if (search) {\n            if (one) {\n                queryMethod = this.queryFacade.searchOne;\n            }\n            else {\n                queryMethod = this.queryFacade.search;\n            }\n        }\n        else {\n            if (one) {\n                queryMethod = this.queryFacade.findOne;\n            }\n            else {\n                queryMethod = this.queryFacade.find;\n            }\n        }\n        let result = await queryMethod.call(this.queryFacade, query, this.getQueryResultType(queryResultType, mapResults), context);\n        if (!one && !result) {\n            result = [];\n        }\n        return result;\n    }\n    getQueryResultType(baseQueryResultType, mapResults) {\n        switch (baseQueryResultType) {\n            case QueryResultType.ENTITY_GRAPH:\n                if (mapResults) {\n                    return QueryResultType.MAPPED_ENTITY_GRAPH;\n                }\n                return QueryResultType.ENTITY_GRAPH;\n            case QueryResultType.ENTITY_TREE:\n                if (mapResults) {\n                    return QueryResultType.MAPPED_ENTITY_TREE;\n                }\n                return QueryResultType.ENTITY_TREE;\n            case QueryResultType.FIELD:\n            case QueryResultType.RAW:\n            case QueryResultType.TREE:\n            case QueryResultType.SHEET:\n                return baseQueryResultType;\n            default:\n                throw new Error(`Unexpected Base Query ResultType: '${baseQueryResultType}'.`);\n        }\n    }\n};\n__decorate([\n    Inject()\n], Lookup.prototype, \"entityUtils\", void 0);\n__decorate([\n    Inject()\n], Lookup.prototype, \"queryFacade\", void 0);\nLookup = __decorate([\n    Injected()\n], Lookup);\nexport { Lookup };\nexport function doEnsureContext(context) {\n    if (!context) {\n        context = {};\n    }\n    if (!context.startedAt) {\n        context.startedAt = new Date();\n    }\n    return context;\n}\n//# sourceMappingURL=Lookup.js.map","import { LookupProxy } from './Lookup';\nexport class EntityLookup extends LookupProxy {\n    constructor(dbEntity, dao, mapResults = EntityLookup.mapResults) {\n        super(dao);\n        this.dbEntity = dbEntity;\n        this.mapResults = mapResults;\n    }\n    setMap(MappedChildClass, isMapped = true) {\n        return new MappedChildClass(this.dbEntity, this.dao, isMapped);\n    }\n    setNoCache(ChildClass) {\n        return new ChildClass(this.dbEntity, this.dao, this.mapResults);\n    }\n    async entityLookup(rawEntityQuery, queryResultType, search, one, context) {\n        context.dbEntity = this.dbEntity;\n        const result = await this.lookup(rawEntityQuery, queryResultType, search, one, null, context, this.mapResults);\n        if (search) {\n            throw new Error(`Search operations are not yet supported`);\n        }\n        else {\n            this.dao.updateCacheManager.saveOriginalValues(result, context.dbEntity);\n        }\n        return result;\n    }\n}\nEntityLookup.mapResults = false;\n//# sourceMappingURL=EntityLookup.js.map","import { QueryResultType } from '@airport/ground-control';\nimport { EntityLookup } from './EntityLookup';\n/**\n * Created by Papa on 11/12/2016.\n */\nexport class EntityFind extends EntityLookup {\n    async graph(rawGraphQuery, context) {\n        return await this.find(rawGraphQuery, QueryResultType.ENTITY_GRAPH, context);\n    }\n    async tree(rawTreeQuery, context) {\n        return await this.find(rawTreeQuery, QueryResultType.ENTITY_TREE, context);\n    }\n    async find(rawEntityQuery, queryResultType, context) {\n        return await this.entityLookup(rawEntityQuery, queryResultType, false, false, this.ensureContext(context));\n    }\n    map(isMapped) {\n        return this.setMap(EntityFind, isMapped);\n    }\n    noCache() {\n        return this.setNoCache(EntityFind);\n    }\n}\n//# sourceMappingURL=EntityFind.js.map","import { QueryResultType } from '@airport/ground-control';\nimport { EntityLookup } from './EntityLookup';\n/**\n * Created by Papa on 11/12/2016.\n */\nexport class EntityFindOne extends EntityLookup {\n    async graph(rawGraphQuery, context) {\n        return await this.findOne(rawGraphQuery, QueryResultType.ENTITY_GRAPH, context);\n    }\n    async tree(rawTreeQuery, context) {\n        return await this.findOne(rawTreeQuery, QueryResultType.ENTITY_TREE, context);\n    }\n    // TODO: return Observable from deep within the framework\n    // and detect changes to the underlying data\n    async findOne(rawEntityQuery, queryResultType, context) {\n        return await this.entityLookup(rawEntityQuery, queryResultType, false, true, this.ensureContext(context));\n    }\n    map(isMapped) {\n        return this.setMap(EntityFindOne, isMapped);\n    }\n    noCache() {\n        return this.setNoCache(EntityFindOne);\n    }\n}\n//# sourceMappingURL=EntityFindOne.js.map","import { JSONClauseObjectType, SQLDataType } from '@airport/ground-control';\nimport { EntityAliases } from '../../core/entity/Aliases';\nimport { QBooleanField } from '../../core/field/BooleanField';\nimport { QDateField } from '../../core/field/DateField';\nimport { QField } from '../../core/field/Field';\nimport { QDistinctFunction } from '../../core/field/Functions';\nimport { QNumberField } from '../../core/field/NumberField';\nimport { QStringField } from '../../core/field/StringField';\nimport { QUntypedField } from '../../core/field/UntypedField';\nimport { DistinguishableQuery, NON_ENTITY_SELECT_ERROR_MESSAGE, } from './NonEntityQuery';\n/**\n * Created by Papa on 10/24/2016.\n */\nexport class FieldQuery extends DistinguishableQuery {\n    // private qEntityMap: {[entityName: string]: QEntity<any>},\n    //\tprivate entitiesRelationPropertyMap: {[entityName: string]: {[propertyName: string]:\n    // EntityRelationRecord}},\n    //\t\tprivate entitiesPropertyTypeMap: {[entityName: string]: {[propertyName: string]:\n    // boolean}}\n    constructor(rawQuery, entityAliases = new EntityAliases()) {\n        super(entityAliases);\n        this.rawQuery = rawQuery;\n    }\n    nonDistinctSelectClauseToJSON(rawSelect, queryUtils, fieldUtils, relationManager) {\n        if (!(this.rawQuery.select instanceof QField)) {\n            throw new Error(NON_ENTITY_SELECT_ERROR_MESSAGE);\n        }\n        this.columnAliases.entityAliases.getNextAlias(this.rawQuery.select.q.__driver__.getRootJoinEntity());\n        return this.rawQuery.select.toJSON(this.columnAliases, true, queryUtils, fieldUtils, relationManager);\n    }\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        let select = this.selectClauseToJSON(this.rawQuery.select, queryUtils, fieldUtils, relationManager);\n        let jsonFieldQuery = {\n            S: select,\n            ot: JSONClauseObjectType.FIELD_QUERY,\n            dt: this.getClauseDataType()\n        };\n        return this.getNonEntityQuery(this.rawQuery, jsonFieldQuery, null, queryUtils, fieldUtils, relationManager);\n    }\n    getClauseDataType() {\n        let selectField = this.rawQuery.select;\n        if (selectField instanceof QDistinctFunction) {\n            selectField = selectField.getSelectClause();\n        }\n        if (selectField instanceof QBooleanField) {\n            return SQLDataType.BOOLEAN;\n        }\n        else if (selectField instanceof QDateField) {\n            return SQLDataType.DATE;\n        }\n        else if (selectField instanceof QNumberField) {\n            return SQLDataType.NUMBER;\n        }\n        else if (selectField instanceof QStringField) {\n            return SQLDataType.STRING;\n        }\n        else if (selectField instanceof QUntypedField) {\n            return SQLDataType.ANY;\n        }\n        else {\n            throw new Error(`Unsupported type of select field in Field Query`);\n        }\n    }\n}\n//# sourceMappingURL=FieldQuery.js.map","import { QField } from '../../core/field/Field';\nimport { DistinguishableQuery, NON_ENTITY_SELECT_ERROR_MESSAGE, } from './NonEntityQuery';\n/**\n * Created by Papa on 10/23/2016.\n */\nexport class SheetQuery extends DistinguishableQuery {\n    constructor(rawQuery) {\n        super();\n        this.rawQuery = rawQuery;\n    }\n    nonDistinctSelectClauseToJSON(rawSelect, queryUtils, fieldUtils, relationManager) {\n        if (!(rawSelect instanceof Array)) {\n            throw new Error(`Flat Queries an array of fields in SELECT clause.`);\n        }\n        return rawSelect.map((selectField) => {\n            if (!(selectField instanceof QField)) {\n                throw new Error(NON_ENTITY_SELECT_ERROR_MESSAGE);\n            }\n            this.columnAliases.entityAliases.getNextAlias(selectField.q.__driver__.getRootJoinEntity());\n            return selectField.toJSON(this.columnAliases, true, queryUtils, fieldUtils, relationManager);\n        });\n    }\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        let select = this.selectClauseToJSON(this.rawQuery.select, queryUtils, fieldUtils, relationManager);\n        let jsonFieldQuery = {\n            S: select\n        };\n        return this.getNonEntityQuery(this.rawQuery, jsonFieldQuery, null, queryUtils, fieldUtils, relationManager);\n    }\n}\n//# sourceMappingURL=SheetQuery.js.map","import { QueryResultType } from '@airport/ground-control';\nimport { FieldQuery } from '../facade/FieldQuery';\nimport { SheetQuery } from '../facade/SheetQuery';\nimport { TreeQuery } from '../facade/TreeQuery';\nimport { Lookup } from './Lookup';\n/**\n * Created by Papa on 11/12/2016.\n */\nexport class NonEntityFind extends Lookup {\n    field(rawFieldQuery, context) {\n        return this.find(rawFieldQuery, QueryResultType.FIELD, FieldQuery, context);\n    }\n    sheet(rawSheetQuery, cursorSize, callback, context) {\n        if (cursorSize || callback) {\n            throw new Error(`Implement!`);\n        }\n        return this.find(rawSheetQuery, QueryResultType.SHEET, SheetQuery, context);\n    }\n    tree(rawTreeQuery, context) {\n        return this.find(rawTreeQuery, QueryResultType.TREE, TreeQuery, context);\n    }\n    find(rawNonEntityQuery, queryResultType, QueryClass, context) {\n        return this.lookup(rawNonEntityQuery, queryResultType, false, false, QueryClass, this.ensureContext(context));\n    }\n}\n//# sourceMappingURL=NonEntityFind.js.map","import { QueryResultType } from '@airport/ground-control';\nimport { FieldQuery } from '../facade/FieldQuery';\nimport { SheetQuery } from '../facade/SheetQuery';\nimport { TreeQuery } from '../facade/TreeQuery';\nimport { Lookup } from './Lookup';\n/**\n * Created by Papa on 11/12/2016.\n */\nexport class NonEntityFindOne extends Lookup {\n    field(rawFieldQuery, context) {\n        return this.findOne(rawFieldQuery, QueryResultType.FIELD, FieldQuery, context);\n    }\n    sheet(rawSheetQuery, context) {\n        return this.findOne(rawSheetQuery, QueryResultType.SHEET, SheetQuery, context);\n    }\n    tree(rawTreeQuery, context) {\n        return this.findOne(rawTreeQuery, QueryResultType.TREE, TreeQuery, context);\n    }\n    findOne(rawNonEntityQuery, queryResultType, QueryClass, context) {\n        return this.lookup(rawNonEntityQuery, queryResultType, false, true, QueryClass, this.ensureContext(context));\n    }\n}\n//# sourceMappingURL=NonEntityFindOne.js.map","import { QueryResultType } from '@airport/ground-control';\nimport { from } from 'rxjs';\nimport { FieldQuery } from '../facade/FieldQuery';\nimport { SheetQuery } from '../facade/SheetQuery';\nimport { TreeQuery } from '../facade/TreeQuery';\nimport { Lookup } from './Lookup';\n/**\n * Created by Papa on 11/12/2016.\n */\nexport class NonEntitySearch extends Lookup {\n    field(rawFieldQuery, context) {\n        return from(this.search(rawFieldQuery, QueryResultType.FIELD, FieldQuery, context));\n    }\n    sheet(rawSheetQuery, context) {\n        return from(this.search(rawSheetQuery, QueryResultType.SHEET, SheetQuery, context));\n    }\n    tree(rawTreeQuery, context) {\n        return from(this.search(rawTreeQuery, QueryResultType.TREE, TreeQuery, context));\n    }\n    search(rawNonEntityQuery, queryResultType, QueryClass, context) {\n        return this.lookup(rawNonEntityQuery, queryResultType, true, false, QueryClass, this.ensureContext(context));\n    }\n}\n//# sourceMappingURL=NonEntitySearch.js.map","import { QueryResultType } from '@airport/ground-control';\nimport { from } from 'rxjs';\nimport { FieldQuery } from '../facade/FieldQuery';\nimport { SheetQuery } from '../facade/SheetQuery';\nimport { TreeQuery } from '../facade/TreeQuery';\nimport { Lookup } from './Lookup';\n/**\n * Created by Papa on 11/12/2016.\n */\nexport class NonEntitySearchOne extends Lookup {\n    field(rawFieldQuery, context) {\n        return from(this.searchOne(rawFieldQuery, QueryResultType.FIELD, FieldQuery, context));\n    }\n    sheet(rawSheetQuery, context) {\n        return from(this.searchOne(rawSheetQuery, QueryResultType.SHEET, SheetQuery, context));\n    }\n    tree(rawTreeQuery, context) {\n        return from(this.searchOne(rawTreeQuery, QueryResultType.TREE, TreeQuery, context));\n    }\n    searchOne(rawNonEntityQuery, queryResultType, QueryClass, context) {\n        return this.lookup(rawNonEntityQuery, queryResultType, true, true, QueryClass, this.ensureContext(context));\n    }\n}\n//# sourceMappingURL=NonEntitySearchOne.js.map","import { QField } from '../../core/field/Field';\nimport { getPrimitiveValue } from '../../core/field/WrapperFunctions';\nimport { AbstractQuery } from './AbstractQuery';\n/**\n * Created by Papa on 11/17/2016.\n */\n// FIXME: add support for a full blown INSERT VALUES, with expression support for VALUES\nexport class AbstractInsertValues extends AbstractQuery {\n    constructor(rawInsertValues, columnIndexes) {\n        super();\n        this.rawInsertValues = rawInsertValues;\n        this.columnIndexes = columnIndexes;\n    }\n    validateColumn(dbColumn, dbEntity, columnName) {\n        if (!dbColumn) {\n            throw new Error(`\r\n\t\tCould not find column ${columnName} in entity: ${dbEntity.name}\r\n\t\t\t\t(table: ${dbEntity.tableConfig.name})\r\n\t\t\t\t\t\t`);\n        }\n        if (dbColumn.entity.applicationVersion.application.index !==\n            dbEntity.applicationVersion.application.index\n            || dbColumn.entity.index !== dbEntity.index) {\n            const columnApplication = dbColumn.entity.applicationVersion.application;\n            const entityApplication = dbEntity.applicationVersion.application;\n            throw new Error(`Unexpected entity for column ${dbColumn.name}.\r\n\t\t\tExpecting:\r\n\t\t\t\tDomain: ${entityApplication.domain.name}\r\n\t\t\t\tApplication: ${entityApplication.name}\r\n\t\t\t\tEntity: ${dbEntity.name}\r\n\t\t\tFound:\r\n\t\t\t\tDomain: ${columnApplication.domain.name}\r\n\t\t\t\tApplication: ${columnApplication.name}\r\n\t\t\t\tEntity: ${dbColumn.entity.name}`);\n        }\n    }\n    valuesToJSON(valueSets, dbColumns, queryUtils, fieldUtils, relationManager) {\n        // let currentValueIndex = -1;\n        // this.values           = [];\n        return valueSets.map((valueSet, rowIndex) => {\n            return valueSet.map((value, columnIndex) => {\n                if (value === undefined) {\n                    throw new Error(`Cannot use 'undefined' in VALUES clause.`);\n                }\n                if (!(value instanceof QField)) {\n                    return getPrimitiveValue(value, dbColumns[columnIndex], rowIndex);\n                    // this.values.push(getPrimitiveValue(value));\n                    // return ++currentValueIndex;\n                }\n                else {\n                    return value.toJSON(this.columnAliases, false, queryUtils, fieldUtils, relationManager);\n                }\n            });\n        });\n    }\n}\n//# sourceMappingURL=AbstractInsertValues.js.map","import { AbstractQuery } from './AbstractQuery';\nexport class AbstractUpdate extends AbstractQuery {\n    constructor(rawUpdate) {\n        super();\n        this.rawUpdate = rawUpdate;\n    }\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        return {\n            U: this.rawUpdate.update\n                .__driver__.getRelationJson(this.columnAliases, queryUtils, fieldUtils, relationManager),\n            S: this.setToJSON(this.rawUpdate.set, queryUtils, fieldUtils, relationManager),\n            W: queryUtils.whereClauseToJSON(this.rawUpdate.where, this.columnAliases)\n        };\n    }\n}\n//# sourceMappingURL=AbstractUpdate.js.map","import { AbstractQuery } from './AbstractQuery';\n/**\n * Created by Papa on 10/2/2016.\n */\nexport class Delete extends AbstractQuery {\n    constructor(rawDelete) {\n        super();\n        this.rawDelete = rawDelete;\n    }\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        return {\n            DF: this.rawDelete.deleteFrom\n                .__driver__.getRelationJson(this.columnAliases, queryUtils, fieldUtils, relationManager),\n            W: queryUtils.whereClauseToJSON(this.rawDelete.where, this.columnAliases)\n        };\n    }\n}\n//# sourceMappingURL=Delete.js.map","import { QField } from '../../core/field/Field';\nimport { MappableQuery } from './TreeQuery';\n/**\n * Created by Papa on 10/24/2016.\n */\nexport class EntityQuery extends MappableQuery {\n    constructor(rawQuery) {\n        super();\n        this.rawQuery = rawQuery;\n        this.isEntityQuery = true;\n        this.isHierarchicalEntityQuery = true;\n    }\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        return {\n            S: this.selectClauseToJSON(this.rawQuery.select, queryUtils, fieldUtils, relationManager),\n            F: this.fromClauseToJSON(this.rawQuery.from, queryUtils, fieldUtils, relationManager),\n            W: queryUtils.whereClauseToJSON(this.rawQuery.where, this.columnAliases),\n            OB: this.orderByClauseToJSON(this.rawQuery.orderBy)\n        };\n    }\n    nonDistinctSelectClauseToJSON(rawSelect) {\n        for (let field in rawSelect) {\n            let value = rawSelect[field];\n            if (value instanceof QField) {\n                throw new Error(`Field References cannot be used in Entity Queries`);\n            }\n            else if (value instanceof Object && !(value instanceof Date)) {\n                this.nonDistinctSelectClauseToJSON(value);\n            }\n        }\n        return rawSelect;\n    }\n    orderByClauseToJSON(orderBy) {\n        if (!orderBy || !orderBy.length) {\n            return null;\n        }\n        return orderBy.map((field) => {\n            return field.toEntityJSON();\n        });\n    }\n}\nexport class LimitedEntityQuery extends EntityQuery {\n    constructor(rawQuery) {\n        super(rawQuery);\n        this.rawQuery = rawQuery;\n        this.isHierarchicalEntityQuery = false;\n    }\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        let limitedJsonEntity = super.toJSON(queryUtils, fieldUtils, relationManager);\n        limitedJsonEntity.L = this.rawQuery.limit;\n        limitedJsonEntity.O = this.rawQuery.offset;\n        return limitedJsonEntity;\n    }\n}\n//# sourceMappingURL=EntityQuery.js.map","import { AbstractInsertValues } from './AbstractInsertValues';\n// FIXME: add support for a full blown INSERT VALUES, with expression support for VALUES\nexport class InsertColumnValues extends AbstractInsertValues {\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        const entityDriver = this.rawInsertValues.insertInto.__driver__;\n        const insertInto = entityDriver.getRelationJson(this.columnAliases, queryUtils, fieldUtils, relationManager);\n        const columnMap = entityDriver.dbEntity.columnMap;\n        const dbColumns = [];\n        const columnIndexes = this.columnIndexes ? this.columnIndexes : this.rawInsertValues.columns.map((columnName) => {\n            const dbColumn = columnMap[columnName];\n            this.validateColumn(dbColumn, entityDriver.dbEntity, columnName);\n            dbColumns.push(dbColumn);\n            return dbColumn.index;\n        });\n        return {\n            II: insertInto,\n            C: columnIndexes,\n            V: this.valuesToJSON(this.rawInsertValues.values, dbColumns, queryUtils, fieldUtils, relationManager)\n        };\n    }\n}\n//# sourceMappingURL=InsertColumnValues.js.map","import { AbstractInsertValues } from './AbstractInsertValues';\n/**\n * Created by Papa on 11/17/2016.\n */\n// FIXME: add support for a full blown INSERT VALUES, with expression support for VALUES\nexport class InsertValues extends AbstractInsertValues {\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        const driver = this.rawInsertValues.insertInto\n            .__driver__;\n        const insertInto = driver.getRelationJson(this.columnAliases, queryUtils, fieldUtils, relationManager);\n        const dbColumns = [];\n        let columnIndexes;\n        if (this.columnIndexes) {\n            columnIndexes = this.columnIndexes;\n            for (let i = 0; i < columnIndexes.length; i++) {\n                const dbColumn = driver.dbEntity.columns[columnIndexes[i]];\n                this.validateColumn(dbColumn, driver.dbEntity);\n                dbColumns.push(dbColumn);\n            }\n        }\n        else {\n            columnIndexes = this.rawInsertValues.columns.map(column => {\n                const dbColumn = column.dbColumn;\n                this.validateColumn(dbColumn, driver.dbEntity);\n                dbColumns.push(dbColumn);\n                return dbColumn.index;\n            });\n        }\n        return {\n            II: insertInto,\n            C: columnIndexes,\n            V: this.valuesToJSON(this.rawInsertValues.values, dbColumns, queryUtils, fieldUtils, relationManager)\n        };\n    }\n}\n//# sourceMappingURL=InsertValues.js.map","import { wrapPrimitive } from '../../core/field/WrapperFunctions';\nimport { AbstractUpdate } from './AbstractUpdate';\nexport class UpdateColumns extends AbstractUpdate {\n    constructor(rawUpdate) {\n        super(rawUpdate);\n    }\n    setToJSON(set, queryUtils, fieldUtils, relationManager) {\n        const setClause = {};\n        const dbEntity = this.rawUpdate.update\n            .__driver__.dbEntity;\n        const dbColumnMap = dbEntity.columnMap;\n        const idDbColumnMap = dbEntity.idColumnMap;\n        for (const columnName in set) {\n            let value = set[columnName];\n            if (value === undefined) {\n                delete set[columnName];\n                continue;\n            }\n            if (!dbColumnMap[columnName]) {\n                throw new Error(`\r\n\tUnknown column: '${columnName}' for entity: '${dbEntity.name}'\r\n\t\t\t(table: '${dbEntity.tableConfig.name}').\r\n\t\t\t\t`);\n            }\n            if (idDbColumnMap[columnName]) {\n                throw new Error(`\r\n\tCannot update @Id columns:\r\n\tColumn: '${columnName}' for entity: '${dbEntity.name}'\r\n\t\t\t(table: '${dbEntity.tableConfig.name}').\r\n\t\t\t\t`);\n            }\n            value = wrapPrimitive(value);\n            if (!value.toJSON) {\n                throw `Unexpected value ${JSON.stringify(value)} for property ${columnName} of entity ${this.rawUpdate.update.__driver__.dbEntity.name}`;\n            }\n            setClause[columnName] = value.toJSON(this.columnAliases, false, queryUtils, fieldUtils, relationManager);\n        }\n        return setClause;\n    }\n}\n//# sourceMappingURL=UpdateColumns.js.map","import { EntityRelationType } from '@airport/ground-control';\nimport { wrapPrimitive } from '../../core/field/WrapperFunctions';\nimport { AbstractUpdate } from './AbstractUpdate';\n/**\n * Created by Papa on 10/2/2016.\n */\n// FIXME: add support for a full blown UPDATE, with expression support for SET\nexport class UpdateProperties extends AbstractUpdate {\n    constructor(rawUpdate) {\n        super(rawUpdate);\n    }\n    toJSON(queryUtils, fieldUtils, relationManager) {\n        return {\n            U: this.rawUpdate.update\n                .__driver__.getRelationJson(this.columnAliases, queryUtils, fieldUtils, relationManager),\n            S: this.setToJSON(this.rawUpdate.set, queryUtils, fieldUtils),\n            W: queryUtils.whereClauseToJSON(this.rawUpdate.where, this.columnAliases)\n        };\n    }\n    setToJSON(rawSet, queryUtils, fieldUtils) {\n        const jsonSetClause = {};\n        const dbEntity = this.rawUpdate.update.__driver__.dbEntity;\n        const dbPropertyMap = dbEntity.propertyMap;\n        this.setEntityFragmentsToJSON(rawSet, jsonSetClause, [], dbPropertyMap, [], queryUtils, fieldUtils);\n        return jsonSetClause;\n    }\n    setEntityFragmentsToJSON(rawSetFragment, jsonSetClause, dbPropertyChain, dbPropertyMap, childDbRelationChain, queryUtils, fieldUtils) {\n        const isTopLevelFragment = !dbPropertyMap.length;\n        for (const propertyName in rawSetFragment) {\n            const dbProperty = dbPropertyMap[propertyName];\n            const dbEntity = dbProperty.entity;\n            if (!dbProperty) {\n                throw new Error(`\r\n${this.getPropertyChainDesription(dbPropertyChain)}\r\n\r\n\tUnknown property: '${propertyName}' for entity: '${dbEntity.name}'\r\n\t\t\t(table: '${dbEntity.tableConfig.name}').\r\n\t\t\t\t`);\n            }\n            if (isTopLevelFragment && dbProperty.isId) {\n                throw new Error(`\r\n${this.getPropertyChainDesription(dbPropertyChain)}\r\n\r\n\tCannot update @Id properties:\r\n\tProperty: '${propertyName}' for entity: '${dbEntity.name}'\r\n\t\t\t(table: '${dbEntity.tableConfig.name}').\r\n\t\t\t\t`);\n            }\n            else if (!isTopLevelFragment && !dbProperty.isId) {\n                throw new Error(`\r\n${this.getPropertyChainDesription(dbPropertyChain)}\r\n\r\n\tUpdated properties of nested entities must be @Id properties:\r\n\tProperty: '${propertyName}' for entity: '${dbEntity.name}'\r\n\t\t\t(table: '${dbEntity.tableConfig.name}').\r\n\t\t\t\t`);\n            }\n            const childDbPropertyChain = [...dbPropertyChain];\n            childDbPropertyChain.push(dbProperty);\n            this.setFragmentToJSON(rawSetFragment, jsonSetClause, childDbPropertyChain, propertyName, childDbRelationChain, queryUtils, fieldUtils);\n        }\n    }\n    setFragmentToJSON(rawSetFragment, jsonSetClause, dbPropertyChain, propertyName, dbRelationChain, queryUtils, fieldUtils) {\n        const dbProperty = dbPropertyChain[dbPropertyChain.length - 1];\n        const dbEntity = dbProperty.entity;\n        let value = rawSetFragment[propertyName];\n        if (value === undefined) {\n            delete rawSetFragment[propertyName];\n            return;\n        }\n        value = wrapPrimitive(value);\n        // If this is not a nested object definition\n        if (value.toJSON) {\n            if (dbProperty.propertyColumns.length !== 1) {\n                throw new Error(`\r\n${this.getPropertyChainDesription(dbPropertyChain)}\r\n\r\n\tCannot update multi-column property to a single value:\r\n\tProperty: '${propertyName}' for entity: '${dbEntity.name}'\r\n\t\t\t(table: '${dbEntity.tableConfig.name}')\r\n\t\t\thas ${dbProperty.propertyColumns.length + 1} columns \r\n\t\t\tbut is being updates to a single value.\r\n\t\t\t\t`);\n            }\n            else {\n                let dbColumn = dbProperty.propertyColumns[0].column;\n                if (dbRelationChain.length) {\n                    for (let i = dbRelationChain.length - 1; i >= 0; i--) {\n                        const currentDbRelation = dbRelationChain[i];\n                        const matchingManyRelationColumn = currentDbRelation.manyRelationColumns.filter((manyRelationColumn) => {\n                            return manyRelationColumn.manyColumn.index ===\n                                dbColumn.index;\n                        })[0];\n                        dbColumn = matchingManyRelationColumn.oneColumn;\n                    }\n                }\n                if (jsonSetClause[dbColumn.name]) {\n                    const firstProperty = dbPropertyChain[0];\n                    throw new Error(`\r\n${this.getPropertyChainDesription(dbPropertyChain)}\r\n\r\n\tCannot update the same column multiple times in the same statement:\r\n\tProperty: '${propertyName}' for entity: '${dbEntity.name}'\r\n\t\t\t(table: '${dbEntity.tableConfig.name}')\r\n\tmaps to table: ${firstProperty.entity.tableConfig.name}, column: ${dbColumn.name}\r\n\t\twhich has already been set in this update statement (above).\r\n\t\t\t\t`);\n                }\n                jsonSetClause[dbColumn.name] = value.toJSON(this.columnAliases, false, queryUtils, fieldUtils);\n                return;\n            }\n        }\n        // This should be a nested property definition\n        else {\n            if (typeof value === 'object') {\n                const dbRelation = dbProperty.relation[0];\n                const childDbRelationChain = [...dbRelationChain];\n                childDbRelationChain.push(dbRelation);\n                switch (dbRelation.relationType) {\n                    case EntityRelationType.MANY_TO_ONE: {\n                        this.setEntityFragmentsToJSON(value, jsonSetClause, dbPropertyChain, dbRelation.relationEntity.propertyMap, childDbRelationChain, queryUtils, fieldUtils);\n                        break;\n                    }\n                    case EntityRelationType.ONE_TO_MANY:\n                        // Not  nested property definition\n                        throw new Error(`\r\n${this.getPropertyChainDesription(dbPropertyChain)}\r\n\r\n\t\t\t\tCannot update @OneToMany properties:\r\n\t\t\t\t\tProperty: '${propertyName}' of entity: '${this.rawUpdate.update.__driver__.dbEntity.name}\r\n\t\t\t\t\tis a @OneToMany relation and cannot be updated since it is\r\n\t\t\t\t\tassumed to be based on @Id columns (which cannot be updated).'\r\n\t\t\t\t`);\n                    default:\n                        // Not  nested property definition\n                        throw new Error(`\r\n${this.getPropertyChainDesription(dbPropertyChain)}\r\n\r\n\t\t\t\tUndefined relation type: \r\n\t\t\t\t\tProperty: '${propertyName}' of entity: '${this.rawUpdate.update.__driver__.dbEntity.name}'\r\n\t\t\t\t\tis defined with an unknown type of a relation.  Expecting either\r\n\t\t\t\t\t@ManyToOne(...)\r\n\t\t\t\t\tor\r\n\t\t\t\t\t@OneToMany(...)\r\n\t\t\t\t`);\n                }\n                return;\n            }\n            else {\n                // Not  nested property definition\n                throw new Error(`\r\n${this.getPropertyChainDesription(dbPropertyChain)}\r\n\r\n\t\t\t\tUnexpected value ${JSON.stringify(value)} \r\n\t\t\t\t\tfor property: '${propertyName}' of entity: '${this.rawUpdate.update.__driver__.dbEntity.name}'\r\n\t\t\t\tExpecting a nested property definition.\r\n\t\t\t\t`);\n            }\n        }\n    }\n    getPropertyChainDesription(dbPropertyChain) {\n        const rootDbEntity = dbPropertyChain[0].entity;\n        let prefix = '    ';\n        let lastPrefix = '';\n        let ending = `...\r\n}`;\n        let message = `\r\nUpdated Entity: ${rootDbEntity.name}, property chain:\r\n{`;\n        const maxChainDepth = dbPropertyChain.length;\n        for (let i = 0; i < maxChainDepth; i++) {\n            let dbProperty = dbPropertyChain[i];\n            message += `${prefix}${dbProperty.name}: `;\n            if (i + 1 < maxChainDepth) {\n                message += `: {\\n`;\n            }\n            else {\n                message += 'VALUE';\n            }\n            ending = prefix + `...\r\n${lastPrefix}}`;\n            lastPrefix = prefix;\n            prefix += '    ';\n        }\n        return `${message}\r\n${ending}`;\n    }\n}\n//# sourceMappingURL=UpdateProperties.js.map","export function strsToNums(strings) {\n    return strings.map(str => parseInt(str));\n}\nexport function objectExists(object) {\n    return object !== null && object !== undefined;\n}\nexport function valuesEqual(value1, value2, checkChildObjects = false) {\n    if (typeof value1 === 'object') {\n        if (value1 instanceof Date) {\n            if (value2 instanceof Date) {\n                return value1.getTime() === value2.getTime();\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            if (typeof value2 !== 'object') {\n                return false;\n            }\n            if (!checkChildObjects) {\n                // Skip child objects\n                return true;\n            }\n            let checkedKeys = {};\n            for (let key in value1) {\n                checkedKeys[key] = true;\n                if (!valuesEqual(value1[key], value2[key], checkChildObjects)) {\n                    return false;\n                }\n            }\n            for (let key in value2) {\n                if (!checkedKeys[key]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n    if (!value1) {\n        if (value1 === '') {\n            return value2 === '';\n        }\n        else if (value1 === false) {\n            return value2 === false;\n        }\n        else if (value1 === 0) {\n            return value2 === 0;\n        }\n        if (value2 === '' || value2 === false || value2 === 0) {\n            return false;\n        }\n        // treat undefined and null as same value\n        return (!value2);\n    }\n    if (!value2) {\n        return false;\n    }\n    return value1 === value2;\n}\nexport function compareNumbers(number1, number2) {\n    if (number1 < number2) {\n        return -1;\n    }\n    if (number1 > number2) {\n        return 1;\n    }\n    return 0;\n}\n//# sourceMappingURL=Utils.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { QOperableField } from '../core/field/OperableField';\nimport { Injected } from '@airport/direction-indicator';\nimport { EntityQuery } from '../query/facade/EntityQuery';\nimport { objectExists } from '../Utils';\n/**\n * Created by Papa on 6/14/2016.\n */\nlet EntityUtils = class EntityUtils {\n    getObjectClassName(object) {\n        if (typeof object != 'object' || object === null) {\n            throw new Error(`Not an object instance`);\n        }\n        return this.getClassName(object.constructor);\n    }\n    getClassName(clazz) {\n        if (typeof clazz != 'function') {\n            throw new Error(`Not a constructor function`);\n        }\n        let className = clazz['name'];\n        // let className = /(\\w+)\\(/.exec(clazz.toString())[1];\n        return className;\n    }\n    exists(object) {\n        return objectExists(object);\n    }\n    /*\n     static isBlank(\n     object: any\n     ) {\n     for (let propertyName in object) {\n     let property = object[propertyName];\n     if (this.exists(property)) {\n     if (property instanceof Array) {\n     if (property.length > 0) {\n     return false;\n     }\n     } else {\n     return false;\n     }\n     }\n     }\n     return true;\n     }\n     */\n    isAppliable(object) {\n        return object instanceof QOperableField;\n    }\n    getQuery(query) {\n        return this.getRawQuery(query);\n    }\n    getRawQuery(rawQuery) {\n        if (rawQuery instanceof Function) {\n            return rawQuery();\n        }\n        else {\n            return rawQuery;\n        }\n    }\n    getEntityQuery(rawGraphQuery) {\n        return new EntityQuery(this.getRawQuery(rawGraphQuery));\n    }\n};\nEntityUtils = __decorate([\n    Injected()\n], EntityUtils);\nexport { EntityUtils };\n//# sourceMappingURL=EntityUtils.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { FieldQuery } from '../query/facade/FieldQuery';\nlet FieldUtils = class FieldUtils {\n    getFieldQueryJson(fieldSubQuery, entityAliases, queryUtils) {\n        let subSelectQuery = new FieldQuery(fieldSubQuery, entityAliases);\n        return subSelectQuery.toJSON(queryUtils, this, this.relationManager);\n    }\n};\n__decorate([\n    Inject()\n], FieldUtils.prototype, \"relationManager\", void 0);\nFieldUtils = __decorate([\n    Injected()\n], FieldUtils);\nexport { FieldUtils };\n//# sourceMappingURL=FieldUtils.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { repositoryEntity } from '@airport/ground-control';\nimport { Injected } from '@airport/direction-indicator';\nlet QMetadataUtils = class QMetadataUtils {\n    getAllColumns(qEntity) {\n        return qEntity.__driver__.allColumns;\n    }\n    getAllNonGeneratedColumns(qEntity) {\n        return this.getAllColumns(qEntity).filter(qField => !qField.dbColumn.isGenerated);\n    }\n    getAllInsertableColumns(qEntity) {\n        return this.getAllColumns(qEntity).filter(qField => {\n            if (qField.dbColumn.isGenerated) {\n                return false;\n            }\n            if (qEntity.__driver__.dbEntity.isRepositoryEntity) {\n                switch (qField.dbColumn.name) {\n                    case repositoryEntity.SYSTEM_WIDE_OPERATION_ID:\n                        return false;\n                }\n            }\n            return true;\n        });\n    }\n    getDbEntity(qEntity) {\n        return qEntity.__driver__.dbEntity;\n    }\n    getNewEntity(qEntity, airDb) {\n        const dbEntity = qEntity.__driver__.dbEntity;\n        const entityConstructor = airDb.qApplications[dbEntity.applicationVersion.application.index].__constructors__[dbEntity.name];\n        if (!entityConstructor) {\n            return {};\n        }\n        return new entityConstructor();\n    }\n};\nQMetadataUtils = __decorate([\n    Injected()\n], QMetadataUtils);\nexport { QMetadataUtils };\n//# sourceMappingURL=QMetadataUtils.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { OperationCategory, SqlOperator } from '@airport/ground-control';\nimport { QOperableField } from '../core/field/OperableField';\nimport { wrapPrimitive } from '../core/field/WrapperFunctions';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { TreeQuery } from '../query/facade/TreeQuery';\nlet QueryUtils = class QueryUtils {\n    whereClauseToJSON(whereClause, columnAliases) {\n        if (!whereClause) {\n            return null;\n        }\n        let operation = whereClause;\n        let jsonOperation = {\n            c: operation.c,\n            o: operation.o\n        };\n        switch (operation.c) {\n            case OperationCategory.LOGICAL:\n                let logicalOperation = operation;\n                let jsonLogicalOperation = jsonOperation;\n                switch (operation.o) {\n                    case SqlOperator.NOT:\n                        jsonLogicalOperation.v = this.whereClauseToJSON(logicalOperation.v, columnAliases);\n                        break;\n                    case SqlOperator.AND:\n                    case SqlOperator.OR:\n                        jsonLogicalOperation.v = logicalOperation.v.map((value) => this.whereClauseToJSON(value, columnAliases));\n                        break;\n                    default:\n                        throw new Error(`Unsupported logical operation '${operation.o}'`);\n                }\n                break;\n            case OperationCategory.FUNCTION:\n                // TODO: verify that cast of Q object is valid\n                let functionOperation = operation;\n                let query = functionOperation.getQuery();\n                let jsonQuery = new TreeQuery(query, columnAliases.entityAliases).toJSON(this, this.fieldUtils, this.relationManager);\n                jsonOperation = functionOperation.toJSON(jsonQuery);\n                break;\n            case OperationCategory.BOOLEAN:\n            case OperationCategory.DATE:\n            case OperationCategory.NUMBER:\n            case OperationCategory.STRING:\n            case OperationCategory.UNTYPED:\n                let valueOperation = operation;\n                // All Non logical or exists operations are value operations (eq, isNull, like,\n                // etc.)\n                let jsonValueOperation = jsonOperation;\n                jsonValueOperation.l = this.convertLRValue(valueOperation.l, columnAliases);\n                let rValue = valueOperation.r;\n                if (rValue instanceof Array) {\n                    jsonValueOperation.r = rValue.map((anRValue) => {\n                        return this.convertLRValue(anRValue, columnAliases);\n                    });\n                }\n                else {\n                    jsonValueOperation.r = this.convertLRValue(rValue, columnAliases);\n                }\n                break;\n        }\n        return jsonOperation;\n    }\n    convertLRValue(value, columnAliases) {\n        value = wrapPrimitive(value);\n        switch (typeof value) {\n            case 'undefined':\n                throw new Error(`'undefined' is not a valid L or R value`);\n            default:\n                if (value instanceof QOperableField) {\n                    return value.toJSON(columnAliases, false, this, this.fieldUtils, this.relationManager);\n                } // Must be a Field Query\n                else {\n                    let rawFieldQuery = value;\n                    return this.fieldUtils.getFieldQueryJson(rawFieldQuery, columnAliases.entityAliases, this);\n                }\n        }\n    }\n};\n__decorate([\n    Inject()\n], QueryUtils.prototype, \"fieldUtils\", void 0);\n__decorate([\n    Inject()\n], QueryUtils.prototype, \"relationManager\", void 0);\nQueryUtils = __decorate([\n    Injected()\n], QueryUtils);\nexport { QueryUtils };\n//# sourceMappingURL=QueryUtils.js.map","export function ANOTHER(a, b) {\n}\n;\nexport const Y = {\n    airportSelectField: true,\n    insert: true,\n    update: false\n};\nexport const ALL_FIELDS = {\n    __allFields__: true\n};\nexport const YES = Y;\nexport function convertToY(object) {\n    object.airportSelectField = true;\n}\nexport function isY(object) {\n    return object && object.airportSelectField === true;\n}\nexport const N = {\n    airportSelectField: false,\n};\nexport const NO = N;\nexport function isN(object) {\n    return object && object.airportSelectField === false;\n}\nexport const I = {\n    insert: true\n};\nexport const INSERT = I;\nexport function isInsert(object) {\n    return object && object.insert === true;\n}\nexport const IN = {\n    insert: true,\n    null: true\n};\nexport const INSERT_OR_NULL = IN;\nexport function isInsertOrNull(object) {\n    return object && object.insert === true && object.null === true;\n}\nexport const U = {\n    update: true\n};\nexport const UPDATE = U;\nexport function isUpdate(object) {\n    return object && object.update === true;\n}\nexport const IU = {\n    insert: true,\n    update: true,\n};\nexport const INSERT_OR_UPDATE = IU;\nexport function isInsertOrUpdate(object) {\n    return object && object.insert === true && object.update === true;\n}\nexport const UN = {\n    update: true,\n    null: true\n};\nexport const UPDATE_OR_NULL = UN;\nexport function isUpdateOrNull(object) {\n    return object && object.update === true && object.null === true;\n}\nexport const IUN = {\n    insertOrOther: true,\n};\nexport const INSERT_OR_UPDATE_OR_NULL = UN;\nexport function isInsertOrUpdateOrNull(object) {\n    return object && object.insertOrOther === true;\n}\nexport const A = IUN;\nexport const ALL = IUN;\nexport const UPSERT = IUN;\nexport const isUpsert = isInsertOrUpdateOrNull;\nexport const ID = {\n    airportSelectField: 'ID'\n};\nexport function convertToID(object) {\n    object.airportSelectField = 'ID';\n}\nexport function isID(object) {\n    return object && object.airportSelectField === 'ID';\n}\n//# sourceMappingURL=Query.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ApplicationUtils_1;\nimport { CRUDOperation, EntityRelationType, repositoryEntity } from '@airport/ground-control';\nimport { convertToY, isY } from '../../lingo/query/facade/Query';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { valuesEqual } from '../Utils';\nlet ApplicationUtils = ApplicationUtils_1 = class ApplicationUtils {\n    getDbEntity(applicationIndex, tableIndex) {\n        return this.airportDatabase.applications[applicationIndex].currentVersion[0]\n            .applicationVersion.entities[tableIndex];\n    }\n    isActorId(columnName) {\n        return columnName === repositoryEntity.ACTOR_ID;\n    }\n    isActorRecordId(columnName) {\n        return columnName === repositoryEntity.ACTOR_RECORD_ID;\n    }\n    isRepositoryId(columnName) {\n        return columnName === repositoryEntity.REPOSITORY_ID;\n    }\n    doCascade(dbRelation, crudOperation) {\n        if (dbRelation.relationType !== EntityRelationType.ONE_TO_MANY) {\n            return false;\n        }\n        if (!dbRelation.oneToManyElems) {\n            return false;\n        }\n        switch (crudOperation) {\n            case CRUDOperation.CREATE:\n            case CRUDOperation.UPDATE:\n            case CRUDOperation.DELETE:\n                return true;\n            default:\n                throw new Error(`Unsupported CRUDOperation '${crudOperation}' for cascade check.`);\n        }\n    }\n    getQEntityConstructor(dbEntity) {\n        return this.airportDatabase.qApplications[dbEntity.applicationVersion.application.index]\n            .__qConstructors__[dbEntity.index];\n    }\n    getEntityConstructor(dbEntity) {\n        const entityConstructor = this.airportDatabase.qApplications[dbEntity.applicationVersion.application.index]\n            .__constructors__[dbEntity.name];\n        return entityConstructor;\n    }\n    getNewEntity(dbEntity) {\n        const entityConstructor = this.getEntityConstructor(dbEntity);\n        if (!entityConstructor) {\n            return {};\n        }\n        return new entityConstructor();\n    }\n    isIdEmpty(idValue) {\n        return !idValue && idValue !== 0;\n    }\n    isEmpty(value) {\n        return this.isIdEmpty(value) && value !== false && value !== '';\n    }\n    isRelationColumn(dbColumn) {\n        return this.isManyRelationColumn(dbColumn)\n            || this.isOneRelationColumn(dbColumn);\n    }\n    isManyRelationColumn(dbColumn) {\n        return !!(dbColumn.manyRelationColumns && dbColumn.manyRelationColumns.length);\n    }\n    isOneRelationColumn(dbColumn) {\n        return !!(dbColumn.oneRelationColumns && dbColumn.oneRelationColumns.length);\n    }\n    getIdKey(entityObject, dbEntity, failOnNoId = true, \n    // noIdValueCallback: {\n    // \t(\n    // \t\trelationColumn: DbColumn,\n    // \t\tvalue: any,\n    // \t\tpropertyNameChains: string[][],\n    // \t): boolean;\n    // } = null,\n    idValueCallback) {\n        const keys = this.getIdKeyInfo(entityObject, dbEntity, failOnNoId, idValueCallback);\n        return keys.arrayByIdColumnIndex.join('|');\n    }\n    getIdKeyInfo(entityObject, dbEntity, failOnNoId = true, idValueCallback) {\n        if (!dbEntity.idColumns.length) {\n            if (failOnNoId) {\n                throw new Error(`@Id is not defined on entity '${dbEntity.name}'.`);\n            }\n            return null;\n        }\n        const idKeys = {\n            arrayByIdColumnIndex: [],\n            mapByIdColumnName: {}\n        };\n        for (const dbColumn of dbEntity.idColumns) {\n            const [propertyNameChains, idValue] = this.getColumnPropertyNameChainsAndValue(dbEntity, dbColumn, entityObject, true, failOnNoId);\n            idValueCallback && idValueCallback(dbColumn, idValue, propertyNameChains);\n            idKeys.arrayByIdColumnIndex.push(idValue);\n            idKeys.mapByIdColumnName[dbColumn.name] = idValue;\n        }\n        return idKeys;\n    }\n    getColumnPropertyNameChainsAndValue(dbEntity, dbColumn, entityObject, forIdKey = false, generateNegativeIdsForMissing = true) {\n        const columnValuesAndPaths = this.getColumnValuesAndPaths(dbColumn, entityObject, [], forIdKey, generateNegativeIdsForMissing);\n        const firstColumnValueAndPath = columnValuesAndPaths[0];\n        const propertyNameChains = [firstColumnValueAndPath.path];\n        const value = firstColumnValueAndPath.value;\n        columnValuesAndPaths.reduce((last, current) => {\n            if (!valuesEqual(last.value, current.value, true)) {\n                throw new Error(`Values differ for ${dbEntity.name}.${dbColumn.name}:\r\n\t\t\t\t\t\t'${last.path.join('.')}' = ${last.value}\r\n\t\t\t\t\t\t'${current.path.join('.')}' = ${current.value}`);\n            }\n            propertyNameChains.push(current.path);\n            return current;\n        });\n        return [propertyNameChains, value];\n    }\n    addRelationToEntitySelectClause(dbRelation, selectClause, allowDefaults = false) {\n        this.forEachColumnTypeOfRelation(dbRelation, (dbColumn, propertyNameChains) => {\n            let convertTo = true;\n            let propertySelectClause = selectClause;\n            const firstPropertyNameChain = propertyNameChains[0];\n            firstPropertyNameChain.forEach((propertyNameLink, index) => {\n                let propertyObject = propertySelectClause[propertyNameLink];\n                if (!propertyObject) {\n                    propertyObject = {};\n                    this.entityStateManager.markAsStub(propertyObject);\n                    propertySelectClause[propertyNameLink] = propertyObject;\n                }\n                else {\n                    if (index < firstPropertyNameChain.length - 1) {\n                        if (!(propertyObject instanceof Object) || propertyObject instanceof Date) {\n                            throw new Error(`Invalid entry:\r\n\t\t\t\t\t\t\t\t...\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t...\r\n\t\t\t\t\t\t\t\t\t${propertyNameLink}: ${propertyObject}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tin '${dbRelation.property.entity.name}.${dbRelation.property.name}',\r\n\t\t\t\t\t\t\t\tProperty must be an Object.`);\n                        }\n                    }\n                    else {\n                        if (!allowDefaults && !isY(propertyObject)) {\n                            const reason = dbRelation.property.isId\n                                ? `'${dbRelation.property.entity.name}.${dbRelation.property.name}' is an @Id property`\n                                : `'${dbRelation.property.entity.name}' has no @Id - all properties are treated as @Ids`;\n                            throw new Error(`Defaults are not allowed in:\r\n\t\t\t\t\t\t\t\t...\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t...\r\n\t\t\t\t\t\t\t\t\t${propertyNameLink}: ${propertyObject}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t${reason}.`);\n                        }\n                        convertTo = false;\n                    }\n                }\n                propertySelectClause = propertyObject;\n            });\n            if (convertTo) {\n                convertToY(propertySelectClause);\n            }\n        });\n    }\n    forEachColumnOfRelation(dbRelation, entity, callback, failOnNoValue = true) {\n        const dbEntity = dbRelation.property.entity;\n        for (const dbRelationColumn of dbRelation.manyRelationColumns) {\n            const dbColumn = dbRelationColumn.manyColumn;\n            const [propertyNameChains, value] = this.getColumnPropertyNameChainsAndValue(dbEntity, dbColumn, entity);\n            if (callback(dbColumn, value, propertyNameChains)) {\n                return;\n            }\n        }\n    }\n    forEachColumnTypeOfRelation(dbRelation, callback) {\n        for (const dbRelationColumn of dbRelation.manyRelationColumns) {\n            const dbColumn = dbRelationColumn.manyColumn;\n            const propertyNameChains = this.getColumnPaths(dbColumn, []);\n            if (callback(dbColumn, propertyNameChains)) {\n                return;\n            }\n        }\n    }\n    getSheetSelectFromSetClause(dbEntity, qEntity, setClause, errorPrefix) {\n        const selectClause = [];\n        let actorIdColumnIndex;\n        let actorRecordIdColumnIndex;\n        let repositoryIdColumnIndex;\n        let systemWideOperationIdColumn;\n        for (const columnIndex in dbEntity.columns) {\n            const dbColumn = dbEntity.columns[columnIndex];\n            let dbProperty;\n            const isIdColumn = dbColumn.propertyColumns.some(propertyColumn => {\n                dbProperty = propertyColumn.property;\n                return dbProperty.isId;\n            });\n            let nonIdColumnSet = false;\n            if (isIdColumn) {\n                if (setClause[dbColumn.name]) {\n                    throw new Error(errorPrefix + `Cannot update @Id column '${dbColumn.name}' \r\nof property '${dbEntity.name}.${dbProperty.name}'.`);\n                }\n                this.addColumnToSheetSelect(dbColumn, qEntity, selectClause);\n            }\n            else if (setClause[dbColumn.name]) {\n                nonIdColumnSet = true;\n                this.addColumnToSheetSelect(dbColumn, qEntity, selectClause);\n                // } else {\n                // entitySelectClause[dbColumn.index] = null;\n            }\n            const inQueryColumnIndex = selectClause.length - 1;\n            switch (dbColumn.name) {\n                case repositoryEntity.ACTOR_ID:\n                    actorIdColumnIndex = inQueryColumnIndex;\n                    break;\n                case repositoryEntity.ACTOR_RECORD_ID:\n                    actorRecordIdColumnIndex = inQueryColumnIndex;\n                    break;\n                case repositoryEntity.REPOSITORY_ID:\n                    repositoryIdColumnIndex = inQueryColumnIndex;\n                    break;\n                case repositoryEntity.SYSTEM_WIDE_OPERATION_ID:\n                    if (nonIdColumnSet) {\n                        throw new Error(errorPrefix +\n                            `Cannot update 'systemWideOperationId' of Repository Entities.`);\n                    }\n                    systemWideOperationIdColumn = dbColumn;\n                    break;\n            }\n        }\n        return {\n            actorIdColumnIndex,\n            actorRecordIdColumnIndex,\n            repositoryIdColumnIndex,\n            selectClause,\n            systemWideOperationIdColumn\n        };\n    }\n    getColumnValuesAndPaths(dbColumn, relationObject, breadCrumb, forIdKey = false, generateNegativeIdsForMissing = true\n    // noIdValueCallback: {\n    // \t(\n    // \t\trelationColumn: DbColumn,\n    // \t\tvalue: any,\n    // \t\tpropertyNameChains: string[][],\n    // \t): void;\n    // }\n    ) {\n        if (this.isManyRelationColumn(dbColumn)) {\n            let columnValuesAndPaths = [];\n            // If a column is part of a relation, it would be on the Many Side\n            for (const dbRelationColumn of dbColumn.manyRelationColumns) {\n                const dbProperty = dbRelationColumn.manyRelation.property;\n                const relationBreadCrumb = [...breadCrumb];\n                const propertyName = dbProperty.name;\n                relationBreadCrumb.push(propertyName);\n                const value = relationObject[propertyName];\n                if (!value) {\n                    if (forIdKey\n                    // && this.handleNoId(dbColumn, dbProperty, relationBreadCrumb, value,\n                    // noIdValueCallback)\n                    ) {\n                        throw new Error(`Cannot retrieve composite Id value, value chain '${relationBreadCrumb.join('.')}' is : ${value}.`);\n                        // return null;\n                    }\n                    columnValuesAndPaths.push({\n                        path: relationBreadCrumb,\n                        value\n                    });\n                }\n                else {\n                    const otherEntityColumn = dbRelationColumn.oneColumn;\n                    const relationValuesAndPaths = this.getColumnValuesAndPaths(otherEntityColumn, value, relationBreadCrumb, forIdKey);\n                    columnValuesAndPaths = columnValuesAndPaths.concat(relationValuesAndPaths);\n                }\n            }\n            return columnValuesAndPaths;\n        }\n        else {\n            // If a column is not a part of (a) relation(s) then it is associated\n            // to only one property\n            const dbProperty = dbColumn.propertyColumns[0].property;\n            const propertyBreadCrumb = [...breadCrumb];\n            const propertyName = dbProperty.name;\n            propertyBreadCrumb.push(propertyName);\n            let value = relationObject[propertyName];\n            if (forIdKey && this.isIdEmpty(value)) {\n                if (dbColumn.isGenerated) {\n                    if (generateNegativeIdsForMissing) {\n                        value = --ApplicationUtils_1.TEMP_ID;\n                    }\n                    else {\n                        value = null;\n                    }\n                    relationObject[propertyName] = value;\n                }\n                else {\n                    // if (this.handleNoId(dbColumn, dbProperty, propertyBreadCrumb, value,\n                    // noValueCallback)) { return null; }\n                    throw new Error(`Cannot retrieve composite Id value, value chain '${propertyBreadCrumb.join('.')}' is : ${value}.`);\n                }\n            }\n            return [{\n                    path: propertyBreadCrumb,\n                    value\n                }];\n        }\n    }\n    getColumnPaths(dbColumn, breadCrumb) {\n        let columnValuesAndPaths = [];\n        if (this.isManyRelationColumn(dbColumn)) {\n            // If a column is part of a relation, it would be on the Many Side\n            for (const dbRelationColumn of dbColumn.manyRelationColumns) {\n                const dbProperty = dbRelationColumn.manyRelation.property;\n                const relationBreadCrumb = [...breadCrumb];\n                relationBreadCrumb.push(dbProperty.name);\n                const otherEntityColumn = dbRelationColumn.oneColumn;\n                const relationValuesAndPaths = this.getColumnPaths(otherEntityColumn, relationBreadCrumb);\n                columnValuesAndPaths = columnValuesAndPaths.concat(relationValuesAndPaths);\n            }\n        }\n        else {\n            // If a column is not a part of (a) relation(s) then it is associated\n            // to only one property\n            const dbProperty = dbColumn.propertyColumns[0].property;\n            const propertyBreadCrumb = [...breadCrumb];\n            propertyBreadCrumb.push(dbProperty.name);\n            columnValuesAndPaths.push(propertyBreadCrumb);\n        }\n        return columnValuesAndPaths;\n    }\n    addColumnToSheetSelect(dbColumn, qEntity, entitySelectClause) {\n        if (this.isManyRelationColumn(dbColumn)) {\n            const columnPaths = this.getColumnPaths(dbColumn, []);\n            const firstColumnPath = columnPaths[0];\n            let relationColumn = qEntity[firstColumnPath[0]];\n            firstColumnPath.reduce((last, current) => {\n                relationColumn = relationColumn[current];\n                return current;\n            });\n            entitySelectClause.push(relationColumn);\n        }\n        else {\n            entitySelectClause.push(qEntity[dbColumn.propertyColumns[0].property.name]);\n        }\n    }\n    /*\n        private addColumnToEntitySelect(\n            dbColumn: DbColumn,\n            entitySelectClause: any,\n        ) {\n            const dbRelation = dbColumn.relation;\n            if (dbRelation) {\n                let selectClauseFragment = entitySelectClause;\n                let lastSelectClauseFragment;\n                let sourceColumn = dbColumn;\n                let lastPropertyName;\n                do {\n                    lastPropertyName = sourceColumn.property.name;\n                    lastSelectClauseFragment = selectClauseFragment;\n                    if (!lastSelectClauseFragment[lastPropertyName]) {\n                        selectClauseFragment = {};\n                        lastSelectClauseFragment[lastPropertyName] = selectClauseFragment;\n                    } else {\n                        selectClauseFragment = lastSelectClauseFragment[lastPropertyName];\n                    }\n                    const relationColumn = sourceColumn.relation.relationColumns.filter(\n                        relationColumn => relationColumn.ownColumn.index === sourceColumn.index)[0];\n                    sourceColumn = relationColumn.relationColumn;\n                } while (sourceColumn.relation);\n                lastSelectClauseFragment[lastPropertyName] = null;\n            } else {\n                entitySelectClause[dbColumn.property.name] = null;\n            }\n        }\n    */\n    handleNoId(dbColumn, dbProperty, propertyNameChains, value, noIdValueCallback) {\n        if (noIdValueCallback) {\n            if (!noIdValueCallback(dbColumn, value, propertyNameChains)) {\n                return true;\n            }\n        }\n        else {\n            throw new Error(`Cannot retrieve composite Id value, value chain '${propertyNameChains.join('.')}' is : ${value}.`);\n        }\n        return false;\n    }\n};\nApplicationUtils.TEMP_ID = 0;\n__decorate([\n    Inject()\n], ApplicationUtils.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], ApplicationUtils.prototype, \"entityStateManager\", void 0);\nApplicationUtils = ApplicationUtils_1 = __decorate([\n    Injected()\n], ApplicationUtils);\nexport { ApplicationUtils };\n//# sourceMappingURL=ApplicationUtils.js.map","export var deltaConst;\n(function (deltaConst) {\n    deltaConst.DB_ID_FIELD = 'createDbId';\n})(deltaConst || (deltaConst = {}));\nexport var dbConst;\n(function (dbConst) {\n    dbConst.CURRENT_DB = undefined;\n    dbConst.DEFAULT_DB = 'air-default_db';\n    dbConst.ALL_DBS = 'air-all_dbs';\n    dbConst.OWN_DB_FACADE = 'air-own_db_facade';\n})(dbConst || (dbConst = {}));\nexport function getDbIndex(dbName) {\n    if (dbName === dbConst.CURRENT_DB) {\n        return -1;\n    }\n    throw new Error(`Not implemented`);\n}\n//# sourceMappingURL=Constants.js.map","export var ConstraintMode;\n(function (ConstraintMode) {\n    ConstraintMode[\"CONSTRAINT\"] = \"CONSTRAINT\";\n    ConstraintMode[\"NO_CONSTRAINT\"] = \"NO_CONSTRAINT\";\n    ConstraintMode[\"PROVIDER_DEFAULT\"] = \"PROVIDER_DEFAULT\";\n})(ConstraintMode || (ConstraintMode = {}));\n//# sourceMappingURL=ColumnDecorators.js.map","import { lib } from '@airport/direction-indicator';\nimport { RelationManager } from './impl/core/entity/RelationManager';\nimport { ENTITY_STATE_MANAGER, TRANSACTIONAL_CONNECTOR } from '@airport/ground-control';\nimport { Lookup } from './impl/query/api/Lookup';\nimport { EntityUtils } from './impl/utils/EntityUtils';\nimport { QMetadataUtils } from './impl/utils/QMetadataUtils';\nimport { QueryUtils } from './impl/utils/QueryUtils';\nimport { ApplicationUtils } from './impl/utils/ApplicationUtils';\nimport { FieldUtils } from './impl/utils/FieldUtils';\nconst airTrafficControl = lib('air-traffic-control');\nairTrafficControl.autopilot = false;\nexport const AIRPORT_DATABASE = airTrafficControl.token({\n    class: null,\n    interface: 'IAirportDatabase',\n    token: 'AIRPORT_DATABASE'\n});\nexport const APPLICATION_UTILS = airTrafficControl.token({\n    class: ApplicationUtils,\n    interface: 'IApplicationUtils',\n    token: 'APPLICATION_UTILS'\n});\nexport const DATABASE_FACADE = airTrafficControl.token({\n    class: null,\n    interface: 'IDatabaseFacade',\n    token: 'DATABASE_FACADE'\n});\nexport const ENTITY_UTILS = airTrafficControl.token({\n    class: EntityUtils,\n    interface: 'IEntityUtils',\n    token: 'ENTITY_UTILS'\n});\nexport const FIELD_UTILS = airTrafficControl.token({\n    class: FieldUtils,\n    interface: 'IFieldUtils',\n    token: 'FIELD_UTILS'\n});\nexport const LOOKUP = airTrafficControl.token({\n    class: Lookup,\n    interface: 'ILookup',\n    token: 'LOOKUP'\n});\nexport const Q_METADATA_UTILS = airTrafficControl.token({\n    class: QMetadataUtils,\n    interface: 'IQMetadataUtils',\n    token: 'Q_METADATA_UTILS'\n});\nexport const QUERY_FACADE = airTrafficControl.token({\n    class: null,\n    interface: 'IQueryFacade',\n    token: 'QUERY_FACADE'\n});\nexport const QUERY_UTILS = airTrafficControl.token({\n    class: QueryUtils,\n    interface: 'IQueryUtils',\n    token: 'QUERY_UTILS'\n});\nexport const RELATION_MANAGER = airTrafficControl.token({\n    class: RelationManager,\n    interface: 'IRelationManager',\n    token: 'RELATION_MANAGER'\n});\nexport const REPOSITORY_LOADER = airTrafficControl.token({\n    class: null,\n    interface: 'IRepositoryLoader',\n    token: 'REPOSITORY_LOADER'\n});\nexport const UPDATE_CACHE_MANAGER = airTrafficControl.token({\n    class: null,\n    interface: 'IUpdateCacheManager',\n    token: 'UPDATE_CACHE_MANAGER'\n});\nAIRPORT_DATABASE.setDependencies({\n    databaseFacade: DATABASE_FACADE,\n    updateCacheManager: UPDATE_CACHE_MANAGER\n});\nAPPLICATION_UTILS.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    entityStateManager: ENTITY_STATE_MANAGER\n});\nDATABASE_FACADE.setDependencies({\n    applicationUtils: APPLICATION_UTILS,\n    entityStateManager: ENTITY_STATE_MANAGER,\n    updateCacheManager: UPDATE_CACHE_MANAGER\n});\nFIELD_UTILS.setDependencies({\n    relationManager: RELATION_MANAGER\n});\nLOOKUP.setDependencies({\n    entityUtils: ENTITY_UTILS,\n    queryFacade: QUERY_FACADE\n});\nQUERY_FACADE.setDependencies({\n    fieldUtils: FIELD_UTILS,\n    queryUtils: QUERY_UTILS,\n    relationManager: RELATION_MANAGER,\n    transactionalConnector: TRANSACTIONAL_CONNECTOR\n});\nQUERY_UTILS.setDependencies({\n    fieldUtils: FIELD_UTILS,\n    relationManager: RELATION_MANAGER\n});\nRELATION_MANAGER.setDependencies({\n    applicationUtils: APPLICATION_UTILS\n});\nUPDATE_CACHE_MANAGER.setDependencies({\n    applicationUtils: APPLICATION_UTILS,\n    entityStateManager: ENTITY_STATE_MANAGER,\n});\n//# sourceMappingURL=tokens.js.map","import { EntityFind, EntityFindOne, } from '@airport/air-traffic-control';\n/**\n * Created by Papa on 12/11/2016.\n */\nexport class EntityDatabaseFacade {\n    // search: IEntitySearch<Entity, Array<Entity> | MappedEntityArray<Entity>, EntitySelect>;\n    // searchOne: IEntitySearchOne<Entity, EntitySelect>;\n    constructor(dbEntity, Q, dao) {\n        this.dbEntity = dbEntity;\n        this.Q = Q;\n        this.dao = dao;\n        this.find = new EntityFind(this.dbEntity, dao);\n        this.findOne = new EntityFindOne(this.dbEntity, dao);\n        // this.search = new EntitySearch<Entity, Array<Entity>, EntitySelect>(\n        //   this.dbEntity, updateCacheManager);\n        // this.searchOne = new EntitySearchOne(this.dbEntity, updateCacheManager);\n    }\n    get from() {\n        return this.Q[this.dbEntity.name];\n    }\n    async insertColumnValues(rawInsertColumnValues, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.insertColumnValues(rawInsertColumnValues, ctx);\n        });\n    }\n    async insertValues(rawInsertValues, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.insertValues(rawInsertValues, ctx);\n        });\n    }\n    async insertColumnValuesGenerateIds(rawInsertColumnValues, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.insertColumnValuesGenerateIds(rawInsertColumnValues, ctx);\n        });\n    }\n    async insertValuesGenerateIds(rawInsertValues, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.insertValuesGenerateIds(rawInsertValues, ctx);\n        });\n    }\n    async updateColumnsWhere(rawUpdateColumns, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.updateColumnsWhere(rawUpdateColumns, ctx);\n        });\n    }\n    async updateWhere(rawUpdate, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.updateWhere(rawUpdate, ctx);\n        });\n    }\n    async deleteWhere(rawDelete, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.deleteWhere(rawDelete, ctx);\n        });\n    }\n    async save(entity, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.save(entity, ctx);\n        });\n    }\n    /**\n     * @return ISaveResult object with metadata on saved objects\n     */\n    async saveToDestination(repositoryDestination, entity, ctx) {\n        return await this.withDbEntity(ctx, async (databaseFacade, ctx) => {\n            return await databaseFacade.saveToDestination(repositoryDestination, entity, ctx);\n        });\n    }\n    async withDbEntity(ctx, callback) {\n        if (!ctx) {\n            ctx = {};\n        }\n        if (!ctx.startedAt) {\n            ctx.startedAt = new Date();\n        }\n        const previousEntity = ctx.dbEntity;\n        ctx.dbEntity = this.dbEntity;\n        try {\n            return await callback(this.dao.databaseFacade, ctx);\n        }\n        finally {\n            ctx.dbEntity = previousEntity;\n        }\n    }\n}\n//# sourceMappingURL=EntityDatabaseFacade.js.map","export class DaoFindOneStub {\n    Graph(...args) {\n        throw new Error(`Cannot use this.stub.Find.Graph for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.Find).  Instead\r\n\t\tplease use this.db.find.graph`);\n    }\n    Tree(...args) {\n        throw new Error(`Cannot use this.stub.Find.Tree for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.Find).  Instead\r\n\t\tplease use this.db.find.tree`);\n    }\n}\n//# sourceMappingURL=DaoFindOneStub.js.map","export class DaoFindStub {\n    Graph(...args) {\n        throw new Error(`Cannot use this.stub.Find.Graph for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.Find).  Instead\r\n\t\tplease use this.db.find.graph`);\n    }\n    Tree(...args) {\n        throw new Error(`Cannot use this.stub.Find.Tree for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.Find).  Instead\r\n\t\tplease use this.db.find.tree`);\n    }\n}\n//# sourceMappingURL=DaoFindStub.js.map","export class DaoSearchOneStub {\n    Graph(...args) {\n        throw new Error(`Cannot use this.stub.SearchOne.Graph for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.SearchOne).  Instead\r\n\t\tplease use this.db.searchOne.graph`);\n    }\n    Tree(...args) {\n        throw new Error(`Cannot use this.stub.SearchOne.Tree for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.SearchOne).  Instead\r\n\t\tplease use this.db.searchOne.tree`);\n    }\n}\n//# sourceMappingURL=DaoSearchOneStub.js.map","export class DaoSearchStub {\n    Graph(...args) {\n        throw new Error(`Cannot use this.stub.Search.Graph for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.Search).  Instead\r\n\t\tplease use this.db.search.graph`);\n    }\n    Tree(...args) {\n        throw new Error(`Cannot use this.stub.Search.Tree for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.Search).  Instead\r\n\t\tplease use this.db.search.tree`);\n    }\n}\n//# sourceMappingURL=DaoSearchStub.js.map","import { DaoFindOneStub } from './DaoFindOneStub';\nimport { DaoFindStub } from './DaoFindStub';\nimport { DaoSearchOneStub } from './DaoSearchOneStub';\nimport { DaoSearchStub } from './DaoSearchStub';\nexport class DaoStub {\n    constructor() {\n        this.Find = new DaoFindStub();\n        this.FindOne = new DaoFindOneStub();\n        this.Search = new DaoSearchStub();\n        this.SearchOne = new DaoSearchOneStub();\n    }\n    save(entity) {\n        throw new Error(`Cannot use this.stub.save for manual queries (it\r\n\t\tis meant for prepared queries (with @\\${EntityName}Dao.Save).  Instead\r\n\t\tplease use this.db.save`);\n    }\n}\n//# sourceMappingURL=DaoStub.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { doEnsureContext, Y } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { EntityDatabaseFacade } from '../EntityDatabaseFacade';\nimport { DaoStub } from './DaoStub';\n/**\n * Created by Papa on 8/26/2017.\n */\nlet Dao = class Dao {\n    constructor(dbEntityId, Q, internal = false) {\n        this.internal = internal;\n        this.stub = new DaoStub();\n        const dbEntity = Q.__dbApplication__.currentVersion[0]\n            .applicationVersion.entities[dbEntityId];\n        // TODO: figure out how to inject EntityDatabaseFacade and dependencies\n        this.db = new EntityDatabaseFacade(dbEntity, Q, this);\n    }\n    static BaseSave(config) {\n        return function (target, propertyKey) {\n            // No runtime logic required.\n        };\n    }\n    async count(context) {\n        throw new Error(`Not Implemented`);\n    }\n    exists(entityId, context) {\n        throw new Error(`Not Implemented`);\n    }\n    repositoryId() {\n        return {\n            actor: {\n                id: Y,\n                uuId: Y\n            },\n            actorRecordId: Y,\n            ageSuitability: Y,\n            repository: {\n                id: Y,\n                uuId: Y\n            }\n        };\n    }\n    async findAll(entityIds, context, cacheForUpdate = false) {\n        if (entityIds) {\n            throw new Error(`Not implemented`);\n        }\n        return await this.db.find.graph({\n            select: {},\n            from: [this.db.from],\n        }, context);\n    }\n    async findAllAsTrees(entityIds, context, cacheForUpdate = false) {\n        if (entityIds) {\n            throw new Error(`Not implemented`);\n        }\n        return await this.db.find.tree({\n            select: {},\n            from: [this.db.from],\n        }, context);\n    }\n    findById(entityId, context, cacheForUpdate = false) {\n        throw new Error(`Not implemented`);\n    }\n    async save(entity, context) {\n        return await this.db.save(entity, this.ensureContext(context));\n    }\n    markForDeletion(entityIdInfo, context) {\n        if (entityIdInfo instanceof Array) {\n            for (const anEntity of entityIdInfo) {\n                this.entityStateManager.markForDeletion(anEntity);\n            }\n        }\n        else {\n            this.entityStateManager.markForDeletion(entityIdInfo);\n        }\n    }\n    ensureContext(context) {\n        return doEnsureContext(context);\n    }\n};\n__decorate([\n    Inject()\n], Dao.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], Dao.prototype, \"databaseFacade\", void 0);\n__decorate([\n    Inject()\n], Dao.prototype, \"entityStateManager\", void 0);\n__decorate([\n    Inject()\n], Dao.prototype, \"lookup\", void 0);\n__decorate([\n    Inject()\n], Dao.prototype, \"updateCacheManager\", void 0);\nDao = __decorate([\n    Injected()\n], Dao);\nexport { Dao };\n//# sourceMappingURL=Dao.js.map","export class DaoQueryDecorators {\n    Graph(callback) {\n        return function (target, propertyKey) {\n            // No runtime logic required.\n        };\n    }\n    Tree(callback) {\n        return function (target, propertyKey) {\n            // No runtime logic required.\n        };\n    }\n}\n//# sourceMappingURL=DaoQueryDecorators.js.map","export var ApiObjectKind;\n(function (ApiObjectKind) {\n    ApiObjectKind[\"ARRAY\"] = \"ARRAY\";\n    ApiObjectKind[\"BOOLEAN\"] = \"BOOLEAN\";\n    ApiObjectKind[\"BOOLEAN_VALUE\"] = \"BOOLEAN_VALUE\";\n    ApiObjectKind[\"DATE\"] = \"DATE\";\n    ApiObjectKind[\"DB_ENTITY\"] = \"DB_ENTITY\";\n    ApiObjectKind[\"NUMBER\"] = \"NUMBER\";\n    ApiObjectKind[\"NUMBER_VALUE\"] = \"NUMBER_VALUE\";\n    ApiObjectKind[\"OBJECT\"] = \"OBJECT\";\n    ApiObjectKind[\"STRING\"] = \"STRING\";\n    ApiObjectKind[\"STRING_VALUE\"] = \"STRING_VALUE\";\n    ApiObjectKind[\"TYPE_UNION\"] = \"TYPE_UNION\";\n})(ApiObjectKind || (ApiObjectKind = {}));\n//# sourceMappingURL=ApiOperation.js.map","import { Y, } from '@airport/air-traffic-control';\nimport { EntityRelationType } from '@airport/ground-control';\n/**\n * Created by Papa on 8/26/2017.\n */\nclass FieldsSelect {\n    constructor(dbEntity) {\n        this.dbEntity = dbEntity;\n    }\n    get ids() {\n        const propertyNames = this.dbEntity.properties\n            .filter(property => property.isId)\n            .map(property => property.name);\n        return this.getSelect(propertyNames, false);\n    }\n    get fields() {\n        const propertyNames = this.dbEntity.properties\n            .filter(property => !property.relation || !property.relation.length)\n            .map(property => property.name);\n        return this.getSelect(propertyNames, false);\n    }\n    get manyToOnes() {\n        return this.getRelationSelect(EntityRelationType.MANY_TO_ONE);\n    }\n    get oneToManys() {\n        return this.getRelationSelect(EntityRelationType.ONE_TO_MANY);\n    }\n    getRelationSelect(relationType) {\n        const propertyNames = this.dbEntity.properties\n            .filter(property => property.relation\n            && property.relation.length\n            && property.relation[0].relationType === relationType)\n            .map(property => property.name);\n        return this.getSelect(propertyNames, true);\n    }\n    getSelect(propertyNames, forRelations) {\n        const selectFragment = {};\n        for (const propertyName of propertyNames) {\n            selectFragment[propertyName] = forRelations ? {} : Y;\n        }\n        return selectFragment;\n    }\n}\n/**\n * Data Manipulation object.\n */\nexport class Duo {\n    constructor(dbEntityId, qApplication) {\n        if (typeof dbEntityId === 'number') {\n            this.dbEntity = qApplication.__dbApplication__.currentVersion[0]\n                .applicationVersion.entities[dbEntityId];\n        }\n        else {\n            this.dbEntity = dbEntityId;\n        }\n        this.select = new FieldsSelect(this.dbEntity);\n    }\n    getIdStub(ids) {\n        throw new Error(`Not Implemented.`);\n    }\n    getIdStubs(ids) {\n        throw new Error(`Not Implemented.`);\n    }\n}\nexport function getAllFieldsSelect(dbEntity) {\n    throw new Error(`Not implemented`);\n}\nexport const DUO = {\n    getAllFieldsSelect: getAllFieldsSelect,\n};\n//# sourceMappingURL=Duo.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { from } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\nlet SelectorManager = class SelectorManager {\n    createSelector(...args) {\n        if (args.length < 2 || args.length > 6) {\n            throw new Error(`Invalid createSelector call, Expecting 1 to 5 selectors and a callback.`);\n        }\n        const inputSelectors = args.slice(0, args.length - 1);\n        const callback = args[args.length - 1];\n        let sourceObservable;\n        if (inputSelectors.length > 1) {\n            // TODO: check if this will work\n            sourceObservable = from(inputSelectors.map(selector => selector.observable));\n        }\n        else {\n            sourceObservable = inputSelectors[0].observable;\n        }\n        let observable = sourceObservable.pipe(\n        // share() TODO: implement once RxJs support is added\n        distinctUntilChanged(), map(value => callback(value)));\n        return this.getSelector(observable);\n    }\n    createRootSelector(stateObservable) {\n        return this.getSelector(stateObservable);\n    }\n    getSelector(observable) {\n        let selector = (function (\n        // otherStateObservable?: Observable<SV>\n        ) {\n            let currentValue;\n            observable.subscribe(value => currentValue = value).unsubscribe();\n            return currentValue;\n        });\n        selector.observable = observable;\n        return selector;\n    }\n};\nSelectorManager = __decorate([\n    Injected()\n], SelectorManager);\nexport { SelectorManager };\n//# sourceMappingURL=Selector.js.map","import { repositoryEntity } from '@airport/ground-control';\nexport function setSeqGen(sequenceGenerator) {\n    SEQ_GEN = sequenceGenerator;\n}\nvar SEQ_GEN;\nexport function diSet(dbApplication, dbEntityId // EntityId\n) {\n    if (!SEQ_GEN\n        || !dbApplication) {\n        return false;\n    }\n    const dbEntity = dbApplication.currentVersion[0]\n        .applicationVersion.entities[dbEntityId];\n    return SEQ_GEN.exists(dbEntity);\n}\nexport function duoDiSet(dbApplication, dbEntityId) {\n    return dbApplication && dbApplication.currentVersion[0]\n        .applicationVersion.entities[dbEntityId];\n}\nexport async function getSysWideOpId(airDb, sequenceGenerator) {\n    const sequences = await getSysWideOpIds(1, airDb, sequenceGenerator);\n    return sequences[0];\n}\nexport async function getSysWideOpIds(numSequencesNeeded, airportDatabase, sequenceGenerator) {\n    if (!numSequencesNeeded) {\n        return [];\n    }\n    const sysWideOpIdGeneratedColumn = airportDatabase.QM[repositoryEntity.SYS_WIDE_OP_ID_APPLICATION]\n        .__dbApplication__.currentVersion[0].applicationVersion\n        .entityMapByName[repositoryEntity.SYS_WIDE_OP_ID_ENTITY].columnMap['ID'];\n    const generatedNumWrapper = await sequenceGenerator\n        .generateSequenceNumbers([sysWideOpIdGeneratedColumn], [numSequencesNeeded]);\n    return generatedNumWrapper[0];\n}\n//# sourceMappingURL=SequenceGenerator.js.map","import { AIRPORT_DATABASE, DATABASE_FACADE, LOOKUP, UPDATE_CACHE_MANAGER } from '@airport/air-traffic-control';\nimport { lib } from '@airport/direction-indicator';\nimport { ENTITY_STATE_MANAGER } from '@airport/ground-control';\nimport { Dao } from './dao/Dao';\nimport { SelectorManager } from './Selector';\nconst checkIn = lib('check-in');\ncheckIn.autopilot = false;\nexport const API_REGISTRY = checkIn.token({\n    class: null,\n    interface: 'IApiRegistry',\n    token: 'API_REGISTRY'\n});\nexport const API_VALIDATOR = checkIn.token({\n    class: null,\n    interface: 'IApiValidator',\n    token: 'API_VALIDATOR'\n});\nexport const CLIENT_QUERY_MANAGER = checkIn.token({\n    class: null,\n    interface: 'IClientQueryManager',\n    token: 'CLIENT_QUERY_MANAGER'\n});\nexport const DAO = checkIn.token({\n    class: Dao,\n    interface: 'class Dao',\n    token: 'DAO'\n});\nexport const OPERATION_DESERIALIZER = checkIn.token({\n    class: null,\n    interface: 'IOperationDeserializer',\n    token: 'OPERATION_DESERIALIZER'\n});\nexport const QUERY_PARAMETER_DESERIALIZER = checkIn.token({\n    class: null,\n    interface: 'IQueryParameterDeserializer',\n    token: 'QUERY_PARAMETER_DESERIALIZER'\n});\nexport const QUERY_RESULTS_SERIALIZER = checkIn.token({\n    class: null,\n    interface: 'IQueryParameterDeserializer',\n    token: 'QUERY_RESULTS_SERIALIZER'\n});\nexport const SELECTOR_MANAGER = checkIn.token({\n    class: SelectorManager,\n    interface: 'ISelectorManager',\n    token: 'SELECTOR_MANAGER'\n});\nexport const SEQUENCE_GENERATOR = checkIn.token({\n    class: null,\n    interface: 'ISequenceGenerator',\n    token: 'SEQUENCE_GENERATOR'\n});\nDAO.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    databaseFacade: DATABASE_FACADE,\n    entityStateManager: ENTITY_STATE_MANAGER,\n    lookup: LOOKUP,\n    updateCacheManager: UPDATE_CACHE_MANAGER\n});\n//# sourceMappingURL=tokens.js.map","import { lib } from '@airport/direction-indicator';\nimport { TerminalStore } from './store/TerminalStore';\nimport { OPERATION_CONTEXT_LOADER, TRANSACTIONAL_CONNECTOR } from '@airport/ground-control';\nimport { SELECTOR_MANAGER, SEQUENCE_GENERATOR } from '@airport/check-in';\nimport { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nconst terminalMap = lib('terminal-map');\nterminalMap.autopilot = false;\nexport const APPLICATION_INITIALIZER = terminalMap.token({\n    class: null,\n    interface: 'IApplicationInitializer',\n    token: 'APPLICATION_INITIALIZER'\n});\nexport const DOMAIN_RETRIEVER = terminalMap.token({\n    class: null,\n    interface: 'IDomainRetriever',\n    token: 'DOMAIN_RETRIEVER'\n});\nexport const STORE_DRIVER = terminalMap.token({\n    class: null,\n    interface: 'IStoreDriver',\n    token: 'STORE_DRIVER'\n});\nexport const TERMINAL_STORE = terminalMap.token({\n    class: TerminalStore,\n    interface: 'ITerminalStore',\n    token: 'TERMINAL_STORE'\n});\nexport const TRANSACTION_MANAGER = terminalMap.token({\n    class: null,\n    interface: 'ITransactionManager',\n    token: 'TRANSACTION_MANAGER'\n});\nexport const TRANSACTIONAL_RECEIVER = terminalMap.token({\n    class: null,\n    interface: 'ITransactionalReceiver',\n    token: 'TRANSACTIONAL_RECEIVER'\n});\nexport const TRANSACTIONAL_SERVER = terminalMap.token({\n    class: null,\n    interface: 'ITransactionalServer',\n    token: 'TRANSACTIONAL_SERVER'\n});\nAPPLICATION_INITIALIZER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    sequenceGenerator: SEQUENCE_GENERATOR,\n    terminalStore: TERMINAL_STORE\n});\nDOMAIN_RETRIEVER.setDependencies({\n    transactionalConnector: TRANSACTIONAL_CONNECTOR\n});\nTERMINAL_STORE.setDependencies({\n    selectorManager: SELECTOR_MANAGER\n});\nTRANSACTION_MANAGER.setDependencies({\n    storeDriver: STORE_DRIVER,\n    terminalStore: TERMINAL_STORE\n});\nTRANSACTIONAL_RECEIVER.setDependencies({\n    applicationInitializer: APPLICATION_INITIALIZER\n});\nTRANSACTIONAL_SERVER.setDependencies({\n    operationContextLoader: OPERATION_CONTEXT_LOADER,\n    terminalStore: TERMINAL_STORE,\n    transactionManager: TRANSACTION_MANAGER\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet RepositoryLoader = class RepositoryLoader {\n    /*\n    Repository can be loaded because:\n    - Repository is not present at all\n    - Central: Last non-local Transaction Log timestamp is too old\n    - Distributed:  Also stale timestamp but not as frequently (maybe once an hour)\n    Immutable repositories are only loaded once\n    */\n    async loadRepository(repositorySource, repositoryUuId, context) {\n        if (context.repositoryExistenceChecked) {\n            return;\n        }\n        context.repositoryExistenceChecked = true;\n        const repositoryLoadInfo = await this.repositoryDao.getRepositoryLoadInfo(repositorySource, repositoryUuId, context);\n        let loadRepository = false;\n        let lastSyncTimestamp = 0;\n        if (!repositoryLoadInfo) {\n            loadRepository = true;\n        }\n        else if (!repositoryLoadInfo.immutable) {\n            loadRepository = true;\n            for (const remoteRepositoryTransactionHistory of repositoryLoadInfo.repositoryTransactionHistory) {\n                if (lastSyncTimestamp < remoteRepositoryTransactionHistory.saveTimestamp) {\n                    lastSyncTimestamp = remoteRepositoryTransactionHistory.saveTimestamp;\n                }\n            }\n        }\n        if (!loadRepository) {\n            return;\n        }\n        const now = new Date().getTime();\n        const synchronizationAdapter = await this.synchronizationAdapterLoader\n            .load(repositorySource);\n        let messages;\n        try {\n            if (lastSyncTimestamp) {\n                // If it's been less than 10 seconds, don't retrieve the repository\n                if (lastSyncTimestamp >= now - 10000) {\n                    return;\n                }\n                // Check 100 seconds back, in case there were update issues\n                lastSyncTimestamp -= 100000;\n                messages = await synchronizationAdapter.getTransactionsForRepository(repositorySource, repositoryUuId, lastSyncTimestamp);\n            }\n            else {\n                messages = await synchronizationAdapter.getTransactionsForRepository(repositorySource, repositoryUuId);\n            }\n            // TODO: Add a special message for repository for adding users\n            // into the repository \n            // each user will have a public key that they will distribute\n            // each message is signed with the private key and the initial\n            // message for repository is CREATE_REPOSITORY with the public \n            // key of the owner user\n            const messageMapByUuId = new Map();\n            for (const message of messages) {\n                messageMapByUuId.set(message.history.uuId, message);\n            }\n            await this.synchronizationInManager.receiveMessages(messageMapByUuId, context);\n        }\n        catch (e) {\n            console.error(e);\n            return;\n        }\n    }\n};\n__decorate([\n    Inject()\n], RepositoryLoader.prototype, \"repositoryDao\", void 0);\n__decorate([\n    Inject()\n], RepositoryLoader.prototype, \"synchronizationAdapterLoader\", void 0);\n__decorate([\n    Inject()\n], RepositoryLoader.prototype, \"synchronizationInManager\", void 0);\nRepositoryLoader = __decorate([\n    Injected()\n], RepositoryLoader);\nexport { RepositoryLoader };\n//# sourceMappingURL=RepositoryLoader.js.map","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { and, } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { REPOSITORY_FIELD, } from '@airport/terminal-map';\nimport { v4 as uuidv4 } from \"uuid\";\nlet RepositoryManager = class RepositoryManager {\n    async initialize() {\n    }\n    async createRepository(actor, context) {\n        if (context.newRepository) {\n            throw new Error(`Cannot create more than one repository per transaction:\r\nAttempting to create a new repository and Operation Context\r\nalready contains a new repository.`);\n        }\n        let repository = await this.createRepositoryRecord(actor, context);\n        context.newRepository = repository;\n        return repository;\n    }\n    goOffline() {\n        throw new Error(`not implemented`);\n    }\n    getUpdateState(repository) {\n        throw new Error(`not implemented`);\n    }\n    setUpdateStateForAll(updateState) {\n        throw new Error(`not implemented`);\n    }\n    setUpdateState(repository, updateState) {\n        throw new Error(`not implemented`);\n    }\n    getRepositoryRecord(actor) {\n        const repository = {\n            ageSuitability: 0,\n            createdAt: new Date(),\n            id: null,\n            immutable: false,\n            owner: actor.user,\n            // platformConfig: platformConfig ? JSON.stringify(platformConfig) : null,\n            // platformConfig: null,\n            repositoryTransactionHistory: [],\n            source: 'localhost:9000',\n            uuId: uuidv4(),\n        };\n        return repository;\n    }\n    async createRepositoryRecord(actor, context) {\n        const repository = this.getRepositoryRecord(actor);\n        await this.repositoryDao.save(repository, context);\n        return repository;\n    }\n    ensureRepositoryScopeOnInsertValues(repository, rawInsertValues) {\n        let qEntity = rawInsertValues.insertInto;\n        if (!qEntity.__driver__.dbEntity.isRepositoryEntity) {\n            return rawInsertValues;\n        }\n        let columns = rawInsertValues.columns.slice();\n        if (columns.some((column, index) => {\n            // return column.fieldName === REPOSITORY_FIELD\n            return column.dbProperty.name === REPOSITORY_FIELD;\n        })) {\n            return rawInsertValues;\n        }\n        columns.push(qEntity[REPOSITORY_FIELD]);\n        let values = rawInsertValues.values.slice();\n        for (let i = 0; i < values.length; i++) {\n            let row = values[i].slice();\n            values[i] = row;\n            row.push(repository.id);\n        }\n        return {\n            insertInto: qEntity, columns: columns, values: values\n        };\n    }\n    ensureRepositoryLinkOnUpdateWhere(qEntity, repository, rawUpdate) {\n        if (!qEntity.__driver__.dbEntity.isRepositoryEntity) {\n            return;\n        }\n        return {\n            update: rawUpdate.update,\n            set: rawUpdate.set,\n            where: and(rawUpdate.where, qEntity.repository.id.equals(repository.id))\n        };\n    }\n    ensureRepositoryScopeOnDeleteWhere(qEntity, repository, rawDelete) {\n        if (!qEntity.__driver__.dbEntity.isRepositoryEntity) {\n            return;\n        }\n        return {\n            deleteFrom: rawDelete.deleteFrom,\n            where: and(rawDelete.where, qEntity.repository.id.equals(repository.id))\n        };\n    }\n};\n__decorate([\n    Inject()\n], RepositoryManager.prototype, \"repositoryDao\", void 0);\nRepositoryManager = __decorate([\n    Injected()\n], RepositoryManager);\nexport { RepositoryManager };\n//# sourceMappingURL=RepositoryManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, DbString, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, OneToMany, SequenceGenerator, Table } from '@airport/air-traffic-control';\n/**\n * Marks a group of mutation history changes.\n */\nlet OperationHistory = class OperationHistory {\n    constructor() {\n        this.recordHistory = [];\n    }\n};\n__decorate([\n    GeneratedValue(),\n    SequenceGenerator({ allocationSize: 600 }),\n    Id()\n], OperationHistory.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'ORDER_NUMBER', nullable: false }),\n    DbNumber()\n], OperationHistory.prototype, \"orderNumber\", void 0);\n__decorate([\n    Column({ name: 'CHANGE_TYPE', nullable: false }),\n    DbString()\n], OperationHistory.prototype, \"changeType\", void 0);\n__decorate([\n    Column({ name: 'SYSTEM_WIDE_OPERATION_ID', nullable: false }),\n    DbNumber()\n], OperationHistory.prototype, \"systemWideOperationId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'ENTITY_ID', referencedColumnName: 'ID', nullable: false })\n], OperationHistory.prototype, \"entity\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'ACTOR_ID', referencedColumnName: 'ID',\n        nullable: false\n    })\n], OperationHistory.prototype, \"actor\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'REPOSITORY_TRANSACTION_HISTORY_ID', referencedColumnName: 'ID',\n        nullable: false\n    })\n], OperationHistory.prototype, \"repositoryTransactionHistory\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'operationHistory' })\n], OperationHistory.prototype, \"recordHistory\", void 0);\nOperationHistory = __decorate([\n    Entity(),\n    Table({ name: 'REPOSITORY_OPERATION_HISTORY' })\n], OperationHistory);\nexport { OperationHistory };\n//# sourceMappingURL=OperationHistory.js.map","/**\n * Created by Papa on 8/20/2016.\n */\nexport const Entity = function () {\n    return function (constructor) {\n        // No runtime logic required.\n    };\n};\nexport const Table = function (tableConfiguration) {\n    return function (constructor) {\n        // No runtime logic required.\n    };\n};\nexport const MappedSuperclass = function () {\n    return function (constructor) {\n    };\n};\n//# sourceMappingURL=EntityDecorators.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, OneToMany, SequenceGenerator, Table, Transient } from '@airport/air-traffic-control';\nlet RecordHistory = class RecordHistory {\n    constructor() {\n        this.newValues = [];\n        this.oldValues = [];\n    }\n};\n__decorate([\n    Id(),\n    GeneratedValue(),\n    SequenceGenerator({ allocationSize: 2000 })\n], RecordHistory.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'ACTOR_RECORD_ID', nullable: false }),\n    DbNumber()\n], RecordHistory.prototype, \"actorRecordId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'ACTOR_ID', referencedColumnName: 'ID', nullable: false\n    })\n], RecordHistory.prototype, \"actor\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'REPOSITORY_OPERATION_HISTORY_ID', referencedColumnName: 'ID',\n        nullable: false\n    })\n], RecordHistory.prototype, \"operationHistory\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'recordHistory' })\n], RecordHistory.prototype, \"newValues\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'recordHistory' })\n], RecordHistory.prototype, \"oldValues\", void 0);\n__decorate([\n    Transient()\n], RecordHistory.prototype, \"tableColumnMap\", void 0);\nRecordHistory = __decorate([\n    Entity(),\n    Table({\n        name: 'REPOSITORY_RECORD_HISTORY',\n        indexes: [{\n                name: 'RCRD_HSTR_TO_OPRTN_HSTR_FX',\n                columnList: [\n                    'REPOSITORY_OPERATION_HISTORY_ID'\n                ],\n                unique: false\n            }]\n    })\n], RecordHistory);\nexport { RecordHistory };\n//# sourceMappingURL=RecordHistory.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbAny, DbNumber, Entity, Id, JoinColumn, ManyToOne, Table } from \"@airport/air-traffic-control\";\n/**\n * Currently, syncing databases are always SqLite dbs.  This means\n * we don't need to store types for values.  If a need arises type\n * specific FieldChange classes can always be added.  Having\n * VARCHAR and NUMBER should suffice for other db implementations.\n * NUMBER covers (dates, booleans and numbers).  Maybe REALs will\n * also be required.\n */\nlet RecordHistoryNewValue = class RecordHistoryNewValue {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: \"REPOSITORY_RECORD_HISTORY_ID\",\n        referencedColumnName: \"ID\", nullable: false })\n], RecordHistoryNewValue.prototype, \"recordHistory\", void 0);\n__decorate([\n    Id(),\n    Column({ name: \"COLUMN_INDEX\", nullable: false }),\n    DbNumber()\n], RecordHistoryNewValue.prototype, \"columnIndex\", void 0);\n__decorate([\n    Column({ name: \"NEW_VALUE\" }),\n    DbAny()\n], RecordHistoryNewValue.prototype, \"newValue\", void 0);\nRecordHistoryNewValue = __decorate([\n    Entity(),\n    Table({\n        name: \"REPOSITORY_RECORD_HISTORY_NEW_VALUES\",\n        // primaryKey: [\n        // \t\"REPOSITORY_RECORD_HISTORY_ID\",\n        // \t\"COLUMN_INDEX\"\n        // ]\n    })\n], RecordHistoryNewValue);\nexport { RecordHistoryNewValue };\n//# sourceMappingURL=RecordHistoryNewValue.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbAny, DbNumber, Entity, Id, JoinColumn, ManyToOne, Table } from \"@airport/air-traffic-control\";\n/**\n * Currently, syncing databases are always SqLite dbs.  This means\n * we don't need to store types for values.  If a need arises type\n * specific FieldChange classes can always be added.  Having\n * VARCHAR and NUMBER should suffice for other db implementations.\n * NUMBER covers (dates, booleans and numbers).  Maybe REALs will\n * also be required.\n */\nlet RecordHistoryOldValue = class RecordHistoryOldValue {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: \"REPOSITORY_RECORD_HISTORY_ID\",\n        referencedColumnName: \"ID\", nullable: false })\n], RecordHistoryOldValue.prototype, \"recordHistory\", void 0);\n__decorate([\n    Id(),\n    Column({ name: \"COLUMN_INDEX\", nullable: false }),\n    DbNumber()\n], RecordHistoryOldValue.prototype, \"columnIndex\", void 0);\n__decorate([\n    Column({ name: \"OLD_VALUE\" }),\n    DbAny()\n], RecordHistoryOldValue.prototype, \"oldValue\", void 0);\nRecordHistoryOldValue = __decorate([\n    Entity(),\n    Table({\n        name: \"REPOSITORY_RECORD_HISTORY_OLD_VALUES\",\n        // primaryKey: [\n        // \t\"REPOSITORY_RECORD_HISTORY_ID\",\n        // \t\"COLUMN_INDEX\"\n        // ]\n    })\n], RecordHistoryOldValue);\nexport { RecordHistoryOldValue };\n//# sourceMappingURL=RecordHistoryOldValue.js.map","export var RepositoryTransactionType;\n(function (RepositoryTransactionType) {\n    RepositoryTransactionType[\"LOCAL\"] = \"LOCAL\";\n    RepositoryTransactionType[\"REMOTE\"] = \"REMOTE\";\n    RepositoryTransactionType[\"REMOTE_REFERENCE\"] = \"REMOTE_REFERENCE\";\n})(RepositoryTransactionType || (RepositoryTransactionType = {}));\n//# sourceMappingURL=RepositoryTransactionType.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbBoolean, DbNumber, DbString, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, OneToMany, SequenceGenerator, Table, } from '@airport/air-traffic-control';\nimport { RepositoryTransactionType } from './RepositoryTransactionType';\nlet RepositoryTransactionHistory = class RepositoryTransactionHistory {\n    constructor(data) {\n        this.repositoryTransactionType = RepositoryTransactionType.LOCAL;\n        this.operationHistory = [];\n        if (!data) {\n            return;\n        }\n        this.id = data.id;\n        this.transactionHistory = data.transactionHistory;\n        this.repository = data.repository;\n        this.saveTimestamp = data.saveTimestamp;\n        this.operationHistory = data.operationHistory;\n    }\n};\n__decorate([\n    GeneratedValue(),\n    Id(),\n    SequenceGenerator({ allocationSize: 200 })\n], RepositoryTransactionHistory.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'REPOSITORY_TRANSACTION_TYPE', nullable: false }),\n    DbString()\n], RepositoryTransactionHistory.prototype, \"repositoryTransactionType\", void 0);\n__decorate([\n    Column({ name: 'SAVE_TIMESTAMP', nullable: false }),\n    DbNumber()\n], RepositoryTransactionHistory.prototype, \"saveTimestamp\", void 0);\n__decorate([\n    Column({ name: 'SYNC_TIMESTAMP' }),\n    DbNumber()\n], RepositoryTransactionHistory.prototype, \"syncTimestamp\", void 0);\n__decorate([\n    Column({ name: \"UUID\", nullable: false }),\n    DbString()\n], RepositoryTransactionHistory.prototype, \"uuId\", void 0);\n__decorate([\n    Column({ name: \"IS_REPOSITORY_CREATION\", nullable: false }),\n    DbBoolean()\n], RepositoryTransactionHistory.prototype, \"isRepositoryCreation\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'REPOSITORY_ID',\n        referencedColumnName: 'ID', nullable: false\n    })\n], RepositoryTransactionHistory.prototype, \"repository\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'TRANSACTION_HISTORY_ID',\n        referencedColumnName: 'ID', nullable: false\n    })\n], RepositoryTransactionHistory.prototype, \"transactionHistory\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'repositoryTransactionHistory' })\n], RepositoryTransactionHistory.prototype, \"operationHistory\", void 0);\nRepositoryTransactionHistory = __decorate([\n    Entity(),\n    Table({ name: 'REPOSITORY_TRANSACTION_HISTORY' })\n], RepositoryTransactionHistory);\nexport { RepositoryTransactionHistory };\n//# sourceMappingURL=RepositoryTransactionHistory.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbString, Entity, GeneratedValue, Id, OneToMany, SequenceGenerator, Table, Transient } from '@airport/air-traffic-control';\nimport { SyncApplicationMap } from '@airport/ground-control';\nlet TransactionHistory = class TransactionHistory {\n    constructor() {\n        this.repositoryTransactionHistories = [];\n        this.repositoryTransactionHistoryMap = {};\n        this.applicationMap = new SyncApplicationMap();\n        this.allOperationHistory = [];\n        this.allRecordHistory = [];\n        this.allRecordHistoryNewValues = [];\n        this.allRecordHistoryOldValues = [];\n    }\n};\n__decorate([\n    GeneratedValue(),\n    Id(),\n    SequenceGenerator({ allocationSize: 100 })\n], TransactionHistory.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'TRANSACTION_TYPE', nullable: false }),\n    DbString()\n], TransactionHistory.prototype, \"transactionType\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'transactionHistory' })\n], TransactionHistory.prototype, \"repositoryTransactionHistories\", void 0);\n__decorate([\n    Transient()\n], TransactionHistory.prototype, \"repositoryTransactionHistoryMap\", void 0);\n__decorate([\n    Transient()\n], TransactionHistory.prototype, \"applicationMap\", void 0);\n__decorate([\n    Transient()\n], TransactionHistory.prototype, \"allOperationHistory\", void 0);\n__decorate([\n    Transient()\n], TransactionHistory.prototype, \"allRecordHistory\", void 0);\n__decorate([\n    Transient()\n], TransactionHistory.prototype, \"allRecordHistoryNewValues\", void 0);\n__decorate([\n    Transient()\n], TransactionHistory.prototype, \"allRecordHistoryOldValues\", void 0);\nTransactionHistory = __decorate([\n    Entity(),\n    Table({ name: 'TRANSACTION_HISTORY' })\n], TransactionHistory);\nexport { TransactionHistory };\n//# sourceMappingURL=TransactionHistory.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, DbString, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, } from '@airport/air-traffic-control';\nlet Actor = class Actor {\n};\n__decorate([\n    Id(),\n    GeneratedValue(),\n    DbNumber(),\n    Column({ name: 'ID' })\n], Actor.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'UU_ID', nullable: false }),\n    DbString()\n], Actor.prototype, \"uuId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'USER_ID', referencedColumnName: 'ID',\n        nullable: false\n    })\n], Actor.prototype, \"user\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'TERMINAL_ID', referencedColumnName: 'ID',\n        nullable: false\n    })\n], Actor.prototype, \"terminal\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: \"APPLICATION_INDEX\", referencedColumnName: \"APPLICATION_INDEX\" })\n], Actor.prototype, \"application\", void 0);\nActor = __decorate([\n    Entity()\n], Actor);\nexport { Actor };\n//# sourceMappingURL=Actor.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbDate, DbNumber, DbString, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, OneToMany, Table } from \"@airport/air-traffic-control\";\nlet Repository = class Repository {\n    constructor() {\n        this.repositoryTransactionHistory = [];\n    }\n};\n__decorate([\n    Column({ name: \"ID\" }),\n    GeneratedValue(),\n    Id(),\n    DbNumber()\n], Repository.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'AGE_SUITABILITY', nullable: false }),\n    DbNumber()\n], Repository.prototype, \"ageSuitability\", void 0);\n__decorate([\n    Column({ name: \"CREATED_AT\", nullable: false }),\n    DbDate()\n], Repository.prototype, \"createdAt\", void 0);\n__decorate([\n    Column({ name: \"IMMUTABLE\", nullable: false })\n], Repository.prototype, \"immutable\", void 0);\n__decorate([\n    Column({ name: \"SOURCE\", nullable: false }),\n    DbString()\n], Repository.prototype, \"source\", void 0);\n__decorate([\n    Column({ name: \"UU_ID\", nullable: false }),\n    DbString()\n], Repository.prototype, \"uuId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: \"OWNER_USER_ID\", referencedColumnName: \"ID\",\n        nullable: false\n    })\n], Repository.prototype, \"owner\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'repository' })\n], Repository.prototype, \"repositoryTransactionHistory\", void 0);\nRepository = __decorate([\n    Entity(),\n    Table({\n        name: \"REPOSITORY\"\n    })\n], Repository);\nexport { Repository };\n//# sourceMappingURL=Repository.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, GeneratedValue, Id, JoinColumn, ManyToOne, MappedSuperclass } from '@airport/air-traffic-control';\nlet RepositoryEntity = class RepositoryEntity {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({\n        name: 'REPOSITORY_ID', referencedColumnName: 'ID',\n        nullable: false\n    })\n], RepositoryEntity.prototype, \"repository\", void 0);\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({\n        name: 'ACTOR_ID', referencedColumnName: 'ID',\n        nullable: false\n    })\n], RepositoryEntity.prototype, \"actor\", void 0);\n__decorate([\n    Id(),\n    Column({ name: 'ACTOR_RECORD_ID', nullable: false }),\n    GeneratedValue()\n], RepositoryEntity.prototype, \"actorRecordId\", void 0);\n__decorate([\n    Column({ name: 'AGE_SUITABILITY', nullable: false }),\n    DbNumber()\n], RepositoryEntity.prototype, \"ageSuitability\", void 0);\n__decorate([\n    Column({ name: 'SYSTEM_WIDE_OPERATION_ID', nullable: false })\n], RepositoryEntity.prototype, \"systemWideOperationId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'ORIGINAL_REPOSITORY_ID', referencedColumnName: 'ID'\n    })\n], RepositoryEntity.prototype, \"originalRepository\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'ORIGINAL_ACTOR_ID', referencedColumnName: 'ID'\n    })\n], RepositoryEntity.prototype, \"originalActor\", void 0);\n__decorate([\n    Column({ name: 'ORIGINAL_ACTOR_RECORD_ID' })\n], RepositoryEntity.prototype, \"originalActorRecordId\", void 0);\nRepositoryEntity = __decorate([\n    MappedSuperclass()\n], RepositoryEntity);\nexport { RepositoryEntity };\n//# sourceMappingURL=RepositoryEntity.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, Table } from \"@airport/air-traffic-control\";\nlet RepositoryApplication = class RepositoryApplication {\n};\n__decorate([\n    Id(),\n    Column({ name: \"REPOSITORY_APPLICATION_ID\" }),\n    GeneratedValue(),\n    DbNumber()\n], RepositoryApplication.prototype, \"id\", void 0);\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: \"REPOSITORY_ID\", referencedColumnName: \"ID\" })\n], RepositoryApplication.prototype, \"repository\", void 0);\n__decorate([\n    Column({ name: \"APPLICATION_INDEX\", nullable: false }),\n    DbNumber()\n], RepositoryApplication.prototype, \"applicationIndex\", void 0);\nRepositoryApplication = __decorate([\n    Entity(),\n    Table({\n        name: \"REPOSITORY_APPLICATIONS\"\n    })\n], RepositoryApplication);\nexport { RepositoryApplication };\n//# sourceMappingURL=RepositoryApplication.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { MappedSuperclass } from '@airport/air-traffic-control';\nimport { RepositoryEntity } from '../repository/RepositoryEntity';\nlet ChildRepoRow = class ChildRepoRow extends RepositoryEntity {\n};\nChildRepoRow = __decorate([\n    MappedSuperclass()\n], ChildRepoRow);\nexport { ChildRepoRow };\n//# sourceMappingURL=ChildRepoRow.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { MappedSuperclass } from '@airport/air-traffic-control';\nlet ChildRow = class ChildRow {\n};\nChildRow = __decorate([\n    MappedSuperclass()\n], ChildRow);\nexport { ChildRow };\n//# sourceMappingURL=ChildRow.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, MappedSuperclass } from '@airport/air-traffic-control';\nimport { RepositoryEntity } from '../repository/RepositoryEntity';\nlet ImmutableRepoRow = class ImmutableRepoRow extends RepositoryEntity {\n};\n__decorate([\n    Column({ name: 'CREATED_AT' })\n], ImmutableRepoRow.prototype, \"createdAt\", void 0);\nImmutableRepoRow = __decorate([\n    MappedSuperclass()\n], ImmutableRepoRow);\nexport { ImmutableRepoRow };\n//# sourceMappingURL=ImmutableRepoRow.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, JoinColumn, ManyToOne, MappedSuperclass } from '@airport/air-traffic-control';\nlet ImmutableRow = class ImmutableRow {\n};\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'USER_ACCOUNT_ID' })\n], ImmutableRow.prototype, \"user\", void 0);\n__decorate([\n    Column({ name: 'CREATED_AT' })\n], ImmutableRow.prototype, \"createdAt\", void 0);\nImmutableRow = __decorate([\n    MappedSuperclass()\n], ImmutableRow);\nexport { ImmutableRow };\n//# sourceMappingURL=ImmutableRow.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, MappedSuperclass } from '@airport/air-traffic-control';\nimport { ImmutableRepoRow } from './ImmutableRepoRow';\nlet MutableRepoRow = class MutableRepoRow extends ImmutableRepoRow {\n};\n__decorate([\n    Column({ name: 'UPDATED_AT' })\n], MutableRepoRow.prototype, \"updatedAt\", void 0);\nMutableRepoRow = __decorate([\n    MappedSuperclass()\n], MutableRepoRow);\nexport { MutableRepoRow };\n//# sourceMappingURL=MutableRepoRow.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, MappedSuperclass } from '@airport/air-traffic-control';\nimport { ImmutableRow } from './ImmutableRow';\nlet MutableRow = class MutableRow extends ImmutableRow {\n};\n__decorate([\n    Column({ name: 'UPDATED_AT' })\n], MutableRow.prototype, \"updatedAt\", void 0);\nMutableRow = __decorate([\n    MappedSuperclass()\n], MutableRow);\nexport { MutableRow };\n//# sourceMappingURL=MutableRow.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { MappedSuperclass } from '@airport/air-traffic-control';\nlet ReferenceRow = class ReferenceRow {\n};\nReferenceRow = __decorate([\n    MappedSuperclass()\n], ReferenceRow);\nexport { ReferenceRow };\n//# sourceMappingURL=ReferenceRow.js.map","import { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { diSet as dS, duoDiSet as ddS } from '@airport/check-in';\nimport { DEPENDENCY_INJECTION } from '@airport/direction-indicator';\nimport { getFullApplicationName } from '@airport/ground-control';\nimport { Actor, ChildRepoRow, ChildRow, ImmutableRepoRow, ImmutableRow, MutableRepoRow, MutableRow, OperationHistory, RecordHistory, RecordHistoryNewValue, RecordHistoryOldValue, ReferenceRow, Repository, RepositoryApplication, RepositoryEntity, RepositoryTransactionHistory, TransactionHistory } from '../ddl/ddl';\nconst __constructors__ = {\n    Actor: Actor,\n    ChildRepoRow: ChildRepoRow,\n    ChildRow: ChildRow,\n    ImmutableRepoRow: ImmutableRepoRow,\n    ImmutableRow: ImmutableRow,\n    MutableRepoRow: MutableRepoRow,\n    MutableRow: MutableRow,\n    OperationHistory: OperationHistory,\n    RecordHistory: RecordHistory,\n    RecordHistoryNewValue: RecordHistoryNewValue,\n    RecordHistoryOldValue: RecordHistoryOldValue,\n    ReferenceRow: ReferenceRow,\n    Repository: Repository,\n    RepositoryApplication: RepositoryApplication,\n    RepositoryEntity: RepositoryEntity,\n    RepositoryTransactionHistory: RepositoryTransactionHistory,\n    TransactionHistory: TransactionHistory\n};\nexport const Q_APPLICATION = {\n    __constructors__,\n    domain: 'air',\n    name: '@airport/holding-pattern'\n};\nexport const Q = Q_APPLICATION;\nexport function diSet(dbEntityId) {\n    return dS(Q.__dbApplication__, dbEntityId);\n}\nexport function duoDiSet(dbEntityId) {\n    return ddS(Q.__dbApplication__, dbEntityId);\n}\nDEPENDENCY_INJECTION.db().eventuallyGet(AIRPORT_DATABASE).then((airDb) => {\n    airDb.QM[getFullApplicationName(Q_APPLICATION)] = Q;\n});\n//# sourceMappingURL=qApplication.js.map","import { Dao, DaoQueryDecorators, } from '@airport/check-in';\nimport { Q, duoDiSet, } from './qApplication';\n// Application Q object Dependency Injection readiness detection Dao\nexport class SQDIDao extends Dao {\n    constructor(dbEntityId) {\n        super(dbEntityId, Q);\n    }\n}\nexport class BaseActorDao extends SQDIDao {\n    constructor() {\n        super(1);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(1);\n    }\n}\nBaseActorDao.Find = new DaoQueryDecorators();\nBaseActorDao.FindOne = new DaoQueryDecorators();\nBaseActorDao.Search = new DaoQueryDecorators();\nBaseActorDao.SearchOne = new DaoQueryDecorators();\nexport class BaseOperationHistoryDao extends SQDIDao {\n    constructor() {\n        super(5);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(5);\n    }\n}\nBaseOperationHistoryDao.Find = new DaoQueryDecorators();\nBaseOperationHistoryDao.FindOne = new DaoQueryDecorators();\nBaseOperationHistoryDao.Search = new DaoQueryDecorators();\nBaseOperationHistoryDao.SearchOne = new DaoQueryDecorators();\nexport class BaseRecordHistoryDao extends SQDIDao {\n    constructor() {\n        super(0);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(0);\n    }\n}\nBaseRecordHistoryDao.Find = new DaoQueryDecorators();\nBaseRecordHistoryDao.FindOne = new DaoQueryDecorators();\nBaseRecordHistoryDao.Search = new DaoQueryDecorators();\nBaseRecordHistoryDao.SearchOne = new DaoQueryDecorators();\nexport class BaseRecordHistoryNewValueDao extends SQDIDao {\n    constructor() {\n        super(6);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(6);\n    }\n}\nBaseRecordHistoryNewValueDao.Find = new DaoQueryDecorators();\nBaseRecordHistoryNewValueDao.FindOne = new DaoQueryDecorators();\nBaseRecordHistoryNewValueDao.Search = new DaoQueryDecorators();\nBaseRecordHistoryNewValueDao.SearchOne = new DaoQueryDecorators();\nexport class BaseRecordHistoryOldValueDao extends SQDIDao {\n    constructor() {\n        super(7);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(7);\n    }\n}\nBaseRecordHistoryOldValueDao.Find = new DaoQueryDecorators();\nBaseRecordHistoryOldValueDao.FindOne = new DaoQueryDecorators();\nBaseRecordHistoryOldValueDao.Search = new DaoQueryDecorators();\nBaseRecordHistoryOldValueDao.SearchOne = new DaoQueryDecorators();\nexport class BaseRepositoryDao extends SQDIDao {\n    constructor() {\n        super(2);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(2);\n    }\n}\nBaseRepositoryDao.Find = new DaoQueryDecorators();\nBaseRepositoryDao.FindOne = new DaoQueryDecorators();\nBaseRepositoryDao.Search = new DaoQueryDecorators();\nBaseRepositoryDao.SearchOne = new DaoQueryDecorators();\nexport class BaseRepositoryApplicationDao extends SQDIDao {\n    constructor() {\n        super(8);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(8);\n    }\n}\nBaseRepositoryApplicationDao.Find = new DaoQueryDecorators();\nBaseRepositoryApplicationDao.FindOne = new DaoQueryDecorators();\nBaseRepositoryApplicationDao.Search = new DaoQueryDecorators();\nBaseRepositoryApplicationDao.SearchOne = new DaoQueryDecorators();\nexport class BaseRepositoryTransactionHistoryDao extends SQDIDao {\n    constructor() {\n        super(4);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(4);\n    }\n}\nBaseRepositoryTransactionHistoryDao.Find = new DaoQueryDecorators();\nBaseRepositoryTransactionHistoryDao.FindOne = new DaoQueryDecorators();\nBaseRepositoryTransactionHistoryDao.Search = new DaoQueryDecorators();\nBaseRepositoryTransactionHistoryDao.SearchOne = new DaoQueryDecorators();\nexport class BaseTransactionHistoryDao extends SQDIDao {\n    constructor() {\n        super(3);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(3);\n    }\n}\nBaseTransactionHistoryDao.Find = new DaoQueryDecorators();\nBaseTransactionHistoryDao.FindOne = new DaoQueryDecorators();\nBaseTransactionHistoryDao.Search = new DaoQueryDecorators();\nBaseTransactionHistoryDao.SearchOne = new DaoQueryDecorators();\n//# sourceMappingURL=baseDaos.js.map","import { Duo, } from '@airport/check-in';\nimport { Q, duoDiSet, } from './qApplication';\n// Application Q object Dependency Injection readiness detection Duo\nexport class SQDIDuo extends Duo {\n    constructor(dbEntityId) {\n        super(dbEntityId, Q);\n    }\n}\nexport class BaseActorDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(1);\n    }\n    constructor() {\n        super(1);\n    }\n}\nexport class BaseOperationHistoryDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(5);\n    }\n    constructor() {\n        super(5);\n    }\n}\nexport class BaseRecordHistoryDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(0);\n    }\n    constructor() {\n        super(0);\n    }\n}\nexport class BaseRecordHistoryNewValueDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(6);\n    }\n    constructor() {\n        super(6);\n    }\n}\nexport class BaseRecordHistoryOldValueDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(7);\n    }\n    constructor() {\n        super(7);\n    }\n}\nexport class BaseRepositoryDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(2);\n    }\n    constructor() {\n        super(2);\n    }\n}\nexport class BaseRepositoryApplicationDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(8);\n    }\n    constructor() {\n        super(8);\n    }\n}\nexport class BaseRepositoryTransactionHistoryDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(4);\n    }\n    constructor() {\n        super(4);\n    }\n}\nexport class BaseTransactionHistoryDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(3);\n    }\n    constructor() {\n        super(3);\n    }\n}\n//# sourceMappingURL=baseDuos.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseRecordHistoryNewValueDao, Q } from '../../generated/generated';\nlet RecordHistoryNewValueDao = class RecordHistoryNewValueDao extends BaseRecordHistoryNewValueDao {\n    async findByRecordHistoryIdIn(recordHistoryIds) {\n        let rhnv;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                rhnv = Q.RecordHistoryNewValue\n            ],\n            where: rhnv.recordHistory.id.in(recordHistoryIds)\n        });\n    }\n};\nRecordHistoryNewValueDao = __decorate([\n    Injected()\n], RecordHistoryNewValueDao);\nexport { RecordHistoryNewValueDao };\n//# sourceMappingURL=RecordHistoryNewValueDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseRecordHistoryOldValueDao } from '../../generated/generated';\nimport { Q } from '../../index';\nlet RecordHistoryOldValueDao = class RecordHistoryOldValueDao extends BaseRecordHistoryOldValueDao {\n    async findByRecordHistoryIdIn(recordHistoryIds) {\n        let rhov;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                rhov = Q.RecordHistoryOldValue\n            ],\n            where: rhov.recordHistory.id.in(recordHistoryIds)\n        });\n    }\n};\nRecordHistoryOldValueDao = __decorate([\n    Injected()\n], RecordHistoryOldValueDao);\nexport { RecordHistoryOldValueDao };\n//# sourceMappingURL=RecordHistoryOldValueDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ALL_FIELDS, and, or, Y } from '@airport/air-traffic-control';\nimport { ensureChildArray, TransactionType } from '@airport/ground-control';\nimport { BaseRepositoryTransactionHistoryDao, Q, } from '../../generated/generated';\nimport { Injected } from '@airport/direction-indicator';\nlet RepositoryTransactionHistoryDao = class RepositoryTransactionHistoryDao extends BaseRepositoryTransactionHistoryDao {\n    /*\n    async clearContentsWhereIdsIn(\n        repositoryTransactionBlockIds: TmRepositoryTransactionBlockId[]\n    ): Promise<void> {\n        const rtb: QRepositoryTransactionBlock = Q.QRepositoryTransactionBlock\n        await this.db.updateWhere({\n            update: rtb,\n            set: {\n                contents: null\n            },\n            where: rtb.id.in(repositoryTransactionBlockIds)\n        })\n    }\n    */\n    async findWhereUuIdsIn(uuIds) {\n        let rth;\n        return await this.db.find.tree({\n            select: {\n                uuId: Y\n            },\n            from: [\n                rth = Q.RepositoryTransactionHistory\n            ],\n            where: rth.uuId.in(uuIds)\n        });\n    }\n    async findAllLocalChangesForRecordIds(changedRecordIds) {\n        const repositoryTransactionHistoryMapByRepositoryId = new Map();\n        const rth = Q.RepositoryTransactionHistory;\n        const th = rth.transactionHistory.innerJoin();\n        const oh = rth.operationHistory.leftJoin();\n        const ae = oh.entity.leftJoin();\n        const av = ae.applicationVersion.leftJoin();\n        const rh = oh.recordHistory.leftJoin();\n        const nv = rh.newValues.leftJoin();\n        let id = Y;\n        const repositoryEquals = [];\n        for (const [repositoryId, idsForRepository] of changedRecordIds) {\n            const recordMapForRepository = idsForRepository.ids;\n            const entityEquals = [];\n            for (const [entityId, recordMapForEntity] of recordMapForRepository) {\n                const actorEquals = [];\n                for (const [actorId, recordsForActor] of recordMapForEntity) {\n                    actorEquals.push(and(oh.actor.id.equals(actorId), rh.actorRecordId.in(Array.from(recordsForActor))));\n                }\n                entityEquals.push(and(oh.entity.id.equals(entityId), or(...actorEquals)));\n            }\n            repositoryEquals.push(and(rth.repository.id.equals(repositoryId), rth.saveTimestamp.greaterThanOrEquals(idsForRepository.firstChangeTime), or(...entityEquals)));\n        }\n        const repoTransHistories = await this.db.find.tree({\n            select: {\n                ...ALL_FIELDS,\n                operationHistory: {\n                    orderNumber: Y,\n                    changeType: Y,\n                    entity: {\n                        id,\n                        // index: Y,\n                        applicationVersion: {\n                            id: Y,\n                            // integerVersion: Y,\n                            // application: {\n                            // \tindex: Y\n                            // }\n                        }\n                    },\n                    recordHistory: {\n                        id,\n                        newValues: {\n                            columnIndex: Y,\n                            newValue: Y\n                        }\n                    }\n                }\n            },\n            from: [\n                rth,\n                th,\n                oh,\n                ae,\n                av,\n                rh,\n                nv\n            ],\n            where: and(th.transactionType.equals(TransactionType.LOCAL), or(...repositoryEquals)),\n            // orderBy: [\n            // \trth.repository.id.asc()\n            // ]\n        });\n        for (const repoTransHistory of repoTransHistories) {\n            ensureChildArray(repositoryTransactionHistoryMapByRepositoryId, repoTransHistory.repository.id)\n                .push(repoTransHistory);\n            repoTransHistory.operationHistory.sort((rth1, rth2) => {\n                if (rth1.orderNumber < rth2.orderNumber) {\n                    return -1;\n                }\n                if (rth1.orderNumber > rth2.orderNumber) {\n                    return 1;\n                }\n                return 0;\n            });\n        }\n        return repositoryTransactionHistoryMapByRepositoryId;\n    }\n    async updateSyncTimestamp(repositoryTransactionHistory) {\n        let rth;\n        await this.db.updateWhere({\n            update: rth = Q.RepositoryTransactionHistory,\n            set: {\n                syncTimestamp: repositoryTransactionHistory.syncTimestamp\n            },\n            where: rth.id.equals(repositoryTransactionHistory.id)\n        });\n    }\n};\nRepositoryTransactionHistoryDao = __decorate([\n    Injected()\n], RepositoryTransactionHistoryDao);\nexport { RepositoryTransactionHistoryDao };\n//# sourceMappingURL=RepositoryTransactionHistoryDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ALL_FIELDS, and, Y } from '@airport/air-traffic-control';\nimport { ensureChildJsMap } from '@airport/ground-control';\nimport { BaseActorDao, Q } from '../../generated/generated';\nimport { Injected } from '@airport/direction-indicator';\nlet ActorDao = class ActorDao extends BaseActorDao {\n    async findWithDetailsAndGlobalIdsByIds(actorIds) {\n        return await this.findWithDetailsAndGlobalIdsByWhereClause((a) => a.id.in(actorIds));\n    }\n    async findMapsWithDetailsByGlobalIds(uuIds, userIds, terminalIds, actorMap, actorMapById) {\n        const actors = await this.findWithDetailsByGlobalIds(uuIds, userIds, terminalIds);\n        for (const actor of actors) {\n            ensureChildJsMap(actorMap, actor.user.id)\n                .set(actor.terminal.id, actor);\n            actorMapById.set(actor.id, actor);\n        }\n    }\n    async findWithDetailsByGlobalIds(uuIds, userIds, terminalIds) {\n        return await this.findWithDetailsAndGlobalIdsByWhereClause((a) => and(a.uuId.in(uuIds), a.terminal.id.in(terminalIds), a.user.id.in(userIds)));\n    }\n    async findByDomainAndApplicationNames(domainName, applicationName) {\n        let act;\n        let application;\n        let domain;\n        let terminal;\n        let user;\n        return await this.db.find.tree({\n            select: {\n                id: Y,\n                application: {\n                    ...ALL_FIELDS,\n                    domain: {}\n                },\n                terminal: {},\n                user: {},\n                uuId: Y\n            },\n            from: [\n                act = Q.Actor,\n                application = act.application.innerJoin(),\n                domain = application.domain.innerJoin(),\n                terminal = act.terminal.leftJoin(),\n                user = act.user.leftJoin()\n            ],\n            where: and(domain.name.equals(domainName), application.name.equals(applicationName))\n        });\n    }\n    async findByUuIds(uuIds) {\n        let a;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                a = Q.Actor\n            ],\n            where: a.uuId.in(uuIds)\n        });\n    }\n    async insert(actors) {\n        let t;\n        const values = [];\n        for (const actor of actors) {\n            values.push([\n                actor.uuId, actor.application.index, actor.user.id, actor.terminal.id,\n            ]);\n        }\n        const ids = await this.db.insertValuesGenerateIds({\n            insertInto: t = Q.Actor,\n            columns: [\n                t.uuId,\n                t.application.index,\n                t.user.id,\n                t.terminal.id\n            ],\n            values\n        });\n        for (let i = 0; i < actors.length; i++) {\n            let actor = actors[i];\n            actor.id = ids[i][0];\n        }\n    }\n    async findWithDetailsAndGlobalIdsByWhereClause(getWhereClause) {\n        let a;\n        let ap;\n        let t;\n        const id = Y;\n        const username = Y;\n        const uuId = Y;\n        return await this.db.find.tree({\n            select: {\n                ...ALL_FIELDS,\n                application: {\n                    index: Y,\n                    name: Y,\n                    domain: {\n                        name: Y\n                    }\n                },\n                terminal: {\n                    id,\n                    uuId,\n                    owner: {\n                        id,\n                        username,\n                        uuId,\n                    }\n                },\n                user: {\n                    id,\n                    username,\n                    uuId,\n                }\n            },\n            from: [\n                a = Q.Actor,\n                ap = a.application.leftJoin(),\n                ap.domain.leftJoin(),\n                t = a.terminal.leftJoin(),\n                t.owner.leftJoin(),\n                a.user.leftJoin()\n            ],\n            where: getWhereClause(a)\n        });\n    }\n};\nActorDao = __decorate([\n    Injected()\n], ActorDao);\nexport { ActorDao };\n//# sourceMappingURL=ActorDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ALL_FIELDS, and, Y } from '@airport/air-traffic-control';\nimport { Injected } from '@airport/direction-indicator';\nimport { TransactionType } from '@airport/ground-control';\nimport { BaseRepositoryDao, Q, } from '../../generated/generated';\nlet RepositoryDao = class RepositoryDao extends BaseRepositoryDao {\n    async getRepositoryLoadInfo(repositorySource, repositoryUuId, context) {\n        let r;\n        let rth;\n        let th;\n        return await this.db.findOne.tree({\n            select: {\n                immutable: Y,\n                repositoryTransactionHistory: {\n                    saveTimestamp: Y\n                }\n            },\n            from: [\n                r = Q.Repository,\n                rth = r.repositoryTransactionHistory.innerJoin(),\n                th = rth.transactionHistory.innerJoin()\n            ],\n            where: and(r.source.equals(repositorySource), r.uuId.equals(repositoryUuId), th.transactionType.equals(TransactionType.REMOTE_SYNC))\n        }, context);\n    }\n    async findReposWithDetailsAndSyncNodeIds(repositoryIds) {\n        let r;\n        const id = Y;\n        return await this.db.find.tree({\n            select: {\n                id,\n                owner: {\n                    id\n                },\n                createdAt: Y,\n                uuId: Y\n            },\n            from: [\n                r = Q.Repository\n            ],\n            where: r.id.in(repositoryIds)\n        });\n    }\n    async findByIds(repositoryIds) {\n        let r;\n        return await this.db.find.tree({\n            select: {\n                ...ALL_FIELDS,\n                owner: {}\n            },\n            from: [\n                r = Q.Repository,\n                r.owner.innerJoin()\n            ],\n            where: r.id.in(repositoryIds)\n        });\n    }\n    async findByUuIds(uuIds) {\n        let r;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                r = Q.Repository\n            ],\n            where: r.uuId.in(uuIds)\n        });\n    }\n    async insert(repositories) {\n        let r;\n        const values = [];\n        for (const repository of repositories) {\n            values.push([\n                repository.createdAt, repository.uuId, repository.ageSuitability,\n                repository.source, repository.immutable, repository.owner.id,\n            ]);\n        }\n        const ids = await this.db.insertValuesGenerateIds({\n            insertInto: r = Q.Repository,\n            columns: [\n                r.createdAt,\n                r.uuId,\n                r.ageSuitability,\n                r.source,\n                r.immutable,\n                r.owner.id\n            ],\n            values\n        });\n        for (let i = 0; i < repositories.length; i++) {\n            let repository = repositories[i];\n            repository.id = ids[i][0];\n        }\n    }\n};\nRepositoryDao = __decorate([\n    Injected()\n], RepositoryDao);\nexport { RepositoryDao };\n//# sourceMappingURL=RepositoryDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { BaseOperationHistoryDuo } from '../../generated/generated';\nlet OperationHistoryDuo = class OperationHistoryDuo extends BaseOperationHistoryDuo {\n    getNewRecord(entityChangeType, dbEntity, actor, repositoryTransactionHistory, systemWideOperationId, rootTransaction) {\n        let operationHistory = {\n            actor,\n            changeType: entityChangeType,\n            entity: dbEntity,\n            id: undefined,\n            orderNumber: ++rootTransaction.numberOfOperations,\n            recordHistory: [],\n            repositoryTransactionHistory: repositoryTransactionHistory,\n            systemWideOperationId\n        };\n        return operationHistory;\n    }\n    sort(ew1, ew2) {\n        let startId1 = ew1.orderNumber;\n        let startId2 = ew2.orderNumber;\n        if (startId1 > startId2) {\n            return 1;\n        }\n        if (startId2 > startId1) {\n            return -1;\n        }\n        return 0;\n    }\n    startRecordHistory(operationHistory, actorId, actorRecordId) {\n        const recordHistory = this.recordHistoryDuo.getNewRecord(actorId, actorRecordId);\n        recordHistory.operationHistory = operationHistory;\n        operationHistory.recordHistory.push(recordHistory);\n        operationHistory.repositoryTransactionHistory\n            .transactionHistory.allRecordHistory.push(recordHistory);\n        return recordHistory;\n    }\n};\n__decorate([\n    Inject()\n], OperationHistoryDuo.prototype, \"recordHistoryDuo\", void 0);\nOperationHistoryDuo = __decorate([\n    Injected()\n], OperationHistoryDuo);\nexport { OperationHistoryDuo };\n//# sourceMappingURL=OperationHistoryDuo.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { RecordHistory } from '../../ddl/ddl';\nimport { BaseRecordHistoryDuo, } from '../../generated/generated';\nlet RecordHistoryDuo = class RecordHistoryDuo extends BaseRecordHistoryDuo {\n    getNewRecord(actorId, actorRecordId) {\n        const recordHistory = new RecordHistory();\n        recordHistory.actorRecordId = actorRecordId;\n        recordHistory.actor = {\n            id: actorId\n        };\n        return recordHistory;\n    }\n    addNewValue(recordHistory, dbColumn, newValue) {\n        if (newValue === null) {\n            // No need to record a null value\n            return null;\n        }\n        const recordHistoryNewValue = this.recordHistoryNewValueDuo.getNewRecord(recordHistory, dbColumn, newValue);\n        recordHistory.newValues.push(recordHistoryNewValue);\n        recordHistory.operationHistory.repositoryTransactionHistory\n            .transactionHistory.allRecordHistoryNewValues.push(recordHistoryNewValue);\n        return recordHistoryNewValue;\n    }\n    addOldValue(recordHistory, dbColumn, oldValue) {\n        if (oldValue === null) {\n            // No need to record a null value\n            return null;\n        }\n        const recordHistoryOldValue = this.recordHistoryOldValueDuo.getNewRecord(recordHistory, dbColumn, oldValue);\n        recordHistory.oldValues.push(recordHistoryOldValue);\n        recordHistory.operationHistory.repositoryTransactionHistory\n            .transactionHistory.allRecordHistoryOldValues.push(recordHistoryOldValue);\n        return recordHistoryOldValue;\n    }\n};\n__decorate([\n    Inject()\n], RecordHistoryDuo.prototype, \"recordHistoryNewValueDuo\", void 0);\n__decorate([\n    Inject()\n], RecordHistoryDuo.prototype, \"recordHistoryOldValueDuo\", void 0);\nRecordHistoryDuo = __decorate([\n    Injected()\n], RecordHistoryDuo);\nexport { RecordHistoryDuo };\n//# sourceMappingURL=RecordHistoryDuo.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { RecordHistoryNewValue } from '../../ddl/ddl';\nimport { BaseRecordHistoryNewValueDuo } from '../../generated/generated';\nlet RecordHistoryNewValueDuo = class RecordHistoryNewValueDuo extends BaseRecordHistoryNewValueDuo {\n    constructor() {\n        super();\n    }\n    getNewRecord(recordHistory, dbColumn, newValue) {\n        const recordHistoryNewValue = new RecordHistoryNewValue();\n        recordHistoryNewValue.columnIndex = dbColumn.index;\n        recordHistoryNewValue.recordHistory = recordHistory;\n        recordHistoryNewValue.newValue = newValue;\n        return recordHistoryNewValue;\n    }\n};\nRecordHistoryNewValueDuo = __decorate([\n    Injected()\n], RecordHistoryNewValueDuo);\nexport { RecordHistoryNewValueDuo };\n//# sourceMappingURL=RecordHistoryNewValueDuo.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { RecordHistoryOldValue } from '../../ddl/ddl';\nimport { BaseRecordHistoryOldValueDuo } from '../../generated/generated';\nlet RecordHistoryOldValueDuo = class RecordHistoryOldValueDuo extends BaseRecordHistoryOldValueDuo {\n    constructor() {\n        super();\n    }\n    getNewRecord(recordHistory, dbColumn, oldValue) {\n        const recordHistoryOldValue = new RecordHistoryOldValue();\n        recordHistoryOldValue.columnIndex = dbColumn.index;\n        recordHistoryOldValue.recordHistory = recordHistory;\n        recordHistoryOldValue.oldValue = oldValue;\n        return recordHistoryOldValue;\n    }\n};\nRecordHistoryOldValueDuo = __decorate([\n    Injected()\n], RecordHistoryOldValueDuo);\nexport { RecordHistoryOldValueDuo };\n//# sourceMappingURL=RecordHistoryOldValueDuo.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Repository, RepositoryTransactionHistory } from '../../ddl/ddl';\nimport { BaseRepositoryTransactionHistoryDuo, } from '../../generated/generated';\nlet RepositoryTransactionHistoryDuo = class RepositoryTransactionHistoryDuo extends BaseRepositoryTransactionHistoryDuo {\n    getNewRecord(repositoryId, isRepositoryCreation) {\n        let repositoryTransactionHistory = new RepositoryTransactionHistory();\n        let saveTimestamp = new Date().getTime();\n        repositoryTransactionHistory.saveTimestamp = saveTimestamp;\n        repositoryTransactionHistory.uuId = uuidv4();\n        repositoryTransactionHistory.isRepositoryCreation = isRepositoryCreation;\n        repositoryTransactionHistory.repository = new Repository();\n        repositoryTransactionHistory.repository.id = repositoryId;\n        return repositoryTransactionHistory;\n    }\n    newRecord(data) {\n        if (!data) {\n            return null;\n        }\n        return { ...data };\n    }\n    sortRepoTransHistories(repoTransHistories, actorMapById) {\n        repoTransHistories.sort((repoTransHistory1, repoTransHistory2) => {\n            const syncTimeComparison = this.compareNumbers(repoTransHistory1.syncTimestamp, repoTransHistory2.syncTimestamp);\n            if (syncTimeComparison) {\n                return syncTimeComparison;\n            }\n            const saveTimeComparison = this.compareNumbers(repoTransHistory1.saveTimestamp, repoTransHistory2.saveTimestamp);\n            if (saveTimeComparison) {\n                return saveTimeComparison;\n            }\n            return 0;\n        });\n    }\n    startOperation(repositoryTransactionHistory, systemWideOperationId, entityChangeType, dbEntity, actor, rootTransaction) {\n        let operationHistory = this.operationHistoryDuo.getNewRecord(entityChangeType, dbEntity, actor, repositoryTransactionHistory, systemWideOperationId, rootTransaction);\n        repositoryTransactionHistory.operationHistory.push(operationHistory);\n        repositoryTransactionHistory\n            .transactionHistory.allOperationHistory.push(operationHistory);\n        return operationHistory;\n    }\n    compareDates(date1, date2) {\n        const time1 = date1 ? date1.getTime() : -1;\n        const time2 = date2 ? date2.getTime() : -1;\n        return this.compareNumbers(time1, time2);\n    }\n    compareNumbers(number1, number2) {\n        if (number1 < number2) {\n            return -1;\n        }\n        if (number2 > number1) {\n            return 1;\n        }\n        return 0;\n    }\n};\n__decorate([\n    Inject()\n], RepositoryTransactionHistoryDuo.prototype, \"operationHistoryDuo\", void 0);\nRepositoryTransactionHistoryDuo = __decorate([\n    Injected()\n], RepositoryTransactionHistoryDuo);\nexport { RepositoryTransactionHistoryDuo };\n//# sourceMappingURL=RepositoryTransactionHistoryDuo.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { TransactionType } from '@airport/ground-control';\nimport { TransactionHistory } from '../../ddl/ddl';\nimport { BaseTransactionHistoryDuo, } from '../../generated/generated';\nlet TransactionHistoryDuo = class TransactionHistoryDuo extends BaseTransactionHistoryDuo {\n    getNewRecord(transactionType = TransactionType.LOCAL) {\n        let transaction = new TransactionHistory();\n        transaction.transactionType = TransactionType.LOCAL;\n        return transaction;\n    }\n    getRepositoryTransaction(transactionHistory, repositoryId, isRepositoryCreation) {\n        let repositoryTransactionHistory = transactionHistory.repositoryTransactionHistoryMap[repositoryId];\n        if (!repositoryTransactionHistory) {\n            repositoryTransactionHistory = this.repositoryTransactionHistoryDuo.getNewRecord(repositoryId, isRepositoryCreation);\n            transactionHistory.repositoryTransactionHistories.push(repositoryTransactionHistory);\n            transactionHistory.repositoryTransactionHistoryMap[repositoryId] = repositoryTransactionHistory;\n            repositoryTransactionHistory.transactionHistory = transactionHistory;\n        }\n        return repositoryTransactionHistory;\n    }\n};\n__decorate([\n    Inject()\n], TransactionHistoryDuo.prototype, \"repositoryTransactionHistoryDuo\", void 0);\nTransactionHistoryDuo = __decorate([\n    Injected()\n], TransactionHistoryDuo);\nexport { TransactionHistoryDuo };\n//# sourceMappingURL=TransactionHistoryDuo.js.map","import { lib } from '@airport/direction-indicator';\nimport { RecordHistoryNewValueDao } from './dao/history/RecordHistoryNewValueDao';\nimport { RecordHistoryOldValueDao } from './dao/history/RecordHistoryOldValueDao';\nimport { RepositoryTransactionHistoryDao } from './dao/history/RepositoryTransactionHistoryDao';\nimport { ActorDao } from './dao/infrastructure/ActorDao';\nimport { RepositoryDao } from './dao/repository/RepositoryDao';\nimport { OperationHistoryDuo } from './duo/history/OperationHistoryDuo';\nimport { RecordHistoryDuo } from './duo/history/RecordHistoryDuo';\nimport { RecordHistoryNewValueDuo } from './duo/history/RecordHistoryNewValueDuo';\nimport { RecordHistoryOldValueDuo } from './duo/history/RecordHistoryOldValueDuo';\nimport { RepositoryTransactionHistoryDuo } from './duo/history/RepositoryTransactionHistoryDuo';\nimport { TransactionHistoryDuo } from './duo/history/TransactionHistoryDuo';\nexport const holdingPattern = lib('holding-pattern');\nexport const ACTOR_DAO = holdingPattern.token({\n    class: ActorDao,\n    interface: 'IActorDao',\n    token: 'ACTOR_DAO'\n});\nexport const OPERATION_HISTORY_DUO = holdingPattern.token({\n    class: OperationHistoryDuo,\n    interface: 'IOperationHistoryDuo',\n    token: 'OPERATION_HISTORY_DUO'\n});\nexport const RECORD_HISTORY_DUO = holdingPattern.token({\n    class: RecordHistoryDuo,\n    interface: 'IRecordHistoryDuo',\n    token: 'RECORD_HISTORY_DUO'\n});\nexport const RECORD_HISTORY_NEW_VALUE_DAO = holdingPattern.token({\n    class: RecordHistoryNewValueDao,\n    interface: 'IRecordHistoryNewValueDao',\n    token: 'RECORD_HISTORY_NEW_VALUE_DAO'\n});\nexport const RECORD_HISTORY_NEW_VALUE_DUO = holdingPattern.token({\n    class: RecordHistoryNewValueDuo,\n    interface: 'IRecordHistoryNewValueDuo',\n    token: 'RECORD_HISTORY_NEW_VALUE_DUO'\n});\nexport const RECORD_HISTORY_OLD_VALUE_DAO = holdingPattern.token({\n    class: RecordHistoryOldValueDao,\n    interface: 'IRecordHistoryOldValueDao',\n    token: 'RECORD_HISTORY_OLD_VALUE_DAO'\n});\nexport const RECORD_HISTORY_OLD_VALUE_DUO = holdingPattern.token({\n    class: RecordHistoryOldValueDuo,\n    interface: 'IRecordHistoryOldValueDuo',\n    token: 'RECORD_HISTORY_OLD_VALUE_DUO'\n});\nexport const REPOSITORY_DAO = holdingPattern.token({\n    class: RepositoryDao,\n    interface: 'IRepositoryDao',\n    token: 'REPOSITORY_DAO'\n});\nexport const REPOSITORY_TRANSACTION_HISTORY_DAO = holdingPattern.token({\n    class: RepositoryTransactionHistoryDao,\n    interface: 'IRepositoryTransactionHistoryDao',\n    token: 'REPOSITORY_TRANSACTION_HISTORY_DAO'\n});\nexport const REPOSITORY_TRANSACTION_HISTORY_DUO = holdingPattern.token({\n    class: RepositoryTransactionHistoryDuo,\n    interface: 'IRepositoryTransactionHistoryDuo',\n    token: 'REPOSITORY_TRANSACTION_HISTORY_DUO'\n});\nexport const TRANSACTION_HISTORY_DUO = holdingPattern.token({\n    class: TransactionHistoryDuo,\n    interface: 'ITransactionHistoryDuo',\n    token: 'TRANSACTION_HISTORY_DUO'\n});\nOPERATION_HISTORY_DUO.setDependencies({\n    recordHistoryDuo: RECORD_HISTORY_DUO,\n});\nRECORD_HISTORY_DUO.setDependencies({\n    recordHistoryNewValueDuo: RECORD_HISTORY_NEW_VALUE_DUO,\n    recordHistoryOldValueDuo: RECORD_HISTORY_OLD_VALUE_DUO,\n});\nREPOSITORY_TRANSACTION_HISTORY_DUO.setDependencies({\n    operationHistoryDuo: OPERATION_HISTORY_DUO,\n});\nTRANSACTION_HISTORY_DUO.setDependencies({\n    repositoryTransactionHistoryDuo: REPOSITORY_TRANSACTION_HISTORY_DUO,\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Entity, GeneratedValue, Id, OneToMany, Table } from '@airport/air-traffic-control';\nlet Agt = class Agt {\n};\n__decorate([\n    Id(),\n    GeneratedValue()\n], Agt.prototype, \"id\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'agt' })\n], Agt.prototype, \"terminalAgts\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'agt' })\n], Agt.prototype, \"userTerminalAgts\", void 0);\nAgt = __decorate([\n    Entity(),\n    Table()\n], Agt);\nexport { Agt };\n//# sourceMappingURL=Agt.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DbNumber, DbString, Entity, GeneratedValue, Id, OneToMany, Table } from \"@airport/air-traffic-control\";\nlet Continent = class Continent {\n};\n__decorate([\n    Id(),\n    GeneratedValue(),\n    DbNumber()\n], Continent.prototype, \"id\", void 0);\n__decorate([\n    DbString()\n], Continent.prototype, \"name\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'continent' })\n], Continent.prototype, \"countries\", void 0);\nContinent = __decorate([\n    Entity(),\n    Table({ name: \"CONTINENTS\" })\n], Continent);\nexport { Continent };\n//# sourceMappingURL=Continent.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DbNumber, DbString, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, OneToMany, Table } from \"@airport/air-traffic-control\";\nlet Country = class Country {\n};\n__decorate([\n    Id(),\n    GeneratedValue(),\n    DbNumber()\n], Country.prototype, \"id\", void 0);\n__decorate([\n    DbString()\n], Country.prototype, \"name\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'CONTINENT_ID', referencedColumnName: 'ID' })\n], Country.prototype, \"continent\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'country' })\n], Country.prototype, \"users\", void 0);\nCountry = __decorate([\n    Entity(),\n    Table({ name: \"COUNTRIES\" })\n], Country);\nexport { Country };\n//# sourceMappingURL=Country.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbBoolean, DbNumber, DbString, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, Table } from '@airport/air-traffic-control';\n/**\n *\n * DEPRECATED - syncing will now be done via IPFS/Peergos\n *\n */\nlet Terminal = class Terminal {\n    constructor() {\n        this.isLocal = false;\n        // @OneToMany({ mappedBy: 'terminal' })\n        // terminalAgts: TerminalAgt[]\n        // @OneToMany({ mappedBy: 'terminal' })\n        // userTerminal: UserTerminal[]\n        // @OneToMany({ mappedBy: 'terminal' })\n        // userTerminalAgt: UserTerminalAgt[]\n    }\n};\n__decorate([\n    Id(),\n    GeneratedValue(),\n    DbNumber()\n], Terminal.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'UUID', nullable: false }),\n    DbString()\n], Terminal.prototype, \"uuId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'OWNER_USER_ID', referencedColumnName: 'ID' })\n], Terminal.prototype, \"owner\", void 0);\n__decorate([\n    Column({ name: 'IS_LOCAL', nullable: false }),\n    DbBoolean()\n], Terminal.prototype, \"isLocal\", void 0);\nTerminal = __decorate([\n    Entity(),\n    Table({\n        name: 'TERMINAL',\n        indexes: (t) => [{\n                property: t.uuId,\n                unique: true\n            }]\n    })\n], Terminal);\nexport { Terminal };\n//# sourceMappingURL=Terminal.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Entity, Id, JoinColumn, ManyToOne, OneToMany, Table } from '@airport/air-traffic-control';\n/**\n *\n * DEPRECATED - syncing will now be done via IPFS/Peergos\n *\n */\nlet TerminalAgt = class TerminalAgt {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'TERMINAL_ID', referencedColumnName: 'ID' })\n], TerminalAgt.prototype, \"terminal\", void 0);\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'AGT_ID', referencedColumnName: 'ID' })\n], TerminalAgt.prototype, \"agt\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'terminalAgt' })\n], TerminalAgt.prototype, \"userTerminalAgts\", void 0);\nTerminalAgt = __decorate([\n    Entity(),\n    Table({ name: 'TERMINAL_AGTS' })\n], TerminalAgt);\nexport { TerminalAgt };\n//# sourceMappingURL=TerminalAgt.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, DbString, Entity, GeneratedValue, Id } from '@airport/air-traffic-control';\nlet User = class User {\n};\n__decorate([\n    Id(),\n    GeneratedValue(),\n    DbNumber()\n], User.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: \"EMAIL\" }),\n    DbString()\n], User.prototype, \"email\", void 0);\n__decorate([\n    Column({ name: \"PASSWORD_HASH\" }),\n    DbString()\n], User.prototype, \"passwordHash\", void 0);\n__decorate([\n    Column({ name: \"USERNAME\" }),\n    DbString()\n], User.prototype, \"username\", void 0);\n__decorate([\n    Column({ name: \"UUID\", nullable: false }),\n    DbString()\n], User.prototype, \"uuId\", void 0);\nUser = __decorate([\n    Entity()\n], User);\nexport { User };\n//# sourceMappingURL=User.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Entity, Id, JoinColumn, ManyToOne, Table } from '@airport/air-traffic-control';\n/**\n *\n * DEPRECATED - syncing will now be done via IPFS/Peergos\n *\n */\nlet UserTerminal = class UserTerminal {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'USER_ID', referencedColumnName: 'ID' })\n], UserTerminal.prototype, \"user\", void 0);\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'TERMINAL_ID', referencedColumnName: 'ID' })\n], UserTerminal.prototype, \"terminal\", void 0);\nUserTerminal = __decorate([\n    Entity(),\n    Table({ name: 'USER_TERMINAL' })\n], UserTerminal);\nexport { UserTerminal };\n//# sourceMappingURL=UserTerminal.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, Entity, GeneratedValue, Id, JoinColumn, JoinColumns, ManyToOne, Table } from '@airport/air-traffic-control';\n/**\n * DEPRECATED - syncing will now be done via IPFS/Peergos\n *\n * User needs some sort of password that can be used to verify that\n * a given user is indeed making changes (instead of another one).\n *\n * The password should be AGT specific and Terminal specific\n * to reduce security risks.\n *\n * The password is generated as soon as a user is verified with\n * a terminal and then subsequently registered with an AGT (on\n * the next transaction)\n *\n * Registration is made using an already known to AGT Terminal\n * Id and password, to verify that is indeed coming from the\n * specified terminal.\n *\n * FIXME: additional credentials are needed for User-Agt registration\n * see of OpenConnect can provide something verifiable with the\n * provider\n */\nlet UserTerminalAgt = class UserTerminalAgt {\n};\n__decorate([\n    Id(),\n    DbNumber(),\n    GeneratedValue()\n], UserTerminalAgt.prototype, \"id\", void 0);\n__decorate([\n    Id(),\n    Column({ name: 'AGT_ID' }),\n    DbNumber(),\n    GeneratedValue()\n], UserTerminalAgt.prototype, \"agtId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'USER_ID', referencedColumnName: 'ID' })\n], UserTerminalAgt.prototype, \"user\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'TERMINAL_ID', referencedColumnName: 'ID' })\n], UserTerminalAgt.prototype, \"terminal\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'AGT_ID', referencedColumnName: 'ID' })\n], UserTerminalAgt.prototype, \"agt\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumns([\n        { name: 'AGT_ID' },\n        { name: 'TERMINAL_ID' }\n    ])\n], UserTerminalAgt.prototype, \"terminalAgt\", void 0);\nUserTerminalAgt = __decorate([\n    Entity(),\n    Table({ name: 'USER_TERMINAL_AGT' })\n], UserTerminalAgt);\nexport { UserTerminalAgt };\n//# sourceMappingURL=UserTerminalAgt.js.map","import { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { diSet as dS, duoDiSet as ddS } from '@airport/check-in';\nimport { DEPENDENCY_INJECTION } from '@airport/direction-indicator';\nimport { getFullApplicationName } from '@airport/ground-control';\nimport { Agt, Continent, Country, Terminal, TerminalAgt, User, UserTerminal, UserTerminalAgt } from '../ddl/ddl';\nconst __constructors__ = {\n    Agt: Agt,\n    Continent: Continent,\n    Country: Country,\n    Terminal: Terminal,\n    TerminalAgt: TerminalAgt,\n    User: User,\n    UserTerminal: UserTerminal,\n    UserTerminalAgt: UserTerminalAgt\n};\nexport const Q_APPLICATION = {\n    __constructors__,\n    domain: 'air',\n    name: '@airport/travel-document-checkpoint'\n};\nexport const Q = Q_APPLICATION;\nexport function diSet(dbEntityId) {\n    return dS(Q.__dbApplication__, dbEntityId);\n}\nexport function duoDiSet(dbEntityId) {\n    return ddS(Q.__dbApplication__, dbEntityId);\n}\nDEPENDENCY_INJECTION.db().eventuallyGet(AIRPORT_DATABASE).then((airDb) => {\n    airDb.QM[getFullApplicationName(Q_APPLICATION)] = Q;\n});\n//# sourceMappingURL=qApplication.js.map","import { Dao, DaoQueryDecorators, } from '@airport/check-in';\nimport { Q, duoDiSet, } from './qApplication';\n// Application Q object Dependency Injection readiness detection Dao\nexport class SQDIDao extends Dao {\n    constructor(dbEntityId) {\n        super(dbEntityId, Q);\n    }\n}\nexport class BaseAgtDao extends SQDIDao {\n    constructor() {\n        super(7);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(7);\n    }\n}\nBaseAgtDao.Find = new DaoQueryDecorators();\nBaseAgtDao.FindOne = new DaoQueryDecorators();\nBaseAgtDao.Search = new DaoQueryDecorators();\nBaseAgtDao.SearchOne = new DaoQueryDecorators();\nexport class BaseContinentDao extends SQDIDao {\n    constructor() {\n        super(0);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(0);\n    }\n}\nBaseContinentDao.Find = new DaoQueryDecorators();\nBaseContinentDao.FindOne = new DaoQueryDecorators();\nBaseContinentDao.Search = new DaoQueryDecorators();\nBaseContinentDao.SearchOne = new DaoQueryDecorators();\nexport class BaseCountryDao extends SQDIDao {\n    constructor() {\n        super(1);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(1);\n    }\n}\nBaseCountryDao.Find = new DaoQueryDecorators();\nBaseCountryDao.FindOne = new DaoQueryDecorators();\nBaseCountryDao.Search = new DaoQueryDecorators();\nBaseCountryDao.SearchOne = new DaoQueryDecorators();\nexport class BaseTerminalDao extends SQDIDao {\n    constructor() {\n        super(5);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(5);\n    }\n}\nBaseTerminalDao.Find = new DaoQueryDecorators();\nBaseTerminalDao.FindOne = new DaoQueryDecorators();\nBaseTerminalDao.Search = new DaoQueryDecorators();\nBaseTerminalDao.SearchOne = new DaoQueryDecorators();\nexport class BaseTerminalAgtDao extends SQDIDao {\n    constructor() {\n        super(6);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(6);\n    }\n}\nBaseTerminalAgtDao.Find = new DaoQueryDecorators();\nBaseTerminalAgtDao.FindOne = new DaoQueryDecorators();\nBaseTerminalAgtDao.Search = new DaoQueryDecorators();\nBaseTerminalAgtDao.SearchOne = new DaoQueryDecorators();\nexport class BaseUserDao extends SQDIDao {\n    constructor() {\n        super(4);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(4);\n    }\n}\nBaseUserDao.Find = new DaoQueryDecorators();\nBaseUserDao.FindOne = new DaoQueryDecorators();\nBaseUserDao.Search = new DaoQueryDecorators();\nBaseUserDao.SearchOne = new DaoQueryDecorators();\nexport class BaseUserTerminalDao extends SQDIDao {\n    constructor() {\n        super(2);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(2);\n    }\n}\nBaseUserTerminalDao.Find = new DaoQueryDecorators();\nBaseUserTerminalDao.FindOne = new DaoQueryDecorators();\nBaseUserTerminalDao.Search = new DaoQueryDecorators();\nBaseUserTerminalDao.SearchOne = new DaoQueryDecorators();\nexport class BaseUserTerminalAgtDao extends SQDIDao {\n    constructor() {\n        super(3);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(3);\n    }\n}\nBaseUserTerminalAgtDao.Find = new DaoQueryDecorators();\nBaseUserTerminalAgtDao.FindOne = new DaoQueryDecorators();\nBaseUserTerminalAgtDao.Search = new DaoQueryDecorators();\nBaseUserTerminalAgtDao.SearchOne = new DaoQueryDecorators();\n//# sourceMappingURL=baseDaos.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { and } from '@airport/air-traffic-control';\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseTerminalDao, Q } from '../generated/generated';\nlet TerminalDao = class TerminalDao extends BaseTerminalDao {\n    async findByOwnerIdsAndUuIds(ownerIds, uuIds) {\n        let d;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                d = Q.Terminal\n            ],\n            where: and(d.owner.id.in(ownerIds), d.uuId.in(uuIds))\n        });\n    }\n    async findByUuIds(uuIds) {\n        let d;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                d = Q.Terminal\n            ],\n            where: d.uuId.in(uuIds)\n        });\n    }\n    async insert(terminals) {\n        let t;\n        const values = [];\n        for (const terminal of terminals) {\n            values.push([\n                terminal.uuId, terminal.owner.id, false,\n            ]);\n        }\n        const ids = await this.db.insertValuesGenerateIds({\n            insertInto: t = Q.Terminal,\n            columns: [\n                t.uuId,\n                t.owner.id,\n                t.isLocal\n            ],\n            values\n        });\n        for (let i = 0; i < terminals.length; i++) {\n            const terminal = terminals[i];\n            terminal.id = ids[i][0];\n        }\n    }\n};\nTerminalDao = __decorate([\n    Injected()\n], TerminalDao);\nexport { TerminalDao };\n//# sourceMappingURL=TerminalDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseUserDao, Q, } from '../generated/generated';\nlet UserDao = class UserDao extends BaseUserDao {\n    async findByUserNames(usernames) {\n        let u;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                u = Q.User\n            ],\n            where: u.username.in(usernames)\n        });\n    }\n    async findByUuIds(uuIds) {\n        let u;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                u = Q.User\n            ],\n            where: u.uuId.in(uuIds)\n        });\n    }\n    async insert(users) {\n        let u;\n        const values = [];\n        for (const user of users) {\n            values.push([\n                user.uuId, user.username\n            ]);\n        }\n        const ids = await this.db.insertValuesGenerateIds({\n            insertInto: u = Q.User,\n            columns: [\n                u.uuId,\n                u.username\n            ],\n            values\n        });\n        for (let i = 0; i < users.length; i++) {\n            const user = users[i];\n            user.id = ids[i][0];\n        }\n    }\n};\nUserDao = __decorate([\n    Injected()\n], UserDao);\nexport { UserDao };\n//# sourceMappingURL=UserDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Api } from \"@airport/check-in\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Injected } from \"@airport/direction-indicator\";\nexport var AddUserErrorCodes;\n(function (AddUserErrorCodes) {\n    AddUserErrorCodes[\"EMAIL_TAKEN\"] = \"EMAIL_TAKEN\";\n    AddUserErrorCodes[\"INVALID_BIRTH_MONTH\"] = \"INVALID_BIRTH_MONTH\";\n    AddUserErrorCodes[\"INVALID_COUNTRY\"] = \"INVALID_COUNTRY\";\n    AddUserErrorCodes[\"INVALID_EMAIL\"] = \"INVALID_EMAIL\";\n    AddUserErrorCodes[\"INVALID_USERNAME\"] = \"INVALID_USERNAME\";\n    AddUserErrorCodes[\"USERNAME_TAKEN\"] = \"USERNAME_TAKEN\";\n})(AddUserErrorCodes || (AddUserErrorCodes = {}));\nlet UserApi = class UserApi {\n    async addUser(username, email) {\n        const existingUsers = await this.userDao.findByUserNames([username]);\n        for (const existingUser of existingUsers) {\n            if (existingUser.username === username) {\n                return {\n                    errorCode: AddUserErrorCodes.USERNAME_TAKEN\n                };\n            }\n        }\n        const user = {\n            id: null,\n            uuId: uuidv4(),\n            username\n        };\n        await this.userDao.save(user);\n        return {\n            user\n        };\n    }\n    async findUser(privateId) {\n        const users = await this.userDao.findByUuIds([privateId]);\n        if (users.length) {\n            return users[0];\n        }\n        return null;\n    }\n};\n__decorate([\n    Api()\n], UserApi.prototype, \"addUser\", null);\n__decorate([\n    Api()\n], UserApi.prototype, \"findUser\", null);\nUserApi = __decorate([\n    Injected()\n], UserApi);\nexport { UserApi };\n//# sourceMappingURL=UserApi.js.map","export const Api = function () {\n    return function (target, propertyKey, descriptor) {\n        // No runtime logic required.\n        return null;\n    };\n};\n//# sourceMappingURL=Api.js.map","import { lib } from '@airport/direction-indicator';\nimport { INTER_APP_API_CLIENT } from '@airport/ground-control';\nimport { UserApi } from '../api/UserApi';\nexport const travelDocumentCheckpoint = lib('travel-document-checkpoint');\nexport const USER_API = travelDocumentCheckpoint.token({\n    class: UserApi,\n    interface: 'IUserApi',\n    token: 'USER_API'\n});\nUSER_API.setDependencies({\n    interAppApiClient: INTER_APP_API_CLIENT\n});\n//# sourceMappingURL=api-tokens.js.map","import { TerminalDao } from '../dao/TerminalDao';\nimport { UserDao } from '../dao/UserDao';\nimport { travelDocumentCheckpoint, USER_API } from './api-tokens';\nexport const TERMINAL_DAO = travelDocumentCheckpoint.token({\n    class: TerminalDao,\n    interface: 'ITerminalDao',\n    token: 'TERMINAL_DAO'\n});\nexport const USER_DAO = travelDocumentCheckpoint.token({\n    class: UserDao,\n    interface: 'IUserDao',\n    token: 'USER_DAO'\n});\nUSER_API.setDependencies({\n    userDao: USER_DAO\n});\n//# sourceMappingURL=internal-tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Actor, } from \"@airport/holding-pattern\";\nimport { Terminal, User } from \"@airport/travel-document-checkpoint-internal\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet InternalRecordManager = class InternalRecordManager {\n    async ensureApplicationRecords(application, context) {\n        await this.transactionManager.transactInternal(async (_transaction) => {\n            await this.updateDomain(application);\n            let actorMapForDomain = this.terminalStore\n                .getApplicationActorMapByDomainAndApplicationNames().get(application.domain);\n            let actors;\n            if (actorMapForDomain) {\n                actors = actorMapForDomain.get(application.name);\n                if (actors && actors.length) {\n                    return;\n                }\n            }\n            actors = await this.actorDao.findByDomainAndApplicationNames(application.domain, application.name);\n            let anApplication = await this.applicationDao.findByIndex(application.lastIds.applications + 1);\n            if (!actors || !actors.length) {\n                const frameworkActor = this.terminalStore.getFrameworkActor();\n                const actor = {\n                    id: null,\n                    application: anApplication,\n                    terminal: frameworkActor.terminal,\n                    user: frameworkActor.user,\n                    uuId: uuidv4()\n                };\n                await this.actorDao.save(actor);\n                actors = [actor];\n            }\n            const lastTerminalState = this.terminalStore.getTerminalState();\n            const applications = lastTerminalState.applications.slice();\n            applications.push(anApplication);\n            let applicationActors = lastTerminalState.applicationActors.slice();\n            applicationActors = applicationActors.concat(actors);\n            this.terminalStore.state.next({\n                ...lastTerminalState,\n                applicationActors,\n                applications\n            });\n        }, context);\n    }\n    async initTerminal(domainName, context) {\n        await this.transactionManager.transactInternal(async (_transaction) => {\n            const user = new User();\n            user.uuId = 'AIRportA-demo-demo-demo-functionalty';\n            user.username = \"internalUser\";\n            const terminal = new Terminal();\n            terminal.owner = user;\n            terminal.isLocal = true;\n            terminal.uuId = uuidv4();\n            const actor = new Actor();\n            actor.user = user;\n            actor.terminal = terminal;\n            actor.uuId = uuidv4();\n            await this.actorDao.save(actor, context);\n            const lastTerminalState = this.terminalStore.getTerminalState();\n            this.terminalStore.state.next({\n                ...lastTerminalState,\n                frameworkActor: actor,\n                terminal\n            });\n        }, context);\n    }\n    async updateDomain(application) {\n        let domain = this.terminalStore.getDomainMapByName().get(application.domain);\n        if (domain && this.entityStateManager.getOriginalValues(domain)) {\n            return domain;\n        }\n        let dbDomain = await this.domainDao.findByName(application.domain);\n        let updatedDomain;\n        if (domain) {\n            if (dbDomain) {\n                this.entityStateManager.setOriginalValues(this.entityStateManager.getOriginalValues(dbDomain), domain);\n                updatedDomain = domain;\n            }\n        }\n        else {\n            if (dbDomain) {\n                updatedDomain = dbDomain;\n            }\n            else {\n                updatedDomain = {\n                    id: null,\n                    name: application.domain,\n                };\n                await this.domainDao.save(updatedDomain);\n            }\n        }\n        if (!updatedDomain) {\n            return domain;\n        }\n        const lastTerminalState = this.terminalStore.getTerminalState();\n        const domains = lastTerminalState.domains.slice();\n        let replaced = false;\n        for (let i = 0; i < domains.length; i++) {\n            let currentDomain = domains[i];\n            if (currentDomain.name === domain.name) {\n                domains.splice(i, 1, domain);\n                replaced = true;\n            }\n        }\n        if (!replaced) {\n            domains.push(domain);\n        }\n        this.terminalStore.state.next({\n            ...lastTerminalState,\n            domains\n        });\n        return updatedDomain;\n    }\n};\n__decorate([\n    Inject()\n], InternalRecordManager.prototype, \"actorDao\", void 0);\n__decorate([\n    Inject()\n], InternalRecordManager.prototype, \"applicationDao\", void 0);\n__decorate([\n    Inject()\n], InternalRecordManager.prototype, \"domainDao\", void 0);\n__decorate([\n    Inject()\n], InternalRecordManager.prototype, \"entityStateManager\", void 0);\n__decorate([\n    Inject()\n], InternalRecordManager.prototype, \"terminalStore\", void 0);\n__decorate([\n    Inject()\n], InternalRecordManager.prototype, \"transactionManager\", void 0);\nInternalRecordManager = __decorate([\n    Injected()\n], InternalRecordManager);\nexport { InternalRecordManager };\n//# sourceMappingURL=InternalRecordManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet InternalTransactionalConnector = class InternalTransactionalConnector {\n    callApi(_) {\n        throw new Error(`InternalTransactionalConnector.callApi should never be called.\r\nInteral Application API requests should be made directly (since\r\nthey are internal to the AIRport framework).`);\n    }\n    async addRepository(\n    // url: string,\n    // platform: PlatformType,\n    // platformConfig: string,\n    // distributionStrategy: DistributionStrategy,\n    context) {\n        return await this.transactionalServer.addRepository(\n        // url,\n        // platform,\n        // platformConfig,\n        // distributionStrategy,\n        this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        });\n    }\n    async find(portableQuery, context, cachedSqlQueryId) {\n        return await this.transactionalServer.find(portableQuery, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        }, cachedSqlQueryId);\n    }\n    async findOne(portableQuery, context, cachedSqlQueryId) {\n        return await this.transactionalServer.findOne(portableQuery, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        }, cachedSqlQueryId);\n    }\n    search(portableQuery, context, cachedSqlQueryId) {\n        return this.transactionalServer.search(portableQuery, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        }, cachedSqlQueryId);\n    }\n    searchOne(portableQuery, context, cachedSqlQueryId) {\n        return this.transactionalServer.searchOne(portableQuery, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        }, cachedSqlQueryId);\n    }\n    async save(entity, context) {\n        return await this.transactionalServer.save(entity, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        });\n    }\n    async saveToDestination(repositoryDestination, entity, context) {\n        return await this.transactionalServer.saveToDestination(repositoryDestination, entity, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        });\n    }\n    async insertValues(portableQuery, context, ensureGeneratedValues // For internal use only\n    ) {\n        return await this.transactionalServer.insertValues(portableQuery, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        }, ensureGeneratedValues);\n    }\n    async insertValuesGetIds(portableQuery, context) {\n        return await this.transactionalServer.insertValuesGetIds(portableQuery, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        });\n    }\n    async updateValues(portableQuery, context) {\n        return await this.transactionalServer.updateValues(portableQuery, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        });\n    }\n    async deleteWhere(portableQuery, context) {\n        return await this.transactionalServer.deleteWhere(portableQuery, this.terminalStore.getInternalConnector().internalCredentials, {\n            internal: true,\n            ...context\n        });\n    }\n    onMessage(callback) {\n        // Nothing to do, onMessage callback was added for demo purposes for Web implementations\n    }\n};\n__decorate([\n    Inject()\n], InternalTransactionalConnector.prototype, \"terminalStore\", void 0);\n__decorate([\n    Inject()\n], InternalTransactionalConnector.prototype, \"transactionalServer\", void 0);\nInternalTransactionalConnector = __decorate([\n    Injected()\n], InternalTransactionalConnector);\nexport { InternalTransactionalConnector };\nexport function injectTransactionalConnector() {\n    console.log('Injecting TransactionalConnector');\n}\n//# sourceMappingURL=InternalTransactionalConnector.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { container } from '@airport/direction-indicator';\nimport { BlockSyncStatus } from '@airport/ground-control';\nimport { RepositoryTransactionHistory, } from '@airport/holding-pattern';\nimport { UpdateState } from '@airport/terminal-map';\nlet OnlineManager = class OnlineManager {\n    constructor() {\n        this.online = false;\n    }\n    async goOffline(context = {}) {\n        this.repositoryManager.goOffline();\n        this.online = false;\n    }\n    /**\n     There are tree update states:\n     LOCAL            0\n     REMOTE_CHANGES   1\n     GO_ONLINE        2\n     Mutation operations of lower order type are blocked until the higher order operation finishes.\n     Blocking prevents conflicts in remove transaction application.\n     Go-Online logic\n     1)  Flip update state to GO_ONLINE\n     2)  Find the lastSyncedTransaction recorded locally\n     3)  Go Online and start listening for new transactions coming in\n     a) While Go-Online is in progress continue gatethering all remote transactions that come in\n     and add them to remoteChangesSinceInitialGoOffline\n     b) Once Go-Online finishes, when remote transactions come in\n     i)  Flip update state to REMOTE_CHANGES\n     ii)  Add remote transactions to local store\n     iii) Flip state to LOCAL\n     4)  Load from deltaStore all remote transactions since lastSyncedTransaction\n     5)  Add remote transactions to local store\n     6)  While there are more transactions coming in remotely:\n     Add them to local store\n     7)  Find all local unsynced transactions\n     a)  Mark them as synchronized\n     b)  add them to deltaStore\n     c)  save them back in local store, now with the synched flag\n     (and update db with new lastSyncedTransaction)\n     8)  While there are more transactions coming in remotely:\n     Add them to local store\n     9)  Flip the online state to true\n     Finally, always flip update state to LOCAL\n     * @returns {Promise<void>}\n     */\n    async goOnline(context = {}) {\n        const offlineDeltaStore = await container(this).get(OFFLINE_DELTA_STORE);\n        await this.transactionManager.transactInternal(async () => {\n            try {\n                // 1)  Flip update state to GO_ONLINE\n                this.repositoryManager.setUpdateStateForAll(UpdateState.GO_ONLINE);\n                // 2)  Find repositories\n                // const repoRecords = await this.repositoryDao.findWithTransaction()\n                const repoRecords = await this.repositoryDao.findReposWithDetailsByIds();\n                // 3) make each repository go Online\n                let goOnlineCalls = [];\n                repoRecords.forEach((repository) => {\n                    goOnlineCalls.push(this.repositoryGoOnline(repository, offlineDeltaStore, this.repositoryManager));\n                });\n                await Promise.all(goOnlineCalls);\n                // 9)  Flip the online state to true\n                this.online = true;\n            }\n            catch (error) {\n                // TODO: notify of error\n                throw error;\n            }\n            finally {\n                // Finally, always flip update state to LOCAL\n                this.repositoryManager.setUpdateStateForAll(UpdateState.LOCAL);\n            }\n        }, context);\n    }\n    async repositoryGoOnline(repository, offlineDeltaStore, repositoryManager) {\n        let deltaStore = repositoryManager.deltaStore[repository.id];\n        let remoteChangesSinceInitialGoOnline = [];\n        // 3)  Go Online and start listening for new transactions coming in\n        await deltaStore.goOnline(async (transactions) => {\n            if (!transactions.length) {\n                return;\n            }\n            transactions = transactions.map((repoTransaction) => {\n                repoTransaction = new RepositoryTransactionHistory(repoTransaction);\n                // TODO: ?is the following needed?\n                // repoTransaction.deserialize(repository)\n                return repoTransaction;\n            });\n            // a) While Go-Online is in progress continue gathering all remote transactions\n            // that come in and add them to remoteChangesSinceInitialGoOffline\n            if (repositoryManager.getUpdateState(repository) === UpdateState.GO_ONLINE) {\n                remoteChangesSinceInitialGoOnline.push(transactions);\n            }\n            // b) Once Go-Online finishes, when remote transactions come in\n            else {\n                try {\n                    // i)  Flip update state to REMOTE_CHANGES\n                    repositoryManager.setUpdateState(repository, UpdateState.REMOTE);\n                    // ii)  Add remote transactions to local store\n                    await offlineDeltaStore.addRemoteChanges(repository, transactions);\n                }\n                catch (error) {\n                    // TODO: notify of error\n                    throw error;\n                }\n                finally {\n                    // iii) Flip state to LOCAL\n                    repositoryManager.setUpdateState(repository, UpdateState.LOCAL);\n                }\n            }\n        });\n        // 4)  Load from deltaStore all remote transactions since lastSyncedTransaction\n        let remoteChangesIter = await deltaStore.loadTransactionsSinceLastKnown(repository.lastSyncedTransaction);\n        let remoteChanges = [];\n        while (remoteChangesIter.hasNext()) {\n            remoteChanges.push(remoteChangesIter.next());\n        }\n        // 5)  Add remote transactions to local store\n        if (remoteChanges.length) {\n            await offlineDeltaStore.addRemoteChanges(repository, remoteChanges);\n        }\n        // 6)  While there are more transactions coming in remotely:\n        while (remoteChangesSinceInitialGoOnline.length) {\n            remoteChanges = remoteChangesSinceInitialGoOnline;\n            remoteChangesSinceInitialGoOnline = [];\n            // Add them to local store\n            await offlineDeltaStore.addRemoteChanges(repository, remoteChanges);\n        }\n        // 7)  Find all local unsynced transactions\n        let unsyncedChanges = await this.repositoryTransactionHistoryDao\n            .findUnsyncedTransactions(repository);\n        if (unsyncedChanges.length) {\n            unsyncedChanges.forEach((transaction) => {\n                // a)  Mark them as synchronized\n                transaction.syncStatus = BlockSyncStatus.SYNCHRONIZED;\n            });\n            // b)  add them to deltaStore\n            await deltaStore.addChanges(deltaStore.config.changeListConfig, unsyncedChanges);\n            // c)  save them back in local store, now with the synched flag\n            // (and update db with new lastSyncedTransaction)\n            await offlineDeltaStore.markChangesAsSynced(repository, null);\n        }\n        // \t8)  While there are more transactions coming in remotely:\n        // Add them to local store\n        while (remoteChangesSinceInitialGoOnline.length) {\n            remoteChanges = remoteChangesSinceInitialGoOnline;\n            remoteChangesSinceInitialGoOnline = [];\n            await offlineDeltaStore.addRemoteChanges(repository, remoteChanges);\n        }\n        // 9)  Flip the online state to true\n        this.online = true;\n    }\n    isOnline(context = {}) {\n        return this.online;\n    }\n};\n__decorate([\n    Inject()\n], OnlineManager.prototype, \"repositoryDao\", void 0);\n__decorate([\n    Inject()\n], OnlineManager.prototype, \"repositoryManager\", void 0);\n__decorate([\n    Inject()\n], OnlineManager.prototype, \"repositoryTransactionHistoryDao\", void 0);\n__decorate([\n    Inject()\n], OnlineManager.prototype, \"transactionManager\", void 0);\nOnlineManager = __decorate([\n    Injected()\n], OnlineManager);\nexport { OnlineManager };\n//# sourceMappingURL=OnlineManager.js.map","export var IsolateMessageType;\n(function (IsolateMessageType) {\n    IsolateMessageType[\"ADD_REPOSITORY\"] = \"ADD_REPOSITORY\";\n    IsolateMessageType[\"APP_INITIALIZING\"] = \"APP_INITIALIZING\";\n    IsolateMessageType[\"APP_INITIALIZED\"] = \"APP_INITIALIZED\";\n    IsolateMessageType[\"CALL_API\"] = \"CALL_API\";\n    IsolateMessageType[\"DELETE_WHERE\"] = \"DELETE_WHERE\";\n    IsolateMessageType[\"FIND\"] = \"FIND\";\n    IsolateMessageType[\"FIND_ONE\"] = \"FIND_ONE\";\n    IsolateMessageType[\"GET_LATEST_APPLICATION_VERSION_BY_APPLICATION_NAME\"] = \"GET_LATEST_APPLICATION_VERSION_BY_APPLICATION_NAME\";\n    IsolateMessageType[\"INSERT_VALUES\"] = \"INSERT_VALUES\";\n    IsolateMessageType[\"INSERT_VALUES_GET_IDS\"] = \"INSERT_VALUES_GET_IDS\";\n    IsolateMessageType[\"RETRIEVE_DOMAIN\"] = \"RETRIEVE_DOMAIN\";\n    IsolateMessageType[\"SEARCH\"] = \"SEARCH\";\n    IsolateMessageType[\"SEARCH_ONE\"] = \"SEARCH_ONE\";\n    IsolateMessageType[\"SEARCH_UNSUBSCRIBE\"] = \"UNSUBSCRIBE\";\n    IsolateMessageType[\"SAVE\"] = \"SAVE\";\n    IsolateMessageType[\"SAVE_TO_DESTINATION\"] = \"SAVE_TO_DESTINATION\";\n    IsolateMessageType[\"UPDATE_VALUES\"] = \"UPDATE_VALUES\";\n})(IsolateMessageType || (IsolateMessageType = {}));\n//# sourceMappingURL=IsolateMessage.js.map","export var AppState;\n(function (AppState) {\n    AppState[\"NOT_INITIALIED\"] = \"NOT_INITIALIED\";\n    AppState[\"START_INITIALIZING\"] = \"START_INITIALIZING\";\n    AppState[\"INITIALIZING_IN_PROGRESS\"] = \"INITIALIZING_IN_PROGRESS\";\n    AppState[\"INITIALIZED\"] = \"INITIALIZED\";\n})(AppState || (AppState = {}));\n//# sourceMappingURL=ApplicationState.js.map","import { AppState } from \"./ApplicationState\";\nexport const applicationState = {\n    application: null,\n    appState: AppState.NOT_INITIALIED,\n    domain: null,\n    // FIXME: make this dynamic for web version (https://turbase.app), local version (https://localhost:PORT)\n    // and debugging (http://localhost:7500)\n    hostServer: 'http://localhost:7500',\n    lastIds: null,\n    // FIXME: tie this in to the hostServer variable\n    mainDomain: null,\n    observableMessageMap: new Map(),\n    pendingMessageMap: new Map(),\n    messageCallback: null,\n};\n//# sourceMappingURL=theApplicationState.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from \"@airport/direction-indicator\";\nimport { applicationState } from \"./theApplicationState\";\nlet ApplicationStore = class ApplicationStore {\n    get state() {\n        return applicationState;\n    }\n};\nApplicationStore = __decorate([\n    Injected()\n], ApplicationStore);\nexport { ApplicationStore };\n//# sourceMappingURL=ApplicationStore.js.map","import { API_REGISTRY } from '@airport/check-in';\nimport { lib } from '@airport/direction-indicator';\nimport { ApplicationStore } from './state/ApplicationStore';\nconst apron = lib('apron');\napron.autopilot = false;\nexport const APPLICATION_LOADER = apron.token({\n    class: null,\n    interface: 'IApplicationLoader',\n    token: 'APPLICATION_LOADER'\n});\nexport const APPLICATION_STORE = apron.token({\n    class: ApplicationStore,\n    interface: 'IApplicationStore',\n    token: 'APPLICATION_STORE'\n});\nexport const LOCAL_API_SERVER = apron.token({\n    class: null,\n    interface: 'ILocalAPIServer',\n    token: 'LOCAL_API_SERVER'\n});\nLOCAL_API_SERVER.setDependencies({\n    apiRegistry: API_REGISTRY\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getFullApplicationName, getFullApplicationNameFromDomainAndName, INTERNAL_DOMAIN } from '@airport/ground-control';\nimport { IsolateMessageType } from '@airport/apron';\nlet TransactionalReceiver = class TransactionalReceiver {\n    async processMessage(message) {\n        let result;\n        let errorMessage;\n        try {\n            if (message.domain === INTERNAL_DOMAIN) {\n                throw new Error(`Internal domain cannot be used in external calls`);\n            }\n            let credentials = {\n                application: message.application,\n                domain: message.domain,\n                methodName: message.methodName,\n                objectName: message.objectName\n            };\n            let context = {};\n            context.startedAt = new Date();\n            switch (message.type) {\n                case IsolateMessageType.CALL_API: {\n                    const context = {};\n                    try {\n                        result = await this.nativeHandleApiCall(message, context);\n                    }\n                    catch (e) {\n                        errorMessage = e.message;\n                    }\n                    break;\n                }\n                case IsolateMessageType.APP_INITIALIZING:\n                    let initConnectionMessage = message;\n                    const application = initConnectionMessage.jsonApplication;\n                    const fullApplicationName = getFullApplicationName(application);\n                    const messageFullApplicationName = getFullApplicationNameFromDomainAndName(message.domain, message.application);\n                    if (fullApplicationName !== messageFullApplicationName) {\n                        result = null;\n                        break;\n                    }\n                    if (this.terminalStore.getReceiver().initializingApps\n                        .has(fullApplicationName)) {\n                        return null;\n                    }\n                    this.terminalStore.getReceiver().initializingApps\n                        .add(fullApplicationName);\n                    // FIXME: initalize ahead of time, at Isolate Loading\n                    await this.databaseManager.initFeatureApplications({}, [application]);\n                    await this.internalRecordManager.ensureApplicationRecords(application, {});\n                    result = application.lastIds;\n                    break;\n                case IsolateMessageType.APP_INITIALIZED:\n                    const initializedApps = this.terminalStore.getReceiver().initializedApps;\n                    initializedApps.add(message.fullApplicationName);\n                    return null;\n                case IsolateMessageType.GET_LATEST_APPLICATION_VERSION_BY_APPLICATION_NAME: {\n                    result = this.terminalStore.getLatestApplicationVersionMapByFullApplicationName()\n                        .get(message.fullApplicationName);\n                    break;\n                }\n                case IsolateMessageType.RETRIEVE_DOMAIN: {\n                    result = this.terminalStore.getDomainMapByName()\n                        .get(message.domain);\n                    break;\n                }\n                case IsolateMessageType.ADD_REPOSITORY:\n                    // const addRepositoryMessage: IAddRepositoryIMI = <IAddRepositoryIMI>message\n                    result = await this.transactionalServer.addRepository(\n                    // addRepositoryMessage.url,\n                    // addRepositoryMessage.platform,\n                    // addRepositoryMessage.platformConfig,\n                    // addRepositoryMessage.distributionStrategy,\n                    credentials, context);\n                    break;\n                case IsolateMessageType.DELETE_WHERE:\n                    const deleteWhereMessage = message;\n                    result = await this.transactionalServer.deleteWhere(deleteWhereMessage.portableQuery, credentials, context);\n                    break;\n                case IsolateMessageType.FIND:\n                    const findMessage = message;\n                    result = await this.transactionalServer.find(findMessage.portableQuery, credentials, {\n                        ...context,\n                        repository: findMessage.repository\n                    });\n                    break;\n                case IsolateMessageType.FIND_ONE:\n                    const findOneMessage = message;\n                    result = await this.transactionalServer.findOne(findOneMessage.portableQuery, credentials, {\n                        ...context,\n                        repository: findMessage.repository,\n                    });\n                    break;\n                case IsolateMessageType.INSERT_VALUES:\n                    const insertValuesMessage = message;\n                    result = await this.transactionalServer.insertValues(insertValuesMessage.portableQuery, credentials, context);\n                    break;\n                case IsolateMessageType.INSERT_VALUES_GET_IDS:\n                    const insertValuesGetIdsMessage = message;\n                    result = await this.transactionalServer.insertValuesGetIds(insertValuesGetIdsMessage.portableQuery, credentials, context);\n                    break;\n                case IsolateMessageType.SAVE:\n                case IsolateMessageType.SAVE_TO_DESTINATION: {\n                    const saveMessage = message;\n                    if (!saveMessage.dbEntity) {\n                        errorMessage = `DbEntity id was not passed in`;\n                        break;\n                    }\n                    const dbEntityId = saveMessage.dbEntity.id;\n                    const dbEntity = this.terminalStore.getAllEntities()[dbEntityId];\n                    if (!dbEntity) {\n                        errorMessage = `Could not find DbEntity with Id ${dbEntityId}`;\n                        break;\n                    }\n                    context.dbEntity = dbEntity;\n                    if (message.type === IsolateMessageType.SAVE) {\n                        result = await this.transactionalServer.save(saveMessage.entity, credentials, context);\n                    }\n                    else {\n                        const saveToDestinationMessage = message;\n                        result = await this.transactionalServer.saveToDestination(saveToDestinationMessage.repositoryDestination, saveToDestinationMessage.entity, credentials, context);\n                    }\n                    break;\n                }\n                case IsolateMessageType.SEARCH:\n                    const searchMessage = message;\n                    result = await this.transactionalServer.search(searchMessage.portableQuery, credentials, {\n                        ...context,\n                        repository: findMessage.repository,\n                    });\n                    break;\n                case IsolateMessageType.SEARCH_ONE:\n                    const searchOneMessage = message;\n                    result = await this.transactionalServer.search(searchOneMessage.portableQuery, credentials, {\n                        ...context,\n                        repository: findMessage.repository,\n                    });\n                    break;\n                case IsolateMessageType.UPDATE_VALUES:\n                    const updateValuesMessage = message;\n                    result = await this.transactionalServer.updateValues(updateValuesMessage.portableQuery, credentials, context);\n                    break;\n                default:\n                    // Unexpected IsolateMessageInType\n                    return;\n            }\n        }\n        catch (error) {\n            console.error(error);\n            result = null;\n            errorMessage = error.message;\n        }\n        return {\n            application: message.application,\n            category: 'FromDb',\n            domain: message.domain,\n            errorMessage,\n            id: message.id,\n            type: message.type,\n            result\n        };\n    }\n    async startApiCall(message, context, nativeHandleCallback) {\n        const transactionCredentials = {\n            application: message.application,\n            domain: message.domain,\n            methodName: message.methodName,\n            objectName: message.objectName,\n            transactionId: message.transactionId\n        };\n        if (!await this.transactionalServer.startTransaction(transactionCredentials, context)) {\n            return false;\n        }\n        const initiator = context.transaction.initiator;\n        initiator.application = message.application;\n        initiator.domain = message.domain;\n        initiator.methodName = message.methodName;\n        initiator.objectName = message.objectName;\n        message.transactionId = context.transaction.id;\n        try {\n            await nativeHandleCallback();\n        }\n        catch (e) {\n            context.errorMessage = e.message;\n            this.transactionalServer.rollback(transactionCredentials, context);\n            return false;\n        }\n        return true;\n    }\n    async endApiCall(credentials, errorMessage, context) {\n        if (errorMessage) {\n            return await this.transactionalServer.rollback(credentials, context);\n        }\n        else {\n            return await this.transactionalServer.commit(credentials, context);\n        }\n    }\n};\n__decorate([\n    Inject()\n], TransactionalReceiver.prototype, \"databaseManager\", void 0);\n__decorate([\n    Inject()\n], TransactionalReceiver.prototype, \"internalRecordManager\", void 0);\n__decorate([\n    Inject()\n], TransactionalReceiver.prototype, \"terminalStore\", void 0);\n__decorate([\n    Inject()\n], TransactionalReceiver.prototype, \"transactionalServer\", void 0);\nTransactionalReceiver = __decorate([\n    Injected()\n], TransactionalReceiver);\nexport { TransactionalReceiver };\n//# sourceMappingURL=TransactionalReceiver.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { INTERNAL_DOMAIN } from '@airport/ground-control';\nimport { Actor } from '@airport/holding-pattern';\n/**\n * Keeps track of transactions, per client and validates that a given\n * transaction belongs to the provided client.  If the connection\n * information matches, passes the transaction for handling.\n *\n * All transactions are queued.  Read operations are not blocked while\n * any transaction is in progress.  Best way to make sure that you get\n * the latest state is to subscribe to a query, which is guaranteed to\n * be updated after data has changed.\n *\n *\n * Should read operations be blocked while transactions are in process?\n * Probably not since they will just get snapshot of the state at any\n * given point in time and transactionality takes care of not exposing\n * inconsistent state.  There doesn't appear to be a need to que-up\n * read transactions, since SqLite can handle it:\n *\n * https://www.skoumal.net/en/parallel-read-and-write-in-sqlite/\n *\n * Also, there doesn't appear to be a reason to prioritize remote transactions\n * over local ones, since ultimately the state needs to sync either way.\n * A single transactional queue should be enough.\n *\n */\nlet TransactionalServer = class TransactionalServer {\n    async init(context = {}) {\n        return await this.transactionManager.initialize('airport', context);\n    }\n    async addRepository(credentials, context) {\n        await this.ensureContext(context);\n        this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        const actor = await this.getActor(credentials);\n        // FIXME: check actor\n        let repositoryId = 0;\n        await this.transactionManager.transactInternal(async () => {\n            const repository = await this.repositoryManager.createRepository(\n            // url, platform, platformConfig, distributionStrategy\n            actor, context);\n            repositoryId = repository.id;\n        }, context);\n        return repositoryId;\n    }\n    async find(portableQuery, credentials, context, cachedSqlQueryId) {\n        await this.ensureContext(context);\n        if (credentials.transactionId) {\n            this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        }\n        return await this.queryManager.find(portableQuery, context, cachedSqlQueryId);\n    }\n    async findOne(portableQuery, credentials, context, cachedSqlQueryId) {\n        await this.ensureContext(context);\n        if (credentials.transactionId) {\n            this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        }\n        return await this.queryManager.findOne(portableQuery, context, cachedSqlQueryId);\n    }\n    search(portableQuery, credentials, context, cachedSqlQueryId) {\n        this.ensureContextSync(context);\n        if (credentials.transactionId) {\n            this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        }\n        return this.queryManager.search(portableQuery, context);\n    }\n    searchOne(portableQuery, credentials, context, cachedSqlQueryId) {\n        this.ensureContextSync(context);\n        if (credentials.transactionId) {\n            this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        }\n        return this.queryManager.searchOne(portableQuery, context);\n    }\n    async startTransaction(credentials, context) {\n        try {\n            await this.ensureContext(context);\n            await this.transactionManager.startTransaction(credentials, context);\n            return true;\n        }\n        catch (e) {\n            context.errorMessage = e.message;\n            console.error(e);\n            return false;\n        }\n    }\n    async commit(credentials, context) {\n        try {\n            await this.ensureContext(context);\n            await this.transactionManager.commit(credentials, context);\n            return true;\n        }\n        catch (e) {\n            console.error(e);\n            context.errorMessage = e.message;\n            return false;\n        }\n    }\n    async rollback(credentials, context) {\n        if (context.transaction) {\n        }\n        try {\n            await this.ensureContext(context);\n            await this.transactionManager.rollback(credentials, context);\n            return true;\n        }\n        catch (e) {\n            console.error(e);\n            context.errorMessage = e.message;\n            return false;\n        }\n    }\n    async save(entity, credentials, context) {\n        if (!entity) {\n            return null;\n        }\n        await this.ensureContext(context);\n        this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        const actor = await this.getActor(credentials);\n        context.actor = actor;\n        let saveResult;\n        await this.transactionManager.transactInternal(async (transaction, context) => {\n            saveResult = await this.operationManager.performSave(entity, actor, transaction, context.rootTransaction, context);\n        }, context);\n        return saveResult;\n    }\n    async saveToDestination(repositoryDestination, entity, credentials, context) {\n        if (!entity) {\n            return null;\n        }\n        await this.ensureContext(context);\n        this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        const actor = await this.getActor(credentials);\n        context.actor = actor;\n        let saveResult;\n        await this.transactionManager.transactInternal(async (transaction, context) => {\n            // TODO: save to serialized repository to the specified destination\n            saveResult = await this.operationManager.performSave(entity, actor, transaction, context.rootTransaction, context);\n        }, context);\n        return saveResult;\n    }\n    async insertValues(portableQuery, credentials, context, ensureGeneratedValues // for internal use only\n    ) {\n        await this.ensureContext(context);\n        this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        const actor = await this.getActor(credentials);\n        let numInsertedRecords;\n        await this.transactionManager.transactInternal(async (transaction, context) => {\n            numInsertedRecords = await this.insertManager.insertValues(portableQuery, actor, transaction, context.rootTransaction, context, ensureGeneratedValues);\n        }, context);\n        return numInsertedRecords;\n    }\n    async insertValuesGetIds(portableQuery, credentials, context) {\n        await this.ensureContext(context);\n        this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        const actor = await this.getActor(credentials);\n        let ids;\n        await this.transactionManager.transactInternal(async (transaction, context) => {\n            ids = await this.insertManager.insertValuesGetIds(portableQuery, actor, transaction, context.rootTransaction, context);\n        }, context);\n        return ids;\n    }\n    async updateValues(portableQuery, credentials, context) {\n        await this.ensureContext(context);\n        this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        const actor = await this.getActor(credentials);\n        let numUpdatedRecords;\n        await this.transactionManager.transactInternal(async (transaction, context) => {\n            numUpdatedRecords = await this.updateManager.updateValues(portableQuery, actor, transaction, context.rootTransaction, context);\n        }, context);\n        return numUpdatedRecords;\n    }\n    async deleteWhere(portableQuery, credentials, context) {\n        await this.ensureContext(context);\n        this.transactionManager.getTransactionFromContextOrCredentials(credentials, context);\n        const actor = await this.getActor(credentials);\n        let numDeletedRecords;\n        await this.transactionManager.transactInternal(async (transaction, context) => {\n            numDeletedRecords = await this.deleteManager.deleteWhere(portableQuery, actor, transaction, context.rootTransaction, context);\n        }, context);\n        return numDeletedRecords;\n    }\n    async getActor(credentials) {\n        if (this.tempActor) {\n            return this.tempActor;\n        }\n        if (credentials.domain === INTERNAL_DOMAIN) {\n            return new Actor();\n        }\n        let actors;\n        const actorMapForDomain = this.terminalStore\n            .getApplicationActorMapByDomainAndApplicationNames().get(credentials.domain);\n        if (actorMapForDomain) {\n            actors = actorMapForDomain.get(credentials.application);\n        }\n        else {\n            throw new Error(`No Actors found for\r\n\tDomain:\r\n\t\t${credentials.domain}\r\n\t\t\t`);\n        }\n        if (!actors) {\n            throw new Error(`No Actors found for\r\n\tDomain:\r\n\t\t${credentials.domain}\r\n\tApplication:\r\n\t\t${credentials.application}\r\n\t\t\t`);\n        }\n        const localTerminal = this.terminalStore.getFrameworkActor().terminal;\n        if (!localTerminal.isLocal) {\n            throw new Error(`Expecting terminal of the TerminalStore.frameworkActor to be .isLocal`);\n        }\n        let actor;\n        for (const anActor of actors) {\n            if (anActor.terminal.uuId === localTerminal.uuId) {\n                actor = anActor;\n                break;\n            }\n        }\n        if (!actor) {\n            throw new Error(`Could not find actor for\r\n\tDomain:\r\n\t\t${credentials.domain}\r\n\tApplication:\r\n\t\t${credentials.application}\r\n\t\t\t`);\n        }\n        return actor;\n    }\n    async ensureContext(context) {\n        await this.operationContextLoader.ensure(context);\n    }\n    async ensureContextSync(context) {\n        this.operationContextLoader.ensureSync(context);\n    }\n};\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"deleteManager\", void 0);\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"insertManager\", void 0);\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"operationManager\", void 0);\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"operationContextLoader\", void 0);\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"queryManager\", void 0);\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"repositoryManager\", void 0);\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"terminalStore\", void 0);\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"transactionManager\", void 0);\n__decorate([\n    Inject()\n], TransactionalServer.prototype, \"updateManager\", void 0);\nTransactionalServer = __decorate([\n    Injected()\n], TransactionalServer);\nexport { TransactionalServer };\nexport function injectTransactionalServer() {\n    console.log('Injecting TransactionalServer');\n}\n//# sourceMappingURL=TransactionalServer.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { InsertValues, } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet AbstractMutationManager = class AbstractMutationManager {\n    getPortableQuery(applicationIndex, tableIndex, query, queryResultType) {\n        return {\n            applicationIndex,\n            tableIndex,\n            jsonQuery: query.toJSON(this.queryUtils, this.fieldUtils, this.relationManager),\n            parameterMap: query.getParameters(),\n            queryResultType,\n        };\n    }\n    async doInsertValues(transaction, q, entities, context) {\n        const dbEntity = q.__driver__.dbEntity;\n        const columnIndexes = [];\n        const columnValueLookups = [];\n        for (const dbProperty of dbEntity.properties) {\n            let columnValueLookup = {\n                name: dbProperty.name,\n                nested: null,\n            };\n            if (dbProperty.relation && dbProperty.relation.length) {\n                const dbRelation = dbProperty.relation[0];\n                this.applicationUtils.forEachColumnTypeOfRelation(dbRelation, (dbColumn, propertyNameChains) => {\n                    if (columnIndexes[dbColumn.index]) {\n                        return;\n                    }\n                    columnIndexes[dbColumn.index] = dbColumn.index;\n                    columnValueLookups[dbColumn.index] = columnValueLookup;\n                    const firstPropertyNameChain = propertyNameChains[0];\n                    for (let i = 1; i < firstPropertyNameChain.length; i++) {\n                        const propertyName = firstPropertyNameChain[i];\n                        const nextColumnValueLookup = {\n                            name: propertyName,\n                            nested: null,\n                        };\n                        columnValueLookup.nested = nextColumnValueLookup;\n                        columnValueLookup = nextColumnValueLookup;\n                    }\n                });\n            }\n            else {\n                const dbColumn = dbProperty.propertyColumns[0].column;\n                if (columnIndexes[dbColumn.index]) {\n                    continue;\n                }\n                columnIndexes[dbColumn.index] = dbColumn.index;\n                columnValueLookups[dbColumn.index] = columnValueLookup;\n            }\n        }\n        const values = entities.map(entity => {\n            return columnValueLookups.map(lookup => {\n                let value = entity[lookup.name];\n                while (lookup.nested) {\n                    if (!(value instanceof Object)) {\n                        break;\n                    }\n                    lookup = lookup.nested;\n                    value = value[lookup.name];\n                }\n                return value === undefined ? null : value;\n            });\n        });\n        const rawInsertValues = {\n            insertInto: q,\n            columns: null,\n            values,\n        };\n        let insertValues = new InsertValues(rawInsertValues, columnIndexes);\n        let portableQuery = this.getPortableQuery(dbEntity.applicationVersion.application.index, dbEntity.index, insertValues, null);\n        return await transaction.insertValues(portableQuery, context);\n    }\n};\n__decorate([\n    Inject()\n], AbstractMutationManager.prototype, \"applicationUtils\", void 0);\n__decorate([\n    Inject()\n], AbstractMutationManager.prototype, \"fieldUtils\", void 0);\n__decorate([\n    Inject()\n], AbstractMutationManager.prototype, \"queryUtils\", void 0);\n__decorate([\n    Inject()\n], AbstractMutationManager.prototype, \"relationManager\", void 0);\nAbstractMutationManager = __decorate([\n    Injected()\n], AbstractMutationManager);\nexport { AbstractMutationManager };\n//# sourceMappingURL=AbstractMutationManager.js.map","/* eslint-disable */\nexport const APPLICATION = {\n    \"domain\": \"air\",\n    \"index\": null,\n    \"name\": \"@airport/airport-code\",\n    \"sinceVersion\": 1,\n    \"versions\": [\n        {\n            \"api\": {\n                \"apiObjectMap\": {\n                    \"IApplicationApi\": {\n                        \"operationMap\": {\n                            \"testApiDefinitionGeneration\": {\n                                \"isAsync\": true,\n                                \"parameters\": []\n                            }\n                        }\n                    }\n                }\n            },\n            \"entities\": [\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"APPLICATION_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"TABLE_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"COLUMN_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"SEQUENCE_INCREMENT_BY\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"CURRENT_VALUE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        },\n                        {\n                            \"index\": 1\n                        },\n                        {\n                            \"index\": 2\n                        }\n                    ],\n                    \"index\": 0,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Sequence\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"applicationIndex\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"tableIndex\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": true,\n                            \"name\": \"columnIndex\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"incrementBy\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"currentValue\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"SEQUENCES\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 1,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"SystemWideOperationId\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"SYSTEM_WIDE_OPERATION_IDS\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"CREATE_TIMESTAMP\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"RANDOM_NUMBER\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 2,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"TerminalRun\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"createTimestamp\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"randomNumber\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"TERMINAL_RUNS\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                }\n            ],\n            \"integerVersion\": 1,\n            \"referencedApplications\": [],\n            \"versionString\": \"1.0.0\"\n        }\n    ]\n};\n//# sourceMappingURL=application.js.map","import { APPLICATION as AIRPORT_CODE } from '@airport/airport-code/lib/generated/application';\nimport { APPLICATION as HOLDING_PATTERN } from '@airport/holding-pattern/lib/generated/application';\nimport { APPLICATION as AIRSPACE } from '@airport/airspace/lib/generated/application';\nimport { APPLICATION as TRAVEL_DOCUMENT_CHECKPOINT } from '@airport/travel-document-checkpoint-internal/lib/application';\nimport { APPLICATION as MOVING_WALKWAY } from '@airport/moving-walkway/lib/generated/application';\nexport const BLUEPRINT = [\n    AIRPORT_CODE,\n    TRAVEL_DOCUMENT_CHECKPOINT,\n    AIRSPACE,\n    HOLDING_PATTERN,\n    MOVING_WALKWAY\n];\n//# sourceMappingURL=index.js.map","/* eslint-disable */\nexport const APPLICATION = {\n    \"domain\": \"air\",\n    \"index\": null,\n    \"name\": \"@airport/travel-document-checkpoint\",\n    \"sinceVersion\": 1,\n    \"versions\": [\n        {\n            \"api\": {\n                \"apiObjectMap\": {\n                    \"IUserApi\": {\n                        \"operationMap\": {\n                            \"addUser\": {\n                                \"isAsync\": true,\n                                \"parameters\": []\n                            },\n                            \"findUser\": {\n                                \"isAsync\": true,\n                                \"parameters\": []\n                            }\n                        }\n                    }\n                }\n            },\n            \"entities\": [\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NAME\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 0,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Continent\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"name\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"countries\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"continent\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"CONTINENTS\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NAME\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 0,\n                                    \"oneRelationIndex\": 0,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"CONTINENT_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 1,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Country\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"name\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"continent\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"users\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"country\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"COUNTRIES\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 4,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"USER_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 5,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"TERMINAL_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        },\n                        {\n                            \"index\": 1\n                        }\n                    ],\n                    \"index\": 2,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"UserTerminal\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"user\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"terminal\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 5,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"USER_TERMINAL\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 7,\n                                    \"oneRelationIndex\": 1,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                },\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 6,\n                                    \"oneRelationIndex\": 2,\n                                    \"oneColumnIndex\": 2,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"AGT_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"PASSWORD\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 4,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"USER_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 5,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                },\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 6,\n                                    \"oneRelationIndex\": 2,\n                                    \"oneColumnIndex\": 1,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"TERMINAL_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                },\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        },\n                        {\n                            \"index\": 1\n                        }\n                    ],\n                    \"index\": 3,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"UserTerminalAgt\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"agtId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"password\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"user\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"terminal\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"agt\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"terminalAgt\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 5,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 5\n                            },\n                            \"relationTableIndex\": 7,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 6\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"USER_TERMINAL_AGT\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"EMAIL\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"PASSWORD_HASH\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"USERNAME\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"UUID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 4,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"User\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"email\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"passwordHash\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"username\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"uuId\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"UUID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"IS_LOCAL\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 4,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"OWNER_USER_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 5,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Terminal\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"uuId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"owner\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"isLocal\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"TERMINAL\",\n                        \"propertyIndexes\": [\n                            {\n                                \"propertyIndex\": 1,\n                                \"unique\": true\n                            }\n                        ]\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"PASSWORD\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 5,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"TERMINAL_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 7,\n                                    \"oneRelationIndex\": 0,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"AGT_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 1\n                        },\n                        {\n                            \"index\": 2\n                        }\n                    ],\n                    \"index\": 6,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"TerminalAgt\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"terminal\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"agt\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"password\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"userTerminalAgts\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 5,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 7,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"terminalAgt\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 3,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"TERMINAL_AGTS\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ADDRESS\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 7,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Agt\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"address\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"terminalAgts\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"userTerminalAgts\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"agt\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"agt\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 3,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"columnIndexes\": []\n                    }\n                }\n            ],\n            \"integerVersion\": 1,\n            \"referencedApplications\": [],\n            \"versionString\": \"1.0.0\"\n        }\n    ]\n};\n//# sourceMappingURL=application.js.map","/* eslint-disable */\nexport const APPLICATION = {\n    \"domain\": \"air\",\n    \"index\": null,\n    \"name\": \"@airport/airspace\",\n    \"sinceVersion\": 1,\n    \"versions\": [\n        {\n            \"api\": {\n                \"apiObjectMap\": {}\n            },\n            \"entities\": [\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DEPRECATED_SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REMOVED_IN_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 4,\n                                    \"oneRelationIndex\": 5,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"MANY_APPLICATION_COLUMN_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 4,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 4,\n                                    \"oneRelationIndex\": 6,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"ONE_APPLICATION_COLUMN_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 5,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 1,\n                                    \"oneRelationIndex\": 6,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"MANY_APPLICATION_RELATION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 6,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 1,\n                                    \"oneRelationIndex\": 7,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"ONE_APPLICATION_RELATION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 8,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 7,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 1,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"PARENT_RELATION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 8\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 3\n                        }\n                    ],\n                    \"index\": 0,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationRelationColumn\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"name\": \"deprecatedSinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"removedInVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"sinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"manyColumn\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"oneColumn\",\n                            \"relationRef\": {\n                                \"index\": 4\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"manyRelation\",\n                            \"relationRef\": {\n                                \"index\": 5\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"oneRelation\",\n                            \"relationRef\": {\n                                \"index\": 6\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"name\": \"parentRelation\",\n                            \"relationRef\": {\n                                \"index\": 7\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 5\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 6\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 7\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 8\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_RELATION_COLUMNS\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DEPRECATED_SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REMOVED_IN_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"RELATION_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"FOREIGN_KEY\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"JSON\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"MANY_TO_ONE_ELEMENTS\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"JSON\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ONE_TO_MANY_ELEMENTS\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 8\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"JSON\"\n                        },\n                        {\n                            \"index\": 8,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"RELATION_TYPE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 9\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 9,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"IS_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 10\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 10,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 2,\n                                    \"oneRelationIndex\": 5,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_PROPERTY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 11,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 4,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 6,\n                                    \"oneRelationIndex\": 7,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_TABLE_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 11\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 12,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 5,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 6,\n                                    \"oneRelationIndex\": 8,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"RELATION_APPLICATION_TABLE_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 12\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 3\n                        }\n                    ],\n                    \"index\": 1,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationRelation\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"name\": \"deprecatedSinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"removedInVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"sinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"index\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"property\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"foreignKey\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 6\n                            },\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"manyToOneElems\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 7\n                            },\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"name\": \"oneToManyElems\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 8\n                            },\n                            \"index\": 9,\n                            \"isId\": false,\n                            \"name\": \"relationType\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 9\n                            },\n                            \"index\": 10,\n                            \"isId\": false,\n                            \"name\": \"isId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 11,\n                            \"isId\": false,\n                            \"name\": \"entity\",\n                            \"relationRef\": {\n                                \"index\": 4\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 12,\n                            \"isId\": false,\n                            \"name\": \"relationEntity\",\n                            \"relationRef\": {\n                                \"index\": 5\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 13,\n                            \"isId\": false,\n                            \"name\": \"manyRelationColumns\",\n                            \"relationRef\": {\n                                \"index\": 6\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 14,\n                            \"isId\": false,\n                            \"name\": \"oneRelationColumns\",\n                            \"relationRef\": {\n                                \"index\": 7\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 5\n                            },\n                            \"relationTableIndex\": 2,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 11\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 12\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"manyRelation\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 13\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"oneRelation\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 14\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_RELATIONS\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DEPRECATED_SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REMOVED_IN_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"PROPERTY_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NAME\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"IS_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 6,\n                                    \"oneRelationIndex\": 6,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_ENTITY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 3\n                        }\n                    ],\n                    \"index\": 2,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationProperty\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"name\": \"deprecatedSinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"removedInVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"sinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"index\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"name\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 6\n                            },\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"isId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"entity\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"name\": \"propertyColumns\",\n                            \"relationRef\": {\n                                \"index\": 4\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 9,\n                            \"isId\": false,\n                            \"name\": \"relation\",\n                            \"relationRef\": {\n                                \"index\": 5\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 7\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"property\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 8\n                            },\n                            \"relationTableIndex\": 3,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"property\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 9\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_PROPERTIES\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DEPRECATED_SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REMOVED_IN_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 4,\n                                    \"oneRelationIndex\": 4,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_COLUMN_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 4,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 2,\n                                    \"oneRelationIndex\": 4,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_PROPERTY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 3\n                        },\n                        {\n                            \"index\": 4\n                        }\n                    ],\n                    \"index\": 3,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationPropertyColumn\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"name\": \"deprecatedSinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"removedInVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"sinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"name\": \"column\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": true,\n                            \"name\": \"property\",\n                            \"relationRef\": {\n                                \"index\": 4\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 2,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_PROPERTY_COLUMNS\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DEPRECATED_SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REMOVED_IN_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"COLUMN_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID_INDEX\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"IS_GENERATED\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ALLOCATION_SIZE\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 8,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NAME\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 8\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 9,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NOT_NULL\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 9\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 10,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"PRECISION\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 10\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 11,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"SCALE\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 11\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 12,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"TYPE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 12\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 13,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 6,\n                                    \"oneRelationIndex\": 4,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_ENTITY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 13\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 3\n                        }\n                    ],\n                    \"index\": 4,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationColumn\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"name\": \"deprecatedSinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"removedInVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"sinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"index\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"idIndex\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 6\n                            },\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"isGenerated\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 7\n                            },\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"allocationSize\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 8\n                            },\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"name\": \"name\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 9\n                            },\n                            \"index\": 9,\n                            \"isId\": false,\n                            \"name\": \"notNull\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 10\n                            },\n                            \"index\": 10,\n                            \"isId\": false,\n                            \"name\": \"precision\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 11\n                            },\n                            \"index\": 11,\n                            \"isId\": false,\n                            \"name\": \"scale\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 12\n                            },\n                            \"index\": 12,\n                            \"isId\": false,\n                            \"name\": \"type\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 13,\n                            \"isId\": false,\n                            \"name\": \"entity\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 14,\n                            \"isId\": false,\n                            \"name\": \"propertyColumns\",\n                            \"relationRef\": {\n                                \"index\": 4\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 15,\n                            \"isId\": false,\n                            \"name\": \"manyRelationColumns\",\n                            \"relationRef\": {\n                                \"index\": 5\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 16,\n                            \"isId\": false,\n                            \"name\": \"oneRelationColumns\",\n                            \"relationRef\": {\n                                \"index\": 6\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 13\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"column\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 14\n                            },\n                            \"relationTableIndex\": 3,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"manyColumn\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 15\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"oneColumn\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 16\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_COLUMNS\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DEPRECATED_SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REMOVED_IN_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"TYPE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NAME\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"RULE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"JSON\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 6,\n                                    \"oneRelationIndex\": 5,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_ENTITY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 3\n                        }\n                    ],\n                    \"index\": 5,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationOperation\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"name\": \"deprecatedSinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"removedInVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"sinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"type\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"entity\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"name\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 6\n                            },\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"rule\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 5\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_OPERATIONS\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DEPRECATED_SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REMOVED_IN_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"TABLE_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"IS_LOCAL\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"IS_REPOSITORY_ENTITY\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NAME\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 8,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"TABLE_CONFIGURATION\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 8\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"JSON\"\n                        },\n                        {\n                            \"index\": 9,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneRelationIndex\": 1,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 9\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 3\n                        }\n                    ],\n                    \"index\": 6,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationEntity\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"name\": \"deprecatedSinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"removedInVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"sinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"index\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"isLocal\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 6\n                            },\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"isRepositoryEntity\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 7\n                            },\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"name\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 8\n                            },\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"name\": \"tableConfig\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 9,\n                            \"isId\": false,\n                            \"name\": \"applicationVersion\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 10,\n                            \"isId\": false,\n                            \"name\": \"columns\",\n                            \"relationRef\": {\n                                \"index\": 4\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 11,\n                            \"isId\": false,\n                            \"name\": \"operations\",\n                            \"relationRef\": {\n                                \"index\": 5\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 12,\n                            \"isId\": false,\n                            \"name\": \"properties\",\n                            \"relationRef\": {\n                                \"index\": 6\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 13,\n                            \"isId\": false,\n                            \"name\": \"relations\",\n                            \"relationRef\": {\n                                \"index\": 7\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 14,\n                            \"isId\": false,\n                            \"name\": \"relationReferences\",\n                            \"relationRef\": {\n                                \"index\": 8\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 9\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"entity\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 10\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"entity\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 11\n                            },\n                            \"relationTableIndex\": 5,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"entity\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 12\n                            },\n                            \"relationTableIndex\": 2,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"entity\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 13\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"relationEntity\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 14\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_ENTITIES\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DEPRECATED_SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REMOVED_IN_APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SINCE_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"APPLICATION_REFERENCE_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneRelationIndex\": 2,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"OWN_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 4,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneRelationIndex\": 3,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REFERENCED_APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 4\n                        },\n                        {\n                            \"index\": 5\n                        }\n                    ],\n                    \"index\": 7,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationReference\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"name\": \"deprecatedSinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"removedInVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"sinceVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"name\": \"ownApplicationVersion\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": true,\n                            \"name\": \"referencedApplicationVersion\",\n                            \"relationRef\": {\n                                \"index\": 4\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"index\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_REFERENCES\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"allocationSize\": 100,\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"INTEGER_VERSION\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"VERSION_STRING\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"MAJOR_VERSION\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"MINOR_VERSION\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"PATCH_VERSION\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"JSON_APPLICATION\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"JSON\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 10,\n                                    \"oneRelationIndex\": 1,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 8,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationVersion\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"integerVersion\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"versionString\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"majorVersion\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"minorVersion\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"patchVersion\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 6\n                            },\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"jsonApplication\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"application\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"name\": \"entities\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 9,\n                            \"isId\": false,\n                            \"name\": \"references\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 10,\n                            \"isId\": false,\n                            \"name\": \"referencedBy\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 7\n                            },\n                            \"relationTableIndex\": 10,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"applicationVersion\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 8\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"ownApplicationVersion\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 9\n                            },\n                            \"relationTableIndex\": 7,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"referencedApplicationVersion\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 10\n                            },\n                            \"relationTableIndex\": 7,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_VERSIONS\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 10,\n                                    \"oneRelationIndex\": 2,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_VERSION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        },\n                        {\n                            \"index\": 1\n                        }\n                    ],\n                    \"index\": 9,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"ApplicationCurrentVersion\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"application\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"applicationVersion\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 10,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATION_CURRENT_VERSIONS\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"APPLICATION_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"SCOPE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"APPLICATION_NAME\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"FULL_APPLICATION_NAME\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"STATUS\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"SIGNATURE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 11,\n                                    \"oneRelationIndex\": 0,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"DOMAIN_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 10,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Application\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"index\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"domain\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"scope\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"name\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"fullName\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"status\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"signature\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"versions\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"name\": \"currentVersion\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 11,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"application\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 7\n                            },\n                            \"relationTableIndex\": 8,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"application\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 8\n                            },\n                            \"relationTableIndex\": 9,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"APPLICATIONS\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NAME\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 11,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Domain\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"name\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"applications\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"domain\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 10,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"DOMAINS\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                }\n            ],\n            \"integerVersion\": 1,\n            \"referencedApplications\": [],\n            \"versionString\": \"1.0.0\"\n        }\n    ]\n};\n//# sourceMappingURL=application.js.map","/* eslint-disable */\nexport const APPLICATION = {\n    \"domain\": \"air\",\n    \"index\": null,\n    \"name\": \"@airport/holding-pattern\",\n    \"sinceVersion\": 1,\n    \"versions\": [\n        {\n            \"api\": {\n                \"apiObjectMap\": {}\n            },\n            \"entities\": [\n                {\n                    \"columns\": [\n                        {\n                            \"allocationSize\": 2000,\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ACTOR_RECORD_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 1,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"ACTOR_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 5,\n                                    \"oneRelationIndex\": 3,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REPOSITORY_OPERATION_HISTORY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 0,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"RecordHistory\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"actorRecordId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"actor\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"operationHistory\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"newValues\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"oldValues\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 5,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"recordHistory\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 6,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"recordHistory\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 5\n                            },\n                            \"relationTableIndex\": 7,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"REPOSITORY_RECORD_HISTORY\",\n                        \"columnIndexes\": [\n                            {\n                                \"name\": \"RCRD_HSTR_TO_OPRTN_HSTR_FX\",\n                                \"columnList\": [\n                                    \"REPOSITORY_OPERATION_HISTORY_ID\"\n                                ],\n                                \"unique\": false\n                            }\n                        ]\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"UU_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": 0,\n                                    \"oneTableIndex\": 4,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"USER_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": 0,\n                                    \"oneTableIndex\": 5,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"TERMINAL_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": 1,\n                                    \"oneTableIndex\": 10,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_INDEX\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 1,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Actor\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"uuId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"user\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"terminal\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"application\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 4,\n                            \"relationTableApplicationIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 5,\n                            \"relationTableApplicationIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 10,\n                            \"relationTableApplicationIndex\": 1,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"AGE_SUITABILITY\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"CREATED_AT\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"DATE\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"IMMUTABLE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"SOURCE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"UU_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": 0,\n                                    \"oneTableIndex\": 4,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"OWNER_USER_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 2,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"Repository\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"ageSuitability\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"createdAt\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"immutable\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"source\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"uuId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"owner\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"repositoryTransactionHistory\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 6\n                            },\n                            \"relationTableIndex\": 4,\n                            \"relationTableApplicationIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"repository\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 7\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"REPOSITORY\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"allocationSize\": 100,\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"TRANSACTION_TYPE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 3,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"TransactionHistory\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"transactionType\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"repositoryTransactionHistories\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"transactionHistory\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"TRANSACTION_HISTORY\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"allocationSize\": 200,\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"REPOSITORY_TRANSACTION_TYPE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"SAVE_TIMESTAMP\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"SYNC_TIMESTAMP\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"UUID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"IS_REPOSITORY_CREATION\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 2,\n                                    \"oneRelationIndex\": 1,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REPOSITORY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 3,\n                                    \"oneRelationIndex\": 0,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"TRANSACTION_HISTORY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 4,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"RepositoryTransactionHistory\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"repositoryTransactionType\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"saveTimestamp\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"syncTimestamp\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 4\n                            },\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"uuId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 5\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"isRepositoryCreation\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"repository\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"transactionHistory\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 8,\n                            \"isId\": false,\n                            \"name\": \"operationHistory\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 6\n                            },\n                            \"relationTableIndex\": 2,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 7\n                            },\n                            \"relationTableIndex\": 3,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"repositoryTransactionHistory\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 8\n                            },\n                            \"relationTableIndex\": 5,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"REPOSITORY_TRANSACTION_HISTORY\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"allocationSize\": 600,\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ORDER_NUMBER\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"CHANGE_TYPE\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"SYSTEM_WIDE_OPERATION_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": 1,\n                                    \"oneTableIndex\": 6,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"ENTITY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 1,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"ACTOR_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 4,\n                                    \"oneRelationIndex\": 2,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REPOSITORY_TRANSACTION_HISTORY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 5,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"OperationHistory\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"orderNumber\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"changeType\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 3\n                            },\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"systemWideOperationId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"entity\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"actor\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"repositoryTransactionHistory\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"recordHistory\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 6,\n                            \"relationTableApplicationIndex\": 1,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 5\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 6\n                            },\n                            \"relationTableIndex\": 4,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"operationHistory\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 7\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"REPOSITORY_OPERATION_HISTORY\",\n                        \"columnIndexes\": []\n                    }\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"COLUMN_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"NEW_VALUE\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"ANY\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 0,\n                                    \"oneRelationIndex\": 2,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REPOSITORY_RECORD_HISTORY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        },\n                        {\n                            \"index\": 2\n                        }\n                    ],\n                    \"index\": 6,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"RecordHistoryNewValue\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"recordHistory\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"columnIndex\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"newValue\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"REPOSITORY_RECORD_HISTORY_NEW_VALUES\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"COLUMN_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"OLD_VALUE\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"ANY\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 0,\n                                    \"oneRelationIndex\": 3,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REPOSITORY_RECORD_HISTORY_ID\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        },\n                        {\n                            \"index\": 2\n                        }\n                    ],\n                    \"index\": 7,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"RecordHistoryOldValue\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"recordHistory\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"columnIndex\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"oldValue\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"REPOSITORY_RECORD_HISTORY_OLD_VALUES\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"REPOSITORY_APPLICATION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"APPLICATION_INDEX\",\n                            \"notNull\": true,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 2,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REPOSITORY_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        },\n                        {\n                            \"index\": 2\n                        }\n                    ],\n                    \"index\": 8,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"RepositoryApplication\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"repository\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"applicationIndex\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 2,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"REPOSITORY_APPLICATIONS\",\n                        \"columnIndexes\": []\n                    }\n                }\n            ],\n            \"integerVersion\": 1,\n            \"referencedApplications\": [\n                {\n                    \"domain\": \"air\",\n                    \"index\": 0,\n                    \"name\": \"@airport/travel-document-checkpoint\",\n                    \"sinceVersion\": 1,\n                    \"versions\": [\n                        {\n                            \"entities\": null,\n                            \"integerVersion\": 1,\n                            \"referencedApplications\": null,\n                            \"versionString\": \"1.0.0\"\n                        }\n                    ]\n                },\n                {\n                    \"domain\": \"air\",\n                    \"index\": 1,\n                    \"name\": \"@airport/airspace\",\n                    \"sinceVersion\": 1,\n                    \"versions\": [\n                        {\n                            \"entities\": null,\n                            \"integerVersion\": 1,\n                            \"referencedApplications\": null,\n                            \"versionString\": \"1.0.0\"\n                        }\n                    ]\n                }\n            ],\n            \"versionString\": \"1.0.0\"\n        }\n    ]\n};\n//# sourceMappingURL=application.js.map","/* eslint-disable */\nexport const APPLICATION = {\n    \"domain\": \"air\",\n    \"index\": null,\n    \"name\": \"@airport/moving-walkway\",\n    \"sinceVersion\": 1,\n    \"versions\": [\n        {\n            \"api\": {\n                \"apiObjectMap\": {}\n            },\n            \"entities\": [\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"COLUMNINDEX\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": null,\n                                    \"oneTableIndex\": 1,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"SYNCHRONIZATION_CONFLICT_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        },\n                        {\n                            \"index\": 1\n                        }\n                    ],\n                    \"index\": 0,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"SynchronizationConflictValues\",\n                    \"properties\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"synchronizationConflict\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 1,\n                            \"isId\": true,\n                            \"name\": \"columnIndex\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 0\n                            },\n                            \"relationTableIndex\": 1,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"SYNCHRONIZATION_CONFLICT_VALUES\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"TYPE\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"STRING\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ACKNOWLEDGED\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"BOOLEAN\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": 0,\n                                    \"oneTableIndex\": 2,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REPOSITORY_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": 0,\n                                    \"oneTableIndex\": 0,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"OVERWRITTEN_RECORD_HISTORY_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": 0,\n                                    \"oneTableIndex\": 0,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"OVERWRITING_RECORD_HISTORY_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 1,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"SynchronizationConflict\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"type\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"acknowledged\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"repository\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"overwrittenRecordHistory\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"overwritingRecordHistory\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"values\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 2,\n                            \"relationTableApplicationIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 0,\n                            \"relationTableApplicationIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 5\n                            },\n                            \"relationTableIndex\": 0,\n                            \"relationTableApplicationIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"oneToManyElems\": {\n                                \"mappedBy\": \"SYNCHRONIZATION_CONFLICT_ID\"\n                            },\n                            \"relationType\": \"ONE_TO_MANY\",\n                            \"propertyRef\": {\n                                \"index\": 6\n                            },\n                            \"relationTableIndex\": 0,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"SYNCHRONIZATION_CONFLICT\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                },\n                {\n                    \"columns\": [\n                        {\n                            \"index\": 0,\n                            \"isGenerated\": true,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 0\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 1,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"ACTOR_RECORD_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 5\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 2,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [],\n                            \"name\": \"UPDATED_VALUE\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 7\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"ANY\"\n                        },\n                        {\n                            \"index\": 3,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 0,\n                                    \"oneApplicationIndex\": 1,\n                                    \"oneTableIndex\": 8,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_VERSION_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 1\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 4,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 1,\n                                    \"oneApplicationIndex\": 1,\n                                    \"oneTableIndex\": 6,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_ENTITY_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 2\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 5,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 2,\n                                    \"oneApplicationIndex\": 0,\n                                    \"oneTableIndex\": 2,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"REPOSITORY_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 3\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 6,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 3,\n                                    \"oneApplicationIndex\": 0,\n                                    \"oneTableIndex\": 1,\n                                    \"oneColumnIndex\": 0,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"ACTOR_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 4\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        },\n                        {\n                            \"index\": 7,\n                            \"isGenerated\": false,\n                            \"manyRelationColumnRefs\": [\n                                {\n                                    \"manyRelationIndex\": 4,\n                                    \"oneApplicationIndex\": 1,\n                                    \"oneTableIndex\": 4,\n                                    \"oneColumnIndex\": 3,\n                                    \"sinceVersion\": 1\n                                }\n                            ],\n                            \"name\": \"APPLICATION_COLUMN_ID\",\n                            \"notNull\": false,\n                            \"propertyRefs\": [\n                                {\n                                    \"index\": 6\n                                }\n                            ],\n                            \"sinceVersion\": 1,\n                            \"type\": \"NUMBER\"\n                        }\n                    ],\n                    \"idColumnRefs\": [\n                        {\n                            \"index\": 0\n                        }\n                    ],\n                    \"index\": 2,\n                    \"isLocal\": true,\n                    \"isRepositoryEntity\": false,\n                    \"name\": \"RecordUpdateStage\",\n                    \"properties\": [\n                        {\n                            \"columnRef\": {\n                                \"index\": 0\n                            },\n                            \"index\": 0,\n                            \"isId\": true,\n                            \"name\": \"id\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"name\": \"applicationVersion\",\n                            \"relationRef\": {\n                                \"index\": 0\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"name\": \"entity\",\n                            \"relationRef\": {\n                                \"index\": 1\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"name\": \"repository\",\n                            \"relationRef\": {\n                                \"index\": 2\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"name\": \"actor\",\n                            \"relationRef\": {\n                                \"index\": 3\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 1\n                            },\n                            \"index\": 5,\n                            \"isId\": false,\n                            \"name\": \"actorRecordId\",\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 6,\n                            \"isId\": false,\n                            \"name\": \"column\",\n                            \"relationRef\": {\n                                \"index\": 4\n                            },\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"columnRef\": {\n                                \"index\": 2\n                            },\n                            \"index\": 7,\n                            \"isId\": false,\n                            \"name\": \"updatedValue\",\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"relations\": [\n                        {\n                            \"index\": 0,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 1\n                            },\n                            \"relationTableIndex\": 8,\n                            \"relationTableApplicationIndex\": 1,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 1,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 2\n                            },\n                            \"relationTableIndex\": 6,\n                            \"relationTableApplicationIndex\": 1,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 2,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 3\n                            },\n                            \"relationTableIndex\": 2,\n                            \"relationTableApplicationIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 3,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 4\n                            },\n                            \"relationTableIndex\": 1,\n                            \"relationTableApplicationIndex\": 0,\n                            \"sinceVersion\": 1\n                        },\n                        {\n                            \"index\": 4,\n                            \"isId\": false,\n                            \"relationType\": \"MANY_TO_ONE\",\n                            \"propertyRef\": {\n                                \"index\": 6\n                            },\n                            \"relationTableIndex\": 4,\n                            \"relationTableApplicationIndex\": 1,\n                            \"sinceVersion\": 1\n                        }\n                    ],\n                    \"sinceVersion\": 1,\n                    \"tableConfig\": {\n                        \"name\": \"RECORD_UPDATE_STAGE\",\n                        \"columnIndexes\": []\n                    },\n                    \"operations\": {}\n                }\n            ],\n            \"integerVersion\": 1,\n            \"referencedApplications\": [\n                {\n                    \"domain\": \"air\",\n                    \"index\": 0,\n                    \"name\": \"@airport/holding-pattern\",\n                    \"sinceVersion\": 1,\n                    \"versions\": [\n                        {\n                            \"entities\": null,\n                            \"integerVersion\": 1,\n                            \"referencedApplications\": null,\n                            \"versionString\": \"1.0.0\"\n                        }\n                    ]\n                },\n                {\n                    \"domain\": \"air\",\n                    \"index\": 1,\n                    \"name\": \"@airport/airspace\",\n                    \"sinceVersion\": 1,\n                    \"versions\": [\n                        {\n                            \"entities\": null,\n                            \"integerVersion\": 1,\n                            \"referencedApplications\": null,\n                            \"versionString\": \"1.0.0\"\n                        }\n                    ]\n                }\n            ],\n            \"versionString\": \"1.0.0\"\n        }\n    ]\n};\n//# sourceMappingURL=application.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { container } from '@airport/direction-indicator';\nimport { getFullApplicationName, } from '@airport/ground-control';\nimport { Actor, } from '@airport/holding-pattern';\nimport { BLUEPRINT } from '@airport/blueprint';\nlet DatabaseManager = class DatabaseManager {\n    constructor() {\n        this.initialized = false;\n    }\n    async initNoDb(context, ...applications) {\n        await container(this).get(AIRPORT_DATABASE);\n        this.transactionalServer.tempActor = new Actor();\n        await this.installStarterApplication(true, false, context);\n        await this.applicationInitializer.stage(applications, context);\n        this.transactionalServer.tempActor = null;\n        this.initialized = true;\n    }\n    async initWithDb(domainName, context) {\n        await container(this).get(AIRPORT_DATABASE);\n        this.transactionalServer.tempActor = new Actor();\n        const hydrate = await this.storeDriver.doesTableExist(getFullApplicationName(BLUEPRINT[0]), 'PACKAGES', context);\n        await this.installStarterApplication(false, hydrate, context);\n        if (!hydrate) {\n            await this.internalRecordManager.initTerminal(domainName, context);\n        }\n        this.transactionalServer.tempActor = null;\n        this.initialized = true;\n    }\n    isInitialized() {\n        return this.initialized;\n    }\n    async initFeatureApplications(context, jsonApplications) {\n        const applications = await this.applicationDao.findAllWithJson();\n        const existingApplicationMap = new Map();\n        for (const application of applications) {\n            existingApplicationMap.set(application.fullName, application);\n        }\n        const applicationsToCreate = [];\n        for (const jsonApplication of jsonApplications) {\n            const existingApplication = existingApplicationMap.get(getFullApplicationName(jsonApplication));\n            if (existingApplication) {\n                jsonApplication.lastIds = existingApplication.versions[0].jsonApplication.lastIds;\n            }\n            else {\n                applicationsToCreate.push(jsonApplication);\n            }\n        }\n        this.transactionalServer.tempActor = new Actor();\n        await this.applicationInitializer.initialize(applicationsToCreate, context, true, true);\n        this.transactionalServer.tempActor = null;\n    }\n    /*\n    static async addDataStore(\n        storeType: StoreType,\n        terminalName: string\n    ): Promise<void> {\n        if (this.isInitialized(terminalName)) {\n            throw new Error(\n            `Database '${terminalName}' is already initialized`);\n        }\n        const newDataStore = await QDataStore.db(dbConst.DEFAULT_DB).save({\n            name: terminalName,\n            storeType: storeType\n        });\n        await TQ.init(storeType, terminalName);\n    }\n\n    private doEnsureInitialized(\n        terminalName: string,\n        resolve,\n        reject,\n        remainingTimeout: number\n    ): void {\n        if (this.isInitialized(terminalName)) {\n            resolve()\n        }\n        if (remainingTimeout <= 0) {\n            reject(`Timeout out waiting for initialization of DB: [${terminalName}]`)\n        }\n        remainingTimeout -= 100\n        setTimeout(() => {\n            this.doEnsureInitialized(terminalName, resolve, reject, remainingTimeout)\n        }, 100)\n    }\n    */\n    async installStarterApplication(stage, hydrate, context) {\n        const blueprintFile = await import('@airport/blueprint');\n        if (stage) {\n            await this.applicationInitializer.stage(blueprintFile.BLUEPRINT, context);\n        }\n        else if (hydrate) {\n            await this.applicationInitializer.hydrate(blueprintFile.BLUEPRINT, context);\n        }\n        else {\n            await this.applicationInitializer.initialize(blueprintFile.BLUEPRINT, context, false, false);\n        }\n    }\n};\n__decorate([\n    Inject()\n], DatabaseManager.prototype, \"applicationDao\", void 0);\n__decorate([\n    Inject()\n], DatabaseManager.prototype, \"applicationInitializer\", void 0);\n__decorate([\n    Inject()\n], DatabaseManager.prototype, \"internalRecordManager\", void 0);\n__decorate([\n    Inject()\n], DatabaseManager.prototype, \"storeDriver\", void 0);\n__decorate([\n    Inject()\n], DatabaseManager.prototype, \"transactionalServer\", void 0);\nDatabaseManager = __decorate([\n    Injected()\n], DatabaseManager);\nexport { DatabaseManager };\n//# sourceMappingURL=DatabaseManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { valuesEqual, Y } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getSysWideOpId } from '@airport/check-in';\nimport { ChangeType, ensureChildArray, ensureChildJsMap, EntityRelationType, QueryResultType, repositoryEntity, } from '@airport/ground-control';\nlet DeleteManager = class DeleteManager {\n    async deleteWhere(portableQuery, actor, transaction, rootTransaction, context) {\n        const dbEntity = this.airportDatabase\n            .applications[portableQuery.applicationIndex].currentVersion[0].applicationVersion\n            .entities[portableQuery.tableIndex];\n        const deleteCommand = transaction.deleteWhere(portableQuery, context);\n        if (dbEntity.isLocal || transaction.isSync) {\n            return await deleteCommand;\n        }\n        const selectCascadeTree = this.getCascadeSubTree(dbEntity);\n        const jsonDelete = portableQuery.jsonQuery;\n        const jsonSelect = {\n            S: selectCascadeTree,\n            F: [jsonDelete.DF],\n            W: jsonDelete.W,\n        };\n        const portableSelect = {\n            applicationIndex: portableQuery.applicationIndex,\n            tableIndex: portableQuery.tableIndex,\n            jsonQuery: jsonSelect,\n            queryResultType: QueryResultType.ENTITY_TREE,\n            parameterMap: portableQuery.parameterMap,\n            // values: portableQuery.values,\n        };\n        const treesToDelete = await transaction\n            .find(portableSelect, {}, context);\n        const recordsToDelete = new Map();\n        const repositoryIdSet = new Set();\n        for (const treeToDelete of treesToDelete) {\n            this.recordRepositoryIds(treeToDelete, dbEntity, recordsToDelete, repositoryIdSet, this.applicationUtils);\n        }\n        await this.recordTreeToDelete(recordsToDelete, actor, transaction, rootTransaction, context);\n        return await deleteCommand;\n    }\n    recordRepositoryIds(treeToDelete, dbEntity, recordsToDelete, repositoryIdSet, applicationUtils) {\n        const repositoryId = treeToDelete.repository.id;\n        repositoryIdSet.add(repositoryId);\n        const recordsToDeleteForApplication = ensureChildJsMap(recordsToDelete, dbEntity.applicationVersion.application.index);\n        const recordsToDeleteForTable = ensureChildJsMap(recordsToDeleteForApplication, dbEntity.index);\n        const recordsToDeleteForRepository = ensureChildArray(recordsToDeleteForTable, repositoryId);\n        const recordToDelete = {};\n        // FIXME: implement\n        recordsToDeleteForRepository.push(recordToDelete);\n        for (const dbProperty of dbEntity.properties) {\n            if (dbProperty.relation && dbProperty.relation.length) {\n                if (!treeToDelete[dbProperty.name]) {\n                    continue;\n                }\n                const dbRelation = dbProperty.relation[0];\n                switch (dbRelation.relationType) {\n                    case EntityRelationType.MANY_TO_ONE:\n                        applicationUtils.forEachColumnOfRelation(dbRelation, treeToDelete, (dbColumn, value, propertyNameChains) => {\n                            this.columnProcessed(dbProperty, recordToDelete, dbColumn, value);\n                        }, false);\n                        break;\n                    case EntityRelationType.ONE_TO_MANY:\n                        if (!dbRelation.oneToManyElems) {\n                            continue;\n                        }\n                        let childTrees = treeToDelete[dbRelation.property.name];\n                        if (childTrees && childTrees.length) {\n                            const childDbEntity = dbRelation.relationEntity;\n                            childTrees.forEach(childTree => {\n                                this.recordRepositoryIds(childTree, childDbEntity, recordsToDelete, repositoryIdSet, applicationUtils);\n                            });\n                        }\n                        break;\n                    default:\n                        throw new Error(`Unknown relation type: '${dbRelation.relationType}' \r\n\t\t\t\t\t\t\ton '${dbEntity.name}.${dbRelation.property.name}'.`);\n                }\n            }\n            else {\n                const value = treeToDelete[dbProperty.name];\n                if (value === null || value === undefined) {\n                    continue;\n                }\n                this.columnProcessed(dbProperty, recordToDelete, dbProperty.propertyColumns[0].column, value);\n            }\n        }\n    }\n    /*\n     Values for the same column could be repeated in different places in the object graph.\n     For example, if the same column is mapped to two different @ManyToOne relations.\n     In this case, when persisting an entity we need to make sure that all values for the\n     entity in question are being persisted.\n     */\n    columnProcessed(dbProperty, foundValues, dbColumn, value) {\n        // if (value === undefined) {\n        // \tthrow new Error(`Values cannot be undefined, please use null.`_;\n        // }\n        if (foundValues[dbColumn.name] === undefined) {\n            foundValues[dbColumn.name] = value;\n            return false;\n        }\n        if (!valuesEqual(foundValues[dbColumn.name], value)) {\n            throw new Error(`Found value mismatch in '${dbProperty.entity.name}.${dbProperty.name}'\r\n\t\t\t(column: '${dbColumn.name}'): ${foundValues[dbColumn.name]} !== ${value}`);\n        }\n        return true;\n    }\n    async recordTreeToDelete(recordsToDelete, actor, transaction, rootTransaction, context) {\n        let systemWideOperationId;\n        for (const [applicationIndex, applicationRecordsToDelete] of recordsToDelete) {\n            for (const [entityIndex, entityRecordsToDelete] of applicationRecordsToDelete) {\n                const dbEntity = this.airportDatabase.applications[applicationIndex].currentVersion[0]\n                    .applicationVersion.entities[entityIndex];\n                if (!systemWideOperationId) {\n                    systemWideOperationId = await getSysWideOpId(this.airportDatabase, this.sequenceGenerator);\n                }\n                for (const [repositoryId, entityRecordsToDeleteForRepo] of entityRecordsToDelete) {\n                    const repositoryTransactionHistory = await this.historyManager.getNewRepositoryTransactionHistory(transaction.transactionHistory, repositoryId, context);\n                    const operationHistory = this.repositoryTransactionHistoryDuo.startOperation(repositoryTransactionHistory, systemWideOperationId, ChangeType.DELETE_ROWS, dbEntity, actor, rootTransaction);\n                    for (const recordToDelete of entityRecordsToDeleteForRepo) {\n                        const recordHistory = this.operationHistoryDuo.startRecordHistory(operationHistory, recordToDelete.actor.id, recordToDelete.actorRecordId);\n                        for (const dbProperty of dbEntity.properties) {\n                            if (dbProperty.relation && dbProperty.relation.length) {\n                                const dbRelation = dbProperty.relation[0];\n                                switch (dbRelation.relationType) {\n                                    case EntityRelationType.MANY_TO_ONE:\n                                        this.applicationUtils.forEachColumnOfRelation(dbRelation, recordToDelete, (dbColumn, value, propertyNameChains) => {\n                                            switch (dbColumn.name) {\n                                                // Do not add Actor or Repository the are recorded\n                                                // at record history level\n                                                case repositoryEntity.ACTOR_ID:\n                                                case repositoryEntity.REPOSITORY_ID:\n                                                    break;\n                                                default:\n                                                    this.recordHistoryDuo.addOldValue(recordHistory, dbColumn, value);\n                                            }\n                                        });\n                                        break;\n                                    case EntityRelationType.ONE_TO_MANY:\n                                        // One-To-Many do not contain any columns in source entity\n                                        break;\n                                    default:\n                                        throw new Error(`Unknown relation type: '${dbRelation.relationType}'\r\n\t\t\t\t\t\t\t\t\t\ton '${dbEntity.name}.${dbProperty.name}'.`);\n                                }\n                            }\n                            else {\n                                const dbColumn = dbProperty.propertyColumns[0].column;\n                                this.recordHistoryDuo\n                                    .addOldValue(recordHistory, dbColumn, recordToDelete[dbProperty.name]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    getCascadeSubTree(dbEntity, selectClause = {}) {\n        for (const dbProperty of dbEntity.properties) {\n            let dbRelation;\n            if (dbProperty.relation && dbProperty.relation.length) {\n                dbRelation = dbProperty.relation[0];\n            }\n            if (dbRelation) {\n                switch (dbRelation.relationType) {\n                    case EntityRelationType.ONE_TO_MANY:\n                        if (!dbRelation.oneToManyElems) {\n                            continue;\n                        }\n                        const subTree = {};\n                        selectClause[dbProperty.name] = subTree;\n                        this.getCascadeSubTree(dbRelation.relationEntity, subTree);\n                        break;\n                    case EntityRelationType.MANY_TO_ONE:\n                        this.applicationUtils.addRelationToEntitySelectClause(dbRelation, selectClause);\n                        break;\n                    default:\n                        throw new Error(`Unknown relation type: '${dbRelation.relationType}' \r\n\t\t\t\t\t\t\ton '${dbEntity.name}.${dbProperty.name}'.`);\n                }\n            }\n            else {\n                selectClause[dbProperty.name] = Y;\n            }\n        }\n        return selectClause;\n    }\n};\n__decorate([\n    Inject()\n], DeleteManager.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], DeleteManager.prototype, \"applicationUtils\", void 0);\n__decorate([\n    Inject()\n], DeleteManager.prototype, \"historyManager\", void 0);\n__decorate([\n    Inject()\n], DeleteManager.prototype, \"operationHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], DeleteManager.prototype, \"recordHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], DeleteManager.prototype, \"repositoryTransactionHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], DeleteManager.prototype, \"sequenceGenerator\", void 0);\nDeleteManager = __decorate([\n    Injected()\n], DeleteManager);\nexport { DeleteManager };\n//# sourceMappingURL=DeleteManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { TransactionType } from '@airport/ground-control';\nlet HistoryManager = class HistoryManager {\n    async getNewTransactionHistory(transactionType = TransactionType.LOCAL) {\n        return await this.transactionHistoryDuo.getNewRecord(transactionType);\n    }\n    async getNewRepositoryTransactionHistory(transactionHistory, repositoryId, context) {\n        return await this.transactionHistoryDuo.getRepositoryTransaction(transactionHistory, repositoryId, !!context.newRepository);\n    }\n};\n__decorate([\n    Inject()\n], HistoryManager.prototype, \"transactionHistoryDuo\", void 0);\nHistoryManager = __decorate([\n    Injected()\n], HistoryManager);\nexport { HistoryManager };\n//# sourceMappingURL=HistoryManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getSysWideOpId } from '@airport/check-in';\nimport { ChangeType, repositoryEntity, } from '@airport/ground-control';\nlet InsertManager = class InsertManager {\n    async insertValues(portableQuery, actor, transaction, rootTransaction, context, ensureGeneratedValues) {\n        return await this.internalInsertValues(portableQuery, actor, transaction, rootTransaction, context, false, ensureGeneratedValues);\n    }\n    async insertValuesGetIds(portableQuery, actor, transaction, rootTransaction, context) {\n        return await this.internalInsertValues(portableQuery, actor, transaction, rootTransaction, context, true);\n    }\n    verifyNoGeneratedColumns(dbEntity, jsonInsertValues, errorPrefix) {\n        for (let i = 0; i < jsonInsertValues.C.length; i++) {\n            const columnIndex = jsonInsertValues.C[i];\n            const dbColumn = dbEntity.columns[columnIndex];\n            if (dbColumn.isGenerated) {\n                throw new Error(errorPrefix +\n                    `You cannot explicitly insert into a @GeneratedValue column '${dbColumn.name}'`);\n            }\n        }\n        return dbEntity.columns.filter(dbColumn => dbColumn.isGenerated);\n    }\n    async internalInsertValues(portableQuery, actor, transaction, rootTransaction, context, getIds = false, ensureGeneratedValues = true) {\n        const dbEntity = this.airportDatabase.applications[portableQuery.applicationIndex]\n            .currentVersion[0].applicationVersion.entities[portableQuery.tableIndex];\n        const errorPrefix = `Error inserting into '${dbEntity.name}'.'\r\n`;\n        this.validateValueRowLength(portableQuery, errorPrefix);\n        const jsonInsertValues = portableQuery.jsonQuery;\n        const columnIndexSet = {};\n        let inStatementIndex = 0;\n        for (const columnIndex of jsonInsertValues.C) {\n            if (columnIndex < 0 || columnIndex >= dbEntity.columns.length) {\n                throw new Error(errorPrefix +\n                    `Invalid column index: ${columnIndex}`);\n            }\n            if (columnIndexSet[columnIndex]) {\n                throw new Error(errorPrefix +\n                    `Column ${dbEntity.name}.${dbEntity.columns[columnIndex].name} \r\nappears more than once in the Columns clause`);\n            }\n            let rowNumber = 1;\n            for (let row of jsonInsertValues.V) {\n                if (row[inStatementIndex] === undefined) {\n                    throw new Error(errorPrefix +\n                        `\r\n\t'undefined' value in column ${dbEntity.name}.${dbEntity.columns[columnIndex].name} of row ${rowNumber}.\r\n\tAll values in an insert statment must either be null or have a non-null value.`);\n                }\n                rowNumber++;\n            }\n            inStatementIndex++;\n            columnIndexSet[columnIndex] = true;\n        }\n        let columnsToPopulate;\n        const insertValues = portableQuery.jsonQuery;\n        if (dbEntity.isRepositoryEntity) {\n            columnsToPopulate = this.ensureRepositoryEntityIdValues(actor, dbEntity, insertValues, errorPrefix, transaction, context);\n        }\n        let generatedColumns;\n        if (!transaction.isSync || context.generateOnSync) {\n            generatedColumns = this.verifyNoGeneratedColumns(dbEntity, portableQuery.jsonQuery, errorPrefix);\n        }\n        let ids;\n        let systemWideOperationId;\n        if (!dbEntity.isLocal) {\n            systemWideOperationId = await getSysWideOpId(this.airportDatabase, this.sequenceGenerator);\n        }\n        if ((!transaction.isSync || context.generateOnSync) && ensureGeneratedValues) {\n            ids = await this.ensureGeneratedValues(dbEntity, insertValues, actor, columnsToPopulate, generatedColumns, systemWideOperationId, errorPrefix, this.sequenceGenerator);\n        }\n        if (!dbEntity.isLocal && !transaction.isSync) {\n            await this.addInsertHistory(dbEntity, portableQuery, actor, systemWideOperationId, transaction, rootTransaction, context);\n        }\n        const numberOfInsertedRecords = await transaction.insertValues(portableQuery, context);\n        return getIds ? ids : numberOfInsertedRecords;\n    }\n    async validateValueRowLength(portableQuery, errorPrefix) {\n        const values = portableQuery.jsonQuery.V;\n        if (!values.length) {\n            throw new Error(errorPrefix + `no colum values provided`);\n        }\n        const firstValuesRow = values[0];\n        if (!firstValuesRow || !firstValuesRow.length) {\n            throw new Error(errorPrefix + `First row has no values`);\n        }\n        const numValuesInRow = firstValuesRow.length;\n        for (let i = 0; i < values.length; i++) {\n            const valuesRow = values[i];\n            if (valuesRow.length !== numValuesInRow) {\n                throw new Error(errorPrefix + `First row has ${numValuesInRow} values,\r\n\twhile row ${i + 1} has ${valuesRow.length} values`);\n            }\n        }\n    }\n    async ensureGeneratedValues(dbEntity, jsonInsertValues, actor, columnsToPopulate, generatedColumns, systemWideOperationId, errorPrefix, sequenceGenerator) {\n        const values = jsonInsertValues.V;\n        const idColumns = dbEntity.idColumns;\n        const allIds = [];\n        for (const _entityValues of values) {\n            allIds.push([]);\n        }\n        let actorIdColumn;\n        let sysWideOperationIdColumn;\n        if (!dbEntity.isLocal) {\n            actorIdColumn = columnsToPopulate.actorIdColumn;\n            sysWideOperationIdColumn = columnsToPopulate.sysWideOperationIdColumn;\n        }\n        for (const idColumn of idColumns) {\n            if (idColumn.isGenerated) {\n                continue;\n            }\n            let isActorIdColumn = false;\n            let inStatementColumnIndex;\n            const matchingColumns = jsonInsertValues.C.filter((columnIndex, index) => {\n                if (columnIndex === idColumn.index) {\n                    inStatementColumnIndex = index;\n                    return true;\n                }\n            });\n            if (matchingColumns.length < 1) {\n                // Actor Id cannot be in the insert statement\n                if (idColumn.id === actorIdColumn.id) {\n                    isActorIdColumn = true;\n                    inStatementColumnIndex = jsonInsertValues.C.length;\n                    jsonInsertValues.C.push(actorIdColumn.index);\n                }\n                else {\n                    throw new Error(errorPrefix +\n                        `Could not find @Id column ${dbEntity.name}.${idColumn.name} in\r\n\t\t\t\t\tthe insert statement.  Non-generated @Id columns must be present in the Insert\r\n\t\t\t\t\tstatement (with exception of Actor ID).`);\n                }\n            }\n            for (let i = 0; i < values.length; i++) {\n                const entityValues = values[i];\n                const idValues = allIds[i];\n                let idValue;\n                if (isActorIdColumn) {\n                    idValue = actor.id;\n                }\n                else {\n                    idValue = entityValues[inStatementColumnIndex];\n                    if (!idValue && idValue !== 0) {\n                        throw new Error(errorPrefix +\n                            `No value provided on insert for @Id '${dbEntity.name}.${idColumn.name}'.`);\n                    }\n                }\n                idValues[idColumn.index] = idValue;\n            }\n        }\n        // if (dbEntity.isRepositoryEntity) {\n        // \tconst repositoryColumn  = dbEntity.columnMap[repositoryEntity.FOREIGN_KEY]\n        // \tconst repositoryIdIndex = repositoryColumn.index\n        // \tfor (const entityValues of values) {\n        // \t\tconst repositoryId = entityValues[repositoryIdIndex]\n        // \t\tif (!repositoryId && repositoryId !== 0) {\n        // \t\t\tthrow new Error(`@Column({ name: 'REPOSITORY_ID'}) value is not specified on\n        // insert for '${dbEntity0.name}.${repositoryColumn.name}'.`) } } }\n        const generatedColumnIndexes = [];\n        // let numAddedColumns                    = 0\n        for (const generatedColumn of generatedColumns) {\n            // const matchingColumns = jsonInsertValues.C.filter(\n            // \tcolumnIndex => columnIndex === generatedColumn.index)\n            // if (!matchingColumns.length) {\n            // TODO: verify that it is OK to mutate the JsonInsertValues query\n            const generatedIdColumnIndex = jsonInsertValues.C.length;\n            generatedColumnIndexes.push(jsonInsertValues.C.length);\n            jsonInsertValues.C.push(generatedColumn.index);\n            // numAddedColumns++\n            continue;\n            // }\n            // const generatedIdColumnIndex = matchingColumns[0]\n            // generatedColumnIndexes.push(generatedIdColumnIndex)\n            for (const entityValues of values) {\n                const generatedValue = entityValues[generatedIdColumnIndex];\n                if (generatedValue || generatedValue === 0) {\n                    // Allowing negative integers for temporary identification\n                    // within the circular dependency management lookup\n                    if (generatedValue >= 0) {\n                        throw new Error(errorPrefix +\n                            `Already provided value '${entityValues[generatedColumn.index]}'\r\n\t\t\t\t\ton insert for @GeneratedValue '${dbEntity.name}.${generatedColumn.name}'.\r\n\t\t\t\t\tYou cannot explicitly provide values for @GeneratedValue columns'.`);\n                    }\n                }\n            }\n        }\n        // Populating generated values AFTER the checks\n        // to not waste sequence numbers on invalid input\n        // (thus reducing storage requirements in SqLite)\n        const numSequencesNeeded = generatedColumns.map(_ => values.length);\n        const generatedSequenceValues = await sequenceGenerator.generateSequenceNumbers(generatedColumns, numSequencesNeeded);\n        generatedColumns.forEach((dbColumn, generatedColumnIndex) => {\n            const generatedColumnSequenceValues = generatedSequenceValues[generatedColumnIndex];\n            const insertColumnIndex = generatedColumnIndexes[generatedColumnIndex];\n            // const columnIndex                   = dbColumn.index\n            values.forEach((entityValues, index) => {\n                const generatedValue = generatedColumnSequenceValues[index];\n                entityValues[insertColumnIndex] = generatedValue;\n                allIds[index][dbColumn.index] = generatedValue;\n            });\n        });\n        if (!dbEntity.isLocal) {\n            jsonInsertValues.C.push(sysWideOperationIdColumn.index);\n            values.forEach(entityValues => {\n                entityValues.push(systemWideOperationId);\n            });\n        }\n        if (!idColumns.length && !generatedColumns.length) {\n            return values.length;\n        }\n        // switch (idColumns.length) {\n        // \tcase 0: {\n        // \t\t// If there is just one @Generated column and no @Id columns\n        // \t\tif (generatedColumns.length == 1) {\n        // \t\t\tconst columnIndex = generatedColumns[0].index\n        // \t\t\treturn allIds.map(\n        // \t\t\t\trowIds => rowIds[columnIndex])\n        // \t\t}\n        // \t\tbreak\n        // \t}\n        // \tcase 1: {\n        // \t\t// If there is exactly 1 @Id column and no @Generated columns\n        // \t\t// or it is the @Generated column\n        // \t\tif (!generatedColumns.length\n        // \t\t\t|| (generatedColumns.length === 1\n        // \t\t\t\t&& idColumns[0].index === generatedColumns[0].index)) {\n        // \t\t\tconst columnIndex = idColumns[0].index\n        // \t\t\treturn allIds.map(\n        // \t\t\t\trowIds => rowIds[columnIndex])\n        // \t\t}\n        // \t\tbreak\n        // \t}\n        // }\n        return allIds;\n    }\n    ensureRepositoryEntityIdValues(actor, dbEntity, jsonInsertValues, errorPrefix, transaction, context) {\n        const actorIdColumn = dbEntity.idColumnMap[repositoryEntity.ACTOR_ID];\n        const actorRecordIdColumn = dbEntity.idColumnMap[repositoryEntity.ACTOR_RECORD_ID];\n        const repositoryIdColumn = dbEntity.idColumnMap[repositoryEntity.REPOSITORY_ID];\n        const sysWideOperationIdColumn = dbEntity.columnMap[repositoryEntity.SYSTEM_WIDE_OPERATION_ID];\n        let repositoryIdColumnQueryIndex;\n        let foundActorIdColumn = false;\n        let foundActorRecordIdColumn = false;\n        let foundSystemWideOperationIdColumn = false;\n        for (let i = 0; i < jsonInsertValues.C.length; i++) {\n            const columnIndex = jsonInsertValues.C[i];\n            switch (columnIndex) {\n                case actorIdColumn.index:\n                    foundActorIdColumn = true;\n                    if (context.isSaveOperation) {\n                        // Save operations validate Actor ealier and set it on the entity objects\n                        break;\n                    }\n                    if (!transaction.isSync) {\n                        throw new Error(errorPrefix +\n                            `You cannot explicitly provide an ACTOR_ID value for Repository entities.`);\n                    }\n                    break;\n                case actorRecordIdColumn.index:\n                    foundActorRecordIdColumn = true;\n                    if (!transaction.isSync) {\n                        throw new Error(errorPrefix +\n                            `You cannot explicitly provide an ACTOR_RECORD_ID value for Repository entities.`);\n                    }\n                    break;\n                case sysWideOperationIdColumn.index:\n                    foundSystemWideOperationIdColumn = true;\n                    if (!transaction.isSync) {\n                        throw new Error(`Error inserting into '${dbEntity.name}'.\r\nYou cannot explicitly provide a SYSTEM_WIDE_OPERATION_ID value for Repository entities.`);\n                    }\n                    break;\n                case repositoryIdColumn.index:\n                    repositoryIdColumnQueryIndex = i;\n                    break;\n            }\n        }\n        const missingRepositoryIdErrorMsg = errorPrefix +\n            `Error inserting into '${dbEntity.name}'.\r\nYou must provide a valid REPOSITORY_ID value for Repository entities.`;\n        if (repositoryIdColumnQueryIndex === undefined) {\n            throw new Error(missingRepositoryIdErrorMsg);\n        }\n        if (transaction.isSync) {\n            if (!foundActorIdColumn) {\n                throw new Error(errorPrefix +\n                    `ACTOR_ID must be provided for sync operations.`);\n            }\n            if (!foundActorRecordIdColumn) {\n                throw new Error(errorPrefix +\n                    `ACTOR_RECORD_ID must be provided for sync operations.`);\n            }\n            if (!foundSystemWideOperationIdColumn) {\n                throw new Error(errorPrefix +\n                    `SYSTEM_WIDE_OPERATION_ID must be provided for sync operations.`);\n            }\n        }\n        for (const entityValues of jsonInsertValues.V) {\n            if (entityValues.length !== jsonInsertValues.C.length) {\n                throw new Error(errorPrefix +\n                    `Number of columns (${jsonInsertValues.C.length}) does not match number of values (${entityValues.length}).\r\n\t\t\t\t`);\n            }\n            let repositoryId = entityValues[repositoryIdColumnQueryIndex];\n            if (typeof repositoryId !== 'number'\n                || !Number.isInteger(repositoryId)\n                || repositoryId < 1) {\n                throw new Error(missingRepositoryIdErrorMsg);\n            }\n            for (let i = 0; i < entityValues.length; i++) {\n                switch (i) {\n                    case repositoryIdColumnQueryIndex:\n                        continue;\n                }\n                const value = entityValues[i];\n                const columnIndex = jsonInsertValues.C[i];\n                const dbColumn = dbEntity.columns[columnIndex];\n                if (dbColumn.notNull && value === null) {\n                    throw new Error(errorPrefix +\n                        `Column '${dbColumn.name}' is NOT NULL\r\nand cannot have NULL values.`);\n                }\n            }\n            if (!context.isSaveOperation && !transaction.isSync) {\n                // Save operation set Actor ealier (at the entity level, to be returned back to client)\n                entityValues[actorIdColumn.index] = actor.id;\n            }\n        }\n        return {\n            actorIdColumn,\n            sysWideOperationIdColumn\n        };\n    }\n    /**\n     *\n     * All repository records must have ids when inserted.  Currently AP doesn't support\n     * inserting from select and in the values provided id's must either be explicitly\n     * specified or already provided. For all repository entities all ids must be\n     * auto-generated.\n     *\n     * @param {DbEntity} dbEntity\n     * @param {PortableQuery} portableQuery\n     * @returns {Promise<void>}\n     */\n    async addInsertHistory(dbEntity, portableQuery, actor, systemWideOperationId, transaction, rootTransaction, context) {\n        const jsonInsertValues = portableQuery.jsonQuery;\n        let operationsByRepo = [];\n        let repoTransHistories = [];\n        const repositoryIdIndex = dbEntity.columnMap[repositoryEntity.REPOSITORY_ID].index;\n        const actorIdIndex = dbEntity.columnMap[repositoryEntity.ACTOR_ID].index;\n        const actorRecordIdIndex = dbEntity.columnMap[repositoryEntity.ACTOR_RECORD_ID].index;\n        let repositoryIdColumnNumber;\n        let actorIdColumnNumber;\n        let actorRecordIdColumnNumber;\n        for (const columnNumber in jsonInsertValues.C) {\n            const columnIndex = jsonInsertValues.C[columnNumber];\n            switch (columnIndex) {\n                case repositoryIdIndex:\n                    repositoryIdColumnNumber = columnNumber;\n                    break;\n                case actorIdIndex:\n                    actorIdColumnNumber = columnNumber;\n                    break;\n                case actorRecordIdIndex:\n                    actorRecordIdColumnNumber = columnNumber;\n                    break;\n            }\n        }\n        // Rows may belong to different repositories\n        for (const row of jsonInsertValues.V) {\n            const repositoryId = row[repositoryIdColumnNumber];\n            // const repo           = await repoManager.getRepository(repositoryId)\n            let repositoryTransactionHistory = repoTransHistories[repositoryId];\n            if (!repositoryTransactionHistory) {\n                repositoryTransactionHistory = await this.historyManager\n                    .getNewRepositoryTransactionHistory(transaction.transactionHistory, repositoryId, context);\n            }\n            let operationHistory = operationsByRepo[repositoryId];\n            if (!operationHistory) {\n                operationHistory = this.repositoryTransactionHistoryDuo.startOperation(repositoryTransactionHistory, systemWideOperationId, ChangeType.INSERT_VALUES, dbEntity, actor, rootTransaction);\n                operationsByRepo[repositoryId] = operationHistory;\n            }\n            const actorRecordId = row[actorRecordIdColumnNumber];\n            const actorId = row[actorIdColumnNumber];\n            const recordHistory = this.operationHistoryDuo.startRecordHistory(operationHistory, actorId, actorRecordId);\n            for (const columnNumber in jsonInsertValues.C) {\n                if (columnNumber === repositoryIdColumnNumber\n                    || columnNumber === actorIdColumnNumber\n                    || columnNumber === actorRecordIdColumnNumber) {\n                    continue;\n                }\n                const columnIndex = jsonInsertValues.C[columnNumber];\n                const dbColumn = dbEntity.columns[columnIndex];\n                const newValue = row[columnNumber];\n                this.recordHistoryDuo.addNewValue(recordHistory, dbColumn, newValue);\n            }\n        }\n        // for (const repositoryId in operationsByRepo) {\n        // \tconst repoTransHistory = await\n        // \t\tthis.currentTransHistory.getRepositoryTransaction(\n        // \t\t\trepositoryId, null, null, null, repoTransHistoryDuo);\n        // \trepoTransHistory.endGroupMutation(operationsByRepo[repositoryId]);\n        // }\n    }\n};\n__decorate([\n    Inject()\n], InsertManager.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], InsertManager.prototype, \"historyManager\", void 0);\n__decorate([\n    Inject()\n], InsertManager.prototype, \"insertManager\", void 0);\n__decorate([\n    Inject()\n], InsertManager.prototype, \"operationHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], InsertManager.prototype, \"recordHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], InsertManager.prototype, \"repositoryTransactionHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], InsertManager.prototype, \"sequenceGenerator\", void 0);\nInsertManager = __decorate([\n    Injected()\n], InsertManager);\nexport { InsertManager };\n//# sourceMappingURL=InsertManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet QueryManager = class QueryManager {\n    async find(portableQuery, context, cachedSqlQueryId) {\n        await this.ensureRepositoryPresenceAndCurrentState(context);\n        return await this.storeDriver.find(portableQuery, {}, context, cachedSqlQueryId);\n    }\n    async findOne(portableQuery, context, cachedSqlQueryId) {\n        await this.ensureRepositoryPresenceAndCurrentState(context);\n        return await this.storeDriver.findOne(portableQuery, {}, context, cachedSqlQueryId);\n    }\n    search(portableQuery, context, cachedSqlQueryId) {\n        // TODO: checking for presence of a repository in in an observable\n        // await this.ensureRepositoryPresenceAndCurrentState(context)\n        return this.storeDriver.search(portableQuery, {}, context, cachedSqlQueryId);\n    }\n    searchOne(portableQuery, context, cachedSqlQueryId) {\n        // TODO: checking for presence of a repository in in an observable\n        // await this.ensureRepositoryPresenceAndCurrentState(context)\n        return this.storeDriver.searchOne(portableQuery, {}, context, cachedSqlQueryId);\n    }\n    async ensureRepositoryPresenceAndCurrentState(context) {\n        if (context.repository && context.repository.source && context.repository.uuId) {\n            await this.repositoryLoader.loadRepository(context.repository.source, context.repository.uuId, context);\n        }\n    }\n};\n__decorate([\n    Inject()\n], QueryManager.prototype, \"repositoryLoader\", void 0);\n__decorate([\n    Inject()\n], QueryManager.prototype, \"storeDriver\", void 0);\nQueryManager = __decorate([\n    Injected()\n], QueryManager);\nexport { QueryManager };\n//# sourceMappingURL=QueryManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { INTERNAL_APP, INTERNAL_DOMAIN } from '@airport/ground-control';\nimport { Q } from '@airport/holding-pattern';\nimport { AbstractMutationManager } from './AbstractMutationManager';\nlet TransactionManager = class TransactionManager extends AbstractMutationManager {\n    /**\n     * Initializes the EntityManager at server load time.\n     * @returns {Promise<void>}\n     */\n    async initialize(dbName, context) {\n        return await this.storeDriver.initialize(dbName, context);\n        // await this.dataStore.initialize(dbName)\n        // await this.repositoryManager.initialize();\n    }\n    getInProgressTransactionById(transactionId) {\n        return this.terminalStore.getTransactionManager()\n            .transactionInProgressMap.get(transactionId);\n    }\n    isServer(context) {\n        return this.storeDriver.isServer(context);\n    }\n    async transactInternal(transactionalCallback, context) {\n        return await this.transact({\n            application: INTERNAL_APP,\n            domain: INTERNAL_DOMAIN,\n            methodName: null,\n            objectName: null\n        }, transactionalCallback, context);\n    }\n    async transact(credentials, transactionalCallback, context) {\n        if (context.transaction) {\n            // Nested transactal() calls in internal operations\n            // do not create nested transactions \n            await transactionalCallback(context.transaction, context);\n            return;\n        }\n        const transaction = await this.startTransaction(credentials, context);\n        try {\n            await transactionalCallback(transaction, context);\n            await this.commit(credentials, context);\n        }\n        catch (e) {\n            await this.rollback(credentials, context);\n            throw e;\n        }\n    }\n    async startTransaction(credentials, context) {\n        const transactionManagerStore = this.terminalStore.getTransactionManager();\n        let parentTransaction;\n        if (credentials.transactionId) {\n            parentTransaction = transactionManagerStore\n                .transactionInProgressMap.get(credentials.transactionId);\n            if (!parentTransaction) {\n                throw new Error(`\r\nRecieved a startTransaction call (@Api call) with parent transaction id:\r\n\t${credentials.transactionId}\r\nBut, there is no such transaction in progress.`);\n            }\n            if (parentTransaction.id !==\n                credentials.transactionId) {\n                throw new Error(`\r\nIn-progress transaction id does not match the passed in transaction id:\r\n${credentials.transactionId}`);\n            }\n            this.checkForCircularDependencies(parentTransaction, credentials);\n        }\n        else {\n            /*\n             * NOTE: Current policy is to NOT limit the number of transactions\n             * a domain can initiate.  In the future, specifically for the\n             * client-side Turbase, it may make sence to limit the number\n             * of transactions to 1 per tab.  This can be accomplished by\n             * generating a unique id on the nested client iframe of an\n             * application.\n             */\n            /*\nthrow new Error(`\n    Domain:\n        ${credentials.domain}\n    Application:\n        ${credentials.application}\ninitialized multiple transactions at the same time.\nOnly one concurrent transaction is allowed per application.`)\n            */\n            if (!this.isServer(context)\n                && transactionManagerStore.transactionInProgressMap.size > 0) {\n                // Delay the start of the transaction\n                return new Promise((resolve, reject) => {\n                    // Add the transaction to the queue of pending transactions\n                    transactionManagerStore.pendingTransactionQueue.unshift({\n                        credentials,\n                        reject,\n                        resolve\n                    });\n                });\n            }\n        }\n        const transaction = await this.internalStartTransaction(credentials, parentTransaction, context);\n        if (!parentTransaction) {\n            transaction.numberOfOperations = 0;\n        }\n        return transaction;\n    }\n    async internalStartTransaction(credentials, parentTransaction, context) {\n        const transactionManagerStore = this.terminalStore.getTransactionManager();\n        const transaction = await this.storeDriver\n            .setupTransaction(context, parentTransaction);\n        await this.storeDriver.startTransaction(transaction, context);\n        transaction.credentials = credentials;\n        await this.setupTransaction(credentials, transaction, parentTransaction, transactionManagerStore, context);\n        return transaction;\n    }\n    async rollback(credentials, context) {\n        const transaction = await this.getTransactionFromContextOrCredentials(credentials, context);\n        let parentTransaction = transaction.parentTransaction;\n        await transaction.rollback(null, context);\n        await this.clearTransaction(transaction, parentTransaction, credentials, context);\n        await this.resumeParentOrPendingTransaction(parentTransaction, context);\n    }\n    async getTransactionFromContextOrCredentials(credentials, context) {\n        let transaction = context.transaction;\n        if (!transaction) {\n            if (!credentials.transactionId) {\n                throw new Error(`\r\nNo Transaction Id is passed in Credentials for a Rollback operation.\r\n\t\t\t\t`);\n            }\n            const transactionManagerStore = this.terminalStore\n                .getTransactionManager();\n            transaction = transactionManagerStore.transactionInProgressMap.get(credentials.transactionId);\n            if (!transaction) {\n                throw new Error(`\r\nCould not find Transaction: ${credentials.transactionId} in Transactons in-progress.\r\nNOTE: nested/child transactions must be commited or rolled back before their\r\nparent transactions.\r\n\t\t\t\t`);\n            }\n            context.transaction = transaction;\n        }\n        let ancestorTransaction = transaction;\n        while (ancestorTransaction = ancestorTransaction.parentTransaction)\n            ;\n        context.rootTransaction = ancestorTransaction;\n        return transaction;\n    }\n    async resumeParentOrPendingTransaction(parentTransaction, context) {\n        const transactionManagerStore = this.terminalStore\n            .getTransactionManager();\n        if (parentTransaction) {\n            await this.setupTransaction(parentTransaction.credentials, parentTransaction, parentTransaction.parentTransaction, transactionManagerStore, context);\n        }\n        else if (transactionManagerStore.pendingTransactionQueue.length) {\n            const pendingTransaction = transactionManagerStore.pendingTransactionQueue.pop();\n            const transaction = await this.internalStartTransaction(pendingTransaction.credentials, null, context);\n            pendingTransaction.resolve(transaction);\n        }\n    }\n    async commit(credentials, context) {\n        const transaction = await this.getTransactionFromContextOrCredentials(credentials, context);\n        let parentTransaction = transaction.parentTransaction;\n        try {\n            if (parentTransaction) {\n                // Copy transaction history to the parent transaction\n                let childTransactionHistory = transaction.transactionHistory;\n                let parentTransactionHistory = parentTransaction.transactionHistory;\n                for (const operationHistory of childTransactionHistory.allOperationHistory) {\n                    const repositoryId = operationHistory.repositoryTransactionHistory.repository.id;\n                    const parentRepositoryTransactionRecord = parentTransactionHistory\n                        .repositoryTransactionHistoryMap[repositoryId];\n                    if (parentRepositoryTransactionRecord) {\n                        operationHistory.repositoryTransactionHistory = parentRepositoryTransactionRecord;\n                    }\n                    else {\n                        parentTransactionHistory.repositoryTransactionHistoryMap[repositoryId]\n                            = operationHistory.repositoryTransactionHistory;\n                        parentTransactionHistory.repositoryTransactionHistories\n                            .push(operationHistory.repositoryTransactionHistory);\n                    }\n                }\n                parentTransactionHistory.allOperationHistory = parentTransactionHistory\n                    .allOperationHistory.concat(childTransactionHistory.allOperationHistory);\n                parentTransactionHistory.allRecordHistory = parentTransactionHistory\n                    .allRecordHistory.concat(childTransactionHistory.allRecordHistory);\n                parentTransactionHistory.allRecordHistoryNewValues = parentTransactionHistory\n                    .allRecordHistoryNewValues.concat(childTransactionHistory.allRecordHistoryNewValues);\n                parentTransactionHistory.allRecordHistoryOldValues = parentTransactionHistory\n                    .allRecordHistoryOldValues.concat(childTransactionHistory.allRecordHistoryOldValues);\n            }\n            else {\n                // This is the root transaction, save it's history, along with any nested transactions\n                await this.saveRepositoryHistory(transaction, context);\n                await transaction.saveTransaction(transaction.transactionHistory);\n            }\n            this.activeQueries.rerunQueries();\n            await transaction.commit(null, context);\n            let transactionHistory = transaction.transactionHistory;\n            if (!parentTransaction && transactionHistory.allRecordHistory.length) {\n                await this.synchronizationOutManager.synchronizeOut(transactionHistory.repositoryTransactionHistories);\n            }\n        }\n        finally {\n            await this.clearTransaction(transaction, parentTransaction, credentials, context);\n            // Right now transactions are tied to @Api() calls,\n            // If an @Api() fails to commit the parent @Api() call should resume\n            // it's transaction or the next \n            await this.resumeParentOrPendingTransaction(parentTransaction, context);\n        }\n    }\n    checkForCircularDependencies(transaction, credentials) {\n        if (credentials.domain === INTERNAL_DOMAIN) {\n            return;\n        }\n        do {\n            if (this.isSameSource(transaction, credentials)) {\n                let callHerarchy = this.getApiName(credentials);\n                let hierarchyTransaction = transaction;\n                do {\n                    callHerarchy = `${this.getApiName(hierarchyTransaction.initiator)} ->\r\n${callHerarchy}`;\n                } while (hierarchyTransaction = hierarchyTransaction.parentTransaction);\n                throw new Error(`Circular API call detected:\r\n\t\t\t\t\r\n${callHerarchy}\r\n\r\n\t\t\t\t`);\n            }\n        } while (transaction = transaction.parentTransaction);\n    }\n    async setupTransaction(credentials, transaction, parentTransaction, transactionManagerStore, context) {\n        context.transaction = transaction;\n        credentials.transactionId = transaction.id;\n        transaction.transactionHistory = this.transactionHistoryDuo.getNewRecord();\n        transactionManagerStore.transactionInProgressMap.set(transaction.id, transaction);\n        if (parentTransaction) {\n            transactionManagerStore.transactionInProgressMap.delete(parentTransaction.id);\n        }\n        else {\n            transactionManagerStore.rootTransactionInProgressMap.set(transaction.id, transaction);\n        }\n    }\n    // @Transactional()\n    // private async recordRepositoryTransactionBlock(\n    // \ttransaction: IRepositoryTransactionHistory\n    // ): Promise<void> {\n    // \tif (this.onlineManager.isOnline()) {\n    // \t\t// let repository = transaction.repository;\n    // \t\ttransaction.serialize();\n    //\n    // \t\tlet deltaStore = this.repositoryManager.getDeltaStore(transaction.repository);\n    // \t\tawait deltaStore.addChanges(deltaStore.config.changeListConfig, [transaction]);\n    //\n    // \t\ttransaction.deserialize(\n    // \t\t\t// repository\n    // \t\t);\n    // \t\tawait this.offlineDeltaStore.markChangesAsSynced(transaction.repository,\n    // [transaction]);\n    // this.queries.markQueriesToRerun(transaction.transactionHistory.applicationMap); } }\n    isSameSource(transaction, credentials) {\n        const initiator = transaction.initiator;\n        return initiator.domain === credentials.domain\n            && initiator.application === credentials.application\n            && initiator.objectName === credentials.objectName\n            && initiator.methodName === credentials.methodName;\n    }\n    getApiName(nameContainer) {\n        return `${nameContainer.domain}.${nameContainer.application}.${nameContainer.objectName}.${nameContainer.methodName}`;\n    }\n    async clearTransaction(transaction, parentTransaction, credentials, context) {\n        const transactionManagerStore = this.terminalStore\n            .getTransactionManager();\n        transactionManagerStore.transactionInProgressMap.delete(transaction.id);\n        if (!parentTransaction) {\n            transactionManagerStore.rootTransactionInProgressMap.delete(transaction.id);\n        }\n        context.transaction = null;\n        credentials.transactionId = null;\n    }\n    async saveRepositoryHistory(transaction, context) {\n        let transactionHistory = transaction.transactionHistory;\n        if (!transactionHistory.allRecordHistory.length) {\n            return false;\n        }\n        let applicationMap = transactionHistory.applicationMap;\n        const transactionHistoryIds = await this.idGenerator.generateTransactionHistoryIds(transactionHistory.repositoryTransactionHistories.length, transactionHistory.allOperationHistory.length, transactionHistory.allRecordHistory.length);\n        applicationMap.ensureEntity(Q.TransactionHistory.__driver__.dbEntity, true);\n        transactionHistory.id = transactionHistoryIds.transactionHistoryId;\n        await this.doInsertValues(transaction, Q.TransactionHistory, [transactionHistory], context);\n        applicationMap.ensureEntity(Q.RepositoryTransactionHistory.__driver__.dbEntity, true);\n        transactionHistory.repositoryTransactionHistories.forEach((repositoryTransactionHistory, index) => {\n            repositoryTransactionHistory.id = transactionHistoryIds.repositoryHistoryIds[index];\n            repositoryTransactionHistory.transactionHistory = transactionHistory;\n        });\n        await this.doInsertValues(transaction, Q.RepositoryTransactionHistory, transactionHistory.repositoryTransactionHistories, context);\n        applicationMap.ensureEntity(Q.OperationHistory.__driver__.dbEntity, true);\n        transactionHistory.allOperationHistory.forEach((operationHistory, index) => {\n            operationHistory.id = transactionHistoryIds.operationHistoryIds[index];\n        });\n        await this.doInsertValues(transaction, Q.OperationHistory, transactionHistory.allOperationHistory, context);\n        applicationMap.ensureEntity(Q.RecordHistory.__driver__.dbEntity, true);\n        transactionHistory.allRecordHistory.forEach((recordHistory, index) => {\n            recordHistory.id = transactionHistoryIds.recordHistoryIds[index];\n        });\n        await this.doInsertValues(transaction, Q.RecordHistory, transactionHistory.allRecordHistory, context);\n        if (transactionHistory.allRecordHistoryNewValues.length) {\n            applicationMap.ensureEntity(Q.RecordHistoryNewValue.__driver__.dbEntity, true);\n            await this.doInsertValues(transaction, Q.RecordHistoryNewValue, transactionHistory.allRecordHistoryNewValues, context);\n        }\n        if (transactionHistory.allRecordHistoryOldValues.length) {\n            applicationMap.ensureEntity(Q.RecordHistoryOldValue.__driver__.dbEntity, true);\n            await this.doInsertValues(transaction, Q.RecordHistoryOldValue, transactionHistory.allRecordHistoryOldValues, context);\n        }\n        return true;\n    }\n};\n__decorate([\n    Inject()\n], TransactionManager.prototype, \"activeQueries\", void 0);\n__decorate([\n    Inject()\n], TransactionManager.prototype, \"idGenerator\", void 0);\n__decorate([\n    Inject()\n], TransactionManager.prototype, \"storeDriver\", void 0);\n__decorate([\n    Inject()\n], TransactionManager.prototype, \"synchronizationOutManager\", void 0);\n__decorate([\n    Inject()\n], TransactionManager.prototype, \"terminalStore\", void 0);\n__decorate([\n    Inject()\n], TransactionManager.prototype, \"transactionHistoryDuo\", void 0);\nTransactionManager = __decorate([\n    Injected()\n], TransactionManager);\nexport { TransactionManager };\n//# sourceMappingURL=TransactionManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { SheetQuery } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getSysWideOpId } from '@airport/check-in';\nimport { ChangeType, ensureChildArray, ensureChildMap, QueryResultType, repositoryEntity, } from '@airport/ground-control';\nlet UpdateManager = class UpdateManager {\n    async updateValues(portableQuery, actor, transaction, rootTransaction, context) {\n        const dbEntity = this.airportDatabase.applications[portableQuery.applicationIndex]\n            .currentVersion[0].applicationVersion.entities[portableQuery.tableIndex];\n        const errorPrefix = `Error updating '${dbEntity.name}'\r\n`;\n        const internalFragments = {\n            SET: []\n        };\n        let recordHistoryMap;\n        let repositorySheetSelectInfo;\n        let systemWideOperationId;\n        if (!dbEntity.isLocal && !transaction.isSync) {\n            systemWideOperationId = await getSysWideOpId(this.airportDatabase, this.sequenceGenerator);\n            // TODO: For entity queries an additional query really shouldn't be needed\n            // Specifically for entity queries, we got the new values, just record them\n            // This will require an additional operation on the first update\n            // where the original values of the record are saved\n            // This eats up more disk space but saves on operations that need\n            // to be performed (one less query)\n            [recordHistoryMap, repositorySheetSelectInfo]\n                = await this.addUpdateHistory(portableQuery, actor, systemWideOperationId, errorPrefix, transaction, rootTransaction, context);\n            internalFragments.SET.push({\n                column: repositorySheetSelectInfo.systemWideOperationIdColumn,\n                value: systemWideOperationId\n            });\n        }\n        const numUpdatedRows = await transaction\n            .updateWhere(portableQuery, internalFragments, context);\n        if (!dbEntity.isLocal && !transaction.isSync) {\n            const previousDbEntity = context.dbEntity;\n            context.dbEntity = dbEntity;\n            // TODO: Entity based updates already have all of the new values being\n            // updated, detect the type of update and if entity just pull out\n            // the new values from them\n            await this.addNewValueHistory(portableQuery.jsonQuery, recordHistoryMap, systemWideOperationId, repositorySheetSelectInfo, errorPrefix, transaction, context);\n            context.dbEntity = previousDbEntity;\n        }\n        return numUpdatedRows;\n    }\n    async addUpdateHistory(portableQuery, actor, systemWideOperationId, errorPrefix, transaction, rootTransaction, context) {\n        if (!context.dbEntity.isRepositoryEntity) {\n            throw new Error(errorPrefix +\n                `Cannot add update history for a non-RepositoryEntity`);\n        }\n        const qEntity = this.airportDatabase\n            .qApplications[context.dbEntity.applicationVersion.application.index][context.dbEntity.name];\n        const jsonUpdate = portableQuery.jsonQuery;\n        const getSheetSelectFromSetClauseResult = this.applicationUtils.getSheetSelectFromSetClause(context.dbEntity, qEntity, jsonUpdate.S, errorPrefix);\n        const sheetQuery = new SheetQuery(null);\n        const jsonSelectClause = sheetQuery.nonDistinctSelectClauseToJSON(getSheetSelectFromSetClauseResult.selectClause, this.queryUtils, this.fieldUtils, this.relationManager);\n        const jsonSelect = {\n            S: jsonSelectClause,\n            F: [jsonUpdate.U],\n            W: jsonUpdate.W,\n        };\n        const portableSelect = {\n            applicationIndex: portableQuery.applicationIndex,\n            tableIndex: portableQuery.tableIndex,\n            jsonQuery: jsonSelect,\n            queryResultType: QueryResultType.SHEET,\n            parameterMap: portableQuery.parameterMap,\n            // values: portableQuery.values,\n        };\n        const recordsToUpdate = await transaction.find(portableSelect, {}, context);\n        const { recordsByRepositoryId, repositoryIdSet } = this.groupRecordsByRepository(recordsToUpdate, getSheetSelectFromSetClauseResult);\n        const repositoryIds = Array.from(repositoryIdSet);\n        const recordHistoryMapByRecordId = {};\n        for (const repositoryId of repositoryIds) {\n            // const repository                         = repositories.get(repositoryId)\n            const recordHistoryMapForRepository = {};\n            recordHistoryMapByRecordId[repositoryId] = recordHistoryMapForRepository;\n            const repositoryTransactionHistory = await this.historyManager.getNewRepositoryTransactionHistory(transaction.transactionHistory, repositoryId, context);\n            const operationHistory = this.repositoryTransactionHistoryDuo.startOperation(repositoryTransactionHistory, systemWideOperationId, ChangeType.UPDATE_ROWS, context.dbEntity, actor, rootTransaction);\n            const recordsForRepositoryId = recordsByRepositoryId[repositoryId];\n            for (const recordToUpdate of recordsForRepositoryId) {\n                const actorId = recordToUpdate[getSheetSelectFromSetClauseResult.actorIdColumnIndex];\n                const recordHistoryMapForActor = ensureChildMap(recordHistoryMapForRepository, actorId);\n                const actorRecordId = recordToUpdate[getSheetSelectFromSetClauseResult.actorRecordIdColumnIndex];\n                const recordHistory = this.operationHistoryDuo.startRecordHistory(operationHistory, actorId, actorRecordId);\n                recordHistoryMapForActor[actorRecordId] = recordHistory;\n                for (let i = 0; i < recordToUpdate.length; i++) {\n                    switch (i) {\n                        case getSheetSelectFromSetClauseResult.actorIdColumnIndex:\n                        case getSheetSelectFromSetClauseResult.actorRecordIdColumnIndex:\n                        case getSheetSelectFromSetClauseResult.repositoryIdColumnIndex:\n                            continue;\n                    }\n                    const dbColumn = getSheetSelectFromSetClauseResult\n                        .selectClause[i].dbColumn;\n                    const value = recordToUpdate[i];\n                    this.recordHistoryDuo.addOldValue(recordHistory, dbColumn, value);\n                }\n            }\n        }\n        return [recordHistoryMapByRecordId, getSheetSelectFromSetClauseResult];\n    }\n    async addNewValueHistory(jsonUpdate, recordHistoryMapByRecordId, systemWideOperationId, repositorySheetSelectInfo, errorPrefix, transaction, context) {\n        const qEntity = this.airportDatabase.qApplications[context.dbEntity.applicationVersion.application.index][context.dbEntity.name];\n        const sheetQuery = new SheetQuery({\n            from: [\n                qEntity\n            ],\n            select: [],\n            where: qEntity[repositoryEntity.systemWideOperationId]\n                .equals(systemWideOperationId)\n        });\n        let portableSelect = this.queryFacade.getPortableQuery(sheetQuery, QueryResultType.SHEET, context);\n        const resultSetIndexByColumnIndex = new Map();\n        const selectDbColumns = [];\n        let i = 0;\n        for (const qField of repositorySheetSelectInfo.selectClause) {\n            const dbColumn = qField.dbColumn;\n            selectDbColumns.push(dbColumn);\n            resultSetIndexByColumnIndex.set(dbColumn.index, i);\n            i++;\n        }\n        const internalFragments = {\n            SELECT: selectDbColumns\n        };\n        const updatedRecords = await transaction.find(portableSelect, internalFragments, context);\n        const { recordsByRepositoryId, repositoryIdSet } = this.groupRecordsByRepository(updatedRecords, repositorySheetSelectInfo);\n        for (const repositoryId of repositoryIdSet) {\n            const recordsForRepositoryId = recordsByRepositoryId[repositoryId];\n            for (const updatedRecord of recordsForRepositoryId) {\n                const repositoryId = updatedRecord[resultSetIndexByColumnIndex.get(repositorySheetSelectInfo.repositoryIdColumnIndex)];\n                const actorId = updatedRecord[resultSetIndexByColumnIndex.get(repositorySheetSelectInfo.actorIdColumnIndex)];\n                const actorRecordId = updatedRecord[resultSetIndexByColumnIndex.get(repositorySheetSelectInfo.actorRecordIdColumnIndex)];\n                const recordHistory = recordHistoryMapByRecordId[repositoryId][actorId][actorRecordId];\n                for (const columnName in jsonUpdate.S) {\n                    const dbColumn = context.dbEntity.columnMap[columnName];\n                    const value = updatedRecord[resultSetIndexByColumnIndex.get(dbColumn.index)];\n                    if (value === undefined) {\n                        throw new Error(errorPrefix + `Values cannot be 'undefined'.`);\n                    }\n                    if (dbColumn.notNull && value === null) {\n                        throw new Error(errorPrefix + `Column '${dbColumn.entity.name}'.'${dbColumn.name}' is NOT NULL\r\n\t\t\t\t\t\tand cannot have NULL values.`);\n                    }\n                    this.recordHistoryDuo.addNewValue(recordHistory, dbColumn, value);\n                }\n            }\n        }\n    }\n    groupRecordsByRepository(records, repositorySheetSelectInfo) {\n        const recordsByRepositoryId = {};\n        const repositoryIdSet = new Set();\n        for (const recordToUpdate of records) {\n            const repositoryId = recordToUpdate[repositorySheetSelectInfo.repositoryIdColumnIndex];\n            repositoryIdSet.add(repositoryId);\n            const recordsForRepositoryId = ensureChildArray(recordsByRepositoryId, repositoryId);\n            recordsForRepositoryId.push(recordToUpdate);\n        }\n        return {\n            recordsByRepositoryId,\n            repositoryIdSet\n        };\n    }\n};\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"applicationUtils\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"fieldUtils\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"historyManager\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"operationHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"queryFacade\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"queryUtils\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"recordHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"relationManager\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"repositoryTransactionHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], UpdateManager.prototype, \"sequenceGenerator\", void 0);\nUpdateManager = __decorate([\n    Injected()\n], UpdateManager);\nexport { UpdateManager };\n//# sourceMappingURL=UpdateManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nlet CascadeGraphVerifier = class CascadeGraphVerifier {\n    verify(root, context) {\n        if (!(root instanceof Array)) {\n            root = [root];\n        }\n        // TODO: validate the rules specified in the graph\n        // The graph will be defined via a @Save({\n        //\t...RULES\n        //})\n        // decorator\n        return root;\n    }\n};\nCascadeGraphVerifier = __decorate([\n    Injected()\n], CascadeGraphVerifier);\nexport { CascadeGraphVerifier };\n//# sourceMappingURL=CascadeGraphVerifier.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { ensureChildArray, EntityRelationType } from '@airport/ground-control';\n/*\n * Takes a (potentially) interconnected entity graph and returns\n * an array of entities to be operated on, in a order that is valid\n * for insertion (with all needed new ids being inserted in an order\n * that will work).\n */\nlet DependencyGraphResolver = class DependencyGraphResolver {\n    getOperationsInOrder(entities, context) {\n        const unorderedDependencies = this.getEntitiesToPersist(entities, [], [], context);\n        this.resolveCircularDependencies(unorderedDependencies, context);\n        const orderedDependencies = this.orderEntitiesToPersist(unorderedDependencies, context);\n        const operationNodes = this.optimizePersistOperations(orderedDependencies, context);\n        return this.ensureUpdatesAreGroupedCorrectly(operationNodes, context);\n    }\n    getEntitiesToPersist(entities, operatedOnEntities, operatedOnPassThroughs, context, dependsOn, dependency, deleteByCascade = false) {\n        let allProcessedNodes = [];\n        const dbEntity = context.dbEntity;\n        for (const entity of entities) {\n            /*\n             * A passed in graph has either entities to be saved or\n             * entity stubs that are needed structurally to get to\n             * other entities (or parentIds in case part of an id\n             * actually resides in a nested object that that object\n             * has no associated operations or child entities of\n             * it's own).\n             */\n            const { isCreate, isDelete, isParentId, isPassThrough, isStub, isUpdate } = this.entityStateManager\n                .getEntityStateTypeAsFlags(entity, dbEntity);\n            if (isStub) {\n                // No processing is needed\n                continue;\n            }\n            const operationUniqueId = this.entityStateManager.getOperationUniqueId(entity);\n            if (deleteByCascade && (isCreate || isUpdate)) {\n                throw new Error(`Cannot do a Create or Update operation on an entity that will be\r\ndeleted by cascading rules.  Entity: ${dbEntity.name}.\r\nEntity \"${this.entityStateManager.getUniqueIdFieldName()}\":  ${operationUniqueId}`);\n            }\n            let dependencyGraphNode;\n            if (isPassThrough) {\n                if (operatedOnPassThroughs[operationUniqueId]) {\n                    continue;\n                }\n                else {\n                    operatedOnPassThroughs[operationUniqueId] = true;\n                }\n            }\n            else {\n                dependencyGraphNode = operatedOnEntities[operationUniqueId];\n                let isExistingNode = false;\n                if (dependencyGraphNode) {\n                    isExistingNode = true;\n                }\n                else if (!isParentId && !deleteByCascade) {\n                    dependencyGraphNode = {\n                        circleTraversedFor: {},\n                        dbEntity,\n                        dependsOnByOUID: [],\n                        dependsOn: [],\n                        entity,\n                        isCreate,\n                        isDelete\n                    };\n                    allProcessedNodes.push(dependencyGraphNode);\n                    operatedOnEntities[operationUniqueId] = dependencyGraphNode;\n                }\n                if (!isParentId && !isDelete) {\n                    if (dependsOn && !isDelete) {\n                        const dependsOnOUID = this.entityStateManager.getOperationUniqueId(dependsOn.entity);\n                        if (!dependencyGraphNode.dependsOnByOUID[dependsOnOUID]\n                            && this.entityStateManager\n                                .getOperationUniqueId(dependencyGraphNode.entity) !== dependsOnOUID) {\n                            dependencyGraphNode.dependsOnByOUID[dependsOnOUID] = dependsOn;\n                            dependencyGraphNode.dependsOn.push(dependsOn);\n                        }\n                    }\n                    if (dependency) {\n                        if (!dependencyGraphNode.dependsOnByOUID[operationUniqueId]\n                            && this.entityStateManager\n                                .getOperationUniqueId(dependency.entity) !== operationUniqueId) {\n                            dependency.dependsOnByOUID[operationUniqueId] = dependencyGraphNode;\n                            dependency.dependsOn.push(dependencyGraphNode);\n                        }\n                    }\n                }\n                if (isExistingNode) {\n                    continue;\n                }\n            }\n            for (const dbProperty of context.dbEntity.properties) {\n                let relatedEntities;\n                let propertyValue = entity[dbProperty.name];\n                if (!propertyValue || typeof propertyValue !== 'object'\n                    || !(dbProperty.relation && dbProperty.relation.length)) {\n                    continue;\n                }\n                let fromDependencyForChild = null;\n                let isDependency = false;\n                let childDeleteByCascade = deleteByCascade || isDelete;\n                const dbRelation = dbProperty.relation[0];\n                switch (dbRelation.relationType) {\n                    // Relation is an entity that this entity depends on\n                    case EntityRelationType.MANY_TO_ONE:\n                        childDeleteByCascade = false;\n                        // TODO: see if there is a cleaner way to escape nested Actor and Repository records\n                        if (dbEntity.isRepositoryEntity && (dbProperty.name === 'repository'\n                            || dbProperty.name === 'actor')\n                            && !propertyValue[this.entityStateManager.getStateFieldName()]) {\n                            continue;\n                        }\n                        const parentState = this.entityStateManager\n                            .getEntityStateTypeAsFlags(propertyValue, dbRelation.relationEntity);\n                        if (parentState.isParentId) {\n                            continue;\n                        }\n                        if (parentState.isDelete) {\n                            if (isPassThrough) {\n                                // Automatically delete all contained records\n                                this.entityStateManager.markForDeletion(entity);\n                            }\n                            else if (!isDelete) {\n                                throw new Error(`Cannot delete an entity without removing all references to it.\r\n\t\t\t\t\t\t\t\tFound a reference in ${dbEntity.name}.${dbProperty.name}.\r\n\t\t\t\t\t\t\t\tEntity \"${this.entityStateManager.getUniqueIdFieldName()}\":  ${operationUniqueId}`);\n                            }\n                            else {\n                                // Prune this entry\n                                if (!deleteByCascade) {\n                                    if (dependency) {\n                                        dependency.dependsOn.pop();\n                                    }\n                                    allProcessedNodes.pop();\n                                }\n                                deleteByCascade = true;\n                            }\n                        }\n                        if (parentState.isCreate) {\n                            isDependency = true;\n                        }\n                        // Do not persist actor or repository, they\n                        // are created separately\n                        relatedEntities = [propertyValue];\n                        break;\n                    // Relation is an array of entities that depend in this entity\n                    case EntityRelationType.ONE_TO_MANY:\n                        if (isCreate) {\n                            fromDependencyForChild = dependencyGraphNode;\n                        }\n                        // Nested deletions wil be automatically pruned in recursive calls\n                        relatedEntities = propertyValue;\n                        break;\n                }\n                if (relatedEntities) {\n                    const dbEntity = dbRelation.relationEntity;\n                    const previousDbEntity = context.dbEntity;\n                    context.dbEntity = dbEntity;\n                    const childDependencyLinkedNodes = this.getEntitiesToPersist(relatedEntities, operatedOnEntities, operatedOnPassThroughs, context, fromDependencyForChild, !isParentId && !isDelete && isDependency ? dependencyGraphNode : null, childDeleteByCascade);\n                    allProcessedNodes = allProcessedNodes.concat(childDependencyLinkedNodes);\n                    context.dbEntity = previousDbEntity;\n                }\n            } // for properties\n        } // for entities\n        return allProcessedNodes;\n    }\n    resolveCircularDependencies(unorderedDependencies, context) {\n        for (const node of unorderedDependencies) {\n            const nodeOUID = this.entityStateManager.getOperationUniqueId(node.entity);\n            this.resolveCircularDependenciesForNode(node, nodeOUID, node, context);\n        }\n    }\n    resolveCircularDependenciesForNode(node, nodeOUID, currentlyTraversedNode, context, nodePath = []) {\n        if (!currentlyTraversedNode.dependsOn\n            || currentlyTraversedNode.circleTraversedFor[nodeOUID]) {\n            return;\n        }\n        currentlyTraversedNode.circleTraversedFor[nodeOUID] = true;\n        for (let i = currentlyTraversedNode.dependsOn.length - 1; i >= 0; i--) {\n            const dependency = currentlyTraversedNode.dependsOn[i];\n            const dependencyOUID = this.entityStateManager\n                .getOperationUniqueId(dependency.entity);\n            if (dependencyOUID === nodeOUID) {\n                let entityPath = [];\n                for (let pathNode of nodePath) {\n                    let entityLongName = pathNode.dbEntity.applicationVersion.application.name + ':' + pathNode.dbEntity.name;\n                    entityPath.push(entityLongName);\n                }\n                let entityLongName = dependency.dbEntity.applicationVersion.application.name + ':' + dependency.dbEntity.name;\n                entityPath.push(entityLongName);\n                entityLongName = nodePath[0].dbEntity.applicationVersion.application.name + ':' + nodePath[0].dbEntity.name;\n                throw new Error(`Found a circular dependency in\r\n\t\t\t\t\t${entityPath.join(' -> ')}\r\n\t\t\t\t\t`);\n            }\n            nodePath.push(dependency);\n            this.resolveCircularDependenciesForNode(node, nodeOUID, dependency, context, nodePath);\n            nodePath.pop();\n        }\n    }\n    orderEntitiesToPersist(unorderedDependencies, context) {\n        let orderedNodes = [];\n        let processedNodes = [];\n        while (orderedNodes.length < unorderedDependencies.length) {\n            for (const node of unorderedDependencies) {\n                const entityUid = this.entityStateManager\n                    .getOperationUniqueId(node.entity);\n                if (processedNodes[entityUid]) {\n                    continue;\n                }\n                let nodeProcessed = true;\n                for (const dependency of node.dependsOn) {\n                    const dependencyUid = this.entityStateManager\n                        .getOperationUniqueId(dependency.entity);\n                    // If a dependency is not yet processed (and is possibly has\n                    // other dependencies of it's own)\n                    if (!processedNodes[dependencyUid]) {\n                        nodeProcessed = false;\n                        break;\n                    }\n                }\n                if (nodeProcessed) {\n                    processedNodes[entityUid] = node;\n                    orderedNodes.push(node);\n                }\n            }\n        }\n        return orderedNodes;\n    }\n    // Group alike operations together, where possible\n    optimizePersistOperations(orderedDependencies, context) {\n        let operationNodes = [];\n        let processedNodes = [];\n        let operationsByApplicationIndex = [];\n        for (const node of orderedDependencies) {\n            const dbEntity = node.dbEntity;\n            const applicationOperationNodes = ensureChildArray(operationsByApplicationIndex, dbEntity.applicationVersion.application.index);\n            let entityOperations = applicationOperationNodes[dbEntity.index];\n            if (!entityOperations) {\n                entityOperations = {\n                    create: [],\n                    delete: [],\n                    update: []\n                };\n                applicationOperationNodes[dbEntity.index] = entityOperations;\n            }\n            let operations = [];\n            if (node.isCreate) {\n                operations = entityOperations.create;\n            }\n            else if (node.isDelete) {\n                operations = entityOperations.delete;\n            }\n            else {\n                operations = entityOperations.update;\n            }\n            let operation;\n            if (!operations.length) {\n                operation = {\n                    dbEntity,\n                    entities: [],\n                    isCreate: node.isCreate,\n                    isDelete: node.isDelete,\n                };\n                operations.push(operation);\n                operationNodes.push(operation);\n            }\n            else {\n                operation = operations[operations.length - 1];\n            }\n            // For each node traverse its dependencies\n            // if it has dependencies that haven't been processed yet\n            // then it can't be combined with an earlier alike operation\n            // on the same entity\n            let canBeCombined = true;\n            for (const dependency of node.dependsOn) {\n                const dependencyUid = this.entityStateManager\n                    .getOperationUniqueId(dependency.entity);\n                const operationUniqueId = this.entityStateManager.getOperationUniqueId(dependency.entity);\n                if (!processedNodes[dependencyUid]) {\n                    canBeCombined = false;\n                    break;\n                }\n            }\n            if (!canBeCombined && operation.entities.length) {\n                operation = {\n                    dbEntity,\n                    entities: [],\n                    isCreate: node.isCreate,\n                    isDelete: node.isDelete,\n                };\n                operations.push(operation);\n                operationNodes.push(operation);\n            }\n            operation.entities.push(node.entity);\n        }\n        return operationNodes;\n    }\n    /**\n     *\n     * @param operationNodes\n     * @param context\n     */\n    ensureUpdatesAreGroupedCorrectly(operationNodes, context) {\n        // TODO: group related updates ONLY if all updates field values are\n        // the same\n        // throw new Error('Not Implemented.')\n        return operationNodes;\n    }\n};\n__decorate([\n    Inject()\n], DependencyGraphResolver.prototype, \"entityStateManager\", void 0);\nDependencyGraphResolver = __decorate([\n    Injected()\n], DependencyGraphResolver);\nexport { DependencyGraphResolver };\n//# sourceMappingURL=DependencyGraphResolver.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { EntityRelationType } from '@airport/ground-control';\n/**\n * Takes a serialized object tree and reconstructs a (potentially)\n * interlinked object graph.\n */\nlet EntityGraphReconstructor = class EntityGraphReconstructor {\n    restoreEntityGraph(root, context) {\n        const entitiesByOperationIndex = [];\n        const processedEntitySet = new Set();\n        const rootCopy = this.linkEntityGraph(root, entitiesByOperationIndex, processedEntitySet, context);\n        for (let i = 1; i < entitiesByOperationIndex.length; i++) {\n            const entity = entitiesByOperationIndex[i];\n            if (!entity) {\n                throw new Error(`Missing entity for\r\n\"${this.entityStateManager.getUniqueIdFieldName()}\": ${i}`);\n            }\n        }\n        context.lastOUID = entitiesByOperationIndex.length - 1;\n        return rootCopy;\n    }\n    linkEntityGraph(currentEntities, entitiesByOperationIndex, processedEntitySet, context) {\n        const dbEntity = context.dbEntity;\n        const results = [];\n        for (const entity of currentEntities) {\n            if (!entity) {\n                throw new Error(`Null root entities and @OneToMany arrays with null entities are not allowed`);\n            }\n            const operationUniqueId = this.entityStateManager.getOperationUniqueId(entity);\n            if (!operationUniqueId || typeof operationUniqueId !== 'number'\n                || operationUniqueId < 1) {\n                throw new Error(`Invalid entity Unique Id Field\r\n\"${this.entityStateManager.getUniqueIdFieldName()}\": ${operationUniqueId}.`);\n            }\n            const previouslyFoundEntity = entitiesByOperationIndex[operationUniqueId];\n            if (processedEntitySet.has(entity)) {\n                if (!previouslyFoundEntity) {\n                    throw new Error(`Entity has been processed but is not found by operationUniqueId`);\n                }\n                results.push(previouslyFoundEntity);\n                continue;\n            }\n            processedEntitySet.add(entity);\n            /*\n             * A passed in graph has either entities to be saved or\n             * entity stubs that are needed structurally to get to\n             * other entities.\n             */\n            const { isParentId, isStub } = this.entityStateManager\n                .getEntityStateTypeAsFlags(entity, dbEntity);\n            let entityCopy;\n            if (previouslyFoundEntity) {\n                if (!this.entityStateManager.isStub(previouslyFoundEntity)) {\n                    if (!isStub) {\n                        throw new Error(`More than 1 non-Stub object found in input\r\nfor \"${this.entityStateManager.getUniqueIdFieldName()}\": ${operationUniqueId}`);\n                    }\n                }\n                else {\n                    if (!isStub) {\n                        this.entityStateManager.copyEntityState(entity, previouslyFoundEntity);\n                    }\n                }\n                entityCopy = previouslyFoundEntity;\n            }\n            else {\n                entityCopy = {};\n                entityCopy[this.entityStateManager.getUniqueIdFieldName()]\n                    = operationUniqueId;\n                entityCopy[this.entityStateManager.getStateFieldName()]\n                    = this.entityStateManager.getEntityState(entity);\n                this.entityStateManager.copyEntityState(entity, entityCopy);\n                entitiesByOperationIndex[operationUniqueId]\n                    = entityCopy;\n            }\n            for (const dbProperty of dbEntity.properties) {\n                let propertyValue = entity[dbProperty.name];\n                if (propertyValue === undefined) {\n                    continue;\n                }\n                if (dbProperty.relation && dbProperty.relation.length) {\n                    const dbRelation = dbProperty.relation[0];\n                    let relatedEntities = propertyValue;\n                    let isManyToOne = false;\n                    this.assertRelationValueIsAnObject(propertyValue, dbProperty);\n                    switch (dbRelation.relationType) {\n                        case EntityRelationType.MANY_TO_ONE:\n                            isManyToOne = true;\n                            this.assertManyToOneNotArray(propertyValue, dbProperty);\n                            relatedEntities = [propertyValue];\n                            break;\n                        case EntityRelationType.ONE_TO_MANY:\n                            this.assertOneToManyIsArray(propertyValue, dbProperty);\n                            if (isParentId) {\n                                throw new Error(`Parent Ids may not contain any @OneToMany relations`);\n                            }\n                            break;\n                        default:\n                            throw new Error(`Unexpected relation type ${dbRelation.relationType}\r\nfor ${dbEntity.name}.${dbProperty.name}`);\n                    } // switch dbRelation.relationType\n                    const previousDbEntity = context.dbEntity;\n                    const previousDbApplication = previousDbEntity.applicationVersion.application;\n                    const propertyDbApplication = dbRelation.relationEntity.applicationVersion.application;\n                    if (propertyDbApplication.domain.name !== 'air'\n                        && previousDbApplication.fullName !== propertyDbApplication.fullName) {\n                        // If a child entity is in a different application it won't be processed\n                        // the calling application should call the API of the other application\n                        // explicitly so that the application logic may be run\n                        continue;\n                    }\n                    context.dbEntity = dbRelation.relationEntity;\n                    let propertyCopyValue;\n                    if (propertyValue) {\n                        propertyCopyValue = this.linkEntityGraph(relatedEntities, entitiesByOperationIndex, processedEntitySet, context);\n                        if (isManyToOne) {\n                            propertyCopyValue = propertyCopyValue[0];\n                            if (isParentId) {\n                                if (!this.entityStateManager.isParentId(propertyCopyValue)) {\n                                    throw new Error(`Parent Ids may only contain @ManyToOne relations\r\nthat are themselves Parent Ids.`);\n                                }\n                            }\n                        }\n                        else {\n                            if (isParentId) {\n                                throw new Error(`Parent Ids may NOT contain @OneToMany colletions.`);\n                            }\n                        } // if (isManyToOne\n                        // if !isManyToOne - nothing to do\n                    } // if (propertyValue\n                    propertyValue = propertyCopyValue;\n                    context.dbEntity = previousDbEntity;\n                } // if (dbProperty.relation\n                else {\n                    if ((isParentId || isStub) && !dbProperty.isId) {\n                        // TODO: can a ParentId comprise of fields that are not part of it's own Id\n                        // but are a part of Parent's Id?\n                        throw new Error(`Deletes, ParentIds and Stubs may only contain @Id properties or relations.`);\n                    }\n                } // else (dbProperty.relation\n                entityCopy[dbProperty.name] = propertyValue;\n            } // for (const dbProperty\n            results.push(entityCopy);\n        } // for (const entity\n        return results;\n    }\n    assertRelationValueIsAnObject(relationValue, dbProperty) {\n        if (relationValue !== null && relationValue !== undefined &&\n            (typeof relationValue != 'object' || relationValue instanceof Date)) {\n            throw new Error(`Unexpected value in relation property: ${dbProperty.name}, \r\n\t\t\t\tof entity ${dbProperty.entity.name}`);\n        }\n    }\n    assertManyToOneNotArray(relationValue, dbProperty) {\n        if (relationValue instanceof Array) {\n            throw new Error(`@ManyToOne relation cannot be an array. Relation property: ${dbProperty.name}, \r\nof entity ${dbProperty.entity.name}`);\n        }\n    }\n    assertOneToManyIsArray(relationValue, dbProperty) {\n        if (relationValue !== null\n            && relationValue !== undefined\n            && !(relationValue instanceof Array)) {\n            throw new Error(`@OneToMany relation must be an array. Relation property: ${dbProperty.name}, \r\nof entity ${dbProperty.entity.name}\\``);\n        }\n    }\n};\n__decorate([\n    Inject()\n], EntityGraphReconstructor.prototype, \"entityStateManager\", void 0);\nEntityGraphReconstructor = __decorate([\n    Injected()\n], EntityGraphReconstructor);\nexport { EntityGraphReconstructor };\n//# sourceMappingURL=EntityGraphReconstructor.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nlet OperationContextLoader = class OperationContextLoader {\n    async ensure(context) {\n    }\n    ensureSync(context) {\n    }\n};\nOperationContextLoader = __decorate([\n    Injected()\n], OperationContextLoader);\nexport { OperationContextLoader };\n//# sourceMappingURL=OperationContext.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { and, Delete, InsertValues, or, UpdateProperties, valuesEqual } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { EntityRelationType } from '@airport/ground-control';\n/**\n * Created by Papa on 11/15/2016.\n */\nlet OperationManager = class OperationManager {\n    /**\n     * Transactional context must have been started by the time this method is called.\n     *\n     * @param qEntity\n     * @param entity\n     */\n    async performSave(entities, actor, transaction, rootTransaction, context) {\n        let entityGraph;\n        context.isSaveOperation = true;\n        if (context.internal) {\n            if (entities instanceof Array) {\n                entityGraph = entities;\n            }\n            else {\n                entityGraph = [entities];\n            }\n        }\n        else {\n            const verifiedTree = this.cascadeGraphVerifier\n                .verify(entities, context);\n            entityGraph = this.entityGraphReconstructor\n                .restoreEntityGraph(verifiedTree, context);\n        }\n        await this.structuralEntityValidator.validate(entityGraph, [], context);\n        const operations = this.dependencyGraphResolver\n            .getOperationsInOrder(entityGraph, context);\n        const rootDbEntity = context.dbEntity;\n        let saveActor = {\n            id: actor.id,\n            uuId: actor.uuId,\n            user: actor.user ? {\n                id: actor.user.id\n            } : null\n        };\n        let newRepository;\n        if (context.newRepository) {\n            newRepository = {\n                id: context.newRepository.id,\n                createdAt: context.newRepository.createdAt,\n                uuId: context.newRepository.uuId,\n                ageSuitability: context.newRepository.ageSuitability,\n                source: context.newRepository.source,\n                ownerActor: {\n                    id: actor.id,\n                    uuId: actor.uuId,\n                    user: actor.user ? {\n                        id: actor.user.id\n                    } : null\n                }\n            };\n        }\n        const saveResult = {\n            actor: saveActor,\n            created: {},\n            newRepository,\n            deleted: {},\n            updated: {},\n        };\n        for (const operation of operations) {\n            context.dbEntity = operation.dbEntity;\n            if (operation.isCreate) {\n                await this.internalCreate(operation.entities, actor, transaction, rootTransaction, saveResult, context, true);\n            }\n            else if (operation.isDelete) {\n                await this.internalDelete(operation.entities, actor, transaction, rootTransaction, saveResult, context);\n            }\n            else {\n                await this.internalUpdate(operation.entities, actor, transaction, rootTransaction, saveResult, context);\n            }\n        }\n        context.dbEntity = rootDbEntity;\n        return saveResult;\n    }\n    async internalCreate(entities, actor, transaction, rootTransaction, saveResult, context, ensureGeneratedValues) {\n        const qEntity = this.airportDatabase.qApplications[context.dbEntity.applicationVersion.application.index][context.dbEntity.name];\n        let rawInsert = {\n            insertInto: qEntity,\n            columns: this.qMetadataUtils.getAllInsertableColumns(qEntity),\n            values: []\n        };\n        let columnIndexesInValues = [];\n        rawInsert.columns.forEach((qField, index) => {\n            columnIndexesInValues[qField.dbColumn.index] = index;\n        });\n        for (const entity of entities) {\n            let valuesFragment = [];\n            for (const dbProperty of context.dbEntity.properties) {\n                let newValue = entity[dbProperty.name];\n                if (newValue === undefined) {\n                    newValue = null;\n                }\n                if (dbProperty.relation && dbProperty.relation.length) {\n                    const dbRelation = dbProperty.relation[0];\n                    switch (dbRelation.relationType) {\n                        case EntityRelationType.MANY_TO_ONE:\n                            this.applicationUtils.forEachColumnOfRelation(dbRelation, entity, (dbColumn, columnValue, _propertyNameChains) => {\n                                if (dbColumn.isGenerated) {\n                                    return;\n                                }\n                                valuesFragment[columnIndexesInValues[dbColumn.index]]\n                                    = columnValue === undefined ? null : columnValue;\n                            }, false);\n                            break;\n                        case EntityRelationType.ONE_TO_MANY:\n                            break;\n                        default:\n                            throw new Error(`Unknown relationType '${dbRelation.relationType}' \r\n\t\t\t\t\t\tfor '${context.dbEntity.name}.${dbProperty.name}'.`);\n                    }\n                }\n                else {\n                    let column = dbProperty.propertyColumns[0].column;\n                    if (!column.isGenerated) {\n                        valuesFragment[columnIndexesInValues[column.index]] = newValue;\n                    }\n                }\n            }\n            rawInsert.values.push(valuesFragment);\n        }\n        const insertValues = new InsertValues(rawInsert);\n        if (rawInsert.values.length) {\n            const generatedColumns = context.dbEntity.columns.filter(column => column.isGenerated);\n            if (generatedColumns.length && ensureGeneratedValues) {\n                const portableQuery = this.queryFacade\n                    .getPortableQuery(insertValues, null, context);\n                const idsAndGeneratedValues = await this.insertManager\n                    .insertValuesGetIds(portableQuery, actor, transaction, rootTransaction, context);\n                for (let i = 0; i < entities.length; i++) {\n                    const entity = entities[i];\n                    const entitySaveResult = {};\n                    saveResult.created[this.entityStateManager.getOperationUniqueId(entity)] = entitySaveResult;\n                    for (const generatedColumn of generatedColumns) {\n                        // Return index for generated column values is: DbColumn.index\n                        const generatedPropertyName = generatedColumn.propertyColumns[0].property.name;\n                        const generatedPropertyValue = idsAndGeneratedValues[i][generatedColumn.index];\n                        entity[generatedPropertyName] = generatedPropertyValue;\n                        entitySaveResult[generatedPropertyName] = generatedPropertyValue;\n                    }\n                }\n            }\n            else {\n                const portableQuery = this.queryFacade\n                    .getPortableQuery(insertValues, null, context);\n                await this.insertManager.insertValues(portableQuery, actor, transaction, rootTransaction, context, ensureGeneratedValues);\n                for (let i = 0; i < entities.length; i++) {\n                    const entity = entities[i];\n                    saveResult.created[this.entityStateManager.getOperationUniqueId(entity)] = true;\n                }\n            }\n        }\n    }\n    /**\n     * On an update operation, can a nested create contain an update?\n     * Via:\n     *  OneToMany:\n     *    Yes, if the child entity is itself in the update cache\n     *  ManyToOne:\n     *    Cascades do not travel across ManyToOne\n     */\n    async internalUpdate(entities, actor, transaction, rootTransaction, saveResult, context) {\n        const qEntity = this.airportDatabase.qApplications[context.dbEntity.applicationVersion.application.index][context.dbEntity.name];\n        for (const entity of entities) {\n            const setFragment = {};\n            const idWhereFragments = [];\n            let runUpdate = false;\n            const originalEntity = this.entityStateManager.getOriginalValues(entity);\n            if (!originalEntity) {\n                continue;\n            }\n            for (const dbProperty of context.dbEntity.properties) {\n                const updatedValue = entity[dbProperty.name];\n                if (!dbProperty.relation || !dbProperty.relation.length) {\n                    const originalValue = originalEntity[dbProperty.name];\n                    if (dbProperty.isId) {\n                        // For an id property, the value is guaranteed to be the same (and not empty) -\n                        // cannot entity-update id fields\n                        idWhereFragments.push(qEntity[dbProperty.name]\n                            .equals(updatedValue));\n                    }\n                    else if (!valuesEqual(originalValue, updatedValue)) {\n                        setFragment[dbProperty.name] = updatedValue;\n                        saveResult.updated[this.entityStateManager.getOperationUniqueId(entity)] = true;\n                        runUpdate = true;\n                    }\n                }\n                else {\n                    const dbRelation = dbProperty.relation[0];\n                    switch (dbRelation.relationType) {\n                        case EntityRelationType.MANY_TO_ONE:\n                            let propertyOriginalValue = originalEntity[dbProperty.name];\n                            this.applicationUtils.forEachColumnOfRelation(dbRelation, entity, (_dbColumn, value, propertyNameChains) => {\n                                let originalColumnValue = propertyOriginalValue;\n                                let columnValue = value;\n                                let valuePropertyNameChain = value;\n                                for (const childPropertyName of propertyNameChains[0]) {\n                                    if (originalColumnValue instanceof Object\n                                        && originalColumnValue[childPropertyName]) {\n                                        originalColumnValue = originalColumnValue[childPropertyName];\n                                    }\n                                    else {\n                                        originalColumnValue = null;\n                                    }\n                                    if (columnValue instanceof Object\n                                        && columnValue[childPropertyName]) {\n                                        columnValue = columnValue[childPropertyName];\n                                        valuePropertyNameChain.push(childPropertyName);\n                                    }\n                                    else {\n                                        columnValue = null;\n                                    }\n                                }\n                                if (dbProperty.isId) {\n                                    let idQProperty = qEntity;\n                                    for (const propertyNameLink of propertyNameChains[0]) {\n                                        idQProperty = idQProperty[propertyNameLink];\n                                    }\n                                    // For an id property, the value is guaranteed to be the same (and not\n                                    // empty) - cannot entity-update id fields\n                                    idWhereFragments.push(idQProperty.equals(value));\n                                }\n                                else if (!valuesEqual(originalColumnValue, columnValue)) {\n                                    let currentSetFragment = setFragment;\n                                    for (let i = 0; i < valuePropertyNameChain.length - 1; i++) {\n                                        const childPropertyName = valuePropertyNameChain[i];\n                                        if (!currentSetFragment[childPropertyName]) {\n                                            currentSetFragment[childPropertyName] = {};\n                                        }\n                                        currentSetFragment = currentSetFragment[childPropertyName];\n                                    }\n                                    currentSetFragment[valuePropertyNameChain.length - 1] = columnValue;\n                                    saveResult.updated[this.entityStateManager.getOperationUniqueId(entity)] = true;\n                                    runUpdate = true;\n                                }\n                            }, dbProperty.isId);\n                            break;\n                        case EntityRelationType.ONE_TO_MANY:\n                            break;\n                        default:\n                            throw new Error(`Unknown relationType '${dbRelation.relationType}' \r\n\t\t\t\t\t\tfor '${context.dbEntity.name}.${dbProperty.name}'.`);\n                    }\n                }\n            }\n            if (runUpdate) {\n                let whereFragment;\n                if (idWhereFragments.length > 1) {\n                    whereFragment = and(...idWhereFragments);\n                }\n                else {\n                    whereFragment = idWhereFragments[0];\n                }\n                const rawUpdate = {\n                    update: qEntity,\n                    set: setFragment,\n                    where: whereFragment\n                };\n                const update = new UpdateProperties(rawUpdate);\n                const portableQuery = this.queryFacade.getPortableQuery(update, null, context);\n                await this.updateManager.updateValues(portableQuery, actor, transaction, rootTransaction, context);\n            }\n        }\n    }\n    async internalDelete(entities, actor, transaction, rootTransaction, saveResult, context) {\n        const dbEntity = context.dbEntity;\n        const qEntity = this.airportDatabase.qApplications[dbEntity.applicationVersion.application.index][dbEntity.name];\n        const idWhereFragments = [];\n        const valuesMapByColumn = [];\n        let entityIdWhereClauses = [];\n        for (const entity of entities) {\n            for (let propertyName in entity) {\n                if (!entity.hasOwnProperty(propertyName)) {\n                    continue;\n                }\n                const dbProperty = dbEntity.propertyMap[propertyName];\n                // Skip transient fields\n                if (!dbProperty) {\n                    continue;\n                }\n                const deletedValue = entity[propertyName];\n                let dbRelation;\n                if (dbProperty.relation && dbProperty.relation.length) {\n                    dbRelation = dbProperty.relation[0];\n                }\n                if (!dbRelation) {\n                    if (dbProperty.isId) {\n                        // For an id property, the value is guaranteed to be the same (and not empty) -\n                        // cannot entity-update id fields\n                        idWhereFragments.push(qEntity[propertyName].equals(deletedValue));\n                    }\n                }\n                else {\n                    switch (dbRelation.relationType) {\n                        case EntityRelationType.MANY_TO_ONE:\n                            this.applicationUtils.forEachColumnOfRelation(dbRelation, dbEntity, (dbColumn, value, propertyNameChains) => {\n                                if (dbProperty.isId && valuesMapByColumn[dbColumn.index] === undefined) {\n                                    let idQProperty = qEntity;\n                                    for (const propertyNameLink of propertyNameChains[0]) {\n                                        idQProperty = idQProperty[propertyNameLink];\n                                    }\n                                    // For an id property, the value is guaranteed to be the same (and not\n                                    // empty) - cannot entity-update id fields\n                                    idWhereFragments.push(idQProperty.equals(value));\n                                }\n                            }, false);\n                            break;\n                        case EntityRelationType.ONE_TO_MANY:\n                            break;\n                        default:\n                            throw new Error(`Unknown relationType '${dbRelation.relationType}' \r\n\t\t\t\t\t\tfor '${dbEntity.name}.${dbProperty.name}'.`);\n                    }\n                }\n            }\n            if (idWhereFragments.length > 1) {\n                entityIdWhereClauses.push(and(...idWhereFragments));\n            }\n            else {\n                entityIdWhereClauses.push(idWhereFragments[0]);\n            }\n            saveResult.deleted[this.entityStateManager.getOperationUniqueId(entity)] = true;\n        }\n        let where;\n        if (entityIdWhereClauses.length === 1) {\n            where = entityIdWhereClauses[0];\n        }\n        else {\n            where = or(...entityIdWhereClauses);\n        }\n        let rawDelete = {\n            deleteFrom: qEntity,\n            where\n        };\n        let deleteWhere = new Delete(rawDelete);\n        let portableQuery = this.queryFacade.getPortableQuery(deleteWhere, null, context);\n        await this.deleteManager.deleteWhere(portableQuery, actor, transaction, rootTransaction, context);\n    }\n};\n__decorate([\n    Inject()\n], OperationManager.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"applicationUtils\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"cascadeGraphVerifier\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"deleteManager\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"dependencyGraphResolver\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"entityGraphReconstructor\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"entityStateManager\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"insertManager\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"qMetadataUtils\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"queryFacade\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"structuralEntityValidator\", void 0);\n__decorate([\n    Inject()\n], OperationManager.prototype, \"updateManager\", void 0);\nOperationManager = __decorate([\n    Injected()\n], OperationManager);\nexport { OperationManager };\n//# sourceMappingURL=OperationManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { EntityRelationType, EntityState, SQLDataType } from '@airport/ground-control';\nlet StructuralEntityValidator = class StructuralEntityValidator {\n    async validate(records, operatedOnEntityIndicator, context, fromOneToMany = false, parentRelationProperty = null, rootRelationRecord = null, parentRelationRecord = null) {\n        const dbEntity = context.dbEntity;\n        if (!dbEntity.idColumns.length) {\n            throw new Error(`Cannot run 'save' for entity '${dbEntity.name}' with no @Id(s).\r\n\t\t\t\t\tPlease use non-entity operations (like 'insert' or 'updateWhere') instead.`);\n        }\n        let haveRootRelationRecord = !!rootRelationRecord;\n        for (const record of records) {\n            if (!haveRootRelationRecord) {\n                rootRelationRecord = record;\n            }\n            const { isCreate, isParentId, isStub } = this.entityStateManager.getEntityStateTypeAsFlags(record, dbEntity);\n            if (isParentId) {\n                // No processing is needed (already covered by id check)\n                continue;\n            }\n            const operationUniqueId = this.entityStateManager.getOperationUniqueId(record);\n            const entityOperatedOn = !!operatedOnEntityIndicator[operationUniqueId];\n            if (entityOperatedOn) {\n                continue;\n            }\n            operatedOnEntityIndicator[operationUniqueId] = true;\n            let newRepositoryNeeded = false;\n            for (const dbProperty of dbEntity.properties) {\n                let propertyValue = record[dbProperty.name];\n                if (propertyValue === undefined && !isStub) {\n                    propertyValue = null;\n                    record[dbProperty.name] = propertyValue;\n                }\n                /*\n                 * It is possible for the @Id's of an entity to be in\n                 * a @ManyToOne, so we need to check\n                 */\n                if (dbProperty.relation && dbProperty.relation.length) {\n                    const dbRelation = dbProperty.relation[0];\n                    let relatedEntities = null;\n                    let relationIsOneToMany = false;\n                    let isRelationNullable = true;\n                    switch (dbRelation.relationType) {\n                        case EntityRelationType.MANY_TO_ONE:\n                            // Id columns are for the parent (currently processed) entity and must be\n                            // checked as part of this entity\n                            if (dbProperty.isId) {\n                                let isMissingRepositoryProperty = false;\n                                this.applicationUtils.forEachColumnOfRelation(dbRelation, record, (dbColumn, columnValue, _propertyNameChains) => {\n                                    if (dbColumn.notNull) {\n                                        isRelationNullable = false;\n                                    }\n                                    if (this.isRepositoryColumnAndNewRepositoryNeed(dbEntity, dbProperty, dbColumn, isCreate, record, columnValue, context)) {\n                                        isMissingRepositoryProperty = true;\n                                    }\n                                }, false);\n                                if (isMissingRepositoryProperty) {\n                                    if (!context.newRepository) {\n                                        await this.repositoryManager.createRepository(context.actor, context);\n                                        newRepositoryNeeded = true;\n                                    }\n                                    record[dbProperty.name] = context.newRepository;\n                                }\n                            }\n                            if (fromOneToMany) {\n                                const parentOneToManyElems = parentRelationProperty.relation[0].oneToManyElems;\n                                const parentMappedBy = parentOneToManyElems ? parentOneToManyElems.mappedBy : null;\n                                const mappedBy = dbRelation.manyToOneElems ? dbRelation.manyToOneElems.mappedBy : null;\n                                // NOTE: 'actor' or the 'repository' property may be automatically populated\n                                // in the entity by this.validateRelationColumn\n                                if (parentMappedBy === dbProperty.name\n                                    || mappedBy === parentRelationProperty.name) {\n                                    // Always fix to the parent record\n                                    record[dbProperty.name] = parentRelationRecord;\n                                    // if (!propertyValue && !entity[dbProperty.name]) {\n                                    // \t// The @ManyToOne side of the relationship is missing, add it\n                                    // \tentity[dbProperty.name] = parentRelationEntity\n                                    // }\n                                }\n                            }\n                            if (propertyValue) {\n                                if (propertyValue) {\n                                    relatedEntities = [propertyValue];\n                                }\n                                else if (!isRelationNullable) {\n                                    throw new Error(`Non-nullable relation ${dbEntity.name}.${dbProperty.name} does not have value assigned`);\n                                }\n                                else {\n                                    console.warn(`Probably OK: Nullable @ManyToOne ${dbEntity.name}.${dbProperty.name} does not have anything assigned.`);\n                                }\n                            }\n                            break;\n                        case EntityRelationType.ONE_TO_MANY:\n                            relationIsOneToMany = true;\n                            relatedEntities = propertyValue;\n                            break;\n                        default:\n                            throw new Error(`Unexpected relation type ${dbRelation.relationType}\r\nfor ${dbEntity.name}.${dbProperty.name}`);\n                    } // switch dbRelation.relationType\n                    if (relatedEntities && relatedEntities.length) {\n                        const previousDbEntity = context.dbEntity;\n                        context.dbEntity = dbRelation.relationEntity;\n                        this.validate(relatedEntities, operatedOnEntityIndicator, context, relationIsOneToMany, dbProperty, rootRelationRecord, record);\n                        context.dbEntity = previousDbEntity;\n                    }\n                } // if (dbProperty.relation // If is a relation property\n                else {\n                    const dbColumn = dbProperty.propertyColumns[0].column;\n                    if (dbProperty.isId) {\n                        const isIdColumnEmpty = this.applicationUtils.isIdEmpty(propertyValue);\n                        this.ensureIdValue(dbEntity, dbProperty, dbColumn, isCreate, isIdColumnEmpty);\n                    }\n                    else {\n                        if (isStub || isParentId) {\n                            if (propertyValue !== undefined) {\n                                throw new Error(`Unexpected non-@Id value Stub|ParentId|Deleted record.\r\nProperty: ${dbEntity.name}.${dbProperty.name}, with \"${this.entityStateManager.getUniqueIdFieldName()}\":  ${operationUniqueId}`);\n                            }\n                        }\n                    }\n                    this.ensureNonRelationalValue(dbProperty, dbColumn, propertyValue);\n                } // else (dbProperty.relation  // If not a relation property\n            } // for (const dbProperty of dbEntity.properties)\n            this.ensureRepositoryValidity(record, rootRelationRecord, parentRelationRecord, dbEntity, parentRelationProperty, isCreate, fromOneToMany, newRepositoryNeeded, context);\n        } // for (const record of entities)\n    }\n    ensureRepositoryValidity(record, rootRelationRecord, parentRelationRecord, dbEntity, parentRelationProperty, isCreate, fromOneToMany, newRepositoryNeeded, context) {\n        if (!dbEntity.isRepositoryEntity) {\n            return;\n        }\n        if (!parentRelationRecord) {\n            const originalValues = this.entityStateManager.getOriginalValues(record);\n            if (newRepositoryNeeded && originalValues && originalValues.repository\n                && originalValues.actor && originalValues.actorRecordId) {\n                const repositoryEntity = record;\n                repositoryEntity.originalRepository = originalValues.repository;\n                this.entityStateManager.markAsStub(repositoryEntity.originalRepository);\n                repositoryEntity.originalActor = originalValues.actor;\n                this.entityStateManager.markAsStub(repositoryEntity.originalActor);\n                repositoryEntity.originalActorRecordId = originalValues.actorRecordId;\n            }\n            return;\n        }\n        if (newRepositoryNeeded) {\n            throw new Error(`Error creating a new repository in a nested record:\r\nIn Entity: ${dbEntity.name}\r\nThat is a child of ${parentRelationProperty.entity.name} via ${parentRelationProperty.entity.name}.${parentRelationProperty.name}\r\n->\r\nWhen creating a new repository the top level record should be of the newly created repository.\r\n`);\n        }\n        // One to many get traversed as well, if it's in the input graph/tree\n        // it is assumed to be part of the same repository\n        // if (fromOneToMany) {\n        // \treturn\n        // }\n        let repositoryEntity = record;\n        // If the repositories of parent record and child record match\n        if (rootRelationRecord.repository.id === repositoryEntity.repository.id) {\n            // no further checks needed\n            return;\n        }\n        if (isCreate) {\n            throw new Error(`A newly created ${dbEntity.name} via ${dbEntity.name} record for repository id ${repositoryEntity.repository.id} (UUID: ${repositoryEntity.repository.id})\r\nis being assigned to repository id ${repositoryEntity.repository.id} (UUID: ${repositoryEntity.repository.id})\r\n\tThis is because it is being referenced via ${parentRelationProperty.entity.name}.${parentRelationProperty.name},\r\n\tfrom a record of repository id ${repositoryEntity.repository.id} (UUID: ${repositoryEntity.repository.id})\r\n\t\r\n\tIf you are manually creating a copy of a record in another repository, there is no need,\r\n\tAIRport automatically copies all records refrenced via @ManyToOne()s into the created/modified\r\n\trepository.\r\n\r\n\tOtherwise, did you mean to set this record's repository to the same one as the referencing record?`);\n        }\n        // If it doesn't then it is a reference to another repository - switch\n        // the record to the parent repository and set the originalRepositoryValue\n        repositoryEntity.originalRepository = repositoryEntity.repository;\n        repositoryEntity.repository = rootRelationRecord.repository;\n        // Aslo set originalActor and originalActorRecordId to look up the original record\n        repositoryEntity.originalActor = repositoryEntity.actor;\n        repositoryEntity.originalActorRecordId = repositoryEntity.actorRecordId;\n        // reset 'actor' and clear 'actorRecordId' to prevents unique constraint\n        // violation if multiple databases flip to the same exact record (independently)\n        repositoryEntity.actor = context.actor;\n        delete repositoryEntity.actorRecordId;\n        // Flip the state of this record to EntityState.CREATE this record now\n        // has to be created in the referencing repository\n        repositoryEntity[this.entityStateManager.getStateFieldName()] = EntityState.CREATE;\n        // NOTE: If the child record is not provided and it's an optional\n        // @ManyToOne() it will be treated as if no record is there.  That is\n        // probaby the only correct way to handle it and a warning is\n        // shown to the user in this case\n    }\n    isRepositoryColumnAndNewRepositoryNeed(dbEntity, dbProperty, dbColumn, isCreate, entity, columnValue, context) {\n        if (!dbColumn.idIndex && dbColumn.idIndex !== 0) {\n            return;\n        }\n        const isIdColumnEmpty = this.applicationUtils.isIdEmpty(columnValue);\n        if (!dbEntity.isRepositoryEntity) {\n            this.ensureIdValue(dbEntity, dbProperty, dbColumn, isCreate, isIdColumnEmpty);\n            return false;\n        }\n        if (!isIdColumnEmpty) {\n            if (isCreate) {\n                if (this.applicationUtils.isActorId(dbColumn.name)) {\n                    throw new Error(`Actor cannot be passed in for create Operations`);\n                }\n            }\n            return false;\n        }\n        if (!isCreate) {\n            throw new Error(`Ids must be populated in entities for non-Create operations`);\n        }\n        if (this.applicationUtils.isRepositoryId(dbColumn.name)) {\n            // Repository was not provided - use context's 'newRepository'\n            return true;\n        }\n        else if (this.applicationUtils.isActorId(dbColumn.name)) {\n            // Use context's 'actor'\n            entity[dbProperty.name] = context.actor;\n            return false;\n        }\n        else if (this.applicationUtils.isActorRecordId(dbColumn.name)) {\n            return false;\n        }\n        throw new Error(`Unexpected @Id column '${dbColumn.name}' in a Repository Entity.`);\n    }\n    ensureIdValue(dbEntity, dbProperty, dbColumn, isCreate, isIdColumnEmpty) {\n        if (dbColumn.isGenerated) {\n            if (isCreate && !isIdColumnEmpty) {\n                throw new Error(`@GeneratedValue() @Id() ${dbEntity.name}.${dbProperty.name},\r\ncolumn:  ${dbColumn.name}\r\nmust NOT have a value for entity Insert operation.`);\n            }\n            else if (!isCreate && isIdColumnEmpty) {\n                throw new Error(`@GeneratedValue() @Id() ${dbEntity.name}.${dbProperty.name} \r\ncolumn:  ${dbColumn.name}\r\nmust have a value for entity non-Insert operations.`);\n            }\n        }\n        else if (isIdColumnEmpty) {\n            throw new Error(`non-@GeneratedValue() @Id() ${dbEntity.name}.${dbProperty.name},\r\ncolumn:  ${dbColumn.name}\r\nmust always have a value for all entity operations.`);\n        }\n    }\n    ensureNonRelationalValue(dbProperty, dbColumn, value) {\n        if (value === undefined || value === null) {\n            return;\n        }\n        switch (dbColumn.type) {\n            case SQLDataType.ANY:\n                break;\n            case SQLDataType.BOOLEAN:\n                if (typeof value !== 'boolean') {\n                    this.throwUnexpectedProperty(dbProperty, dbColumn, value);\n                }\n                break;\n            case SQLDataType.DATE:\n                if (typeof value !== 'object' || !(value instanceof Date)) {\n                    this.throwUnexpectedProperty(dbProperty, dbColumn, value);\n                }\n                break;\n            case SQLDataType.JSON:\n                if (typeof value !== 'object' || value instanceof Date) {\n                    this.throwUnexpectedProperty(dbProperty, dbColumn, value);\n                }\n                break;\n            case SQLDataType.NUMBER:\n                if (typeof value !== 'number') {\n                    this.throwUnexpectedProperty(dbProperty, dbColumn, value);\n                }\n                break;\n            case SQLDataType.STRING:\n                if (typeof value !== 'string') {\n                    this.throwUnexpectedProperty(dbProperty, dbColumn, value);\n                }\n                break;\n        }\n    }\n    throwUnexpectedProperty(dbProperty, dbColumn, value) {\n        throw new Error(`Unexpected property value '${value.toString()}' in property '${dbProperty.entity.name}.${dbProperty.name}'\r\n\t\t(column: '${dbColumn.name}').`);\n    }\n};\n__decorate([\n    Inject()\n], StructuralEntityValidator.prototype, \"applicationUtils\", void 0);\n__decorate([\n    Inject()\n], StructuralEntityValidator.prototype, \"entityStateManager\", void 0);\n__decorate([\n    Inject()\n], StructuralEntityValidator.prototype, \"repositoryManager\", void 0);\nStructuralEntityValidator = __decorate([\n    Injected()\n], StructuralEntityValidator);\nexport { StructuralEntityValidator };\n//# sourceMappingURL=StructuralEntityValidator.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { SQLDataType } from \"@airport/ground-control\";\n// TODO: figure out if this is needed - originally written for deserializing\n// Client-side query parameters.  Since then moved to Isolates and generic\n// API calls.  Probably should be used in go-tower to deserialize all of the\n// method argiments passed it (and won't be tied to a query of any kind, API\n// interface is generic, unless already known to contain entity objects.)\nlet QueryParameterDeserializer = class QueryParameterDeserializer {\n    deserialize(parameters, query, entityStateManager) {\n        if (parameters.length !== query.jsonQuery.parameters.length) {\n            throw new Error(`Wrong number of parameters for ${query.dbEntity.name}.${query.jsonQuery.queryName}\r\n            Received:  ${parameters.length}\r\n            Expecting: ${query.jsonQuery.parameters.length}\r\n            `);\n        }\n        const deserializedParameters = [];\n        for (let i = 0; i < parameters.length; i++) {\n            const deserializedParameter = this.deserializeParameter(parameters[i], query.jsonQuery.parameters[i], i + 1, query, entityStateManager);\n            deserializedParameters.push(deserializedParameter);\n        }\n        return deserializedParameters;\n    }\n    deserializeParameter(parameter, jsonQueryParameter, parameterIndex, query, entityStateManager) {\n        switch (jsonQueryParameter.type) {\n            case SQLDataType.BOOLEAN:\n                this.checkTypeOfParameter(parameter, 'boolean', parameterIndex, query);\n                break;\n            case SQLDataType.DATE:\n                if (!(parameter instanceof Object)\n                    || parameter[entityStateManager.getStateFieldName()] !== EntityState.RESULT_DATE\n                    || !parameter.value) {\n                    throw new Error(`Invalid Serialized Date format for:\r\n                    ${query.dbEntity.name}.${query.jsonQuery.queryName}\r\n                    parameter #: ${parameterIndex}\r\n        got: ${JSON.stringify(parameter)}\r\n                    `);\n                }\n                try {\n                    return new Date(parameter);\n                }\n                catch (e) {\n                    throw new Error(`Invalid Serialized Date format for:\r\n                    ${query.dbEntity.name}.${query.jsonQuery.queryName}\r\n                    parameter #: ${parameterIndex}\r\n        got: ${JSON.stringify(parameter)}\r\n                    `);\n                }\n                break;\n            case SQLDataType.NUMBER:\n                this.checkTypeOfParameter(parameter, 'number', parameterIndex, query);\n                break;\n            case SQLDataType.STRING:\n                this.checkTypeOfParameter(parameter, 'string', parameterIndex, query);\n                break;\n            default:\n                throw new Error(`Unsupported parameter type for:\r\n                ${query.dbEntity.name}.${query.jsonQuery.queryName}\r\n                parameter #: ${parameterIndex}\r\n    got: ${jsonQueryParameter.type}\r\n                `);\n        }\n        return parameter;\n    }\n    checkTypeOfParameter(parameter, expectedParameterType, parameterIndex, query) {\n        const typeOfParameter = typeof parameter;\n        if (typeOfParameter !== expectedParameterType) {\n            throw new Error(`Expecting a '${expectedParameterType}' parameter for:\r\n            ${query.dbEntity.name}.${query.jsonQuery.queryName}\r\n            parameter #: ${parameterIndex}\r\ngot: ${typeOfParameter}\r\n            `);\n        }\n    }\n};\nQueryParameterDeserializer = __decorate([\n    Injected()\n], QueryParameterDeserializer);\nexport { QueryParameterDeserializer };\n//# sourceMappingURL=QueryParameterDeserializer.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { EntityState, SQLDataType } from '@airport/ground-control';\n// TODO: figure out if this is needed - originally written for serializing\n// query resuts returned to the client.  Since then moved to Isolates and\n// generic API calls.  Probably should be used in go-tower to serialize\n// the values returned (and won't be tied to a query of any kind, API\n// interface is generic, unless already known to contain entity objects.)\nlet QueryResultsSerializer = class QueryResultsSerializer {\n    serialize(entity, dbEntity, entityStateManager, applicationUtils) {\n        const operation = {\n            lookupTable: [],\n            sequence: 0,\n            stubLookupTable: []\n        };\n        let serializedEntity;\n        if (entity instanceof Array) {\n            serializedEntity = entity.map(anEntity => this.doSerialize(anEntity, dbEntity, operation, entityStateManager, applicationUtils));\n        }\n        else {\n            serializedEntity = this.doSerialize(entity, dbEntity, operation, entityStateManager, applicationUtils);\n        }\n        for (let i = 1; i < operation.lookupTable.length; i++) {\n            delete operation.lookupTable[i][entityStateManager.getUniqueIdFieldName()];\n        }\n        return serializedEntity;\n    }\n    doSerialize(entity, dbEntity, operation, entityStateManager, applicationUtils) {\n        // TODO: add support for non-create operations\n        let operationUniqueId = entityStateManager.getOperationUniqueId(entity);\n        if (operationUniqueId) {\n            return operation.stubLookupTable[operationUniqueId];\n        }\n        operationUniqueId = ++operation.sequence;\n        let entityStub = {};\n        entityStub[entityStateManager.getUniqueIdFieldName()] = operationUniqueId;\n        entityStub[entityStateManager.getStateFieldName()] = EntityState.STUB;\n        operation.stubLookupTable[operationUniqueId] = entityStub;\n        let entityCopy = {};\n        operation.lookupTable[operationUniqueId] = entity;\n        entityCopy[entityStateManager.getUniqueIdFieldName()] = operationUniqueId;\n        // TODO: Test this - used to be assigned to EntitState.RESULT, which is removed\n        entityCopy[entityStateManager.getStateFieldName()]\n            = entity[entityStateManager.getStateFieldName()];\n        for (const dbProperty of dbEntity.properties) {\n            let property = entity[dbProperty.name];\n            if (applicationUtils.isEmpty(property)) {\n                continue;\n            }\n            let propertyCopy;\n            if (dbProperty.relation) {\n                const dbRelation = dbProperty.relation[0];\n                if (property instanceof Array) {\n                    propertyCopy = property.map(manyObject => {\n                        this.doSerialize(manyObject, dbRelation.relationEntity, operation, entityStateManager, applicationUtils);\n                    });\n                }\n                else {\n                    propertyCopy = this.doSerialize(property, dbRelation.relationEntity, operation, entityStateManager, applicationUtils);\n                }\n            }\n            else {\n                switch (dbProperty.propertyColumns[0].column.type) {\n                    case SQLDataType.JSON:\n                        // \tif (property instanceof Array) {\n                        // \t\tpropertyCopy = {\n                        // \t\t\tvalue: property\n                        // \t\t}\n                        // \t\tpropertyCopy[entityStateManager.getStateFieldName()]\n                        // \t\t\t= EntityState.RESULT_JSON_ARRAY\n                        // \t} else {\n                        // \t\tpropertyCopy = property\n                        // \t\tpropertyCopy[entityStateManager.getStateFieldName()]\n                        // \t\t\t= EntityState.RESULT_JSON\n                        // \t}\n                        throw new Error(`@Json() properties cannot be serialized.`);\n                        break;\n                    case SQLDataType.DATE:\n                        propertyCopy = {\n                            value: property.toISOString()\n                        };\n                        propertyCopy[entityStateManager.getStateFieldName()]\n                            = EntityState.DATE;\n                        break;\n                    case SQLDataType.ANY:\n                    case SQLDataType.BOOLEAN:\n                    case SQLDataType.NUMBER:\n                    case SQLDataType.STRING:\n                        propertyCopy = property;\n                        break;\n                    default:\n                        throw new Error(`Unsupported data type for property ${dbEntity.applicationVersion.application.name}.${dbEntity.name}.${dbProperty.name}`);\n                }\n            }\n            entityCopy[dbProperty.name] = propertyCopy;\n        }\n        return entityCopy;\n    }\n};\nQueryResultsSerializer = __decorate([\n    Injected()\n], QueryResultsSerializer);\nexport { QueryResultsSerializer };\n//# sourceMappingURL=QueryResultsSerializer.js.map","/**\n * Created by Papa on 6/30/2016.\n */\nvar startTime = new Date().getTime();\n// Invoke the random algorithm (?change the seed?)\nMath.random();\nexport class PlatformUtils {\n    static async getNewDatabaseId() {\n        return new Date().getTime().toString(36) + await this.createNonce(7, true);\n    }\n    static async createNonce(length, sleep) {\n        var text = \"\";\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n        // Sleep a random number of milliseconds to ensure different random characters\n        await this.randomize();\n        for (var i = 0; i < length; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        return text;\n    }\n    static async randomize() {\n        for (let i = 0; i < startTime % 1000; i++) {\n            Math.random();\n        }\n        /*\n        return new Promise((\n            resolve,\n            reject\n        ) => {\n            setTimeout(() => {\n                resolve();\n            }, startTime % 1000);\n        });\n        */\n    }\n}\n//# sourceMappingURL=PlatformUtils.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\n/**\n * TODO: probably not-needed - queries no longer come from\n * the client directly.  They can come from the client but\n * are considered generic API calls. DaoRegistry is now\n * replaced with API registry.\n */\nlet ClientQueryManager = class ClientQueryManager {\n    async getClientQuery(applicationName, daoName, methodName) {\n        // const daoRegistry = await container(this).get(DAO_REGISTRY)\n        throw new Error('TODO: implement');\n    }\n};\nClientQueryManager = __decorate([\n    Injected()\n], ClientQueryManager);\nexport { ClientQueryManager };\n//# sourceMappingURL=ClientQueryManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DbNumber, DbString, Entity, Id, OneToMany, Table, } from '@airport/air-traffic-control';\nlet Domain = class Domain {\n};\n__decorate([\n    Id(),\n    DbNumber()\n], Domain.prototype, \"id\", void 0);\n__decorate([\n    DbString()\n], Domain.prototype, \"name\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'domain' })\n], Domain.prototype, \"applications\", void 0);\nDomain = __decorate([\n    Entity(),\n    Table({ name: 'DOMAINS' })\n], Domain);\nexport { Domain };\n//# sourceMappingURL=Domain.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, DbString, Entity, Id, JoinColumn, ManyToOne, OneToMany, Table } from '@airport/air-traffic-control';\nlet Application = class Application {\n    constructor() {\n        this.versions = [];\n        this.currentVersion = [];\n    }\n};\n__decorate([\n    Id(),\n    DbNumber(),\n    Column({ name: 'APPLICATION_INDEX', nullable: false })\n], Application.prototype, \"index\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'DOMAIN_ID', referencedColumnName: 'ID', nullable: false })\n], Application.prototype, \"domain\", void 0);\n__decorate([\n    Column({ name: 'SCOPE', nullable: false }),\n    DbString()\n], Application.prototype, \"scope\", void 0);\n__decorate([\n    Column({ name: 'APPLICATION_NAME', nullable: false }),\n    DbString()\n], Application.prototype, \"name\", void 0);\n__decorate([\n    Column({ name: 'FULL_APPLICATION_NAME', nullable: false }),\n    DbString()\n], Application.prototype, \"fullName\", void 0);\n__decorate([\n    Column({ name: 'STATUS', nullable: false }),\n    DbString()\n], Application.prototype, \"status\", void 0);\n__decorate([\n    Column({ name: 'SIGNATURE', nullable: false }),\n    DbString()\n], Application.prototype, \"signature\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'application' })\n], Application.prototype, \"versions\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'application' })\n], Application.prototype, \"currentVersion\", void 0);\nApplication = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATIONS'\n    })\n], Application);\nexport { Application };\n//# sourceMappingURL=Application.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { JoinColumn, ManyToOne, MappedSuperclass } from '@airport/air-traffic-control';\nlet VersionedApplicationObject = class VersionedApplicationObject {\n};\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'DEPRECATED_SINCE_APPLICATION_VERSION_ID', referencedColumnName: 'ID' })\n], VersionedApplicationObject.prototype, \"deprecatedSinceVersion\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'REMOVED_IN_APPLICATION_VERSION_ID', referencedColumnName: 'ID' })\n], VersionedApplicationObject.prototype, \"removedInVersion\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'SINCE_APPLICATION_VERSION_ID', referencedColumnName: 'ID', nullable: false })\n], VersionedApplicationObject.prototype, \"sinceVersion\", void 0);\nVersionedApplicationObject = __decorate([\n    MappedSuperclass()\n], VersionedApplicationObject);\nexport { VersionedApplicationObject };\n//# sourceMappingURL=VersionedApplicationObject.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbBoolean, DbNumber, DbString, Entity, Id, JoinColumn, ManyToOne, OneToMany, Table } from '@airport/air-traffic-control';\nimport { VersionedApplicationObject } from './VersionedApplicationObject';\nlet ApplicationColumn = class ApplicationColumn extends VersionedApplicationObject {\n    constructor() {\n        super(...arguments);\n        this.propertyColumns = [];\n        this.manyRelationColumns = [];\n        this.oneRelationColumns = [];\n    }\n};\n__decorate([\n    DbNumber(),\n    Id()\n], ApplicationColumn.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'COLUMN_INDEX', nullable: false }),\n    DbNumber()\n], ApplicationColumn.prototype, \"index\", void 0);\n__decorate([\n    Column({ name: 'ID_INDEX' }),\n    DbNumber()\n], ApplicationColumn.prototype, \"idIndex\", void 0);\n__decorate([\n    Column({ name: 'IS_GENERATED', nullable: false }),\n    DbBoolean()\n], ApplicationColumn.prototype, \"isGenerated\", void 0);\n__decorate([\n    Column({ name: 'ALLOCATION_SIZE' }),\n    DbNumber()\n], ApplicationColumn.prototype, \"allocationSize\", void 0);\n__decorate([\n    Column({ name: 'NAME', nullable: false }),\n    DbString()\n], ApplicationColumn.prototype, \"name\", void 0);\n__decorate([\n    Column({ name: 'NOT_NULL', nullable: false }),\n    DbBoolean()\n], ApplicationColumn.prototype, \"notNull\", void 0);\n__decorate([\n    Column({ name: 'PRECISION' }),\n    DbNumber()\n], ApplicationColumn.prototype, \"precision\", void 0);\n__decorate([\n    Column({ name: 'SCALE' }),\n    DbNumber()\n], ApplicationColumn.prototype, \"scale\", void 0);\n__decorate([\n    Column({ name: 'TYPE', nullable: false }),\n    DbString()\n], ApplicationColumn.prototype, \"type\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_ENTITY_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationColumn.prototype, \"entity\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'column' })\n], ApplicationColumn.prototype, \"propertyColumns\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'manyColumn' })\n], ApplicationColumn.prototype, \"manyRelationColumns\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'oneColumn' })\n], ApplicationColumn.prototype, \"oneRelationColumns\", void 0);\nApplicationColumn = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATION_COLUMNS'\n    })\n], ApplicationColumn);\nexport { ApplicationColumn };\n//# sourceMappingURL=ApplicationColumn.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Entity, Id, JoinColumn, ManyToOne, Table } from \"@airport/air-traffic-control\";\nlet ApplicationCurrentVersion = class ApplicationCurrentVersion {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_INDEX', referencedColumnName: 'APPLICATION_INDEX', nullable: false })\n], ApplicationCurrentVersion.prototype, \"application\", void 0);\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_VERSION_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationCurrentVersion.prototype, \"applicationVersion\", void 0);\nApplicationCurrentVersion = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATION_CURRENT_VERSIONS'\n    })\n], ApplicationCurrentVersion);\nexport { ApplicationCurrentVersion };\n//# sourceMappingURL=ApplicationCurrentVersion.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbBoolean, DbNumber, DbString, Entity, Id, JoinColumn, Json, ManyToOne, OneToMany, Table, Transient } from '@airport/air-traffic-control';\nimport { VersionedApplicationObject } from './VersionedApplicationObject';\nlet ApplicationEntity = class ApplicationEntity extends VersionedApplicationObject {\n    constructor() {\n        super(...arguments);\n        //\n        // One-to-Many's\n        //\n        this.columns = [];\n        // TODO: implement if needed\n        // @OneToMany()\n        // @JoinColumns([\n        // \t{name: \"APPLICATION_VERSION_ID\"},\n        // \t{name: \"TABLE_INDEX\", referencedColumnName: \"INDEX\"}\n        // ])\n        // @WhereJoinTable((\n        // \totm: QApplicationEntity,\n        // \tmto: QApplicationColumn\n        // ) => mto.idIndex.isNotNull())\n        // idColumns: IApplicationColumn[];\n        this.operations = [];\n        this.properties = [];\n        this.relations = [];\n        this.relationReferences = [];\n        this.columnMap = {};\n        this.idColumns = [];\n        this.idColumnMap = {};\n        this.propertyMap = {};\n    }\n};\n__decorate([\n    DbNumber(),\n    Id()\n], ApplicationEntity.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'TABLE_INDEX', nullable: false }),\n    DbNumber()\n], ApplicationEntity.prototype, \"index\", void 0);\n__decorate([\n    Column({ name: 'IS_LOCAL', nullable: false }),\n    DbBoolean()\n], ApplicationEntity.prototype, \"isLocal\", void 0);\n__decorate([\n    Column({ name: 'IS_REPOSITORY_ENTITY', nullable: false }),\n    DbBoolean()\n], ApplicationEntity.prototype, \"isRepositoryEntity\", void 0);\n__decorate([\n    Column({ name: 'NAME', nullable: false }),\n    DbString()\n], ApplicationEntity.prototype, \"name\", void 0);\n__decorate([\n    Column({ name: 'TABLE_CONFIGURATION', nullable: false }),\n    Json()\n], ApplicationEntity.prototype, \"tableConfig\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_VERSION_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationEntity.prototype, \"applicationVersion\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'entity' })\n], ApplicationEntity.prototype, \"columns\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'entity' })\n], ApplicationEntity.prototype, \"operations\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'entity' })\n], ApplicationEntity.prototype, \"properties\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'entity' })\n], ApplicationEntity.prototype, \"relations\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'relationEntity' })\n], ApplicationEntity.prototype, \"relationReferences\", void 0);\n__decorate([\n    Transient()\n], ApplicationEntity.prototype, \"columnMap\", void 0);\n__decorate([\n    Transient()\n], ApplicationEntity.prototype, \"idColumns\", void 0);\n__decorate([\n    Transient()\n], ApplicationEntity.prototype, \"idColumnMap\", void 0);\n__decorate([\n    Transient()\n], ApplicationEntity.prototype, \"propertyMap\", void 0);\nApplicationEntity = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATION_ENTITIES',\n        // indexes: (se: ApplicationEntity) => [{\n        // \tproperty: se.applicationVersion\n        // }]\n    })\n], ApplicationEntity);\nexport { ApplicationEntity };\n//# sourceMappingURL=ApplicationEntity.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, DbString, Entity, GeneratedValue, Id, JoinColumn, Json, ManyToOne, Table } from '@airport/air-traffic-control';\nimport { VersionedApplicationObject } from './VersionedApplicationObject';\nlet ApplicationOperation = class ApplicationOperation extends VersionedApplicationObject {\n};\n__decorate([\n    Id(),\n    GeneratedValue(),\n    DbNumber()\n], ApplicationOperation.prototype, \"id\", void 0);\n__decorate([\n    Column({\n        name: 'TYPE',\n        nullable: false\n    }),\n    DbNumber()\n], ApplicationOperation.prototype, \"type\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'APPLICATION_ENTITY_ID',\n        referencedColumnName: 'ID',\n        nullable: false\n    })\n], ApplicationOperation.prototype, \"entity\", void 0);\n__decorate([\n    Column({ name: 'NAME', nullable: false }),\n    DbString()\n], ApplicationOperation.prototype, \"name\", void 0);\n__decorate([\n    Column({ name: 'RULE', nullable: false }),\n    Json()\n], ApplicationOperation.prototype, \"rule\", void 0);\nApplicationOperation = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATION_OPERATIONS'\n    })\n], ApplicationOperation);\nexport { ApplicationOperation };\n//# sourceMappingURL=ApplicationOperation.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbBoolean, DbNumber, DbString, Entity, Id, JoinColumn, ManyToOne, OneToMany, Table } from '@airport/air-traffic-control';\nimport { VersionedApplicationObject } from './VersionedApplicationObject';\nlet ApplicationProperty = class ApplicationProperty extends VersionedApplicationObject {\n    constructor() {\n        super(...arguments);\n        this.propertyColumns = [];\n        this.relation = [];\n    }\n};\n__decorate([\n    DbNumber(),\n    Id()\n], ApplicationProperty.prototype, \"id\", void 0);\n__decorate([\n    DbNumber(),\n    Column({ name: 'PROPERTY_INDEX', nullable: false })\n], ApplicationProperty.prototype, \"index\", void 0);\n__decorate([\n    DbString(),\n    Column({ name: 'NAME', nullable: false })\n], ApplicationProperty.prototype, \"name\", void 0);\n__decorate([\n    DbBoolean(),\n    Column({ name: 'IS_ID', nullable: false })\n], ApplicationProperty.prototype, \"isId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_ENTITY_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationProperty.prototype, \"entity\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'property' })\n], ApplicationProperty.prototype, \"propertyColumns\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'property' })\n], ApplicationProperty.prototype, \"relation\", void 0);\nApplicationProperty = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATION_PROPERTIES'\n    })\n], ApplicationProperty);\nexport { ApplicationProperty };\n//# sourceMappingURL=ApplicationProperty.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Entity, Id, JoinColumn, ManyToOne, Table } from '@airport/air-traffic-control';\nimport { VersionedApplicationObject } from './VersionedApplicationObject';\n/**\n * Many-to-Many between Columns and properties\n */\nlet ApplicationPropertyColumn = class ApplicationPropertyColumn extends VersionedApplicationObject {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_COLUMN_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationPropertyColumn.prototype, \"column\", void 0);\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_PROPERTY_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationPropertyColumn.prototype, \"property\", void 0);\nApplicationPropertyColumn = __decorate([\n    Entity()\n    // TODO: rename table name to APPLICATION_PROPERTY_COLUMNS\n    ,\n    Table({\n        name: 'APPLICATION_PROPERTY_COLUMNS'\n    })\n], ApplicationPropertyColumn);\nexport { ApplicationPropertyColumn };\n//# sourceMappingURL=ApplicationPropertyColumn.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, Entity, Id, JoinColumn, ManyToOne, Table } from '@airport/air-traffic-control';\nimport { VersionedApplicationObject } from './VersionedApplicationObject';\nlet ApplicationReference = class ApplicationReference extends VersionedApplicationObject {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'OWN_APPLICATION_VERSION_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationReference.prototype, \"ownApplicationVersion\", void 0);\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'REFERENCED_APPLICATION_VERSION_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationReference.prototype, \"referencedApplicationVersion\", void 0);\n__decorate([\n    Column({ name: 'APPLICATION_REFERENCE_INDEX', nullable: false }),\n    DbNumber()\n], ApplicationReference.prototype, \"index\", void 0);\nApplicationReference = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATION_REFERENCES'\n    })\n], ApplicationReference);\nexport { ApplicationReference };\n//# sourceMappingURL=ApplicationReference.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, DbString, Entity, Id, JoinColumn, Json, ManyToOne, OneToMany, Table } from '@airport/air-traffic-control';\nimport { VersionedApplicationObject } from './VersionedApplicationObject';\nlet ApplicationRelation = class ApplicationRelation extends VersionedApplicationObject {\n    constructor() {\n        super(...arguments);\n        this.manyRelationColumns = [];\n        this.oneRelationColumns = [];\n    }\n};\n__decorate([\n    DbNumber(),\n    Id()\n], ApplicationRelation.prototype, \"id\", void 0);\n__decorate([\n    DbNumber(),\n    Column({ name: 'RELATION_INDEX', nullable: false })\n], ApplicationRelation.prototype, \"index\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_PROPERTY_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationRelation.prototype, \"property\", void 0);\n__decorate([\n    Json(),\n    Column({ name: 'FOREIGN_KEY' })\n], ApplicationRelation.prototype, \"foreignKey\", void 0);\n__decorate([\n    Json(),\n    Column({ name: 'MANY_TO_ONE_ELEMENTS' })\n], ApplicationRelation.prototype, \"manyToOneElems\", void 0);\n__decorate([\n    Json(),\n    Column({ name: 'ONE_TO_MANY_ELEMENTS' })\n], ApplicationRelation.prototype, \"oneToManyElems\", void 0);\n__decorate([\n    DbString(),\n    Column({ name: 'RELATION_TYPE', nullable: false })\n], ApplicationRelation.prototype, \"relationType\", void 0);\n__decorate([\n    Column({ name: 'IS_ID', nullable: false })\n], ApplicationRelation.prototype, \"isId\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_TABLE_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationRelation.prototype, \"entity\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'RELATION_APPLICATION_TABLE_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationRelation.prototype, \"relationEntity\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'manyRelation' })\n], ApplicationRelation.prototype, \"manyRelationColumns\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'oneRelation' })\n], ApplicationRelation.prototype, \"oneRelationColumns\", void 0);\nApplicationRelation = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATION_RELATIONS'\n    })\n], ApplicationRelation);\nexport { ApplicationRelation };\n//# sourceMappingURL=ApplicationRelation.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Entity, Id, JoinColumn, ManyToOne, Table } from '@airport/air-traffic-control';\nimport { VersionedApplicationObject } from './VersionedApplicationObject';\nlet ApplicationRelationColumn = class ApplicationRelationColumn extends VersionedApplicationObject {\n};\n__decorate([\n    Id()\n], ApplicationRelationColumn.prototype, \"id\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({\n        name: 'MANY_APPLICATION_COLUMN_ID',\n        referencedColumnName: 'ID',\n        nullable: false\n    })\n], ApplicationRelationColumn.prototype, \"manyColumn\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'ONE_APPLICATION_COLUMN_ID', referencedColumnName: 'ID', nullable: false })\n], ApplicationRelationColumn.prototype, \"oneColumn\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'MANY_APPLICATION_RELATION_ID', referencedColumnName: 'ID' })\n], ApplicationRelationColumn.prototype, \"manyRelation\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'ONE_APPLICATION_RELATION_ID', referencedColumnName: 'ID' })\n], ApplicationRelationColumn.prototype, \"oneRelation\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'PARENT_RELATION_ID', referencedColumnName: 'ID' })\n], ApplicationRelationColumn.prototype, \"parentRelation\", void 0);\nApplicationRelationColumn = __decorate([\n    Entity(),\n    Table({\n        name: 'APPLICATION_RELATION_COLUMNS'\n    })\n], ApplicationRelationColumn);\nexport { ApplicationRelationColumn };\n//# sourceMappingURL=ApplicationRelationColumn.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, DbString, Entity, Id, JoinColumn, Json, ManyToOne, OneToMany, SequenceGenerator, Table, Transient } from '@airport/air-traffic-control';\nlet ApplicationVersion = class ApplicationVersion {\n    constructor() {\n        this.entities = [];\n        this.references = [];\n        this.referencedBy = [];\n        this.entityMapByName = {};\n        this.referencesMapByName = {};\n        this.referencedByMapByName = {};\n    }\n};\n__decorate([\n    DbNumber(),\n    Id(),\n    SequenceGenerator({ allocationSize: 100 })\n], ApplicationVersion.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'INTEGER_VERSION', nullable: false }),\n    DbNumber()\n], ApplicationVersion.prototype, \"integerVersion\", void 0);\n__decorate([\n    Column({ name: 'VERSION_STRING', nullable: false }),\n    DbString()\n], ApplicationVersion.prototype, \"versionString\", void 0);\n__decorate([\n    Column({ name: 'MAJOR_VERSION', nullable: false }),\n    DbNumber()\n], ApplicationVersion.prototype, \"majorVersion\", void 0);\n__decorate([\n    Column({ name: 'MINOR_VERSION', nullable: false }),\n    DbNumber()\n], ApplicationVersion.prototype, \"minorVersion\", void 0);\n__decorate([\n    Column({ name: 'PATCH_VERSION', nullable: false }),\n    DbNumber()\n], ApplicationVersion.prototype, \"patchVersion\", void 0);\n__decorate([\n    Column({ name: 'JSON_APPLICATION', nullable: false }),\n    Json()\n], ApplicationVersion.prototype, \"jsonApplication\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_INDEX', nullable: false })\n], ApplicationVersion.prototype, \"application\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'applicationVersion' })\n], ApplicationVersion.prototype, \"entities\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'ownApplicationVersion' })\n], ApplicationVersion.prototype, \"references\", void 0);\n__decorate([\n    OneToMany({ mappedBy: 'referencedApplicationVersion' })\n], ApplicationVersion.prototype, \"referencedBy\", void 0);\n__decorate([\n    Transient()\n], ApplicationVersion.prototype, \"entityMapByName\", void 0);\n__decorate([\n    Transient()\n], ApplicationVersion.prototype, \"referencesMapByName\", void 0);\n__decorate([\n    Transient()\n], ApplicationVersion.prototype, \"referencedByMapByName\", void 0);\nApplicationVersion = __decorate([\n    Entity(),\n    Table({ name: 'APPLICATION_VERSIONS' })\n], ApplicationVersion);\nexport { ApplicationVersion };\n//# sourceMappingURL=ApplicationVersion.js.map","import { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { diSet as dS, duoDiSet as ddS } from '@airport/check-in';\nimport { DEPENDENCY_INJECTION } from '@airport/direction-indicator';\nimport { getFullApplicationName } from '@airport/ground-control';\nimport { Application, ApplicationColumn, ApplicationCurrentVersion, ApplicationEntity, ApplicationOperation, ApplicationProperty, ApplicationPropertyColumn, ApplicationReference, ApplicationRelation, ApplicationRelationColumn, ApplicationVersion, Domain, VersionedApplicationObject } from '../ddl/ddl';\nconst __constructors__ = {\n    Application: Application,\n    ApplicationColumn: ApplicationColumn,\n    ApplicationCurrentVersion: ApplicationCurrentVersion,\n    ApplicationEntity: ApplicationEntity,\n    ApplicationOperation: ApplicationOperation,\n    ApplicationProperty: ApplicationProperty,\n    ApplicationPropertyColumn: ApplicationPropertyColumn,\n    ApplicationReference: ApplicationReference,\n    ApplicationRelation: ApplicationRelation,\n    ApplicationRelationColumn: ApplicationRelationColumn,\n    ApplicationVersion: ApplicationVersion,\n    Domain: Domain,\n    VersionedApplicationObject: VersionedApplicationObject\n};\nexport const Q_APPLICATION = {\n    __constructors__,\n    domain: 'air',\n    name: '@airport/airspace'\n};\nexport const Q = Q_APPLICATION;\nexport function diSet(dbEntityId) {\n    return dS(Q.__dbApplication__, dbEntityId);\n}\nexport function duoDiSet(dbEntityId) {\n    return ddS(Q.__dbApplication__, dbEntityId);\n}\nDEPENDENCY_INJECTION.db().eventuallyGet(AIRPORT_DATABASE).then((airDb) => {\n    airDb.QM[getFullApplicationName(Q_APPLICATION)] = Q;\n});\n//# sourceMappingURL=qApplication.js.map","import { Dao, DaoQueryDecorators, } from '@airport/check-in';\nimport { Q, duoDiSet, } from './qApplication';\n// Application Q object Dependency Injection readiness detection Dao\nexport class SQDIDao extends Dao {\n    constructor(dbEntityId) {\n        super(dbEntityId, Q);\n    }\n}\nexport class BaseApplicationDao extends SQDIDao {\n    constructor() {\n        super(10);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(10);\n    }\n}\nBaseApplicationDao.Find = new DaoQueryDecorators();\nBaseApplicationDao.FindOne = new DaoQueryDecorators();\nBaseApplicationDao.Search = new DaoQueryDecorators();\nBaseApplicationDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationColumnDao extends SQDIDao {\n    constructor() {\n        super(4);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(4);\n    }\n}\nBaseApplicationColumnDao.Find = new DaoQueryDecorators();\nBaseApplicationColumnDao.FindOne = new DaoQueryDecorators();\nBaseApplicationColumnDao.Search = new DaoQueryDecorators();\nBaseApplicationColumnDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationCurrentVersionDao extends SQDIDao {\n    constructor() {\n        super(9);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(9);\n    }\n}\nBaseApplicationCurrentVersionDao.Find = new DaoQueryDecorators();\nBaseApplicationCurrentVersionDao.FindOne = new DaoQueryDecorators();\nBaseApplicationCurrentVersionDao.Search = new DaoQueryDecorators();\nBaseApplicationCurrentVersionDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationEntityDao extends SQDIDao {\n    constructor() {\n        super(6);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(6);\n    }\n}\nBaseApplicationEntityDao.Find = new DaoQueryDecorators();\nBaseApplicationEntityDao.FindOne = new DaoQueryDecorators();\nBaseApplicationEntityDao.Search = new DaoQueryDecorators();\nBaseApplicationEntityDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationOperationDao extends SQDIDao {\n    constructor() {\n        super(5);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(5);\n    }\n}\nBaseApplicationOperationDao.Find = new DaoQueryDecorators();\nBaseApplicationOperationDao.FindOne = new DaoQueryDecorators();\nBaseApplicationOperationDao.Search = new DaoQueryDecorators();\nBaseApplicationOperationDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationPropertyDao extends SQDIDao {\n    constructor() {\n        super(2);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(2);\n    }\n}\nBaseApplicationPropertyDao.Find = new DaoQueryDecorators();\nBaseApplicationPropertyDao.FindOne = new DaoQueryDecorators();\nBaseApplicationPropertyDao.Search = new DaoQueryDecorators();\nBaseApplicationPropertyDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationPropertyColumnDao extends SQDIDao {\n    constructor() {\n        super(3);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(3);\n    }\n}\nBaseApplicationPropertyColumnDao.Find = new DaoQueryDecorators();\nBaseApplicationPropertyColumnDao.FindOne = new DaoQueryDecorators();\nBaseApplicationPropertyColumnDao.Search = new DaoQueryDecorators();\nBaseApplicationPropertyColumnDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationReferenceDao extends SQDIDao {\n    constructor() {\n        super(7);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(7);\n    }\n}\nBaseApplicationReferenceDao.Find = new DaoQueryDecorators();\nBaseApplicationReferenceDao.FindOne = new DaoQueryDecorators();\nBaseApplicationReferenceDao.Search = new DaoQueryDecorators();\nBaseApplicationReferenceDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationRelationDao extends SQDIDao {\n    constructor() {\n        super(1);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(1);\n    }\n}\nBaseApplicationRelationDao.Find = new DaoQueryDecorators();\nBaseApplicationRelationDao.FindOne = new DaoQueryDecorators();\nBaseApplicationRelationDao.Search = new DaoQueryDecorators();\nBaseApplicationRelationDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationRelationColumnDao extends SQDIDao {\n    constructor() {\n        super(0);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(0);\n    }\n}\nBaseApplicationRelationColumnDao.Find = new DaoQueryDecorators();\nBaseApplicationRelationColumnDao.FindOne = new DaoQueryDecorators();\nBaseApplicationRelationColumnDao.Search = new DaoQueryDecorators();\nBaseApplicationRelationColumnDao.SearchOne = new DaoQueryDecorators();\nexport class BaseApplicationVersionDao extends SQDIDao {\n    constructor() {\n        super(8);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(8);\n    }\n}\nBaseApplicationVersionDao.Find = new DaoQueryDecorators();\nBaseApplicationVersionDao.FindOne = new DaoQueryDecorators();\nBaseApplicationVersionDao.Search = new DaoQueryDecorators();\nBaseApplicationVersionDao.SearchOne = new DaoQueryDecorators();\nexport class BaseDomainDao extends SQDIDao {\n    constructor() {\n        super(11);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(11);\n    }\n}\nBaseDomainDao.Find = new DaoQueryDecorators();\nBaseDomainDao.FindOne = new DaoQueryDecorators();\nBaseDomainDao.Search = new DaoQueryDecorators();\nBaseDomainDao.SearchOne = new DaoQueryDecorators();\n//# sourceMappingURL=baseDaos.js.map","import { Duo, } from '@airport/check-in';\nimport { Q, duoDiSet, } from './qApplication';\n// Application Q object Dependency Injection readiness detection Duo\nexport class SQDIDuo extends Duo {\n    constructor(dbEntityId) {\n        super(dbEntityId, Q);\n    }\n}\nexport class BaseApplicationDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(10);\n    }\n    constructor() {\n        super(10);\n    }\n}\nexport class BaseApplicationColumnDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(4);\n    }\n    constructor() {\n        super(4);\n    }\n}\nexport class BaseApplicationCurrentVersionDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(9);\n    }\n    constructor() {\n        super(9);\n    }\n}\nexport class BaseApplicationEntityDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(6);\n    }\n    constructor() {\n        super(6);\n    }\n}\nexport class BaseApplicationOperationDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(5);\n    }\n    constructor() {\n        super(5);\n    }\n}\nexport class BaseApplicationPropertyDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(2);\n    }\n    constructor() {\n        super(2);\n    }\n}\nexport class BaseApplicationPropertyColumnDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(3);\n    }\n    constructor() {\n        super(3);\n    }\n}\nexport class BaseApplicationReferenceDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(7);\n    }\n    constructor() {\n        super(7);\n    }\n}\nexport class BaseApplicationRelationDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(1);\n    }\n    constructor() {\n        super(1);\n    }\n}\nexport class BaseApplicationRelationColumnDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(0);\n    }\n    constructor() {\n        super(0);\n    }\n}\nexport class BaseApplicationVersionDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(8);\n    }\n    constructor() {\n        super(8);\n    }\n}\nexport class BaseDomainDuo extends SQDIDuo {\n    static diSet() {\n        return duoDiSet(11);\n    }\n    constructor() {\n        super(11);\n    }\n}\n//# sourceMappingURL=baseDuos.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseDomainDao, Q } from '../generated/generated';\nlet DomainDao = class DomainDao extends BaseDomainDao {\n    async findByIdIn(domainIds) {\n        let d;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                d = Q.Domain\n            ],\n            where: d.id.in(domainIds)\n        });\n    }\n    async findMapByNameWithNames(domainNames) {\n        let d;\n        const domains = await this.db.find.tree({\n            select: {},\n            from: [d = Q.Domain],\n            where: d.name.in(domainNames)\n        });\n        const domainMapByNameWithNames = new Map();\n        for (const domain of domains) {\n            domainMapByNameWithNames.set(domain.name, domain);\n        }\n        return domainMapByNameWithNames;\n    }\n    async findOneByName(name) {\n        let d;\n        return await this.db.findOne.tree({\n            select: {},\n            from: [d = Q.Domain],\n            where: d.name.equals(name)\n        });\n    }\n    async findByNames(names) {\n        let d;\n        return await this.db.find.tree({\n            select: {},\n            from: [d = Q.Domain],\n            where: d.name.in(names)\n        });\n    }\n    async findByName(name) {\n        let d;\n        return await this.db.findOne.tree({\n            select: {},\n            from: [d = Q.Domain],\n            where: d.name.equals(name)\n        });\n    }\n    async checkAndInsertIfNeeded(domains) {\n        const existingDomains = await this.findByIdIn(domains.map(domain => domain.id));\n        const existingDomainMap = new Map();\n        for (const existingDomain of existingDomains) {\n            existingDomainMap.set(existingDomain.id, existingDomain);\n        }\n        const newDomains = [];\n        for (const domain of domains) {\n            if (!existingDomainMap.has(domain.id)) {\n                newDomains.push(domain);\n            }\n        }\n        if (!newDomains.length) {\n            return;\n        }\n        let d;\n        const values = [];\n        for (const domain of newDomains) {\n            values.push([\n                domain.id, domain.name\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: d = Q.Domain,\n            columns: [\n                d.id,\n                d.name,\n            ],\n            values\n        });\n    }\n    async insert(domains) {\n        let d;\n        const values = [];\n        for (const domain of domains) {\n            values.push([\n                domain.name\n            ]);\n        }\n        const ids = await this.db.insertValuesGenerateIds({\n            insertInto: d = Q.Domain,\n            columns: [\n                d.name\n            ],\n            values\n        });\n        for (let i = 0; i < domains.length; i++) {\n            let domain = domains[i];\n            domain.id = ids[i][0];\n        }\n    }\n};\nDomainDao = __decorate([\n    Injected()\n], DomainDao);\nexport { DomainDao };\n//# sourceMappingURL=DomainDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { undefinedToNull } from '@airport/ground-control';\nimport { BaseApplicationColumnDao, Q } from '../generated/generated';\nlet ApplicationColumnDao = class ApplicationColumnDao extends BaseApplicationColumnDao {\n    async findAllForEntities(entityIds) {\n        let c;\n        return this.db.find.tree({\n            select: {},\n            from: [\n                c = Q.ApplicationColumn\n            ],\n            where: c.entity.id.in(entityIds)\n        });\n    }\n    async insert(applicationColumns) {\n        let sc;\n        const values = [];\n        for (const applicationColumn of applicationColumns) {\n            values.push([\n                applicationColumn.id, applicationColumn.index,\n                undefinedToNull(applicationColumn.idIndex),\n                applicationColumn.isGenerated,\n                undefinedToNull(applicationColumn.allocationSize),\n                applicationColumn.name,\n                applicationColumn.notNull,\n                undefinedToNull(applicationColumn.precision),\n                undefinedToNull(applicationColumn.scale),\n                applicationColumn.type,\n                applicationColumn.entity.id,\n                applicationColumn.deprecatedSinceVersion ? applicationColumn.deprecatedSinceVersion.id : null,\n                applicationColumn.removedInVersion ? applicationColumn.removedInVersion.id : null,\n                applicationColumn.sinceVersion ? applicationColumn.sinceVersion.id : null,\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: sc = Q.ApplicationColumn,\n            columns: [\n                sc.id,\n                sc.index,\n                sc.idIndex,\n                sc.isGenerated,\n                sc.allocationSize,\n                sc.name,\n                sc.notNull,\n                sc.precision,\n                sc.scale,\n                sc.type,\n                sc.entity.id,\n                sc.deprecatedSinceVersion.id,\n                sc.removedInVersion.id,\n                sc.sinceVersion.id\n            ],\n            values\n        });\n    }\n};\nApplicationColumnDao = __decorate([\n    Injected()\n], ApplicationColumnDao);\nexport { ApplicationColumnDao };\n//# sourceMappingURL=ApplicationColumnDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ALL_FIELDS, and, max, tree, Y } from '@airport/air-traffic-control';\nimport { Injected } from '@airport/direction-indicator';\nimport { ensureChildJsMap } from '@airport/ground-control';\nimport { BaseApplicationDao, Q } from '../generated/generated';\nlet ApplicationDao = class ApplicationDao extends BaseApplicationDao {\n    async findAllActive() {\n        let s;\n        return this.db.find.tree({\n            select: {},\n            from: [\n                s = Q.Application\n            ]\n        });\n    }\n    async findAllWithJson() {\n        let a;\n        let av;\n        // FIXME: this should be don through currentVersion - verify that it get's populated and switch\n        let cv;\n        return this.db.find.tree({\n            select: {\n                ...ALL_FIELDS,\n                // currentVersion: {\n                // \tapplicationVersion: {\n                // \t\tid: Y,\n                // \t\tjsonApplication: Y\n                // \t}\n                // }\n                versions: {\n                    id: Y,\n                    jsonApplication: Y\n                }\n            },\n            from: [\n                a = Q.Application,\n                // cv = a.currentVersion.innerJoin(),\n                // av = cv.applicationVersion.innerJoin()\n                av = a.versions.innerJoin()\n            ]\n        });\n    }\n    async findMapByVersionIds(applicationVersionIds) {\n        const applicationMapByIndex = new Map();\n        let s, sv;\n        const applications = await this.db.find.tree({\n            select: {\n                index: Y,\n                domain: {\n                    id: Y,\n                    name: Y\n                },\n                name: Y,\n                fullName: Y,\n                versions: {\n                    id: Y,\n                    majorVersion: Y,\n                    minorVersion: Y,\n                    patchVersion: Y\n                }\n            },\n            from: [\n                s = Q.Application,\n                sv = s.versions.innerJoin()\n            ],\n            where: sv.id.in(applicationVersionIds)\n        });\n        for (const application of applications) {\n            for (const applicationVersion of application.versions) {\n                applicationMapByIndex.set(applicationVersion.id, application);\n            }\n        }\n        return applicationMapByIndex;\n    }\n    async findMaxIndex() {\n        const s = Q.Application;\n        return await this.airportDatabase.findOne.field({\n            select: max(s.index),\n            from: [\n                s\n            ]\n        });\n    }\n    async findMaxVersionedMapByApplicationAndDomainNames(applicationDomainNames, applicationNames) {\n        const maxVersionedMapByApplicationAndDomainNames = new Map();\n        let sv;\n        let s;\n        let d;\n        let sMaV;\n        let sMiV;\n        const applicationLookupRecords = await this.airportDatabase.find.tree({\n            from: [\n                sMiV = tree({\n                    from: [\n                        sMaV = tree({\n                            from: [\n                                s = Q.Application,\n                                sv = s.versions.innerJoin(),\n                                d = s.domain.innerJoin()\n                            ],\n                            select: {\n                                index: s.index,\n                                domainId: d.id,\n                                domainName: d.name,\n                                name: s.name,\n                                majorVersion: max(sv.majorVersion),\n                                minorVersion: sv.minorVersion,\n                                patchVersion: sv.patchVersion,\n                            },\n                            where: and(d.name.in(applicationDomainNames), s.name.in(applicationNames)),\n                            groupBy: [\n                                s.index,\n                                d.id,\n                                d.name,\n                                s.name,\n                                sv.minorVersion,\n                                sv.patchVersion,\n                            ]\n                        })\n                    ],\n                    select: {\n                        index: sMaV.index,\n                        domainId: sMaV.domainId,\n                        domainName: sMaV.domainName,\n                        name: sMaV.name,\n                        majorVersion: sMaV.majorVersion,\n                        minorVersion: max(sMaV.minorVersion),\n                        patchVersion: sMaV.patchVersion,\n                    },\n                    groupBy: [\n                        sMaV.index,\n                        sMaV.domainId,\n                        sMaV.domainName,\n                        sMaV.name,\n                        sMaV.majorVersion,\n                        sMaV.patchVersion\n                    ]\n                })\n            ],\n            select: {\n                index: sMiV.index,\n                domain: {\n                    id: sMiV.domainId,\n                    name: sMiV.domainName\n                },\n                name: sMiV.name,\n                majorVersion: sMiV.majorVersion,\n                minorVersion: sMiV.minorVersion,\n                patchVersion: max(sMiV.patchVersion),\n            },\n            groupBy: [\n                sMiV.index,\n                sMiV.domainId,\n                sMiV.domainName,\n                sMiV.name,\n                sMiV.majorVersion,\n                sMiV.minorVersion\n            ]\n        });\n        for (const applicationLookupRecord of applicationLookupRecords) {\n            ensureChildJsMap(maxVersionedMapByApplicationAndDomainNames, applicationLookupRecord.domain.name)\n                .set(applicationLookupRecord.name, applicationLookupRecord);\n        }\n        return maxVersionedMapByApplicationAndDomainNames;\n    }\n    async setStatusByIndexes(indexes, status) {\n        let s;\n        await this.db.updateWhere({\n            update: s = Q.Application,\n            set: {\n                status\n            },\n            where: s.index.in(indexes)\n        });\n    }\n    async findMapByFullNames(fullApplicationNames) {\n        const mapByFullName = new Map();\n        let s;\n        const records = await this.db.find.tree({\n            select: {},\n            from: [\n                s = Q.Application\n            ],\n            where: s.fullName.in(fullApplicationNames)\n        });\n        for (const record of records) {\n            mapByFullName.set(record.fullName, record);\n        }\n        return mapByFullName;\n    }\n    async findByDomainNamesAndApplicationNames(domainNames, applicationNames) {\n        let s;\n        let d;\n        return await this.db.find.tree({\n            select: {\n                index: Y,\n                domain: {\n                    id: Y,\n                    name: Y\n                },\n                fullName: Y,\n                name: Y\n            },\n            from: [\n                s = Q.Application,\n                d = s.domain.innerJoin()\n            ],\n            where: and(d.name.in(domainNames), s.name.in(applicationNames))\n        });\n    }\n    async findByIndex(index) {\n        let a;\n        let d;\n        return await this.db.findOne.tree({\n            select: {\n                ...ALL_FIELDS,\n                domain: {}\n            },\n            from: [\n                a = Q.Application,\n                d = a.domain.innerJoin()\n            ],\n            where: a.index.equals(index)\n        });\n    }\n    async insert(applications) {\n        let a;\n        const values = [];\n        for (const application of applications) {\n            values.push([\n                application.index, application.domain.id, application.scope,\n                application.fullName, application.name,\n                // application.packageName,\n                application.status, application.signature\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: a = Q.Application,\n            columns: [\n                a.index,\n                a.domain.id,\n                a.scope,\n                a.fullName,\n                a.name,\n                // a.packageName,\n                a.status,\n                a.signature\n            ],\n            values\n        });\n    }\n};\nApplicationDao = __decorate([\n    Injected()\n], ApplicationDao);\nexport { ApplicationDao };\n//# sourceMappingURL=ApplicationDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseApplicationEntityDao, Q, } from '../generated/generated';\nlet ApplicationEntityDao = class ApplicationEntityDao extends BaseApplicationEntityDao {\n    async findAllForApplicationVersions(applicationVersionIds) {\n        let se;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                se = Q.ApplicationEntity\n            ],\n            where: se.applicationVersion.id.in(applicationVersionIds)\n        });\n    }\n    async insert(applicationEntities) {\n        let se;\n        const values = [];\n        for (const applicationEntity of applicationEntities) {\n            values.push([\n                applicationEntity.id, applicationEntity.index,\n                applicationEntity.isLocal, applicationEntity.isRepositoryEntity,\n                applicationEntity.name, applicationEntity.tableConfig,\n                applicationEntity.applicationVersion.id,\n                applicationEntity.deprecatedSinceVersion ? applicationEntity.deprecatedSinceVersion.id : null,\n                applicationEntity.removedInVersion ? applicationEntity.removedInVersion.id : null,\n                applicationEntity.sinceVersion ? applicationEntity.sinceVersion.id : null,\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: se = Q.ApplicationEntity,\n            columns: [\n                se.id,\n                se.index,\n                se.isLocal,\n                se.isRepositoryEntity,\n                se.name,\n                se.tableConfig,\n                se.applicationVersion.id,\n                se.deprecatedSinceVersion.id,\n                se.removedInVersion.id,\n                se.sinceVersion.id\n            ],\n            values\n        });\n    }\n};\nApplicationEntityDao = __decorate([\n    Injected()\n], ApplicationEntityDao);\nexport { ApplicationEntityDao };\n//# sourceMappingURL=ApplicationEntityDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseApplicationPropertyColumnDao, Q, } from '../generated/generated';\nlet ApplicationPropertyColumnDao = class ApplicationPropertyColumnDao extends BaseApplicationPropertyColumnDao {\n    async findAllForColumns(columnIds) {\n        let rc;\n        return this.db.find.tree({\n            select: {},\n            from: [\n                rc = Q.ApplicationPropertyColumn\n            ],\n            where: rc.column.id.in(columnIds)\n        });\n    }\n    async insert(applicationPropertyColumns) {\n        let spc;\n        const values = [];\n        for (const applicationPropertyColumn of applicationPropertyColumns) {\n            values.push([\n                applicationPropertyColumn.column.id, applicationPropertyColumn.property.id,\n                applicationPropertyColumn.deprecatedSinceVersion ? applicationPropertyColumn.deprecatedSinceVersion.id : null,\n                applicationPropertyColumn.removedInVersion ? applicationPropertyColumn.removedInVersion.id : null,\n                applicationPropertyColumn.sinceVersion ? applicationPropertyColumn.sinceVersion.id : null,\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: spc = Q.ApplicationPropertyColumn,\n            columns: [\n                spc.column.id,\n                spc.property.id,\n                spc.deprecatedSinceVersion.id,\n                spc.removedInVersion.id,\n                spc.sinceVersion.id\n            ],\n            values\n        });\n    }\n};\nApplicationPropertyColumnDao = __decorate([\n    Injected()\n], ApplicationPropertyColumnDao);\nexport { ApplicationPropertyColumnDao };\n//# sourceMappingURL=ApplicationPropertyColumnDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseApplicationPropertyDao, Q, } from '../generated/generated';\nlet ApplicationPropertyDao = class ApplicationPropertyDao extends BaseApplicationPropertyDao {\n    async findAllForEntities(entityIds) {\n        let p;\n        return this.db.find.tree({\n            select: {},\n            from: [\n                p = Q.ApplicationProperty\n            ],\n            where: p.entity.id.in(entityIds)\n        });\n    }\n    async insert(applicationProperties) {\n        let sp;\n        const values = [];\n        for (const applicationProperty of applicationProperties) {\n            values.push([\n                applicationProperty.id, applicationProperty.index,\n                applicationProperty.name, applicationProperty.isId,\n                applicationProperty.entity.id,\n                applicationProperty.deprecatedSinceVersion ? applicationProperty.deprecatedSinceVersion.id : null,\n                applicationProperty.removedInVersion ? applicationProperty.removedInVersion.id : null,\n                applicationProperty.sinceVersion ? applicationProperty.sinceVersion.id : null,\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: sp = Q.ApplicationProperty,\n            columns: [\n                sp.id,\n                sp.index,\n                sp.name,\n                sp.isId,\n                sp.entity.id,\n                sp.deprecatedSinceVersion.id,\n                sp.removedInVersion.id,\n                sp.sinceVersion.id\n            ],\n            values\n        });\n    }\n};\nApplicationPropertyDao = __decorate([\n    Injected()\n], ApplicationPropertyDao);\nexport { ApplicationPropertyDao };\n//# sourceMappingURL=ApplicationPropertyDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseApplicationReferenceDao, Q, } from '../generated/generated';\nlet ApplicationReferenceDao = class ApplicationReferenceDao extends BaseApplicationReferenceDao {\n    async findAllForApplicationVersions(applicationVersionIds) {\n        let sr;\n        return await this.db.find.tree({\n            select: {},\n            from: [\n                sr = Q.ApplicationReference\n            ],\n            where: sr.ownApplicationVersion.id.in(applicationVersionIds)\n        });\n    }\n    async insert(applicationReferences) {\n        let sr;\n        const values = [];\n        for (const applicationReference of applicationReferences) {\n            values.push([\n                applicationReference.ownApplicationVersion.id,\n                applicationReference.referencedApplicationVersion.id,\n                applicationReference.index,\n                applicationReference.deprecatedSinceVersion ? applicationReference.deprecatedSinceVersion.id : null,\n                applicationReference.removedInVersion ? applicationReference.removedInVersion.id : null,\n                applicationReference.sinceVersion ? applicationReference.sinceVersion.id : null,\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: sr = Q.ApplicationReference,\n            columns: [\n                sr.ownApplicationVersion.id,\n                sr.referencedApplicationVersion.id,\n                sr.index,\n                sr.deprecatedSinceVersion.id,\n                sr.removedInVersion.id,\n                sr.sinceVersion.id\n            ],\n            values\n        });\n    }\n};\nApplicationReferenceDao = __decorate([\n    Injected()\n], ApplicationReferenceDao);\nexport { ApplicationReferenceDao };\n//# sourceMappingURL=ApplicationReferenceDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { or } from '@airport/air-traffic-control';\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseApplicationRelationColumnDao, Q, } from '../generated/generated';\nlet ApplicationRelationColumnDao = class ApplicationRelationColumnDao extends BaseApplicationRelationColumnDao {\n    async findAllForColumns(columnIds) {\n        let rc;\n        return this.db.find.tree({\n            select: {},\n            from: [\n                rc = Q.ApplicationRelationColumn\n            ],\n            where: or(rc.oneColumn.id.in(columnIds), rc.manyColumn.id.in(columnIds))\n        });\n    }\n    async insert(applicationRelationColumns) {\n        let src;\n        const values = [];\n        for (const applicationRelationColumn of applicationRelationColumns) {\n            values.push([\n                applicationRelationColumn.id,\n                applicationRelationColumn.manyColumn ? applicationRelationColumn.manyColumn.id : null,\n                applicationRelationColumn.oneColumn ? applicationRelationColumn.oneColumn.id : null,\n                applicationRelationColumn.manyRelation ? applicationRelationColumn.manyRelation.id : null,\n                applicationRelationColumn.oneRelation ? applicationRelationColumn.oneRelation.id : null,\n                applicationRelationColumn.parentRelation ? applicationRelationColumn.parentRelation.id : null,\n                applicationRelationColumn.deprecatedSinceVersion ? applicationRelationColumn.deprecatedSinceVersion.id : null,\n                applicationRelationColumn.removedInVersion ? applicationRelationColumn.removedInVersion.id : null,\n                applicationRelationColumn.sinceVersion ? applicationRelationColumn.sinceVersion.id : null,\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: src = Q.ApplicationRelationColumn,\n            columns: [\n                src.id,\n                src.manyColumn.id,\n                src.oneColumn.id,\n                src.manyRelation.id,\n                src.oneRelation.id,\n                src.parentRelation.id,\n                src.deprecatedSinceVersion.id,\n                src.removedInVersion.id,\n                src.sinceVersion.id\n            ],\n            values\n        });\n    }\n};\nApplicationRelationColumnDao = __decorate([\n    Injected()\n], ApplicationRelationColumnDao);\nexport { ApplicationRelationColumnDao };\n//# sourceMappingURL=ApplicationRelationColumnDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { undefinedToNull } from '@airport/ground-control';\nimport { BaseApplicationRelationDao, Q, } from '../generated/generated';\nlet ApplicationRelationDao = class ApplicationRelationDao extends BaseApplicationRelationDao {\n    async findAllForProperties(propertyIds) {\n        let r;\n        return this.db.find.tree({\n            select: {},\n            from: [\n                r = Q.ApplicationRelation\n            ],\n            where: r.property.id.in(propertyIds)\n        });\n    }\n    async insert(applicationRelations) {\n        let sr;\n        const values = [];\n        for (const applicationRelation of applicationRelations) {\n            values.push([\n                applicationRelation.id, applicationRelation.index,\n                applicationRelation.property.id,\n                undefinedToNull(applicationRelation.foreignKey),\n                undefinedToNull(applicationRelation.manyToOneElems),\n                undefinedToNull(applicationRelation.oneToManyElems),\n                applicationRelation.relationType, applicationRelation.isId,\n                applicationRelation.entity.id, applicationRelation.relationEntity.id,\n                applicationRelation.deprecatedSinceVersion ? applicationRelation.deprecatedSinceVersion.id : null,\n                applicationRelation.removedInVersion ? applicationRelation.removedInVersion.id : null,\n                applicationRelation.sinceVersion ? applicationRelation.sinceVersion.id : null,\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: sr = Q.ApplicationRelation,\n            columns: [\n                sr.id,\n                sr.index,\n                sr.property.id,\n                sr.foreignKey,\n                sr.manyToOneElems,\n                sr.oneToManyElems,\n                sr.relationType,\n                sr.isId,\n                sr.entity.id,\n                sr.relationEntity.id,\n                sr.deprecatedSinceVersion.id,\n                sr.removedInVersion.id,\n                sr.sinceVersion.id\n            ],\n            values\n        });\n    }\n};\nApplicationRelationDao = __decorate([\n    Injected()\n], ApplicationRelationDao);\nexport { ApplicationRelationDao };\n//# sourceMappingURL=ApplicationRelationDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { and, Y } from '@airport/air-traffic-control';\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseApplicationVersionDao, Q } from '../generated/generated';\nlet ApplicationVersionDao = class ApplicationVersionDao extends BaseApplicationVersionDao {\n    /*\n    async findAllLatestForApplicationIndexes(\n        applicationIndexes: ApplicationIndex[]\n    ): Promise<IApplicationVersion[]> {\n        let sv: QApplicationVersion\n\n        return await this.db.find.tree({\n            from: [\n                sv = Q.ApplicationVersion\n            ],\n            select: {},\n            where: and(\n                sv.id.in(this.idsForMaxVersionSelect()),\n                sv.application.index.in(applicationIndexes)\n            )\n        })\n    }\n    */\n    async findAllActiveOrderByApplicationIndexAndId() {\n        let sv;\n        // let s: QApplication\n        return await this.db.find.tree({\n            from: [\n                sv = Q.ApplicationVersion,\n                // s = sv.application.innerJoin()\n            ],\n            select: {},\n            orderBy: [\n                sv.application.index.asc(),\n                sv.id.desc()\n            ]\n        });\n    }\n    async findByDomainNamesAndApplicationNames(domainNames, applicationNames) {\n        let sv;\n        let s;\n        let d;\n        return await this.db.find.tree({\n            select: {\n                id: Y,\n                integerVersion: Y,\n                application: {\n                    domain: {\n                        name: Y\n                    },\n                    fullName: Y,\n                    name: Y\n                }\n            },\n            from: [\n                sv = Q.ApplicationVersion,\n                s = sv.application.innerJoin(),\n                d = s.domain.innerJoin()\n            ],\n            where: and(d.name.in(domainNames), s.name.in(applicationNames))\n        });\n    }\n    /*\n    async findMaxVersionedMapByApplicationAndDomainNames(\n        applicationDomainNames: DomainName[],\n        applicationNames: ApplicationName[]\n    ): Promise<Map<DomainName, Map<ApplicationName, IApplicationVersion>>> {\n        const maxVersionedMapByApplicationAndDomainNames\n                  : Map<DomainName, Map<ApplicationName, IApplicationVersion>>\n                  = new Map()\n\n        let sv: QApplicationVersion\n        let s: QApplication\n        let d: QDomain\n\n        const maxApplicationVersions: IApplicationVersion[] = <any>await this.db.find.tree({\n            select: {\n                integerVersion: Y,\n                majorVersion: Y,\n                minorVersion: Y,\n                patchVersion: Y,\n                application: {\n                    index: Y,\n                    name: Y,\n                    domain: {\n                        id: Y,\n                        name: Y\n                    }\n                },\n                id: Y\n            },\n            from: [\n                sv = Q.ApplicationVersion,\n                s = sv.application.innerJoin(),\n                d = s.domain.innerJoin()\n            ],\n            where: and(\n                sv.id.in(this.idsForMaxVersionSelect()),\n                d.name.in(applicationDomainNames),\n                s.name.in(applicationNames)\n            ),\n        })\n\n        for (const maxApplicationVersion of maxApplicationVersions) {\n            const application = maxApplicationVersion.application\n            this.utils.ensureChildJsMap(\n                maxVersionedMapByApplicationAndDomainNames, application.domain.name)\n                .set(application.name, maxApplicationVersion)\n        }\n\n\n        return maxVersionedMapByApplicationAndDomainNames\n    }\n\n    private idsForMaxVersionSelect(): RawFieldQuery<IQNumberField> {\n        let svMax\n        let sv2: QApplicationVersion\n\n        return field({\n            from: [\n                svMax = tree({\n                    from: [\n                        sv2 = Q.ApplicationVersion\n                    ],\n                    select: distinct({\n                        integerVersion: max(sv2.integerVersion),\n                        id: sv2.id,\n                        applicationIndex: sv2.application.index\n                    })\n                })\n            ],\n            select: svMax.id\n        })\n    }\n*/\n    async insert(applicationVersions) {\n        let sv;\n        const values = [];\n        for (const applicationVersion of applicationVersions) {\n            values.push([\n                applicationVersion.id, applicationVersion.integerVersion,\n                applicationVersion.versionString, applicationVersion.majorVersion,\n                applicationVersion.minorVersion, applicationVersion.patchVersion,\n                applicationVersion.application.index, applicationVersion.jsonApplication\n            ]);\n        }\n        await this.db.insertValuesGenerateIds({\n            insertInto: sv = Q.ApplicationVersion,\n            columns: [\n                sv.id,\n                sv.integerVersion,\n                sv.versionString,\n                sv.majorVersion,\n                sv.minorVersion,\n                sv.patchVersion,\n                sv.application.index,\n                sv.jsonApplication\n            ],\n            values\n        });\n    }\n};\nApplicationVersionDao = __decorate([\n    Injected()\n], ApplicationVersionDao);\nexport { ApplicationVersionDao };\n//# sourceMappingURL=ApplicationVersionDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseApplicationVersionDuo } from '../generated/generated';\nlet ApplicationVersionDuo = class ApplicationVersionDuo extends BaseApplicationVersionDuo {\n};\nApplicationVersionDuo = __decorate([\n    Injected()\n], ApplicationVersionDuo);\nexport { ApplicationVersionDuo };\n//# sourceMappingURL=ApplicationVersionDuo.js.map","import { lib } from '@airport/direction-indicator';\nimport { DomainDao } from './dao/DomainDao';\nimport { ApplicationColumnDao } from './dao/ApplicationColumnDao';\nimport { ApplicationDao } from './dao/ApplicationDao';\nimport { ApplicationEntityDao } from './dao/ApplicationEntityDao';\nimport { ApplicationPropertyColumnDao } from './dao/ApplicationPropertyColumnDao';\nimport { ApplicationPropertyDao } from './dao/ApplicationPropertyDao';\nimport { ApplicationReferenceDao } from './dao/ApplicationReferenceDao';\nimport { ApplicationRelationColumnDao } from './dao/ApplicationRelationColumnDao';\nimport { ApplicationRelationDao } from './dao/ApplicationRelationDao';\nimport { ApplicationVersionDao } from './dao/ApplicationVersionDao';\nimport { ApplicationVersionDuo } from './duo/ApplicationVersionDuo';\nconst trafficPattern = lib('traffic-pattern');\nexport const DOMAIN_DAO = trafficPattern.token({\n    class: DomainDao,\n    interface: 'IDomainDao',\n    token: 'DOMAIN_DAO'\n});\nexport const APPLICATION_COLUMN_DAO = trafficPattern.token({\n    class: ApplicationColumnDao,\n    interface: 'IApplicationColumnDao',\n    token: 'APPLICATION_COLUMN_DAO'\n});\nexport const APPLICATION_DAO = trafficPattern.token({\n    class: ApplicationDao,\n    interface: 'IApplicationDao',\n    token: 'APPLICATION_DAO'\n});\nexport const APPLICATION_ENTITY_DAO = trafficPattern.token({\n    class: ApplicationEntityDao,\n    interface: 'IApplicationEntityDao',\n    token: 'APPLICATION_ENTITY_DAO'\n});\nexport const APPLICATION_PROPERTY_COLUMN_DAO = trafficPattern.token({\n    class: ApplicationPropertyColumnDao,\n    interface: 'IApplicationPropertyColumnDao',\n    token: 'APPLICATION_PROPERTY_COLUMN_DAO'\n});\nexport const APPLICATION_PROPERTY_DAO = trafficPattern.token({\n    class: ApplicationPropertyDao,\n    interface: 'IApplicationPropertyDao',\n    token: 'APPLICATION_PROPERTY_DAO'\n});\nexport const APPLICATION_REFERENCE_DAO = trafficPattern.token({\n    class: ApplicationReferenceDao,\n    interface: 'IApplicationReferenceDao',\n    token: 'APPLICATION_REFERENCE_DAO'\n});\nexport const APPLICATION_RELATION_COLUMN_DAO = trafficPattern.token({\n    class: ApplicationRelationColumnDao,\n    interface: 'IApplicationRelationColumnDao',\n    token: 'APPLICATION_RELATION_COLUMN_DAO'\n});\nexport const APPLICATION_RELATION_DAO = trafficPattern.token({\n    class: ApplicationRelationDao,\n    interface: 'IApplicationRelationDao',\n    token: 'APPLICATION_RELATION_DAO'\n});\nexport const APPLICATION_VERSION_DAO = trafficPattern.token({\n    class: ApplicationVersionDao,\n    interface: 'IApplicationVersionDao',\n    token: 'APPLICATION_VERSION_DAO'\n});\nexport const APPLICATION_VERSION_DUO = trafficPattern.token({\n    class: ApplicationVersionDuo,\n    interface: 'IApplicationVersionDuo',\n    token: 'APPLICATION_VERSION_DUO'\n});\n//# sourceMappingURL=tokens.js.map","import { SortOrder } from '@airport/ground-control';\nimport { AbstractEntityOrderByParser } from './AbstractEntityOrderByParser';\n/**\n * Created by Papa on 10/16/2016.\n */\n/**\n * Will hierarchically order the results of the query using breadth-first processing.\n * Within a given entity will take into account the sort order specified in the Order By\n * clause.\n */\nexport class EntityOrderByParser extends AbstractEntityOrderByParser {\n    /**\n     * Using the following algorithm\n     * http://stackoverflow.com/questions/2549541/performing-breadth-first-search-recursively\n     * :\n     BinarySearchTree.prototype.breadthFirst = function() {\n      var result = '',\n      queue = [],\n      current = this.root;\n      if (!current) return null;\n      queue.push(current);\n      while (current = queue.shift()) {\n            result += current.value + ' ';\n            current.left && queue.push(current.left);\n            current.right && queue.push(current.right);\n        }\n      return result;\n     }\n     *\n     * @param joinTree\n     * @param qEntityMapByAlias\n     * @returns {string}\n     */\n    getOrderByFragment(joinTree, qEntityMapByAlias, context) {\n        let orderByFragments = [];\n        let orderBy = [];\n        if (this.orderBy) {\n            orderBy = this.orderBy.slice();\n        }\n        const selectFragmentQueue = [];\n        let currentSelectFragment = this.rootSelectClauseFragment;\n        selectFragmentQueue.push(currentSelectFragment);\n        const joinNodeQueue = [];\n        let currentJoinNode = joinTree;\n        joinNodeQueue.push(currentJoinNode);\n        // Perform breadth-first select clause traversal\n        while ((currentSelectFragment = selectFragmentQueue.shift())\n            && (currentJoinNode = joinNodeQueue.shift())) {\n            const tableAlias = this.relationManager.getAlias(currentJoinNode.jsonRelation);\n            const dbEntity = qEntityMapByAlias[tableAlias].__driver__.dbEntity;\n            const currentEntityOrderBy = [];\n            let parentNodeFound;\n            orderBy = orderBy.filter((orderByField) => {\n                if (parentNodeFound) {\n                    return true;\n                }\n                const orderByDbEntity = this.airportDatabase.applications[orderByField.si]\n                    .currentVersion[0].applicationVersion.entities[orderByField.ti];\n                const dbColumn = orderByDbEntity.columns[orderByField.ci];\n                if (this.isForParentNode(currentJoinNode, orderByField)) {\n                    throw new Error(`Found out of order entry in Order By \r\n\t\t\t\t\t[${orderByDbEntity.applicationVersion.application.name} - ${orderByDbEntity.name}.${dbColumn.name}].\r\n\t\t\t\t\tEntries must be ordered hierarchically, in breadth-first order.`);\n                }\n                if (orderByField.si !== dbEntity.applicationVersion.application.index || orderByField.ti !== dbEntity.index) {\n                    return true;\n                }\n                this.qValidator.validateReadProperty(dbColumn);\n                orderByField.fa = `${tableAlias}.${dbColumn.name}`;\n                currentEntityOrderBy.push(orderByField);\n                return false;\n            });\n            // NOTE: Order by Ids is necessary to correctly reconstruct \n            // the entity graph\n            const allColumnsToSortBy = [];\n            const idColumnsToSortBy = [];\n            // By now the select clause is guaranteed to have:\n            // Either all ID columns defined on the entity (if @Id columns are defined)\n            // Or ALL of the columns on the entity (if no @Id columns are defined)\n            for (const propertyName in currentSelectFragment) {\n                const dbProperty = dbEntity.propertyMap[propertyName];\n                if (dbProperty.relation && dbProperty.relation.length) {\n                    for (const dbPropertyColumn of dbProperty.propertyColumns) {\n                        const dbColumn = dbPropertyColumn.column;\n                        allColumnsToSortBy.push(dbColumn.name);\n                        if (dbProperty.isId) {\n                            idColumnsToSortBy.push(dbColumn.name);\n                        }\n                    }\n                    if (!currentJoinNode.childNodes.length) {\n                        continue;\n                    }\n                    const dbRelation = dbProperty.relation[0];\n                    const dbEntity = dbRelation.relationEntity;\n                    const matchingNodes = currentJoinNode.childNodes.filter(childNode => {\n                        const jsonRelation = childNode.jsonRelation;\n                        return jsonRelation.si === dbEntity.applicationVersion.application.index\n                            && jsonRelation.ti === dbEntity.index;\n                    });\n                    if (!matchingNodes.length) {\n                        return;\n                    }\n                    selectFragmentQueue.push(this.rootSelectClauseFragment[propertyName]);\n                    const childJoinNode = currentJoinNode.getEntityRelationChildNode(dbRelation);\n                    joinNodeQueue.push(childJoinNode);\n                }\n                else {\n                    const dbColumn = dbProperty.propertyColumns[0].column;\n                    allColumnsToSortBy.push(dbColumn.name);\n                    // Tentatively add column to the list of columnIndexes to sort by\n                    if (dbProperty.isId) {\n                        idColumnsToSortBy.push(dbColumn.name);\n                    }\n                }\n            }\n            let entityOrderByFragments = this.buildOrderByFragmentForEntity(tableAlias, allColumnsToSortBy, idColumnsToSortBy, currentEntityOrderBy, qEntityMapByAlias);\n            orderByFragments = orderByFragments.concat(entityOrderByFragments);\n        }\n        if (orderBy.length) {\n            throw new Error(`\r\n\t\t\tFound entries in Order By for tables not found in select clause.  \r\n\t\t\tEntries must be ordered hierarchically, in breadth-first order.`);\n        }\n        return orderByFragments.join(', ');\n    }\n    buildOrderByFragmentForEntity(tableAlias, allColumnsToSortBy, idColumnsToSortBy, currentEntityOrderBy, qEntityMapByAlias) {\n        const finalOrderByColumnsFragments = [];\n        const inputOrderByPropertyNameSet = {};\n        const dbEntity = qEntityMapByAlias[tableAlias].__driver__.dbEntity;\n        // First add the fields specified in the Order By clause for this entity\n        currentEntityOrderBy.forEach((orderByField) => {\n            finalOrderByColumnsFragments.push(orderByField);\n            const columnName = dbEntity.columns[orderByField.ci].name;\n            inputOrderByPropertyNameSet[columnName] = true;\n        });\n        if (idColumnsToSortBy.length) {\n            // Then if the ID column is present in the result set, just order by id\n            for (const idColumnName of idColumnsToSortBy) {\n                if (!inputOrderByPropertyNameSet[idColumnName]) {\n                    finalOrderByColumnsFragments.push({\n                        fa: `${tableAlias}.${idColumnName}`,\n                        so: SortOrder.ASCENDING\n                    });\n                }\n            }\n        }\n        else {\n            allColumnsToSortBy.forEach((columnName) => {\n                if (!inputOrderByPropertyNameSet[columnName]) {\n                    finalOrderByColumnsFragments.push({\n                        fa: `${tableAlias}.${columnName}`,\n                        so: SortOrder.ASCENDING\n                    });\n                }\n            });\n        }\n        return this.getCommonOrderByFragment(finalOrderByColumnsFragments);\n    }\n    isForParentNode(joinTreeNode, orderByField) {\n        do {\n            joinTreeNode = joinTreeNode.parentNode;\n            if (!joinTreeNode) {\n                return false;\n            }\n            if (orderByField.si === joinTreeNode.jsonRelation.si\n                && orderByField.ti === joinTreeNode.jsonRelation.ti) {\n                return true;\n            }\n        } while (joinTreeNode.parentNode);\n        return false;\n    }\n}\n//# sourceMappingURL=EntityOrderByParser.js.map","import { SortOrder } from '@airport/ground-control';\nexport class AbstractEntityOrderByParser {\n    constructor(rootSelectClauseFragment, airportDatabase, qValidator, relationManager, orderBy) {\n        this.rootSelectClauseFragment = rootSelectClauseFragment;\n        this.airportDatabase = airportDatabase;\n        this.qValidator = qValidator;\n        this.relationManager = relationManager;\n        this.orderBy = orderBy;\n    }\n    getCommonOrderByFragment(orderByFields) {\n        return orderByFields.map((orderByField) => {\n            switch (orderByField.so) {\n                case SortOrder.ASCENDING:\n                    return `${orderByField.fa} ASC`;\n                case SortOrder.DESCENDING:\n                    return `${orderByField.fa} DESC`;\n            }\n        })\n            .join(', ');\n    }\n}\n//# sourceMappingURL=AbstractEntityOrderByParser.js.map","import { SortOrder } from '@airport/ground-control';\n/**\n * Created by Papa on 10/16/2016.\n */\n/**\n * Will order the results exactly as specified in the Order By clause\n */\nexport class ExactOrderByParser {\n    constructor(validator) {\n        this.validator = validator;\n    }\n    getOrderByFragment(rootSelectClauseFragment, orderBy) {\n        return orderBy.map((orderByField) => {\n            this.validator.validateAliasedFieldAccess(orderByField.fa);\n            switch (orderByField.so) {\n                case SortOrder.ASCENDING:\n                    return `${orderByField.fa} ASC`;\n                case SortOrder.DESCENDING:\n                    return `${orderByField.fa} DESC`;\n            }\n        })\n            .join(', ');\n    }\n}\n//# sourceMappingURL=ExactOrderByParser.js.map","import { SortOrder } from '@airport/ground-control';\n/**\n * Created by Papa on 11/8/2016.\n */\n/**\n * Will hierarchically order the results of the query using breadth-first processing.\n * Within a given sub-select facade will take into account the sort order specified in the Order\n * By clause.\n */\nexport class MappedOrderByParser {\n    constructor(validator) {\n        this.validator = validator;\n    }\n    /**\n     * Using the following algorithm\n     * http://stackoverflow.com/questions/2549541/performing-breadth-first-search-recursively\n     * :\n     BinarySearchTree.prototype.breadthFirst = function() {\n      var result = '',\n      queue = [],\n      current = this.root;\n\n      if (!current) return null;\n      queue.push(current);\n\n      while (current = queue.shift()) {\n            result += current.value + ' ';\n            current.left && queue.push(current.left);\n            current.right && queue.push(current.right);\n        }\n      return result;\n     }\n     *\n     * @param joinTree\n     * @param qEntityMapByAlias\n     * @returns {string}\n     */\n    getOrderByFragment(rootSelectClauseFragment, originalOrderBy) {\n        let orderByFragments = [];\n        let orderBy = [];\n        if (originalOrderBy) {\n            orderBy = originalOrderBy.slice();\n        }\n        let selectFragmentQueue = [];\n        let currentSelectFragment = rootSelectClauseFragment;\n        selectFragmentQueue.push(currentSelectFragment);\n        // Breadth first traversal using a queue\n        while (currentSelectFragment = selectFragmentQueue.shift()) {\n            let currentSelectFragmentFieldSet = {};\n            for (let propertyName in currentSelectFragment) {\n                let field = currentSelectFragment[propertyName];\n                if (!field.appliedFunctions) {\n                    selectFragmentQueue.push(field);\n                    continue;\n                }\n                currentSelectFragmentFieldSet[field.fa] = true;\n            }\n            let currentEntityOrderBy = [];\n            // First add the fields specified in the query Order By clause for this entity, in the\n            // order they are specified\n            orderBy = orderBy.filter((orderByField) => {\n                if (!currentSelectFragmentFieldSet[orderByField.fa]) {\n                    return true;\n                }\n                delete currentSelectFragmentFieldSet[orderByField.fa];\n                currentEntityOrderBy.push(orderByField);\n                return false;\n            });\n            // Then add all the rest of the fields for this entity, we are maintaining the tree\n            // structure of the result\n            for (let alias in currentSelectFragmentFieldSet) {\n                currentEntityOrderBy.push({\n                    fa: alias,\n                    so: SortOrder.ASCENDING\n                });\n            }\n            let entityOrderByFragments = this.buildOrderByFragmentForEntity(currentEntityOrderBy);\n            orderByFragments = orderByFragments.concat(entityOrderByFragments);\n        }\n        if (orderBy.length) {\n            throw new Error(`Found entries in Order By for tables not found in select clause.  Entries must be ordered hierarchically, in breadth-first order.`);\n        }\n        return orderByFragments.join(', ');\n    }\n    buildOrderByFragmentForEntity(orderByFields) {\n        return orderByFields.map((orderByField) => {\n            this.validator.validateAliasedFieldAccess(orderByField.fa);\n            switch (orderByField.so) {\n                case SortOrder.ASCENDING:\n                    return `${orderByField.fa} ASC`;\n                case SortOrder.DESCENDING:\n                    return `${orderByField.fa} DESC`;\n            }\n        });\n    }\n}\n//# sourceMappingURL=MappedOrderByParser.js.map","import { ensureChildArray, ensureChildMap } from '@airport/ground-control';\n// For MtO mapping in bridged queries\nexport class GraphMtoMapper {\n    constructor() {\n        // Map of all objects that have a given MtO reference\n        // [] MtO reference Application Entity Index\n        // [] MtO reference Entity Index\n        this.mtoStubReferenceMap = [];\n    }\n    addMtoReference(mtoStubReference, mtoEntityIdValue) {\n        const mtoDbEntity = mtoStubReference.mtoDbEntity;\n        let mtoEntitiesForTypeMap = ensureChildMap(ensureChildArray(this.mtoStubReferenceMap, mtoDbEntity.applicationVersion.application.index), mtoDbEntity.index);\n        let mtosForEntity = ensureChildMap(mtoEntitiesForTypeMap, mtoEntityIdValue);\n        mtosForEntity[mtoStubReference.mtoRelationField] = mtoStubReference;\n    }\n    populateMtos(entityMap) {\n        for (const applicationIndex in this.mtoStubReferenceMap) {\n            const mtoEntitiesForApplicationMap = this.mtoStubReferenceMap[applicationIndex];\n            for (const entityIndex in mtoEntitiesForApplicationMap) {\n                const mtoEntitiesForTypeMap = mtoEntitiesForApplicationMap[entityIndex];\n                for (let mtoEntityId in mtoEntitiesForTypeMap) {\n                    let mtosForEntity = mtoEntitiesForTypeMap[mtoEntityId];\n                    for (let mtoPropertyName in mtosForEntity) {\n                        let mtoStubReference = mtosForEntity[mtoPropertyName];\n                        let otmDbEntity = mtoStubReference.otmDbEntity;\n                        if (!entityMap[otmDbEntity.applicationVersion.application.index]) {\n                            continue;\n                        }\n                        let otmEntitiesForTypeMap = entityMap[otmDbEntity.applicationVersion.application.index][otmDbEntity.index];\n                        if (!otmEntitiesForTypeMap) {\n                            continue;\n                        }\n                        let otmEntity = otmEntitiesForTypeMap[mtoStubReference.otmEntityId];\n                        if (!otmEntity) {\n                            continue;\n                        }\n                        mtoStubReference.mtoParentObject[mtoStubReference.mtoRelationField] = otmEntity;\n                    }\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=GraphMtoMapper.js.map","import { ensureChildArray, ensureChildMap } from '@airport/ground-control';\n// For OtM mapping in bridged queries\nexport class GraphOtmMapper {\n    constructor() {\n        // Map of MtO referred objects by OtM references\n        // [] OTM Reference Entity Application Index\n        // [] OTM Reference Entity Index\n        this.mtoEntityReferenceMap = [];\n        // Map of objects with OtM references by\n        // [] OtM reference Application Entity Index\n        // [] OtM reference Entity Index\n        this.otmEntityReferenceMap = [];\n    }\n    addMtoReference(mtoStubReference, mtoEntityId, dbEntity, context) {\n        // If the @OneToMany({ mappedBy: ... }) is missing, there is nothing to map to\n        if (!mtoStubReference.otmEntityField) {\n            return;\n        }\n        // Add into mtoEntityReferenceMap\n        const otmDbEntity = mtoStubReference.otmDbEntity;\n        let mtoEntityReferenceMapForEntity = ensureChildMap(ensureChildArray(this.mtoEntityReferenceMap, otmDbEntity.applicationVersion.application.index), otmDbEntity.index);\n        // TODO: MappedEntityArray is not serializable, make it so before using\n        // let mtoEntityReferenceMapForEntity: {\n        // \t[otmReferenceId: string]: { [otmProperty: string]: MappedEntityArray<any> }\n        // }                 = ensureChildMap(\n        // \tensureChildArray(this.mtoEntityReferenceMap, otmDbEntity.applicationVersion.application.index),\n        // \totmDbEntity.index\n        // )\n        // let mapForOtmEntity: { [otmProperty: string]: MappedEntityArray<any> } = mtoEntityReferenceMapForEntity[mtoStubReference.otmEntityId]\n        let mapForOtmEntity = mtoEntityReferenceMapForEntity[mtoStubReference.otmEntityId];\n        if (!mapForOtmEntity) {\n            mapForOtmEntity = {};\n            mtoEntityReferenceMapForEntity[mtoStubReference.otmEntityId] = mapForOtmEntity;\n        }\n        // let mtoCollection: MappedEntityArray<any> = mapForOtmEntity[mtoStubReference.otmEntityField]\n        let mtoCollection = mapForOtmEntity[mtoStubReference.otmEntityField];\n        if (!mtoCollection) {\n            // mtoCollection = newMappedEntityArray<any>(this.applicationUtils, dbEntity)\n            mtoCollection = [];\n            mapForOtmEntity[mtoStubReference.otmEntityField]\n                = mtoCollection;\n        }\n        // mtoCollection.put(mtoStubReference.mtoParentObject)\n        mtoCollection.push(mtoStubReference.mtoParentObject);\n    }\n    addOtmReference(otmStubReference, otmEntityIdValue) {\n        // Add into otoEntityReferenceMap\n        const otmDbEntity = otmStubReference.otmDbEntity;\n        let mtoEntityReferenceMapForEntity = ensureChildMap(ensureChildArray(this.otmEntityReferenceMap, otmDbEntity.applicationVersion.application.index), otmDbEntity.index);\n        let otmRecordByPropertyName = mtoEntityReferenceMapForEntity[otmEntityIdValue];\n        if (!otmRecordByPropertyName) {\n            otmRecordByPropertyName = {};\n            mtoEntityReferenceMapForEntity[otmEntityIdValue] = otmRecordByPropertyName;\n        }\n        otmRecordByPropertyName[otmStubReference.otmPropertyName] = otmStubReference.otmObject;\n    }\n    populateOtms(entityMap, keepMappedEntityArrays) {\n        for (const applicationIndex in this.mtoEntityReferenceMap) {\n            const mtoEntityReferenceMapForApplication = this.mtoEntityReferenceMap[applicationIndex];\n            for (const entityIndex in mtoEntityReferenceMapForApplication) {\n                const mtoEntityReferenceMapForEntity = mtoEntityReferenceMapForApplication[entityIndex];\n                // If there are no entities of this type in query results, just keep the stubs\n                if (!entityMap[applicationIndex]) {\n                    continue;\n                }\n                let entityOfTypeMap = entityMap[applicationIndex][entityIndex];\n                // If there are no entities of this type in query results, just keep the stubs\n                if (!entityOfTypeMap) {\n                    continue;\n                }\n                // If there are no OTM for this type in query results, no mapping needs to happen\n                if (!this.otmEntityReferenceMap[applicationIndex]) {\n                    continue;\n                }\n                let entityWithOtmMap = this.otmEntityReferenceMap[applicationIndex][entityIndex];\n                // If there are no OTM for this type in query results, no mapping needs to happen\n                if (!entityWithOtmMap) {\n                    continue;\n                }\n                for (let otmEntityId in mtoEntityReferenceMapForEntity) {\n                    let referencedEntitiesByPropertyMap = mtoEntityReferenceMapForEntity[otmEntityId];\n                    let otmRecordByPropertyName = entityWithOtmMap[otmEntityId];\n                    // If there are no OtMs for this entity, no mapping needs to happen\n                    if (!otmRecordByPropertyName) {\n                        continue;\n                    }\n                    for (let otmProperty in referencedEntitiesByPropertyMap) {\n                        let otmEntity = otmRecordByPropertyName[otmProperty];\n                        // If OtM entity doesn't have this collection, no mapping needs to happen\n                        if (!otmEntity) {\n                            continue;\n                        }\n                        let referencedEntityMap = referencedEntitiesByPropertyMap[otmProperty];\n                        let otmCollection = otmEntity[otmProperty];\n                        // If @OneToMany isn't set yet\n                        if (!otmCollection) {\n                            otmEntity[otmProperty] = referencedEntityMap;\n                        }\n                        else {\n                            otmCollection.putAll(referencedEntityMap);\n                        }\n                        if (!keepMappedEntityArrays) {\n                            otmRecordByPropertyName[otmProperty] = otmEntity[otmProperty].slice();\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=GraphOtmMapper.js.map","/**\n * Created by Papa on 10/16/2016.\n */\nexport class GraphQueryConfiguration {\n    constructor() {\n        // This is for conflicts on OneToMany references\n        this.strict = true;\n        this.mapped = true;\n        // Always fail on no ID - bridged entities must have IDs\n        // failOnNoId: boolean = true;\n        // Assume there are no conflicts on ManyToOneReferences\n        //failOnManyToOneConflicts: boolean = true;\n    }\n}\nexport class AbstractObjectResultParser {\n    constructor(applicationUtils, entityStateManager) {\n        this.applicationUtils = applicationUtils;\n        this.entityStateManager = entityStateManager;\n    }\n    addManyToOneStub(resultObject, propertyName, relationInfos, context) {\n        let manyToOneStub = {};\n        this.entityStateManager.isStub(manyToOneStub);\n        resultObject[propertyName] = manyToOneStub;\n        let haveAllIds = true;\n        relationInfos.forEach((relationInfo) => {\n            if (this.applicationUtils.isIdEmpty(relationInfo.value)) {\n                haveAllIds = false;\n                return;\n            }\n            let lastObject;\n            let currentObject = manyToOneStub;\n            let currentIndex = 1;\n            const propertyNameChain = relationInfo.propertyNameChains[0];\n            while (currentIndex < propertyNameChain.length) {\n                // If there is no object in context, create one\n                if (!currentObject) {\n                    currentObject = {};\n                    this.entityStateManager.markAsStub(currentObject);\n                    lastObject[propertyNameChain[currentIndex - 1]] = currentObject;\n                }\n                // If it's not a leaf (more objects in the chain exist)\n                if (currentIndex < propertyNameChain.length - 1) {\n                    lastObject = currentObject;\n                    currentObject = lastObject[propertyNameChain[currentIndex]];\n                }\n                else {\n                    // Otherwise, just assign the value\n                    currentObject[propertyNameChain[currentIndex]] = relationInfo.value;\n                }\n                currentIndex++;\n            }\n        });\n        return haveAllIds;\n    }\n}\n//# sourceMappingURL=IEntityResultParser.js.map","import { \n// newMappedEntityArray,\nobjectExists } from '@airport/air-traffic-control';\nimport { ensureChildArray, ensureChildMap, EntityRelationType } from '@airport/ground-control';\nimport { GraphMtoMapper } from './GraphMtoMapper';\nimport { GraphOtmMapper } from './GraphOtmMapper';\nimport { AbstractObjectResultParser } from './IEntityResultParser';\n/**\n * Created by Papa on 10/16/2016.\n */\n/**\n * The goal of this parser to to bridge all entity references and arrive at an\n * inter-connected graph (where possible).\n */\nexport class EntityGraphResultParser extends AbstractObjectResultParser {\n    constructor(config, rootDbEntity, applicationUtils, entityStateManager) {\n        super(applicationUtils, entityStateManager);\n        this.config = config;\n        this.rootDbEntity = rootDbEntity;\n        // Keys can only be strings or numbers | TODO: change to JS Maps, if needed\n        this.entityMapByApplicationAndTableIndexes = [];\n        // One-To-Many & MtO temp stubs (before entityId is available)\n        this.otmStubBuffer = [];\n        this.mtoStubBuffer = [];\n        // Used in ENTITY_FLATTENED queries\n        this.currentResultRow = [];\n        this.otmMapper = new GraphOtmMapper();\n        this.mtoMapper = new GraphMtoMapper();\n    }\n    addEntity(entityAlias, dbEntity, context) {\n        return this.applicationUtils.getNewEntity(dbEntity);\n    }\n    addProperty(entityAlias, resultObject, dataType, propertyName, propertyValue) {\n        resultObject[propertyName] = propertyValue;\n        return objectExists(propertyValue);\n    }\n    bufferManyToOneStub(entityAlias, dbEntity, resultObject, propertyName, relationDbEntity, relationInfos, context) {\n        const oneToManyStubAdded = this.addManyToOneStub(resultObject, propertyName, relationInfos, context);\n        if (oneToManyStubAdded) {\n            const relatedEntityId = this.applicationUtils.getIdKey(resultObject[propertyName], relationDbEntity);\n            this.bufferManyToOne(dbEntity, propertyName, relationDbEntity, relatedEntityId);\n        }\n    }\n    bufferBlankManyToOneStub(entityAlias, resultObject, propertyName) {\n        resultObject[propertyName] = null;\n        // Nothing to do for bridged parser - bridging will map blanks, where possible\n    }\n    bufferManyToOneObject(entityAlias, dbEntity, resultObject, propertyName, relationDbEntity, childResultObject, context) {\n        resultObject[propertyName] = childResultObject;\n        const relatedEntityId = this.applicationUtils.getIdKey(resultObject[propertyName], relationDbEntity);\n        this.bufferManyToOne(dbEntity, propertyName, relationDbEntity, relatedEntityId);\n    }\n    bufferBlankManyToOneObject(entityAlias, resultObject, propertyName) {\n        resultObject[propertyName] = null;\n        // Nothing to do for bridged parser - bridging will map blanks, where possible\n    }\n    bufferOneToManyStub(otmDbEntity, otmPropertyName) {\n        this.bufferOneToMany(otmDbEntity, otmPropertyName);\n    }\n    bufferOneToManyCollection(entityAlias, resultObject, otmDbEntity, propertyName, relationDbEntity, childResultObject, context) {\n        this.bufferOneToMany(otmDbEntity, propertyName);\n        // TODO: MappedEntityArray is not serializable, make it so before using\n        // let childResultsArray = newMappedEntityArray(this.applicationUtils, relationDbEntity)\n        // childResultsArray.put(childResultObject)\n        // resultObject[propertyName] = childResultsArray\n        resultObject[propertyName] = [childResultObject];\n    }\n    bufferBlankOneToMany(entityAlias, resultObject, otmEntityName, propertyName, relationDbEntity, context) {\n        // TODO: MappedEntityArray is not serializable, make it so before using\n        // resultObject[propertyName] = newMappedEntityArray<any>(this.applicationUtils, relationDbEntity)\n        resultObject[propertyName] = [];\n    }\n    flushEntity(entityAlias, dbEntity, selectClauseFragment, entityIdValue, resultObject, context) {\n        if (!entityIdValue) {\n            throw new Error(`No Id provided for entity \r\n\t\t\t'${dbEntity.applicationVersion.application.name}.${dbEntity.name}'`);\n        }\n        let currentEntity = this.getEntityToFlush(dbEntity, selectClauseFragment, entityIdValue, resultObject, context);\n        this.flushRelationStubBuffers(entityIdValue, currentEntity, dbEntity, context);\n        return currentEntity;\n    }\n    flushRow() {\n        // Nothing to do, bridged queries don't rely on rows changing\n    }\n    bridge(parsedResults, selectClauseFragment, context) {\n        this.mtoMapper.populateMtos(this.entityMapByApplicationAndTableIndexes);\n        this.otmMapper.populateOtms(this.entityMapByApplicationAndTableIndexes, !this.config || this.config.mapped);\n        // merge any out of order entity references (there shouldn't be any)\n        // TODO: MappedEntityArray is not serializable, make it so before using\n        // let resultMEA = newMappedEntityArray(this.applicationUtils, this.rootDbEntity)\n        // resultMEA.putAll(parsedResults)\n        // if (!this.config || this.config.mapped) {\n        // \treturn resultMEA\n        // }\n        // return resultMEA.toArray()\n        return parsedResults;\n    }\n    bufferManyToOne(dbEntity, propertyName, relationDbEntity, relatedEntityId) {\n        let otmEntityField;\n        for (const dbRelation of relationDbEntity.relations) {\n            switch (dbRelation.relationType) {\n                case EntityRelationType.ONE_TO_MANY:\n                    break;\n                case EntityRelationType.MANY_TO_ONE:\n                    continue;\n                default:\n                    throw new Error(`Unknown EntityRelationType: ${dbRelation.relationType}`);\n            }\n            if (dbRelation.oneToManyElems && dbRelation.oneToManyElems.mappedBy) {\n                if (dbEntity.id === dbRelation.relationEntity.id\n                    || dbRelation.oneToManyElems.mappedBy === propertyName) {\n                    otmEntityField = dbRelation.property.name;\n                }\n            }\n        }\n        this.mtoStubBuffer.push({\n            otmEntityId: relatedEntityId,\n            otmDbEntity: relationDbEntity,\n            otmEntityField: otmEntityField,\n            mtoDbEntity: dbEntity,\n            mtoRelationField: propertyName,\n            mtoParentObject: null\n        });\n    }\n    bufferOneToMany(otmDbEntity, otmPropertyName) {\n        this.otmStubBuffer.push({\n            otmDbEntity: otmDbEntity,\n            otmPropertyName: otmPropertyName,\n            otmObject: null\n        });\n    }\n    getEntityToFlush(dbEntity, selectClauseFragment, idValue, resultObject, context) {\n        if (!idValue) {\n            throw new Error(`Entity ID not specified for entity \r\n\t\t\t'${dbEntity.applicationVersion.application.name}.${dbEntity.name}'.`);\n        }\n        let entityMapForName = ensureChildMap(ensureChildArray(this.entityMapByApplicationAndTableIndexes, dbEntity.applicationVersion.application.index), dbEntity.index);\n        let existingEntity = entityMapForName[idValue];\n        let currentEntity = this.mergeEntities(existingEntity, resultObject, dbEntity, selectClauseFragment, context);\n        entityMapForName[idValue] = currentEntity;\n        return currentEntity;\n    }\n    // Must merge the one-to-many relationships returned as part of the result tree\n    /**\n     * Merge entities with of the same class and with the same Id\n     *\n     * @param source\n     * @param target\n     * @param qEntity\n     * @param selectClauseFragment\n     * @param entityPropertyTypeMap\n     * @param entityRelationMap\n     * @returns {any}\n     */\n    mergeEntities(source, target, dbEntity, selectClauseFragment, context) {\n        if (!source || target === source) {\n            return target;\n        }\n        const id = this.applicationUtils.getIdKey(target, dbEntity);\n        for (let propertyName in selectClauseFragment) {\n            if (selectClauseFragment[propertyName] === undefined) {\n                continue;\n            }\n            const dbProperty = dbEntity.propertyMap[propertyName];\n            // Merge properties (conflicts detected at query parsing time):\n            if (!dbProperty.relation || !dbProperty.relation.length) {\n                // If source property doesn't exist\n                if (this.applicationUtils.isEmpty(source[propertyName])) {\n                    // set the source property to value of target\n                    source[propertyName] = target[propertyName];\n                }\n                // Else if target property doesn't exist, keep the source value\n                // Else, assume that properties must be the same\n            }\n            // Merge relations\n            else {\n                const childSelectClauseFragment = selectClauseFragment[propertyName];\n                // For stubs (conflicts detected at query parsing time)\n                if (childSelectClauseFragment == null) {\n                    // For Many-to-One stubs, assume they are are the same and don't detect\n                    // conflicts, just merge\n                    source[propertyName] = target[propertyName];\n                    // Don't process One-to-Many stubs yet (not all related MTOs may have been\n                    // collected).\n                }\n                // For actual objects\n                else {\n                    const dbRelation = dbProperty.relation[0];\n                    const childDbEntity = dbRelation.relationEntity;\n                    switch (dbRelation.relationType) {\n                        case EntityRelationType.MANY_TO_ONE:\n                            // Many-to-One (conflicts detected at query parsing time)\n                            // If source is missing this mapping and target has it\n                            if (source[propertyName] === undefined && target[propertyName] !== undefined) {\n                                // set the source property to value of target\n                                source[propertyName] = target[propertyName];\n                            }\n                            // Else if target property doesn't exist, keep the source value\n                            // Assume that the child objects have already been merged themselves and\n                            // don't process\n                            break;\n                        case EntityRelationType.ONE_TO_MANY:\n                            let sourceArray = source[propertyName];\n                            const targetArray = target[propertyName];\n                            // Because parseQueryResult is depth-first, all child objects have already\n                            // been processed\n                            // TODO: this will probably fail, since the merged in array should always\n                            // have only one entity in it because it is created for a single result set\n                            // row.\n                            if (this.config && this.config.strict) {\n                                if ((!sourceArray && targetArray)\n                                    || (!targetArray && sourceArray)\n                                    || sourceArray.length != targetArray.length) {\n                                    throw new Error(`One-to-Many child arrays don't match for \r\n\t\t\t\t\t\t\t\t\t'${dbEntity.name}.${dbProperty.name}', Id: ${id}`);\n                                }\n                            }\n                            const sourceSet = {};\n                            if (sourceArray) {\n                                sourceArray.forEach((sourceChild) => {\n                                    const sourceChildIdValue = this.applicationUtils.getIdKey(sourceChild, childDbEntity);\n                                    sourceSet[sourceChildIdValue] = sourceChild;\n                                });\n                            }\n                            else {\n                                sourceArray = [];\n                                source[propertyName] = sourceArray;\n                            }\n                            if (targetArray) {\n                                targetArray.forEach((targetChild) => {\n                                    const targetChildIdValue = this.applicationUtils.getIdKey(targetChild, childDbEntity);\n                                    if (this.config && this.config.strict && !sourceSet[targetChildIdValue]) {\n                                        throw new Error(`One-to-Many child arrays don't match for \r\n\t\t\t\t\t\t\t\t\t\t'${dbEntity.name}.${dbProperty.name}', Id: ${id}`);\n                                    }\n                                    // If target child array has a value that source doesn't\n                                    if (!sourceSet[targetChildIdValue]) {\n                                        // add it to source (preserve order)\n                                        sourceArray.put(targetChild);\n                                    }\n                                });\n                            }\n                            // So instead just do\n                            // sourceArray.putAll(targetArray);\n                            break;\n                        default:\n                            throw new Error(`Unknown relation type '${dbRelation.relationType}' for \r\n\t\t\t\t\t\t\t'${dbEntity.name}.${dbProperty.name}'`);\n                    }\n                }\n            }\n        }\n        return source;\n    }\n    flushRelationStubBuffers(entityIdValue, currentEntity, dbEntity, context) {\n        let otmStubBuffer = this.otmStubBuffer;\n        this.otmStubBuffer = [];\n        otmStubBuffer.forEach((otmStub) => {\n            otmStub.otmObject = currentEntity;\n            this.otmMapper.addOtmReference(otmStub, entityIdValue);\n        });\n        let mtoStubBuffer = this.mtoStubBuffer;\n        this.mtoStubBuffer = [];\n        mtoStubBuffer.forEach((mtoStub) => {\n            mtoStub.mtoParentObject = currentEntity;\n            this.otmMapper.addMtoReference(mtoStub, entityIdValue, dbEntity, context);\n            this.mtoMapper.addMtoReference(mtoStub, entityIdValue);\n        });\n    }\n}\n//# sourceMappingURL=EntityGraphResultParser.js.map","import { objectExists } from '@airport/air-traffic-control';\nimport { SQLDataType } from '@airport/ground-control';\nimport { AbstractObjectResultParser } from './entity/IEntityResultParser';\n/**\n * Created by Papa on 10/16/2016.\n */\n/**\n * The goal of this Parser is to determine which objects in the current row are the same\n * as they were in the previous row.  If the objects are the same this parser will merge\n * them.\n */\nexport class TreeResultParser extends AbstractObjectResultParser {\n    constructor() {\n        super(...arguments);\n        this.currentRowObjectMap = {};\n        this.objectEqualityMap = {};\n        this.lastRowObjectMap = {};\n        this.currentObjectOneToManys = {};\n    }\n    addProperty(entityAlias, resultObject, dataType, propertyName, propertyValue) {\n        resultObject[propertyName] = propertyValue;\n        if (this.isDifferentOrDoesntExist(entityAlias, resultObject, propertyName)) {\n            return objectExists(propertyValue);\n        }\n        // Both last and current objects must exist here\n        let lastObject = this.lastRowObjectMap[entityAlias];\n        // Both of the properties are truthy\n        switch (dataType) {\n            case SQLDataType.DATE:\n                this.objectEqualityMap[entityAlias] = (lastObject[propertyName].getTime() === resultObject[propertyName].getTime());\n                break;\n            default:\n                this.objectEqualityMap[entityAlias] = (lastObject[propertyName] === resultObject[propertyName]);\n                break;\n        }\n        return true;\n    }\n    flushRow() {\n        this.lastRowObjectMap = this.currentRowObjectMap;\n        this.currentRowObjectMap = {};\n    }\n    isDifferentOrDoesntExist(entityAlias, resultObject, propertyName) {\n        // If we already know that this is a new facade, no need to keep on checking\n        if (!this.objectEqualityMap[entityAlias]) {\n            return true;\n        }\n        let lastObject = this.lastRowObjectMap[entityAlias];\n        // If there was no last facade\n        if (!lastObject) {\n            this.objectEqualityMap[entityAlias] = false;\n            return true;\n        }\n        if (!resultObject) {\n            return true;\n        }\n        // Types are guaranteed to be the same, so:\n        // If the last property is not there or is falsy\n        if (!lastObject[propertyName]) {\n            this.objectEqualityMap[entityAlias] = !resultObject[propertyName];\n            return true;\n        } // If the current property is not there or is falsy\n        else if (!resultObject[propertyName]) {\n            this.objectEqualityMap[entityAlias] = !lastObject[propertyName];\n            return true;\n        }\n        return false;\n    }\n    addOneToManyCollection(entityAlias, resultObject, propertyName) {\n        let currentOtmCollection = resultObject[propertyName];\n        this.currentObjectOneToManys[propertyName] = currentOtmCollection;\n        if (this.isDifferentOrDoesntExist(entityAlias, resultObject, propertyName)) {\n            return;\n        }\n        let lastObject = this.lastRowObjectMap[entityAlias];\n        let lastOtmCollection = lastObject[propertyName];\n        // Now both arrays are guaranteed to exist\n        // TODO: verify assumption below:\n        // For @OneToMany collections, if existence of last child facade changes it must be a\n        // new facade\n        if (!lastOtmCollection.length) {\n            if (currentOtmCollection.length) {\n                this.objectEqualityMap[entityAlias] = false;\n            }\n        }\n        else if (!currentOtmCollection.length) {\n            if (lastOtmCollection.length) {\n                this.objectEqualityMap[entityAlias] = false;\n            }\n        }\n        // Otherwise if it still exists\n    }\n    mergeEntity(entityAlias, resultObject) {\n        let isSameObjectAsLastRow = this.objectEqualityMap[entityAlias];\n        this.objectEqualityMap[entityAlias] = true;\n        let oneToManys = this.currentObjectOneToManys;\n        this.currentObjectOneToManys = {};\n        // If it's a new facade\n        if (!isSameObjectAsLastRow) {\n            return resultObject;\n        }\n        // All equality checks have passed - this is the same exact facade as last time\n        resultObject = this.lastRowObjectMap[entityAlias];\n        this.currentRowObjectMap[entityAlias] = resultObject;\n        // All @ManyToOnes have been merged automatically (because they are entities\n        // themselves)\n        // For @OneToManys:\n        // If the current one it the same as the last one of the ones in the last entity then\n        // it's the same otherwise its new and should be added to the collection\n        for (let oneToManyProperty in oneToManys) {\n            let currentOneToMany = oneToManys[oneToManyProperty];\n            if (currentOneToMany && currentOneToMany.length) {\n                // There will always be only one current record, since this is done per result\n                // set row\n                let currentMto = currentOneToMany[0];\n                let existingOneToMany = resultObject[oneToManyProperty];\n                if (!existingOneToMany || !existingOneToMany.length) {\n                    resultObject[oneToManyProperty] = currentOneToMany;\n                }\n                // Otherwise if the last facade doesn't match then its a new one\n                else if (existingOneToMany[existingOneToMany.length - 1] !== currentMto) {\n                    existingOneToMany.push(currentMto);\n                }\n            }\n        }\n        return resultObject;\n    }\n}\n//# sourceMappingURL=TreeResultParser.js.map","import { valuesEqual } from '@airport/air-traffic-control';\nimport { TreeResultParser } from '../TreeResultParser';\n/**\n * Created by Papa on 10/16/2016.\n */\n/**\n * The goal of this Parser is to determine which objects in the current row are the same\n * as they were in the previous row.  If the objects are the same this parser will merge\n * them.\n */\nexport class EntityTreeResultParser extends TreeResultParser {\n    constructor() {\n        super(...arguments);\n        this.currentRowObjectMap = {};\n        this.objectEqualityMap = {};\n        this.lastRowObjectMap = {};\n        this.currentObjectOneToManys = {};\n    }\n    addEntity(entityAlias, dbEntity, context) {\n        let resultObject = this.applicationUtils.getNewEntity(dbEntity);\n        this.currentRowObjectMap[entityAlias] = resultObject;\n        if (this.objectEqualityMap[entityAlias] !== undefined) {\n            this.objectEqualityMap[entityAlias] = true;\n        }\n        return resultObject;\n    }\n    bufferManyToOneStub(entityAlias, dbEntity, resultObject, propertyName, relationDbEntity, relationInfos, context) {\n        this.addManyToOneStub(resultObject, propertyName, relationInfos, context);\n        this.addManyToOneReference(entityAlias, resultObject, propertyName);\n    }\n    bufferBlankManyToOneStub(entityAlias, resultObject, propertyName) {\n        resultObject[propertyName] = null;\n        this.addManyToOneReference(entityAlias, resultObject, propertyName);\n    }\n    bufferManyToOneObject(entityAlias, dbEntity, resultObject, propertyName, relationDbEntity, childResultObject, context) {\n        resultObject[propertyName] = childResultObject;\n        if (this.isDifferentOrDoesntExist(entityAlias, resultObject, propertyName)) {\n            return;\n        }\n        // Both last and current objects must exist here\n        let lastObject = this.lastRowObjectMap[entityAlias];\n        // @ManyToOne objects will have been merged by now, just check if its the same facade\n        this.objectEqualityMap[entityAlias] = lastObject[propertyName] === resultObject[propertyName];\n    }\n    bufferBlankManyToOneObject(entityAlias, resultObject, propertyName) {\n        resultObject[propertyName] = null;\n        this.addManyToOneReference(entityAlias, null, propertyName);\n    }\n    bufferOneToManyStub(otmDbEntity, otmPropertyName) {\n        throw new Error(`@OneToMany stubs not allowed in QueryResultType.HIERARCHICAL`);\n    }\n    bufferOneToManyCollection(entityAlias, resultObject, otmDbEntity, propertyName, relationDbEntity, childResultObject, context) {\n        resultObject[propertyName] = [childResultObject];\n        this.addOneToManyCollection(entityAlias, resultObject, propertyName);\n    }\n    bufferBlankOneToMany(entityAlias, resultObject, otmEntityName, propertyName, relationDbEntity, context) {\n        resultObject[propertyName] = [];\n        this.addOneToManyCollection(entityAlias, resultObject, propertyName);\n    }\n    flushEntity(entityAlias, dbEntity, selectClauseFragment, entityId, resultObject, context) {\n        return this.mergeEntity(entityAlias, resultObject);\n    }\n    bridge(parsedResults, selectClauseFragment, context) {\n        // Nothing to be done, hierarchical queries are not bridged\n        return parsedResults;\n    }\n    addManyToOneReference(entityAlias, resultObject, propertyName) {\n        if (this.isDifferentOrDoesntExist(entityAlias, resultObject, propertyName)) {\n            return;\n        }\n        // Both last and current objects must exist here\n        let lastMtoStub = this.lastRowObjectMap[entityAlias][propertyName];\n        let currentMtoStub = resultObject[propertyName];\n        this.objectEqualityMap[entityAlias] = valuesEqual(lastMtoStub, currentMtoStub, true);\n    }\n}\n//# sourceMappingURL=EntityTreeResultParser.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { QueryResultType } from '@airport/ground-control';\nimport { EntityGraphResultParser } from './EntityGraphResultParser';\nimport { EntityTreeResultParser } from './EntityTreeResultParser';\nlet ObjectResultParserFactory = class ObjectResultParserFactory {\n    getObjectResultParser(queryResultType, config, rootDbEntity) {\n        switch (queryResultType) {\n            case QueryResultType.ENTITY_GRAPH:\n            case QueryResultType.MAPPED_ENTITY_GRAPH:\n                return new EntityGraphResultParser(config, rootDbEntity, this.applicationUtils, this.entityStateManager);\n            case QueryResultType.ENTITY_TREE:\n            case QueryResultType.MAPPED_ENTITY_TREE:\n                return new EntityTreeResultParser(this.applicationUtils, this.entityStateManager);\n            default:\n                throw new Error(`ObjectQueryParser not supported for QueryResultType: ${queryResultType}`);\n        }\n    }\n};\n__decorate([\n    Inject()\n], ObjectResultParserFactory.prototype, \"applicationUtils\", void 0);\n__decorate([\n    Inject()\n], ObjectResultParserFactory.prototype, \"entityStateManager\", void 0);\nObjectResultParserFactory = __decorate([\n    Injected()\n], ObjectResultParserFactory);\nexport { ObjectResultParserFactory };\n//# sourceMappingURL=ObjectResultParserFactory.js.map","import { TreeResultParser } from './TreeResultParser';\n/**\n * Created by Papa on 11/8/2016.\n */\nexport class TreeQueryResultParser extends TreeResultParser {\n    addEntity(entityAlias) {\n        let resultObject = {};\n        this.currentRowObjectMap[entityAlias] = resultObject;\n        return resultObject;\n    }\n    bufferOneToManyCollection(entityAlias, resultObject, propertyName, childResultObject) {\n        resultObject[propertyName] = [childResultObject];\n        this.addOneToManyCollection(entityAlias, resultObject, propertyName);\n    }\n    flushEntity(entityAlias, resultObject) {\n        return this.mergeEntity(entityAlias, resultObject);\n    }\n}\n//# sourceMappingURL=TreeQueryResultParser.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { JSONClauseObjectType, OperationCategory, ApplicationMap, SqlOperator } from '@airport/ground-control';\n/**\n * Created by Papa on 10/2/2016.\n */\nexport var ClauseType;\n(function (ClauseType) {\n    ClauseType[\"MAPPED_SELECT_CLAUSE\"] = \"MAPPED_SELECT_CLAUSE\";\n    ClauseType[\"NON_MAPPED_SELECT_CLAUSE\"] = \"NON_MAPPED_SELECT_CLAUSE\";\n    ClauseType[\"WHERE_CLAUSE\"] = \"WHERE_CLAUSE\";\n    ClauseType[\"FUNCTION_CALL\"] = \"FUNCTION_CALL\";\n})(ClauseType || (ClauseType = {}));\nlet SQLWhereBase = class SQLWhereBase {\n    constructor(dbEntity, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, sqlQueryAdapter, storeDriver, context) {\n        this.dbEntity = dbEntity;\n        this.dialect = dialect;\n        this.airportDatabase = airportDatabase;\n        this.applicationUtils = applicationUtils;\n        this.entityStateManager = entityStateManager;\n        this.qMetadataUtils = qMetadataUtils;\n        this.sqlQueryAdapter = sqlQueryAdapter;\n        this.storeDriver = storeDriver;\n        this.context = context;\n        this.parameterReferences = [];\n        this.fieldMap = new ApplicationMap();\n        this.qEntityMapByAlias = {};\n        this.jsonRelationMapByAlias = {};\n    }\n    getParameters(parameterMap, //,\n    context) {\n        // let populatedParameterMap: {[parameterAlias: string]: boolean} = {};\n        return this.parameterReferences\n            /*\n             .parameterReferences.filter(( parameterReference ) => {\n             if (!populatedParameterMap[parameterReference]) {\n             populatedParameterMap[parameterReference] = true;\n             return true;\n             }\n             return false;\n             })\n             */\n            .map((parameterReference) => {\n            let parameter = parameterMap[parameterReference];\n            if (!parameter) {\n                const isReference = parameterReference === null || ['number', 'string'].indexOf(typeof parameterReference) > -1;\n                if (isReference) {\n                    // if (!valuesArray) {\n                    return parameterReference;\n                    // } else if (typeof parameterReference === 'number') {\n                    // \treturn sqlAdaptor.getValue(valuesArray[parameterReference])\n                    // }\n                }\n                throw new Error(`No parameter found for alias '${parameterReference}'`);\n            }\n            return this.sqlQueryAdapter.getParameterValue(parameter);\n        });\n    }\n    getFunctionCallValue(rawValue, context) {\n        return this.getFieldValue(rawValue, ClauseType.FUNCTION_CALL, null, context);\n    }\n    getFieldFunctionValue(aField, defaultCallback, context) {\n        let aValue = aField.v;\n        if (this.isParameterReference(aValue)) {\n            let stringValue = aValue;\n            this.parameterReferences.push(stringValue);\n            aValue = this.sqlQueryAdapter.getParameterReference(this.parameterReferences, stringValue);\n        }\n        else {\n            aValue = this.getFieldValue(aValue, ClauseType.FUNCTION_CALL, defaultCallback, context);\n        }\n        aValue = this.sqlQueryAdapter.getFunctionAdaptor()\n            .getFunctionCalls(aField, aValue, this.qEntityMapByAlias, this, context);\n        this.validator.addFunctionAlias(aField.fa);\n        return aValue;\n    }\n    getFieldValue(clauseField, clauseType, defaultCallback, context) {\n        let columnName;\n        if (!clauseField) {\n            throw new Error(`Missing Clause Field definition`);\n        }\n        if (clauseField instanceof Array) {\n            return clauseField\n                .map((clauseFieldMember) => this.getFieldValue(clauseFieldMember, clauseType, defaultCallback, context))\n                .join(', ');\n        }\n        if (clauseType !== ClauseType.MAPPED_SELECT_CLAUSE && !clauseField.ot) {\n            throw new Error(`Object Type is not defined in JSONClauseField`);\n        }\n        const aField = clauseField;\n        let qEntity;\n        switch (clauseField.ot) {\n            case JSONClauseObjectType.FIELD_FUNCTION:\n                return this.getFieldFunctionValue(aField, defaultCallback, context);\n            case JSONClauseObjectType.DISTINCT_FUNCTION:\n                throw new Error(`Distinct function cannot be nested.`);\n            case JSONClauseObjectType.EXISTS_FUNCTION: {\n                if (clauseType !== ClauseType.WHERE_CLAUSE) {\n                    throw new Error(`Exists can only be used as a top function in a WHERE clause.`);\n                }\n                const { parameterReferences, subQuerySql } = this.subStatementSqlGenerator.getTreeQuerySql(aField.v, this.dialect, context);\n                if (parameterReferences.length) {\n                    this.parameterReferences = this.parameterReferences.concat(parameterReferences);\n                }\n                return `EXISTS(${subQuerySql})`;\n            }\n            case JSONClauseObjectType.FIELD: {\n                qEntity = this.qEntityMapByAlias[aField.ta];\n                this.validator.validateReadQEntityProperty(aField.si, aField.ti, aField.ci);\n                columnName = this.getEntityPropertyColumnName(qEntity, aField.ci, context);\n                this.addField(aField.si, aField.ti, aField.ci);\n                return this.getComplexColumnFragment(aField, columnName, context);\n            }\n            case JSONClauseObjectType.FIELD_QUERY: {\n                let jsonFieldSqlSubQuery = aField.fieldSubQuery;\n                if (aField.S) {\n                    jsonFieldSqlSubQuery = aField;\n                }\n                const { parameterReferences, subQuerySql } = this.subStatementSqlGenerator.getFieldQuerySql(jsonFieldSqlSubQuery, this.dialect, this.qEntityMapByAlias, context);\n                if (parameterReferences.length) {\n                    this.parameterReferences = this.parameterReferences.concat(parameterReferences);\n                }\n                this.validator.addSubQueryAlias(aField.fa);\n                return `(${subQuerySql})`;\n            }\n            case JSONClauseObjectType.MANY_TO_ONE_RELATION: {\n                qEntity = this.qEntityMapByAlias[aField.ta];\n                this.validator.validateReadQEntityManyToOneRelation(aField.si, aField.ti, aField.ci);\n                columnName = this.getEntityManyToOneColumnName(qEntity, aField.ci, context);\n                this.addField(aField.si, aField.ti, aField.ci);\n                return this.getComplexColumnFragment(aField, columnName, context);\n            }\n            // must be a nested object\n            default: {\n                if (clauseType !== ClauseType.MAPPED_SELECT_CLAUSE) {\n                    `Nested objects only allowed in the mapped SELECT clause.`;\n                }\n                return defaultCallback();\n            }\n        }\n    }\n    applyOperator(operator, rValue) {\n        switch (operator) {\n            case SqlOperator.EQUALS:\n                return ` = ${rValue}`;\n            case SqlOperator.GREATER_THAN:\n                return ` > ${rValue}`;\n            case SqlOperator.GREATER_THAN_OR_EQUALS:\n                return ` >= ${rValue}`;\n            case SqlOperator.IS_NOT_NULL:\n                return ` IS NOT NULL`;\n            case SqlOperator.IS_NULL:\n                return ` IS NULL`;\n            case SqlOperator.IN:\n                return ` IN (${rValue})`;\n            case SqlOperator.LESS_THAN:\n                return ` < ${rValue}`;\n            case SqlOperator.LESS_THAN_OR_EQUALS:\n                return ` <= ${rValue}`;\n            case SqlOperator.NOT_EQUALS:\n                return ` != ${rValue}`;\n            case SqlOperator.NOT_IN:\n                return ` NOT IN (${rValue})`;\n            case SqlOperator.LIKE:\n                return ` LIKE ${rValue}`;\n            default:\n                throw new Error(`Unsupported operator ${operator}`);\n        }\n    }\n    getWHEREFragment(operation, nestingPrefix, context) {\n        let whereFragment = '';\n        if (!operation) {\n            throw new Error(`An operation is missing in WHERE or HAVING clause`);\n        }\n        nestingPrefix = `${nestingPrefix}\\t`;\n        switch (operation.c) {\n            case OperationCategory.LOGICAL:\n                return this.getLogicalWhereFragment(operation, nestingPrefix, context);\n            case OperationCategory.BOOLEAN:\n            case OperationCategory.DATE:\n            case OperationCategory.NUMBER:\n            case OperationCategory.STRING:\n            case OperationCategory.UNTYPED:\n                let valueOperation = operation;\n                let lValueSql = this.getFieldValue(valueOperation.l, ClauseType.WHERE_CLAUSE, null, context);\n                let rValueSql = this.getFieldValue(valueOperation.r, ClauseType.WHERE_CLAUSE, null, context);\n                let rValueWithOperator = this.applyOperator(valueOperation.o, rValueSql);\n                whereFragment += `${lValueSql}${rValueWithOperator}`;\n                break;\n            case OperationCategory.FUNCTION:\n                let functionOperation = operation;\n                whereFragment = this.getFieldValue(functionOperation.ob, ClauseType.WHERE_CLAUSE, null, context);\n                // exists function and maybe others\n                break;\n        }\n        return whereFragment;\n    }\n    getEntityPropertyColumnName(qEntity, columnIndex, context) {\n        const dbEntity = this.qMetadataUtils.getDbEntity(qEntity);\n        return dbEntity.columns[columnIndex].name;\n    }\n    addFieldFromColumn(dbColumn) {\n        const dbEntity = dbColumn.propertyColumns[0].property.entity;\n        this.addField(dbEntity.applicationVersion.id, dbEntity.index, dbColumn.index);\n    }\n    addField(applicationIndex, tableIndex, columnIndex) {\n        this.fieldMap.ensure(applicationIndex, tableIndex)\n            .ensure(columnIndex);\n    }\n    warn(warning) {\n        console.log(warning);\n    }\n    getSimpleColumnFragment(tableAlias, columnName) {\n        return `${tableAlias}.${columnName}`;\n    }\n    getComplexColumnFragment(value, columnName, context) {\n        let selectSqlFragment = `${value.ta}.${columnName}`;\n        selectSqlFragment = this.sqlQueryAdapter.getFunctionAdaptor()\n            .getFunctionCalls(value, selectSqlFragment, this.qEntityMapByAlias, this, context);\n        return selectSqlFragment;\n    }\n    getEntityManyToOneColumnName(qEntity, columnIndex, context) {\n        return this.getEntityPropertyColumnName(qEntity, columnIndex, context);\n    }\n    getLogicalWhereFragment(operation, nestingPrefix, context) {\n        let operator;\n        switch (operation.o) {\n            case SqlOperator.AND:\n                operator = 'AND';\n                break;\n            case SqlOperator.OR:\n                operator = 'OR';\n                break;\n            case SqlOperator.NOT:\n                const whereFragment = this.getWHEREFragment(operation.v, nestingPrefix, context);\n                return ` NOT (${whereFragment})`;\n            default:\n                throw new Error(`Unknown logical operator: ${operation.o}`);\n        }\n        let childOperations = operation.v;\n        if (!(childOperations instanceof Array)) {\n            throw new Error(`Expecting an array of child operations as a value for operator ${operator}, \r\n\t\t\t\tin the WHERE Clause.`);\n        }\n        let whereFragment = childOperations.map((childOperation) => {\n            return this.getWHEREFragment(childOperation, nestingPrefix, context);\n        })\n            .join(`\\n${nestingPrefix}${operator} `);\n        return `( ${whereFragment} )`;\n    }\n    isParameterReference(value) {\n        if (value === null) {\n            return false;\n        }\n        if (value === undefined || value === '' || value === NaN) {\n            throw new Error(`Invalid query value: ${value}`);\n        }\n        switch (typeof value) {\n            case 'boolean':\n            case 'number':\n                throw new Error(`Unexpected primitive instance, expecting parameter alias.`);\n            case 'string':\n                return true;\n        }\n        if (value instanceof Date) {\n            throw new Error(`Unexpected date instance, expecting parameter alias.`);\n        }\n        return false;\n    }\n};\n__decorate([\n    Inject()\n], SQLWhereBase.prototype, \"validator\", void 0);\n__decorate([\n    Inject()\n], SQLWhereBase.prototype, \"subStatementSqlGenerator\", void 0);\nSQLWhereBase = __decorate([\n    Injected()\n], SQLWhereBase);\nexport { SQLWhereBase };\n//# sourceMappingURL=SQLWhereBase.js.map","import { QEntity } from '@airport/air-traffic-control';\nimport { SQLWhereBase } from './SQLWhereBase';\n/**\n * Created by Papa on 10/2/2016.\n */\nexport class SQLNoJoinQuery extends SQLWhereBase {\n    constructor(dbEntity, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, relationManager, sqlQueryAdapter, storeDriver, context) {\n        super(dbEntity, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, sqlQueryAdapter, storeDriver, context);\n        this.relationManager = relationManager;\n    }\n    getTableFragment(fromRelation, context, addAs = true) {\n        if (!fromRelation) {\n            throw new Error(`Expecting exactly one table in UPDATE/DELETE clause`);\n        }\n        if (fromRelation.ri || fromRelation.jt) {\n            throw new Error(`Table in UPDATE/DELETE clause cannot be joined`);\n        }\n        const firstDbEntity = this.airportDatabase.applications[fromRelation.si]\n            .currentVersion[0].applicationVersion.entities[fromRelation.ti];\n        let tableName = this.storeDriver.getEntityTableName(firstDbEntity, context);\n        if (fromRelation.si !== this.dbEntity.applicationVersion.application.index\n            || fromRelation.ti !== this.dbEntity.index) {\n            throw new Error(`Unexpected table in UPDATE/DELETE clause: \r\n\t\t\t'${tableName}',\r\n\t\t\texpecting: '${this.dbEntity.applicationVersion.application.name}.${this.dbEntity.name}'`);\n        }\n        const firstQEntity = new QEntity(firstDbEntity, this.applicationUtils, this.relationManager);\n        const tableAlias = this.relationManager.getAlias(fromRelation);\n        this.qEntityMapByAlias[tableAlias] = firstQEntity;\n        let fromFragment = `\\t${tableName}`;\n        if (addAs) {\n            fromFragment += ` AS ${tableAlias}`;\n        }\n        return fromFragment;\n    }\n}\n//# sourceMappingURL=SQLNoJoinQuery.js.map","import { SQLNoJoinQuery } from './SQLNoJoinQuery';\n/**\n * Created by Papa on 10/2/2016.\n */\nexport class SQLDelete extends SQLNoJoinQuery {\n    constructor(jsonDelete, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, relationManager, sqlQueryAdapter, storeDriver, context) {\n        super(airportDatabase.applications[jsonDelete.DF.si].currentVersion[0]\n            .applicationVersion.entities[jsonDelete.DF.ti], dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, relationManager, sqlQueryAdapter, storeDriver, context);\n        this.jsonDelete = jsonDelete;\n    }\n    toSQL(context) {\n        let fromFragment = this.getTableFragment(this.jsonDelete.DF, context);\n        let whereFragment = '';\n        let jsonQuery = this.jsonDelete;\n        if (jsonQuery.W) {\n            whereFragment = this.getWHEREFragment(jsonQuery.W, '', context);\n            whereFragment = `\r\nWHERE\r\n${whereFragment}`;\n            // TODO: following might be needed for some RDBMS, does not work for SqLite\n            // Replace the root entity alias reference with the table name\n            // let tableAlias = this.relationManager.getAlias(this.jsonDelete.DF)\n            // let tableName = this.storeDriver.getEntityTableName(this.qEntityMapByAlias[tableAlias].__driver__.dbEntity, context)\n            // whereFragment = whereFragment.replace(new RegExp(`${tableAlias}`, 'g'), tableName)\n        }\n        return `DELETE\r\nFROM\r\n${fromFragment}${whereFragment}`;\n    }\n}\n//# sourceMappingURL=SQLDelete.js.map","import { SQLNoJoinQuery } from './SQLNoJoinQuery';\nimport { ClauseType } from './SQLWhereBase';\n/**\n * Created by Papa on 11/17/2016.\n */\nexport class SQLInsertValues extends SQLNoJoinQuery {\n    constructor(jsonInsertValues, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, context\n    // repository?: IRepository\n    ) {\n        super(airportDatabase.applications[jsonInsertValues.II.si].currentVersion[0]\n            .applicationVersion.entities[jsonInsertValues.II.ti], dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, relationManager, sqlQueryAdapter, storeDriver, context);\n        this.jsonInsertValues = jsonInsertValues;\n        this.qValidator = qValidator;\n    }\n    toSQL(context) {\n        if (!this.jsonInsertValues.II) {\n            throw new Error(`Expecting exactly one table in INSERT INTO clause`);\n        }\n        this.qValidator.validateInsertQEntity(this.dbEntity);\n        let tableFragment = this.getTableFragment(this.jsonInsertValues.II, context, false);\n        let columnsFragment = this.getColumnsFragment(this.dbEntity, this.jsonInsertValues.C);\n        let valuesFragment = this.getValuesFragment(this.jsonInsertValues.V, context);\n        return `INSERT INTO\r\n${tableFragment} ${columnsFragment}\r\nVALUES\r\n${valuesFragment}\r\n`;\n    }\n    getColumnsFragment(dbEntity, columns) {\n        if (!columns.length) {\n            return '';\n        }\n        const columnNames = columns.map(columnIndex => dbEntity.columns[columnIndex].name);\n        return `( ${columnNames.join(', \\n')} )`;\n    }\n    getValuesFragment(valuesClauseFragment, context) {\n        let allValuesFragment = valuesClauseFragment.map((valuesArray) => {\n            let valuesFragment = valuesArray.map((value) => {\n                if (value === null || ['number', 'string'].indexOf(typeof value) > -1) {\n                    this.parameterReferences.push(value);\n                    return this.sqlQueryAdapter.getParameterReference(this.parameterReferences, value);\n                }\n                else if (value === undefined) {\n                    throw new Error(`An 'undefined' value was provided when inserting into: ${this.dbEntity.applicationVersion.application.name}.${this.dbEntity.name}`);\n                }\n                else {\n                    const fieldValue = this.getFieldValue(value, ClauseType.WHERE_CLAUSE, null, context);\n                    return `\\n${fieldValue}\\n`;\n                }\n            });\n            return `(${valuesFragment.join(',')})`;\n        });\n        return allValuesFragment.join(',\\n');\n    }\n}\n//# sourceMappingURL=SQLInsertValues.js.map","import { EntityRelationType, SqlOperator } from '@airport/ground-control';\nimport { SQLWhereBase } from './SQLWhereBase';\n/**\n * Created by Papa on 8/20/2016.\n */\nexport var SQLDialect;\n(function (SQLDialect) {\n    SQLDialect[\"MYSQL\"] = \"MYSQL\";\n    SQLDialect[\"POSTGRESQL\"] = \"POSTGRESQL\";\n    SQLDialect[\"SQLITE\"] = \"SQLITE\";\n})(SQLDialect || (SQLDialect = {}));\nexport class EntityDefaults {\n    constructor() {\n        this.map = {};\n    }\n    getForAlias(alias) {\n        let defaultsForAlias = this.map[alias];\n        if (!defaultsForAlias) {\n            defaultsForAlias = {};\n            this.map[alias] = defaultsForAlias;\n        }\n        return defaultsForAlias;\n    }\n}\n/**\n * String based SQL query.\n */\nexport class SQLQuery extends SQLWhereBase {\n    constructor(jsonQuery, dbEntity, dialect, queryResultType, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, sqlQueryAdapter, storeDriver, context) {\n        super(dbEntity, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, sqlQueryAdapter, storeDriver, context);\n        this.jsonQuery = jsonQuery;\n        this.queryResultType = queryResultType;\n        this.entityDefaults = new EntityDefaults();\n    }\n    getFieldMap() {\n        return this.fieldMap;\n    }\n    getEntityApplicationRelationFromJoin(leftQEntity, rightQEntity, entityRelation, parentRelation, currentAlias, parentAlias, joinTypeString, errorPrefix, context) {\n        const allJoinOnColumns = [];\n        const leftDbEntity = leftQEntity.__driver__.dbEntity;\n        const rightDbEntity = rightQEntity.__driver__.dbEntity;\n        const dbRelation = leftDbEntity.relations[entityRelation.ri];\n        let relationColumns;\n        switch (dbRelation.relationType) {\n            case EntityRelationType.MANY_TO_ONE:\n                relationColumns = dbRelation.manyRelationColumns;\n                break;\n            case EntityRelationType.ONE_TO_MANY:\n                if (dbRelation.oneRelationColumns && dbRelation.oneRelationColumns.length) {\n                    relationColumns = dbRelation.oneRelationColumns;\n                }\n                else {\n                    const matchingRelations = dbRelation.relationEntity.relations.filter(manySideRelation => manySideRelation.relationEntity.id == leftDbEntity.id\n                        && manySideRelation.manyToOneElems\n                        && manySideRelation.manyToOneElems !== true\n                        && manySideRelation.manyToOneElems.mappedBy === dbRelation.property.name);\n                    if (matchingRelations.length) {\n                        relationColumns = matchingRelations[0].manyRelationColumns;\n                    }\n                }\n                break;\n            default:\n                throw new Error(`Unknown relation type ${dbRelation.relationType} \r\non '${leftDbEntity.applicationVersion.application.name}.${leftDbEntity.name}.${dbRelation.property.name}'.`);\n        }\n        for (const relationColumn of relationColumns) {\n            let ownColumnName;\n            let referencedColumnName;\n            switch (dbRelation.relationType) {\n                case EntityRelationType.MANY_TO_ONE:\n                    ownColumnName = relationColumn.manyColumn.name;\n                    referencedColumnName = relationColumn.oneColumn.name;\n                    break;\n                case EntityRelationType.ONE_TO_MANY:\n                    ownColumnName = relationColumn.oneColumn.name;\n                    referencedColumnName = relationColumn.manyColumn.name;\n                    break;\n                default:\n                    throw new Error(`Unknown relation type ${dbRelation.relationType} \r\non '${leftDbEntity.applicationVersion.application.name}.${leftDbEntity.name}.${dbRelation.property.name}'.`);\n            }\n            allJoinOnColumns.push({\n                leftColumn: ownColumnName,\n                rightColumn: referencedColumnName\n            });\n        }\n        let onClause = allJoinOnColumns.map(joinOnColumn => ` ${parentAlias}.${joinOnColumn.leftColumn} = ${currentAlias}.${joinOnColumn.rightColumn}`)\n            .join('\\n\\t\\t\\tAND');\n        if (entityRelation.joinWhereClause) {\n            const whereClause = this.getWHEREFragment(entityRelation.joinWhereClause, '\\t\\t', context);\n            const joinWhereOperator = entityRelation.joinWhereClauseOperator === SqlOperator.AND ? 'AND' : 'OR';\n            onClause = `${onClause}\r\n\t\t\t${joinWhereOperator} ${whereClause}`;\n        }\n        const tableName = this.storeDriver.getEntityTableName(rightDbEntity, context);\n        const fromFragment = `\\n\\t${joinTypeString} ${tableName} ${currentAlias}\\n\\t\\tON ${onClause}`;\n        return fromFragment;\n    }\n}\n//# sourceMappingURL=SQLQuery.js.map","import { JSONClauseObjectType } from '@airport/ground-control';\nimport { SQLNoJoinQuery } from './SQLNoJoinQuery';\nimport { ClauseType } from './SQLWhereBase';\n/**\n * Created by Papa on 10/2/2016.\n */\nexport class SQLUpdate extends SQLNoJoinQuery {\n    constructor(jsonUpdate, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, context) {\n        super(airportDatabase.applications[jsonUpdate.U.si].currentVersion[0]\n            .applicationVersion.entities[jsonUpdate.U.ti], dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, relationManager, sqlQueryAdapter, storeDriver, context);\n        this.jsonUpdate = jsonUpdate;\n        this.qValidator = qValidator;\n    }\n    toSQL(internalFragments, context) {\n        if (!this.jsonUpdate.U) {\n            throw new Error(`Expecting exactly one table in UPDATE clause`);\n        }\n        let updateFragment = this.getTableFragment(this.jsonUpdate.U, context);\n        let setFragment = this.getSetFragment(this.jsonUpdate.S, context);\n        if (internalFragments.SET && internalFragments.SET.length) {\n            setFragment += ',' + internalFragments.SET.map(internalSetFragment => `\r\n\t${internalSetFragment.column.name} = ${internalSetFragment.value}`)\n                .join(',');\n        }\n        let whereFragment = '';\n        let jsonQuery = this.jsonUpdate;\n        if (jsonQuery.W) {\n            whereFragment = this.getWHEREFragment(jsonQuery.W, '', context);\n            whereFragment = `WHERE\r\n${whereFragment}`;\n            // TODO: following might be needed for some RDBMS, does not work for SqLite\n            // Replace the root entity alias reference with the table name\n            // let tableAlias = this.relationManager.getAlias(this.jsonUpdate.U)\n            // let tableName  = this.storeDriver.getEntityTableName(this.qEntityMapByAlias[tableAlias].__driver__.dbEntity, context)\n            // whereFragment  = whereFragment.replace(new RegExp(`${tableAlias}`, 'g'), tableName)\n        }\n        return `UPDATE\r\n${updateFragment}\r\nSET\r\n${setFragment}\r\n${whereFragment}`;\n    }\n    getSetFragment(setClauseFragment, context) {\n        let setFragments = [];\n        for (let columnName in setClauseFragment) {\n            let value = setClauseFragment[columnName];\n            // Skip undefined values\n            if (value === undefined) {\n                continue;\n            }\n            this.qValidator.validateUpdateColumn(this.dbEntity.columnMap[columnName]);\n            this.addSetFragment(columnName, value, setFragments, context);\n        }\n        return setFragments.join(', \\n');\n    }\n    addSetFragment(columnName, value, setFragments, context) {\n        let fieldValue;\n        if (typeof value === 'number') {\n            this.parameterReferences.push(value);\n            fieldValue = this.sqlQueryAdapter.getParameterReference(this.parameterReferences, value);\n        }\n        else {\n            fieldValue = this.getFieldValue(value, ClauseType.WHERE_CLAUSE, null, context);\n        }\n        setFragments.push(`\\t${columnName} = ${fieldValue}`);\n    }\n    isManyToOneRelation(value) {\n        return typeof value === 'object'\n            && value.ot === JSONClauseObjectType.MANY_TO_ONE_RELATION;\n    }\n    addManyToOneMappings(parentMapping) {\n        let mappings = [];\n        const value = parentMapping.value;\n        if (typeof value === 'object' &&\n            (!value.ot\n                || value.ot === JSONClauseObjectType.MANY_TO_ONE_RELATION)) {\n            for (const key in value) {\n                if (key === 'ot'\n                    && value[key] === JSONClauseObjectType.MANY_TO_ONE_RELATION) {\n                    continue;\n                }\n                const mapping = {\n                    tableIndex: parentMapping.tableIndex,\n                    propertyChain: parentMapping.propertyChain.concat([key]),\n                    value: value[key]\n                };\n                const childMappings = this.addManyToOneMappings(mapping);\n                mappings = mappings.concat(childMappings);\n            }\n        }\n        else {\n            mappings.push(parentMapping);\n        }\n        return mappings;\n    }\n}\n//# sourceMappingURL=SQLUpdate.js.map","export class SqlFunctionField {\n    constructor(jsonClauseField) {\n        this.jsonClauseField = jsonClauseField;\n        // Test\n    }\n    getValue(sqlValueProvider, context) {\n        return sqlValueProvider.getFieldFunctionValue(this.jsonClauseField, null, context);\n    }\n}\n//# sourceMappingURL=SqlFunctionField.js.map","import { JoinTreeNode, QBooleanField, QDateField, QNumberField, QStringField, QTree, } from '@airport/air-traffic-control';\nimport { JoinType, JSONClauseObjectType, JSONRelationType, SortOrder, SQLDataType } from '@airport/ground-control';\nimport { SQLQuery } from './core/SQLQuery';\nimport { SqlFunctionField } from './SqlFunctionField';\n/**\n * Created by Papa on 10/28/2016.\n */\nexport class NonEntitySQLQuery extends SQLQuery {\n    constructor(jsonQuery, dialect, queryResultType, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, subStatementQueryGenerator, context) {\n        super(jsonQuery, null, dialect, queryResultType, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, sqlQueryAdapter, storeDriver, context);\n        this.qValidator = qValidator;\n        this.relationManager = relationManager;\n        this.subStatementQueryGenerator = subStatementQueryGenerator;\n    }\n    addQEntityMapByAlias(sourceMap) {\n        for (let alias in sourceMap) {\n            this.qEntityMapByAlias[alias] = sourceMap[alias];\n        }\n    }\n    toSQL(internalFragments, context) {\n        let jsonQuery = this.jsonQuery;\n        let joinNodeMap = {};\n        this.joinTrees = this.buildFromJoinTree(jsonQuery.F, joinNodeMap, context);\n        let selectFragment = this.getSELECTFragment(false, jsonQuery.S, internalFragments, context);\n        let fromFragment = this.getFROMFragments(this.joinTrees, context);\n        let whereFragment = '';\n        if (jsonQuery.W) {\n            whereFragment = `\r\nWHERE\r\n\t${this.getWHEREFragment(jsonQuery.W, '', context)}`;\n        }\n        let groupByFragment = '';\n        if (jsonQuery.GB && jsonQuery.GB.length) {\n            groupByFragment = `\r\nGROUP BY\r\n\t${this.getGroupByFragment(jsonQuery.GB)}`;\n        }\n        let havingFragment = '';\n        if (jsonQuery.H) {\n            havingFragment = `\r\nHAVING\r\n\t${this.getWHEREFragment(jsonQuery.H, '', context)}`;\n        }\n        let orderByFragment = '';\n        if (jsonQuery.OB && jsonQuery.OB.length) {\n            orderByFragment = `\r\nORDER BY\r\n\t${this.orderByParser.getOrderByFragment(jsonQuery.S, jsonQuery.OB)}`;\n        }\n        let offsetFragment = '';\n        if (jsonQuery.O) {\n            offsetFragment = this.sqlQueryAdapter.getOffsetFragment(jsonQuery.O);\n        }\n        let limitFragment = '';\n        if (jsonQuery.L) {\n            offsetFragment = this.sqlQueryAdapter.getLimitFragment(jsonQuery.L);\n        }\n        return `SELECT\r\n\t${selectFragment}\r\nFROM\r\n${fromFragment}${whereFragment}${groupByFragment}${havingFragment}${orderByFragment}${offsetFragment}${limitFragment}`;\n    }\n    buildFromJoinTree(joinRelations, joinNodeMap, context) {\n        let jsonTrees = [];\n        let jsonTree;\n        // For entity queries it is possible to have a query with no from clause, in this case\n        // make the query entity the root tree node\n        if (joinRelations.length < 1) {\n            throw new Error(`FROM clause must have entries for non-Entity queries`);\n        }\n        let firstRelation = joinRelations[0];\n        switch (firstRelation.rt) {\n            case JSONRelationType.SUB_QUERY_ROOT:\n            case JSONRelationType.ENTITY_ROOT:\n                break;\n            default:\n                throw new Error(`First table in FROM clause cannot be joined`);\n        }\n        let alias = this.relationManager.getAlias(firstRelation);\n        this.qValidator.validateReadFromEntity(firstRelation);\n        let firstEntity = this.relationManager.createRelatedQEntity(firstRelation, context);\n        this.qEntityMapByAlias[alias] = firstEntity;\n        jsonTree = new JoinTreeNode(firstRelation, [], null);\n        jsonTrees.push(jsonTree);\n        joinNodeMap[alias] = jsonTree;\n        for (let i = 1; i < joinRelations.length; i++) {\n            let rightEntity;\n            let joinRelation = joinRelations[i];\n            if (!joinRelation.jt) {\n                throw new Error(`Table ${i + 1} in FROM clause is missing joinType`);\n            }\n            this.qValidator.validateReadFromEntity(joinRelation);\n            alias = this.relationManager.getAlias(joinRelation);\n            switch (joinRelation.rt) {\n                case JSONRelationType.SUB_QUERY_ROOT:\n                    let view = this.addFieldsToView(joinRelation, alias, context);\n                    this.qEntityMapByAlias[alias] = view;\n                    continue;\n                case JSONRelationType.ENTITY_ROOT:\n                    // Non-Joined table\n                    let nonJoinedEntity = this.relationManager.createRelatedQEntity(joinRelation, context);\n                    this.qEntityMapByAlias[alias] = nonJoinedEntity;\n                    let anotherTree = new JoinTreeNode(joinRelation, [], null);\n                    if (joinNodeMap[alias]) {\n                        throw new Error(`Alias '${alias}' used more than once in the FROM clause.`);\n                    }\n                    jsonTrees.push(anotherTree);\n                    joinNodeMap[alias] = anotherTree;\n                    continue;\n                case JSONRelationType.ENTITY_APPLICATION_RELATION:\n                    if (!joinRelation.ri) {\n                        throw new Error(`Table ${i + 1} in FROM clause is missing relationPropertyName`);\n                    }\n                    rightEntity = this.relationManager.createRelatedQEntity(joinRelation, context);\n                    break;\n                case JSONRelationType.SUB_QUERY_JOIN_ON:\n                    if (!joinRelation.joinWhereClause) {\n                        this.warn(`View ${i + 1} in FROM clause is missing joinWhereClause`);\n                    }\n                    rightEntity = this.addFieldsToView(joinRelation, alias, context);\n                    break;\n                case JSONRelationType.ENTITY_JOIN_ON:\n                    if (!joinRelation.joinWhereClause) {\n                        this.warn(`Table ${i + 1} in FROM clause is missing joinWhereClause`);\n                    }\n                    rightEntity = this.relationManager.createRelatedQEntity(joinRelation, context);\n                    break;\n                default:\n                    throw new Error(`Unknown JSONRelationType ${joinRelation.rt}`);\n            }\n            let parentAlias = this.relationManager.getParentAlias(joinRelation);\n            if (!joinNodeMap[parentAlias]) {\n                throw new Error(`Missing parent entity for alias ${parentAlias}, on table ${i + 1} in FROM clause. \r\n\t\t\t\t\tNOTE: sub-queries in FROM clause cannot reference parent FROM tables.`);\n            }\n            let leftNode = joinNodeMap[parentAlias];\n            let rightNode = new JoinTreeNode(joinRelation, [], leftNode);\n            leftNode.addChildNode(rightNode);\n            this.qValidator.validateReadFromEntity(joinRelation);\n            this.qEntityMapByAlias[alias] = rightEntity;\n            if (!rightEntity) {\n                throw new Error(`Could not find entity ${joinRelation.ti} for table ${i + 1} in FROM clause`);\n            }\n            if (joinNodeMap[alias]) {\n                throw new Error(`Alias '${alias}' used more than once in the FROM clause.`);\n            }\n            joinNodeMap[alias] = rightNode;\n        }\n        return jsonTrees;\n    }\n    addFieldsToView(viewJoinRelation, viewAlias, context) {\n        let view = new QTree(viewJoinRelation.fromClausePosition, null);\n        this.addFieldsToViewForSelect(view, viewAlias, viewJoinRelation.subQuery.S, 'f', null, context);\n        return view;\n    }\n    /**\n     * Just build the shell fields for the external API of the view, don't do anything else.\n     * @param view\n     * @param select\n     * @param fieldPrefix\n     */\n    addFieldsToViewForSelect(view, viewAlias, select, fieldPrefix, forFieldQueryAlias, context) {\n        let fieldIndex = 0;\n        let hasDistinctClause = false;\n        for (let fieldName in select) {\n            let alias = `${fieldPrefix}${++fieldIndex}`;\n            let fieldJson = select[fieldName];\n            // If its a nested select\n            if (!fieldJson.ot) {\n                this.addFieldsToViewForSelect(view, viewAlias, fieldJson, `${alias}_`, null, context);\n            }\n            else {\n                let aliasToSet = forFieldQueryAlias ? forFieldQueryAlias : alias;\n                hasDistinctClause = hasDistinctClause && this.addFieldToViewForSelect(view, viewAlias, fieldPrefix, fieldJson, aliasToSet, forFieldQueryAlias, context);\n            }\n        }\n        if (fieldIndex > 1) {\n            if (hasDistinctClause) {\n                throw new Error(`DISTINCT clause must be the only property at its level`);\n            }\n            if (forFieldQueryAlias) {\n                throw new Error(`Field queries can have only one field in SELECT clause`);\n            }\n        }\n    }\n    addFieldToViewForSelect(view, viewAlias, fieldPrefix, fieldJson, alias, forFieldQueryAlias = null, context) {\n        let hasDistinctClause = false;\n        let dbEntity;\n        let dbProperty;\n        let dbColumn;\n        switch (fieldJson.ot) {\n            case JSONClauseObjectType.FIELD_FUNCTION:\n                view[alias] = new SqlFunctionField(fieldJson);\n                throw new Error('Not implemented');\n            case JSONClauseObjectType.EXISTS_FUNCTION:\n                throw new Error(`Exists function cannot be used in SELECT clause.`);\n            case JSONClauseObjectType.FIELD:\n                dbEntity = this.airportDatabase.applications[fieldJson.si].currentVersion[0]\n                    .applicationVersion.entities[fieldJson.ti];\n                dbProperty = dbEntity.properties[fieldJson.pi];\n                dbColumn = dbEntity.columns[fieldJson.ci];\n                switch (fieldJson.dt) {\n                    case SQLDataType.BOOLEAN:\n                        view[alias] = new QBooleanField(dbColumn, dbProperty, view);\n                        break;\n                    case SQLDataType.DATE:\n                        view[alias] = new QDateField(dbColumn, dbProperty, view);\n                        break;\n                    case SQLDataType.NUMBER:\n                        view[alias] = new QNumberField(dbColumn, dbProperty, view);\n                        break;\n                    case SQLDataType.STRING:\n                        view[alias] = new QStringField(dbColumn, dbProperty, view);\n                        break;\n                    // case SQLDataType.ANY:\n                    // \tview[alias] = new QUntypedField(dbColumn, dbProperty,\n                    // \t\tview as IQEntityInternal<any>)\n                    // \tbreak\n                    default:\n                        throw new Error(`Unknown SQLDataType: ${fieldJson.dt}.`);\n                }\n                break;\n            case JSONClauseObjectType.FIELD_QUERY:\n                let fieldQuery = fieldJson;\n                this.addFieldToViewForSelect(view, viewAlias, fieldPrefix, fieldQuery.S, alias, alias, context);\n                break;\n            case JSONClauseObjectType.DISTINCT_FUNCTION:\n                this.addFieldsToViewForSelect(view, viewAlias, fieldJson.v, fieldPrefix, forFieldQueryAlias, context);\n                hasDistinctClause = true;\n                break;\n            case JSONClauseObjectType.MANY_TO_ONE_RELATION:\n                throw new Error(`@ManyToOne fields cannot be directly in a select clause.\r\n\t\t\t\t\tPlease select a non-relational field within the relation.`);\n            // let relation =\n            // <QField<any>><any>QMetadataUtils.getRelationByColumnIndex(this.dbFacade.getQEntityByIndex(fieldJson.ti),\n            // fieldJson.ci); view[alias] = relation.getInstance(view); break;\n            default:\n                throw new Error(`Unexpected type property on JSONClauseField: ${fieldJson.ot}.`);\n        }\n        return hasDistinctClause;\n    }\n    getFieldSelectFragment(value, clauseType, nestedObjectCallBack, fieldIndex, context) {\n        let columnSelectSqlFragment = this.getFieldValue(value, clauseType, \n        // Nested object processing\n        nestedObjectCallBack, context);\n        if (value.fa !== undefined) {\n            columnSelectSqlFragment += ` as ${value.fa}`;\n        }\n        if (fieldIndex === 0) {\n            return `\\n\\t${columnSelectSqlFragment}`;\n        }\n        else {\n            return `,\\n\\t${columnSelectSqlFragment}`;\n        }\n    }\n    getFROMFragments(joinTrees, context) {\n        return joinTrees.map(joinTree => this.getFROMFragment(null, joinTree, context))\n            .join('\\n');\n    }\n    getFROMFragment(parentTree, currentTree, context) {\n        let fromFragment = '\\t';\n        let currentRelation = currentTree.jsonRelation;\n        let currentAlias = this.relationManager.getAlias(currentRelation);\n        let qEntity = this.qEntityMapByAlias[currentAlias];\n        if (!parentTree) {\n            switch (currentRelation.rt) {\n                case JSONRelationType.ENTITY_ROOT:\n                    fromFragment += `${this.storeDriver.getEntityTableName(qEntity.__driver__.dbEntity, context)} ${currentAlias}`;\n                    break;\n                case JSONRelationType.SUB_QUERY_ROOT:\n                    let viewRelation = currentRelation;\n                    const { parameterReferences, subQuerySql } = this.subStatementSqlGenerator.getTreeQuerySql(viewRelation.subQuery, this.dialect, context);\n                    if (parameterReferences.length) {\n                        this.parameterReferences = this.parameterReferences.concat(parameterReferences);\n                    }\n                    fromFragment += `(${subQuerySql}) ${currentAlias}`;\n                    break;\n                default:\n                    throw new Error(`Top level FROM entries must be Entity or Sub-Query root`);\n            }\n        }\n        else {\n            let parentRelation = parentTree.jsonRelation;\n            let parentAlias = this.relationManager.getAlias(parentRelation);\n            let leftEntity = this.qEntityMapByAlias[parentAlias];\n            let rightEntity = this.qEntityMapByAlias[currentAlias];\n            let joinTypeString;\n            switch (currentRelation.jt) {\n                case JoinType.FULL_JOIN:\n                    joinTypeString = 'FULL JOIN';\n                    break;\n                case JoinType.INNER_JOIN:\n                    joinTypeString = 'INNER JOIN';\n                    break;\n                case JoinType.LEFT_JOIN:\n                    joinTypeString = 'LEFT JOIN';\n                    break;\n                case JoinType.RIGHT_JOIN:\n                    joinTypeString = 'RIGHT JOIN';\n                default:\n                    throw new Error(`Unsupported join type: ${currentRelation.jt}`);\n            }\n            let errorPrefix = 'Error building FROM: ';\n            let joinOnClause;\n            switch (currentRelation.rt) {\n                case JSONRelationType.ENTITY_JOIN_ON:\n                    let joinRelation = currentRelation;\n                    joinOnClause = this.getWHEREFragment(joinRelation.joinWhereClause, '\\t', context);\n                    fromFragment += `\\t${joinTypeString} ${this.storeDriver.getEntityTableName(qEntity.__driver__.dbEntity, context)} ${currentAlias} ON\\n${joinOnClause}`;\n                    break;\n                case JSONRelationType.ENTITY_APPLICATION_RELATION:\n                    fromFragment += this.getEntityApplicationRelationFromJoin(leftEntity, rightEntity, currentRelation, parentRelation, currentAlias, parentAlias, joinTypeString, errorPrefix, context);\n                    break;\n                case JSONRelationType.SUB_QUERY_JOIN_ON:\n                    let viewJoinRelation = currentRelation;\n                    const { parameterReferences, subQuerySql } = this.subStatementSqlGenerator.getTreeQuerySql(viewJoinRelation.subQuery, this.dialect, context);\n                    if (parameterReferences.length) {\n                        this.parameterReferences = this.parameterReferences.concat(parameterReferences);\n                    }\n                    joinOnClause = this.getWHEREFragment(viewJoinRelation.joinWhereClause, '\\t', context);\n                    fromFragment += `${joinTypeString} (${subQuerySql}) ${currentAlias} ON\\n${joinOnClause}`;\n                    break;\n                default:\n                    throw new Error(`Nested FROM entries must be Entity JOIN ON\r\n\t\t\t\t\tor Application Relation, or Sub-Query JOIN ON`);\n            }\n        }\n        for (let i = 0; i < currentTree.childNodes.length; i++) {\n            let childTreeNode = currentTree.childNodes[i];\n            fromFragment += this.getFROMFragment(currentTree, childTreeNode, context);\n        }\n        return fromFragment;\n    }\n    getGroupByFragment(groupBy) {\n        return groupBy.map((groupByField) => {\n            this.qValidator.validateAliasedFieldAccess(groupByField.fa);\n            return `${groupByField.fa}`;\n        })\n            .join(', ');\n    }\n    getOrderByFragment(orderBy) {\n        return orderBy.map((orderByField) => {\n            this.qValidator.validateAliasedFieldAccess(orderByField.fa);\n            switch (orderByField.so) {\n                case SortOrder.ASCENDING:\n                    return `${orderByField.fa} ASC`;\n                case SortOrder.DESCENDING:\n                    return `${orderByField.fa} DESC`;\n            }\n        })\n            .join(', ');\n    }\n}\n//# sourceMappingURL=NonEntitySQLQuery.js.map","import { JSONClauseObjectType, QueryResultType } from '@airport/ground-control';\nimport { ExactOrderByParser } from '../orderBy/ExactOrderByParser';\nimport { ClauseType } from './core/SQLWhereBase';\nimport { NonEntitySQLQuery } from './NonEntitySQLQuery';\n/**\n * Created by Papa on 10/29/2016.\n */\nexport class FieldSQLQuery extends NonEntitySQLQuery {\n    constructor(jsonQuery, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, subStatementQueryGenerator, context) {\n        super(jsonQuery, dialect, QueryResultType.FIELD, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, subStatementQueryGenerator, context);\n        this.orderByParser = new ExactOrderByParser(qValidator);\n    }\n    async parseQueryResults(results, internalFragments, queryResultType, context, bridgedQueryConfiguration) {\n        let parsedResults = [];\n        if (!results || !results.length) {\n            return parsedResults;\n        }\n        parsedResults = [];\n        let lastResult;\n        results.forEach((result) => {\n            let parsedResult = this.parseQueryResult(this.jsonQuery.S, result, [0]);\n            parsedResults.push(parsedResult);\n        });\n        return parsedResults;\n    }\n    getSELECTFragment(nested, selectClauseFragment, internalFragments, context) {\n        if (!selectClauseFragment) {\n            throw new Error(`SELECT clause is not defined for a Field Query`);\n        }\n        {\n            let distinctClause = selectClauseFragment;\n            if (distinctClause.ot == JSONClauseObjectType.DISTINCT_FUNCTION) {\n                let distinctSelect = this.getSELECTFragment(nested, distinctClause.appliedFunctions[0].p[0], internalFragments, context);\n                return `DISTINCT ${distinctSelect}`;\n            }\n        }\n        let field = selectClauseFragment;\n        let fieldIndex = 0;\n        let selectSqlFragment = this.getFieldSelectFragment(field, ClauseType.NON_MAPPED_SELECT_CLAUSE, null, fieldIndex++, context);\n        return selectSqlFragment;\n    }\n    parseQueryResult(selectClauseFragment, resultRow, nextFieldIndex) {\n        let field = selectClauseFragment;\n        let propertyValue = this.sqlQueryAdapter.getResultCellValue(resultRow, field.fa, nextFieldIndex[0], field.dt, null);\n        nextFieldIndex[0]++;\n        return propertyValue;\n    }\n}\n//# sourceMappingURL=FieldSQLQuery.js.map","import { AliasCache } from '@airport/air-traffic-control';\nimport { JSONClauseObjectType, QueryResultType } from '@airport/ground-control';\nimport { MappedOrderByParser } from '../orderBy/MappedOrderByParser';\nimport { TreeQueryResultParser } from '../result/TreeQueryResultParser';\nimport { ClauseType } from './core/SQLWhereBase';\nimport { NonEntitySQLQuery } from './NonEntitySQLQuery';\nimport { SqlFunctionField } from './SqlFunctionField';\n/**\n * Created by Papa on 10/28/2016.\n */\nexport class TreeSQLQuery extends NonEntitySQLQuery {\n    constructor(jsonQuery, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, subStatementQueryGenerator, context) {\n        super(jsonQuery, dialect, QueryResultType.TREE, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, subStatementQueryGenerator, context);\n        this.queryParser = new TreeQueryResultParser(applicationUtils, entityStateManager);\n        this.orderByParser = new MappedOrderByParser(qValidator);\n    }\n    /**\n     * Entities get merged if they are right next to each other in the result set.  If they\n     * are not, they are treated as separate entities - hence, your sort order matters.\n     *\n     * @param results\n     * @returns {any[]}\n     */\n    async parseQueryResults(results, internalFragments, queryResultType, context, bridgedQueryConfiguration) {\n        let parsedResults = [];\n        if (!results || !results.length) {\n            return parsedResults;\n        }\n        parsedResults = [];\n        let lastResult;\n        results.forEach((result) => {\n            let aliasCache = new AliasCache();\n            let parsedResult = this.parseQueryResult(this.jsonQuery.S, result, [0], aliasCache, aliasCache.getFollowingAlias());\n            if (!lastResult) {\n                parsedResults.push(parsedResult);\n            }\n            else if (lastResult !== parsedResult) {\n                lastResult = parsedResult;\n                parsedResults.push(parsedResult);\n            }\n            this.queryParser.flushRow();\n        });\n        return parsedResults;\n    }\n    getSELECTFragment(nested, selectClauseFragment, internalFragments, context) {\n        const distinctClause = selectClauseFragment;\n        if (distinctClause.ot == JSONClauseObjectType.DISTINCT_FUNCTION) {\n            if (nested) {\n                throw new Error(`Cannot have DISTINCT specified in a nested select clause`);\n            }\n            const distinctSelect = this.getSELECTFragment(nested, distinctClause.appliedFunctions[0].p[0], internalFragments, context);\n            return `DISTINCT ${distinctSelect}`;\n        }\n        let numProperties = 0;\n        for (let propertyName in selectClauseFragment) {\n            if (propertyName === '*') {\n                throw new Error(`'*' operator isn't yet implemented in mapped queries`);\n            }\n            numProperties++;\n        }\n        if (numProperties === 0) {\n            if (nested) {\n                throw new Error(`Mapped query must have fields in a nested-select clause`);\n            }\n            else {\n                return '*';\n            }\n        }\n        let fieldIndex = 0;\n        let selectSqlFragment = '';\n        for (let propertyName in selectClauseFragment) {\n            const value = selectClauseFragment[propertyName];\n            // Skip undefined values\n            if (value === undefined) {\n                continue;\n            }\n            if (value instanceof SqlFunctionField) {\n                selectSqlFragment += value.getValue(this, context);\n                continue;\n            }\n            selectSqlFragment += this.getFieldSelectFragment(value, ClauseType.MAPPED_SELECT_CLAUSE, () => {\n                return this.getSELECTFragment(true, value, internalFragments, context);\n            }, fieldIndex++, context);\n        }\n        return selectSqlFragment;\n    }\n    parseQueryResult(selectClauseFragment, resultRow, nextFieldIndex, aliasCache, entityAlias) {\n        // Return blanks, primitives and Dates directly\n        if (!resultRow || !(resultRow instanceof Object) || resultRow instanceof Date) {\n            return resultRow;\n        }\n        {\n            let distinctClause = selectClauseFragment;\n            if (distinctClause.ot == JSONClauseObjectType.DISTINCT_FUNCTION) {\n                return this.parseQueryResult(distinctClause.appliedFunctions[0].p[0], resultRow, nextFieldIndex, aliasCache, entityAlias);\n            }\n        }\n        let resultObject = this.queryParser.addEntity(entityAlias);\n        for (let propertyName in selectClauseFragment) {\n            if (selectClauseFragment[propertyName] === undefined) {\n                continue;\n            }\n            let jsonClauseField = selectClauseFragment[propertyName];\n            let dataType = jsonClauseField.dt;\n            // Must be a sub-query\n            if (!dataType) {\n                let childResultObject = this.parseQueryResult(jsonClauseField, resultRow, nextFieldIndex, aliasCache, aliasCache.getFollowingAlias());\n                this.queryParser.bufferOneToManyCollection(entityAlias, resultObject, propertyName, childResultObject);\n            }\n            else {\n                let propertyValue = this.sqlQueryAdapter.getResultCellValue(resultRow, jsonClauseField.fa, nextFieldIndex[0], dataType, null);\n                this.queryParser.addProperty(entityAlias, resultObject, dataType, propertyName, propertyValue);\n            }\n            nextFieldIndex[0]++;\n        }\n        return this.queryParser.flushEntity(entityAlias, resultObject);\n    }\n}\n//# sourceMappingURL=TreeSQLQuery.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { FieldSQLQuery } from '../FieldSQLQuery';\nimport { TreeSQLQuery } from '../TreeSQLQuery';\nlet SubStatementSqlGenerator = class SubStatementSqlGenerator {\n    getTreeQuerySql(jsonTreeQuery, dialect, context) {\n        let mappedSqlQuery = new TreeSQLQuery(jsonTreeQuery, dialect, this.airportDatabase, this.applicationUtils, this.entityStateManager, this.qMetadataUtils, this.qValidator, this.relationManager, this.sqlQueryAdapter, this.storeDriver, this.subStatementQueryGenerator, context);\n        const subQuerySql = mappedSqlQuery.toSQL({}, context);\n        const parameterReferences = mappedSqlQuery.parameterReferences;\n        return {\n            parameterReferences,\n            subQuerySql\n        };\n    }\n    getFieldQuerySql(jsonFieldSqlSubQuery, dialect, qEntityMapByAlias, context) {\n        let fieldSqlQuery = new FieldSQLQuery(jsonFieldSqlSubQuery, dialect, this.airportDatabase, this.applicationUtils, this.entityStateManager, this.qMetadataUtils, this.qValidator, this.relationManager, this.sqlQueryAdapter, this.storeDriver, this.subStatementQueryGenerator, context);\n        fieldSqlQuery.addQEntityMapByAlias(qEntityMapByAlias);\n        const subQuerySql = fieldSqlQuery.toSQL({}, context);\n        const parameterReferences = fieldSqlQuery.parameterReferences;\n        return {\n            parameterReferences,\n            subQuerySql\n        };\n    }\n};\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"applicationUtils\", void 0);\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"entityStateManager\", void 0);\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"qMetadataUtils\", void 0);\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"qValidator\", void 0);\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"relationManager\", void 0);\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"sqlQueryAdapter\", void 0);\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"storeDriver\", void 0);\n__decorate([\n    Inject()\n], SubStatementSqlGenerator.prototype, \"subStatementQueryGenerator\", void 0);\nSubStatementSqlGenerator = __decorate([\n    Injected()\n], SubStatementSqlGenerator);\nexport { SubStatementSqlGenerator };\n//# sourceMappingURL=SubStatementSqlGenerator.js.map","import { AliasCache, isID, isN, isY, JoinTreeNode, objectExists, Y } from '@airport/air-traffic-control';\nimport { EntityRelationType, EntityState, JoinType, JSONRelationType } from '@airport/ground-control';\nimport { EntityOrderByParser } from '../orderBy/EntityOrderByParser';\nimport { SQLQuery } from './core/SQLQuery';\n/**\n * Created by Papa on 10/16/2016.\n */\n/**\n * Represents SQL String query with Entity tree Select clause.\n */\nexport class EntitySQLQuery extends SQLQuery {\n    constructor(jsonQuery, dbEntity, dialect, queryResultType, airportDatabase, applicationUtils, entityStateManager, objectResultParserFactory, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, context, graphQueryConfiguration) {\n        super(jsonQuery, dbEntity, dialect, queryResultType, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, sqlQueryAdapter, storeDriver, context);\n        this.objectResultParserFactory = objectResultParserFactory;\n        this.relationManager = relationManager;\n        this.graphQueryConfiguration = graphQueryConfiguration;\n        this.columnAliases = new AliasCache();\n        if (graphQueryConfiguration && this.graphQueryConfiguration.strict !== undefined) {\n            throw new Error(`\"strict\" configuration is not yet implemented for \r\n\t\t\tQueryResultType.ENTITY_GRAPH`);\n        }\n        this.finalSelectTree = this.setupSelectFields(this.jsonQuery.S, dbEntity, context);\n        this.orderByParser = new EntityOrderByParser(this.finalSelectTree, airportDatabase, qValidator, relationManager, jsonQuery.OB);\n    }\n    toSQL(internalFragments, context) {\n        let joinNodeMap = {};\n        this.joinTree = this.buildFromJoinTree(this.jsonQuery.F, joinNodeMap, context);\n        let selectFragment = this.getSELECTFragment(this.dbEntity, this.finalSelectTree, this.joinTree, context);\n        let fromFragment = this.getFROMFragment(null, this.joinTree, context);\n        let whereFragment = '';\n        let jsonQuery = this.jsonQuery;\n        if (jsonQuery.W) {\n            whereFragment = `\r\nWHERE\r\n${this.getWHEREFragment(jsonQuery.W, '', context)}`;\n        }\n        let orderByFragment = '';\n        if (jsonQuery.OB && jsonQuery.OB.length) {\n            orderByFragment = `\r\nORDER BY\r\n${this.orderByParser.getOrderByFragment(this.joinTree, this.qEntityMapByAlias, context)}`;\n        }\n        return `SELECT\r\n\t${selectFragment}\r\nFROM\r\n${fromFragment}${whereFragment}${orderByFragment}`;\n    }\n    /**\n     * If bridging is not applied:\n     *\n     * Entities get merged if they are right next to each other in the result set.  If they\n     * are not, they are treated as separate entities - hence, your sort order matters.\n     *\n     * If bridging is applied - all entities get merged - your sort order does not matter.\n     * Might as well disallow sort order for bridged queries (or re-sort in memory)?\n     *\n     * @param results\n     * @returns {any[]}\n     */\n    async parseQueryResults(results, internalFragments, queryResultType, context, bridgedQueryConfiguration) {\n        this.queryParser = this.objectResultParserFactory.getObjectResultParser(this.queryResultType, this.graphQueryConfiguration, this.dbEntity);\n        let parsedResults = [];\n        if (!results || !results.length) {\n            return parsedResults;\n        }\n        parsedResults = [];\n        let lastResult;\n        for (let i = 0; i < results.length; i++) {\n            let result = results[i];\n            let entityAlias = this.relationManager.getAlias(this.joinTree.jsonRelation);\n            this.columnAliases.reset();\n            let parsedResult = this.parseQueryResult(this.finalSelectTree, entityAlias, this.joinTree, result, [0], context);\n            if (!lastResult) {\n                parsedResults.push(parsedResult);\n            }\n            else if (lastResult !== parsedResult) {\n                parsedResults.push(parsedResult);\n            }\n            lastResult = parsedResult;\n            this.queryParser.flushRow();\n        }\n        return this.queryParser.bridge(parsedResults, this.jsonQuery.S, context);\n    }\n    buildFromJoinTree(joinRelations, joinNodeMap, context) {\n        let jsonTree;\n        // For entity queries it is possible to have a query with no from clause, in this case\n        // make the query entity the root tree node\n        if (joinRelations.length < 1) {\n            let onlyJsonRelation = {\n                currentChildIndex: 0,\n                ti: this.dbEntity.index,\n                fromClausePosition: [],\n                jt: null,\n                ri: null,\n                rt: JSONRelationType.ENTITY_ROOT,\n                rep: 'r_',\n                si: this.dbEntity.applicationVersion.id\n            };\n            joinRelations.push(onlyJsonRelation);\n        }\n        let firstRelation = joinRelations[0];\n        switch (firstRelation.rt) {\n            case JSONRelationType.ENTITY_ROOT:\n                break;\n            case JSONRelationType.SUB_QUERY_ROOT:\n            case JSONRelationType.SUB_QUERY_JOIN_ON:\n                throw new Error(`Entity query's FROM clause cannot contain sub-queries`);\n            case JSONRelationType.ENTITY_JOIN_ON:\n                throw new Error(`Entity queries cannot use JOIN ON`);\n            default:\n                throw new Error(`First table in FROM clause cannot be result of a join`);\n        }\n        // if (firstRelation.rt !== JSONRelationType.ENTITY_ROOT) {\n        // \tthrow new Error(`First table in FROM clause cannot be joined`)\n        // }\n        let alias = this.relationManager.getAlias(firstRelation);\n        let firstEntity = this.relationManager.createRelatedQEntity(firstRelation, context);\n        this.qEntityMapByAlias[alias] = firstEntity;\n        this.jsonRelationMapByAlias[alias] = firstRelation;\n        // In entity queries the first entity must always be the same as the query entity\n        const firstDbEntity = firstEntity.__driver__.dbEntity;\n        // if (firstEntity.constructor != this.rootQEntity.constructor) {\n        if (firstDbEntity.applicationVersion.application.index !== this.dbEntity.applicationVersion.application.index || firstDbEntity.index !== this.dbEntity.index) {\n            throw new Error(`ERROR: Unexpected first table in FROM clause: \r\n\t\t\t'${firstDbEntity.applicationVersion.application.name}.${firstDbEntity.name}',\r\n\t\t\texpecting:\r\n\t\t\t'${this.dbEntity.applicationVersion.application.name}.${this.dbEntity.name}'`);\n        }\n        jsonTree = new JoinTreeNode(firstRelation, [], null);\n        joinNodeMap[alias] = jsonTree;\n        for (let i = 1; i < joinRelations.length; i++) {\n            let joinRelation = joinRelations[i];\n            switch (joinRelation.rt) {\n                case JSONRelationType.ENTITY_ROOT:\n                    throw new Error(`All Entity query tables after the first must be joined`);\n                case JSONRelationType.SUB_QUERY_JOIN_ON:\n                    throw new Error(`Entity queries FROM clause cannot contain sub-queries`);\n                case JSONRelationType.ENTITY_JOIN_ON:\n                    throw new Error(`Entity queries cannot use JOIN ON`);\n                default:\n                    break;\n            }\n            if (!joinRelation.ri && joinRelation.ri !== 0) {\n                throw new Error(`Table ${i + 1} in FROM clause is missing \r\n\t\t\t\trelationPropertyName`);\n            }\n            let parentAlias = this.relationManager.getParentAlias(joinRelation);\n            if (!joinNodeMap[parentAlias]) {\n                throw new Error(`Missing parent entity for alias ${parentAlias}, \r\n\t\t\t\ton table ${i + 1} in FROM clause`);\n            }\n            let leftNode = joinNodeMap[parentAlias];\n            let rightNode = new JoinTreeNode(joinRelation, [], leftNode);\n            leftNode.addChildNode(rightNode);\n            alias = this.relationManager.getAlias(joinRelation);\n            let rightEntity = this.relationManager.createRelatedQEntity(joinRelation, context);\n            this.qEntityMapByAlias[alias] = rightEntity;\n            this.jsonRelationMapByAlias[alias] = firstRelation;\n            if (!rightEntity) {\n                throw new Error(`Could not find entity ${joinRelation.ti} for \r\n\t\t\t\ttable ${i + 1} in FROM clause`);\n            }\n            if (joinNodeMap[alias]) {\n                throw new Error(`Alias '${alias}' used more than once in the FROM clause.`);\n            }\n            joinNodeMap[alias] = rightNode;\n        }\n        return jsonTree;\n    }\n    parseQueryResult(selectClauseFragment, entityAlias, currentJoinNode, resultRow, nextColumnIndex, context) {\n        // Return blanks, primitives and Dates directly\n        if (!resultRow || !(resultRow instanceof Object) || resultRow instanceof Date) {\n            return resultRow;\n        }\n        let numNonNullColumns = 0;\n        let qEntity = this.qEntityMapByAlias[entityAlias];\n        const dbEntity = qEntity.__driver__.dbEntity;\n        let resultObject = this.queryParser.addEntity(entityAlias, dbEntity, context);\n        for (let propertyName in selectClauseFragment) {\n            const dbProperty = dbEntity.propertyMap[propertyName];\n            if (!dbProperty.relation || !dbProperty.relation.length) {\n                const columnAlias = this.columnAliases.getFollowingAlias();\n                const defaultValue = this.entityDefaults.getForAlias(entityAlias)[propertyName];\n                const dbColumn = dbProperty.propertyColumns[0].column;\n                const propertyValue = this.sqlQueryAdapter.getResultCellValue(resultRow, columnAlias, nextColumnIndex[0], dbColumn.type, defaultValue);\n                if (this.queryParser.addProperty(entityAlias, resultObject, dbColumn.type, propertyName, propertyValue)) {\n                    numNonNullColumns++;\n                }\n                nextColumnIndex[0]++;\n            }\n            else {\n                const childSelectClauseFragment = selectClauseFragment[propertyName];\n                const dbRelation = dbProperty.relation[0];\n                const childDbEntity = dbRelation.relationEntity;\n                if (childSelectClauseFragment === null || childSelectClauseFragment.__state__ === EntityState.STUB) {\n                    switch (dbRelation.relationType) {\n                        case EntityRelationType.MANY_TO_ONE:\n                            let haveRelationValues = false;\n                            let relationInfos = [];\n                            this.applicationUtils.forEachColumnTypeOfRelation(dbRelation, (dbColumn, propertyNameChains) => {\n                                const columnAlias = this.columnAliases.getFollowingAlias();\n                                let value = this.sqlQueryAdapter.getResultCellValue(resultRow, columnAlias, nextColumnIndex[0], dbColumn.type, null);\n                                relationInfos.push({\n                                    propertyNameChains: propertyNameChains,\n                                    sqlDataType: dbColumn.type,\n                                    value\n                                });\n                                if (objectExists(value)) {\n                                    haveRelationValues = true;\n                                    numNonNullColumns++;\n                                }\n                                nextColumnIndex[0]++;\n                            });\n                            if (haveRelationValues) {\n                                this.queryParser.bufferManyToOneStub(entityAlias, dbEntity, resultObject, propertyName, childDbEntity, relationInfos, context);\n                            }\n                            else {\n                                this.queryParser.bufferBlankManyToOneStub(entityAlias, resultObject, propertyName, relationInfos);\n                            }\n                            break;\n                        case EntityRelationType.ONE_TO_MANY:\n                            this.queryParser.bufferOneToManyStub(dbEntity, propertyName);\n                            break;\n                        default:\n                            throw new Error(`Unknown relation type '${dbRelation.relationType}' for \r\n\t\t\t\t\t\t\t\t'${dbEntity.name}.${dbProperty.name}'`);\n                    }\n                }\n                else {\n                    const childJoinNode = currentJoinNode.getEntityRelationChildNode(dbRelation);\n                    const childEntityAlias = this.relationManager.getAlias(childJoinNode.jsonRelation);\n                    const relationQEntity = this.qEntityMapByAlias[childEntityAlias];\n                    const relationDbEntity = relationQEntity.__driver__.dbEntity;\n                    let childResultObject = this.parseQueryResult(childSelectClauseFragment, childEntityAlias, childJoinNode, resultRow, nextColumnIndex, context);\n                    switch (dbRelation.relationType) {\n                        case EntityRelationType.MANY_TO_ONE:\n                            if (childResultObject) {\n                                this.queryParser.bufferManyToOneObject(entityAlias, dbEntity, resultObject, propertyName, relationDbEntity, childResultObject, context);\n                            }\n                            else {\n                                this.queryParser.bufferBlankManyToOneObject(entityAlias, resultObject, propertyName);\n                            }\n                            break;\n                        case EntityRelationType.ONE_TO_MANY:\n                            if (childResultObject) {\n                                this.queryParser.bufferOneToManyCollection(entityAlias, resultObject, dbEntity, propertyName, relationDbEntity, childResultObject, context);\n                            }\n                            else {\n                                this.queryParser.bufferBlankOneToMany(entityAlias, resultObject, dbEntity.name, propertyName, relationDbEntity, context);\n                            }\n                            break;\n                        default:\n                            throw new Error(`Unknown relation type '${dbRelation.relationType}' for \r\n\t\t\t\t\t\t\t\t'${dbEntity.name}.${dbProperty.name}'`);\n                    }\n                }\n            }\n        }\n        if (numNonNullColumns === 0) {\n            return null;\n        }\n        let idValue = this.applicationUtils.getIdKey(resultObject, dbEntity);\n        return this.queryParser.flushEntity(entityAlias, dbEntity, selectClauseFragment, idValue, resultObject, context);\n    }\n    /**\n     * Verify that the entity select clause is valid (has ids) and fill in clauses\n     * that are blank (defined as {}).\n     *\n     *\n     * {\n     *  id1: Y,\n     *  id2: {\n     *    subId1: Y\n     *  },\n     *  other1: Y\n     * }\n     *\n     * If no properties are specified all properties are included.\n     *\n     * @param selectClauseFragment\n     * @param {DbEntity} dbEntity\n     * @returns {any}\n     */\n    setupSelectFields(selectClauseFragment, dbEntity, context, parentDbProperty) {\n        let retrieveAllOwnFields = true;\n        let selectFragment;\n        if (!selectClauseFragment || selectClauseFragment instanceof Array) {\n            let ofProperty = '';\n            if (parentDbProperty) {\n                ofProperty = `(of '${parentDbProperty.entity.name}.${parentDbProperty.name}') `;\n            }\n            throw new Error(`'${dbEntity.name}' Entity SELECT clause ${ofProperty}must be specified as an Object.`);\n        }\n        else if (isID(selectFragment)) {\n            selectFragment = {};\n            retrieveAllOwnFields = false;\n        }\n        else {\n            selectFragment = { ...selectClauseFragment };\n        }\n        let allFieldsSpecified = false;\n        if (selectFragment.__allFields__ === true) {\n            allFieldsSpecified = true;\n            delete selectFragment.__allFields__;\n        }\n        const entityDefinitionHasIds = !!dbEntity.idColumns.length;\n        for (const propertyName in selectFragment) {\n            if (!allFieldsSpecified) {\n                retrieveAllOwnFields = false;\n            }\n            const dbProperty = dbEntity.propertyMap[propertyName];\n            if (!dbProperty) {\n                throw new Error(`Entity property '${dbEntity.name}.${propertyName}' does not exist.`);\n            }\n            const value = selectFragment[propertyName];\n            if (value === undefined || value === null || isN(value)) {\n                if (dbProperty.isId) {\n                    throw new Error(`@Id properties cannot be excluded from entity queries.`);\n                }\n                if (!entityDefinitionHasIds) {\n                    throw new Error(`Cannot exclude property '${propertyName}' from select clause \r\n\t\t\t\t\tfor '${dbEntity.name}' Entity - entity has no @Id so all properties must be included.`);\n                }\n                delete selectFragment[propertyName];\n                continue;\n            }\n            // Need to differentiate between properties that contain only\n            // foreign key ids and properties\n            if (dbProperty.relation && dbProperty.relation.length) {\n                selectFragment[propertyName] = this.setupSelectFields(value, dbProperty.relation[0].relationEntity, context, dbProperty);\n                // } else {\n                // \t//  At least one non-relational field is in the original select clause\n                // \tretrieveAllOwnFields = false\n            }\n            else if (!isY(value)) {\n                selectFragment[propertyName] = Y;\n            }\n        }\n        //  For {} select causes, entities with no @Id, retrieve the entire object.\n        // Otherwise make sure all @Id columns are specified.\n        for (const dbProperty of dbEntity.properties) {\n            if (entityDefinitionHasIds && !dbProperty.isId && !retrieveAllOwnFields) {\n                continue;\n            }\n            const allowDefaults = entityDefinitionHasIds && !dbProperty.isId;\n            if (dbProperty.relation && dbProperty.relation.length) {\n                const dbRelation = dbProperty.relation[0];\n                switch (dbRelation.relationType) {\n                    case EntityRelationType.ONE_TO_MANY:\n                        break;\n                    case EntityRelationType.MANY_TO_ONE:\n                        // If select fragment for the child entity is already defined, do not overwrite it\n                        if (selectFragment[dbProperty.name]) {\n                            break;\n                        }\n                        const manyToOneRelation = {};\n                        this.entityStateManager.markAsStub(manyToOneRelation);\n                        selectFragment[dbProperty.name] = manyToOneRelation;\n                        // applicationUtils.addRelationToEntitySelectClause(dbRelation, selectFragment,\n                        // allowDefaults)\n                        break;\n                    default:\n                        throw new Error(`Unknown relation type: '${dbRelation.relationType}' \r\n\t\t\t\t\t\ton '${dbEntity.name}.${dbProperty.name}'.`);\n                }\n            }\n            else {\n                const value = selectFragment[dbProperty.name];\n                if (value !== undefined && value !== null) {\n                    if (!allowDefaults && !isY(value)) {\n                        throw new Error(`${entityDefinitionHasIds ? '@Id properties' : 'Entities without @Id'} \r\n\t\t\t\t\t\tcannot have default SELECT values.`);\n                    }\n                }\n                else {\n                    selectFragment[dbProperty.name] = Y;\n                }\n            }\n        }\n        return selectFragment;\n    }\n    getSELECTFragment(dbEntity, selectClauseFragment, joinTree, context, parentProperty) {\n        const tableAlias = this.relationManager.getAlias(joinTree.jsonRelation);\n        let selectSqlFragments = [];\n        let isStubProperty = this.entityStateManager.isStub(selectClauseFragment);\n        const defaults = this.entityDefaults.getForAlias(tableAlias);\n        for (let propertyName in selectClauseFragment) {\n            if (propertyName === '__state__') {\n                continue;\n            }\n            const value = selectClauseFragment[propertyName];\n            if (!isY(value)) {\n                defaults[propertyName] = value;\n            }\n            const dbProperty = dbEntity.propertyMap[propertyName];\n            if (dbProperty.relation && dbProperty.relation.length) {\n                const dbRelation = dbProperty.relation[0];\n                if (this.entityStateManager.isStub(selectClauseFragment[propertyName])) {\n                    for (const relationColumn of dbRelation.manyRelationColumns) {\n                        const dbColumn = relationColumn.manyColumn;\n                        this.addFieldFromColumn(dbColumn);\n                        const columnSelect = this.getSimpleColumnFragment(tableAlias, dbColumn.name);\n                        selectSqlFragments.push(`${columnSelect} ${this.columnAliases.getFollowingAlias()}`);\n                    }\n                }\n                else {\n                    const subSelectFragments = this.getSELECTFragment(dbRelation.relationEntity, selectClauseFragment[propertyName], joinTree.getEntityRelationChildNode(dbRelation), context, dbProperty);\n                    selectSqlFragments = selectSqlFragments.concat(subSelectFragments);\n                }\n            }\n            else {\n                const dbColumn = dbProperty.propertyColumns[0].column;\n                this.addFieldFromColumn(dbColumn);\n                const columnSelect = this.getSimpleColumnFragment(tableAlias, dbColumn.name);\n                selectSqlFragments.push(`${columnSelect} ${this.columnAliases.getFollowingAlias()}`);\n            }\n        }\n        return selectSqlFragments;\n    }\n    getFROMFragment(parentTree, currentTree, context) {\n        let fromFragment = '\\t';\n        let currentRelation = currentTree.jsonRelation;\n        let currentAlias = this.relationManager.getAlias(currentRelation);\n        let qEntity = this.qEntityMapByAlias[currentAlias];\n        let tableName = this.storeDriver.getEntityTableName(qEntity.__driver__.dbEntity, context);\n        if (!parentTree) {\n            fromFragment += `${tableName} ${currentAlias}`;\n        }\n        else {\n            let parentRelation = parentTree.jsonRelation;\n            let parentAlias = this.relationManager.getAlias(parentRelation);\n            let leftEntity = this.qEntityMapByAlias[parentAlias];\n            let rightEntity = this.qEntityMapByAlias[currentAlias];\n            let joinTypeString;\n            switch (currentRelation.jt) {\n                case JoinType.FULL_JOIN:\n                    throw new Error(`Full Joins are not allowed in Entity queries.`);\n                case JoinType.INNER_JOIN:\n                    joinTypeString = 'INNER JOIN';\n                    break;\n                case JoinType.LEFT_JOIN:\n                    joinTypeString = 'LEFT JOIN';\n                    break;\n                case JoinType.RIGHT_JOIN:\n                    throw new Error(`Right Joins are not allowed in Entity queries.`);\n                default:\n                    throw new Error(`Unsupported join type: ${currentRelation.jt}`);\n            }\n            let errorPrefix = 'Error building FROM: ';\n            switch (currentRelation.rt) {\n                case JSONRelationType.ENTITY_APPLICATION_RELATION:\n                    fromFragment += this.getEntityApplicationRelationFromJoin(leftEntity, rightEntity, currentRelation, parentRelation, currentAlias, parentAlias, joinTypeString, errorPrefix, context);\n                    break;\n                default:\n                    throw new Error(`Only Entity application relations are allowed in Entity query FROM clause.`);\n            }\n        }\n        for (let i = 0; i < currentTree.childNodes.length; i++) {\n            let childTreeNode = currentTree.childNodes[i];\n            fromFragment += this.getFROMFragment(currentTree, childTreeNode, context);\n        }\n        return fromFragment;\n    }\n}\n//# sourceMappingURL=EntitySQLQuery.js.map","import { JSONClauseObjectType, QueryResultType } from '@airport/ground-control';\nimport { ExactOrderByParser } from '../orderBy/ExactOrderByParser';\nimport { ClauseType } from './core/SQLWhereBase';\nimport { NonEntitySQLQuery } from './NonEntitySQLQuery';\n/**\n * Created by Papa on 10/16/2016.\n */\n/**\n * Represents SQL String query with flat (aka traditional) Select clause.\n */\nexport class SheetSQLQuery extends NonEntitySQLQuery {\n    constructor(jsonQuery, dialect, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, subStatementQueryGenerator, context) {\n        super(jsonQuery, dialect, QueryResultType.SHEET, airportDatabase, applicationUtils, entityStateManager, qMetadataUtils, qValidator, relationManager, sqlQueryAdapter, storeDriver, subStatementQueryGenerator, context);\n        this.orderByParser = new ExactOrderByParser(qValidator);\n    }\n    async parseQueryResults(results, internalFragments, queryResultType, context, bridgedQueryConfiguration) {\n        let parsedResults = [];\n        if (!results || !results.length) {\n            return parsedResults;\n        }\n        parsedResults = [];\n        let lastResult;\n        results.forEach((result) => {\n            let parsedResult = this.parseQueryResult(this.jsonQuery.S, result, [0], internalFragments);\n            parsedResults.push(parsedResult);\n        });\n        return parsedResults;\n    }\n    getSELECTFragment(nested, selectClauseFragment, internalFragments, context) {\n        if (!selectClauseFragment) {\n            throw new Error(`SELECT clause is not defined for a Flat Query`);\n        }\n        {\n            let distinctClause = selectClauseFragment;\n            if (distinctClause.ot == JSONClauseObjectType.DISTINCT_FUNCTION) {\n                let distinctSelect = this.getSELECTFragment(nested, distinctClause.appliedFunctions[0].p[0], internalFragments, context);\n                return `DISTINCT ${distinctSelect}`;\n            }\n        }\n        if (!(selectClauseFragment instanceof Array)) {\n            throw new Error(`SELECT clause for a Flat Query must be an Array`);\n        }\n        let fieldIndex = 0;\n        let selectSqlFragment = selectClauseFragment.map((field) => {\n            return this.getFieldSelectFragment(field, ClauseType.NON_MAPPED_SELECT_CLAUSE, null, fieldIndex++, context);\n        })\n            .join('');\n        const selectClause = internalFragments.SELECT;\n        if (selectClause && selectClause.length) {\n            if (fieldIndex) {\n                selectSqlFragment += '\\n\\t,';\n            }\n            selectSqlFragment += selectClause\n                .map(dbColumn => `${dbColumn.name}`)\n                .join('\\n\\t,');\n        }\n        return selectSqlFragment;\n    }\n    parseQueryResult(selectClauseFragment, resultRow, nextFieldIndex, internalFragments) {\n        const resultsFromSelect = selectClauseFragment.map((field) => {\n            let propertyValue = this.sqlQueryAdapter.getResultCellValue(resultRow, field.fa, nextFieldIndex[0], field.dt, null);\n            nextFieldIndex[0]++;\n            return propertyValue;\n        });\n        const selectClause = internalFragments.SELECT;\n        if (selectClause && selectClause.length) {\n            for (const dbColumn of selectClause) {\n                let propertyValue = this.sqlQueryAdapter.getResultCellValue(resultRow, dbColumn.name, nextFieldIndex[0], dbColumn.type, null);\n                resultsFromSelect.push(propertyValue);\n                nextFieldIndex[0]++;\n            }\n        }\n        return resultsFromSelect;\n    }\n}\n//# sourceMappingURL=SheetSQLQuery.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nlet ActiveQueries = class ActiveQueries {\n    constructor() {\n        this.queries = new Map();\n    }\n    add(portableQuery, cachedSqlQuery) {\n        this.queries.set(portableQuery, cachedSqlQuery);\n    }\n    remove(portableQuery) {\n        this.queries.delete(portableQuery);\n    }\n    markQueriesToRerun(applicationMap) {\n        this.queries.forEach((cachedSqlQuery) => {\n            if (applicationMap.intersects(cachedSqlQuery.sqlQuery.getFieldMap())) {\n                cachedSqlQuery.rerun = true;\n            }\n        });\n    }\n    rerunQueries( //\n    ) {\n        // Add a bit of a wait to let any query-subscribed screens that are closing after\n        // a mutation operation to un-subscribe from those queries.\n        setTimeout(() => {\n            this.queries.forEach((cachedSqlQuery) => {\n                if (cachedSqlQuery.rerun) {\n                    cachedSqlQuery.rerun = false;\n                    cachedSqlQuery.runQuery();\n                }\n            });\n        }, 100);\n    }\n};\nActiveQueries = __decorate([\n    Injected()\n], ActiveQueries);\nexport { ActiveQueries };\n//# sourceMappingURL=ActiveQueries.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { Q } from '@airport/holding-pattern';\n/**\n * Created by Papa on 9/2/2016.\n */\nlet IdGenerator = class IdGenerator {\n    constructor() {\n        this.transactionHistoryIdColumns = [];\n    }\n    async init() {\n        this.populateTransactionHistoryIdColumns().then();\n    }\n    populateTransactionHistoryIdColumns() {\n        return new Promise((resolve, _reject) => {\n            this.doPopulateTransactionHistoryIdColumns(resolve);\n        });\n    }\n    doPopulateTransactionHistoryIdColumns(resolve) {\n        if (Q.__dbApplication__ && Q.__dbApplication__.currentVersion) {\n            const transactionHistoryDbEntity = this.getHoldingPatternDbEntity('TransactionHistory');\n            const repoTransHistoryDbEntity = this.getHoldingPatternDbEntity('RepositoryTransactionHistory');\n            const operationHistoryDbEntity = this.getHoldingPatternDbEntity('OperationHistory');\n            const recordHistoryDbEntity = this.getHoldingPatternDbEntity('RecordHistory');\n            this.transactionHistoryIdColumns.push(transactionHistoryDbEntity.idColumns[0]);\n            this.transactionHistoryIdColumns.push(repoTransHistoryDbEntity.idColumns[0]);\n            this.transactionHistoryIdColumns.push(operationHistoryDbEntity.idColumns[0]);\n            this.transactionHistoryIdColumns.push(recordHistoryDbEntity.idColumns[0]);\n            resolve();\n        }\n        else {\n            setTimeout(() => {\n                this.doPopulateTransactionHistoryIdColumns(resolve);\n            }, 100);\n        }\n    }\n    async generateTransactionHistoryIds(numRepositoryTransHistories, numOperationTransHistories, numRecordHistories) {\n        let generatedSequenceNumbers = await this.sequenceGenerator\n            .generateSequenceNumbers(this.transactionHistoryIdColumns, [\n            1,\n            numRepositoryTransHistories,\n            numOperationTransHistories,\n            numRecordHistories\n        ]);\n        return {\n            operationHistoryIds: generatedSequenceNumbers[2],\n            recordHistoryIds: generatedSequenceNumbers[3],\n            repositoryHistoryIds: generatedSequenceNumbers[1],\n            transactionHistoryId: generatedSequenceNumbers[0][0]\n        };\n    }\n    async generateEntityIds() {\n    }\n    getHoldingPatternDbEntity(holdingPatternEntityName) {\n        return Q.__dbApplication__.currentVersion[0].applicationVersion\n            .entityMapByName[holdingPatternEntityName];\n    }\n};\n__decorate([\n    Inject()\n], IdGenerator.prototype, \"sequenceGenerator\", void 0);\nIdGenerator = __decorate([\n    Injected()\n], IdGenerator);\nexport { IdGenerator };\n//# sourceMappingURL=IdGenerator.js.map","/**\n * Created by Papa on 6/28/2016.\n */\nexport class RecordStateData {\n    constructor() {\n        this.accessed = {};\n        this.current = {};\n        this.initialized = {};\n        this.original = {};\n    }\n}\nexport var CurrentState;\n(function (CurrentState) {\n    CurrentState[\"CREATED\"] = \"CREATED\";\n    CurrentState[\"DELETED\"] = \"DELETED\";\n    CurrentState[\"UPDATED\"] = \"UPDATED\";\n})(CurrentState || (CurrentState = {}));\nexport class RecordState {\n    constructor() {\n        this.data = new RecordStateData();\n        this.initialized = false;\n        this.isDirty = false;\n        this.proxied = false;\n    }\n    create() {\n        this.currentState = CurrentState.CREATED;\n    }\n    delete() {\n        this.currentState = CurrentState.DELETED;\n    }\n    toJSON() {\n        // TODO: implement\n        return null;\n    }\n    update() {\n        this.currentState = CurrentState.UPDATED;\n    }\n}\n//# sourceMappingURL=RecordState.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { doEnsureContext } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getFullApplicationName, QueryResultType, SyncApplicationMap, } from '@airport/ground-control';\nimport { Subject } from 'rxjs';\nimport { SQLDelete } from '../sql/core/SQLDelete';\nimport { SQLInsertValues } from '../sql/core/SQLInsertValues';\nimport { SQLUpdate } from '../sql/core/SQLUpdate';\nimport { EntitySQLQuery } from '../sql/EntitySQLQuery';\nimport { FieldSQLQuery } from '../sql/FieldSQLQuery';\nimport { SheetSQLQuery } from '../sql/SheetSQLQuery';\nimport { TreeSQLQuery } from '../sql/TreeSQLQuery';\n/**\n * Created by Papa on 9/9/2016.\n */\nlet SqlDriver = class SqlDriver {\n    supportsLocalTransactions(context) {\n        return true;\n    }\n    getEntityTableName(dbEntity, context) {\n        return this.getTableName(dbEntity.applicationVersion.application, dbEntity, context);\n    }\n    getTableName(application, table, context) {\n        let theTableName = table.name;\n        if (table.tableConfig && table.tableConfig.name) {\n            theTableName = table.tableConfig.name;\n        }\n        let fullApplicationName;\n        if (application.fullName) {\n            fullApplicationName = application.fullName;\n        }\n        else {\n            fullApplicationName = getFullApplicationName(application);\n        }\n        return this.composeTableName(fullApplicationName, theTableName, context);\n    }\n    async internalSetupTransaction(transaction, context) {\n        await this.ensureContext(context);\n    }\n    async tearDownTransaction(transaction, context) {\n        if (transaction.childTransaction) {\n            this.tearDownTransaction(transaction.childTransaction, context);\n        }\n        if (transaction.parentTransaction) {\n            transaction.parentTransaction.childTransaction = null;\n            transaction.parentTransaction = null;\n        }\n    }\n    async startTransaction(transaction, context) {\n        await this.ensureContext(context);\n        try {\n            await this.internalStartTransaction(transaction);\n        }\n        catch (e) {\n            await this.tearDownTransaction(transaction, context);\n            console.error(e);\n            throw e;\n        }\n    }\n    async commit(transaction, context) {\n        await this.ensureContext(context);\n        try {\n            await this.internalCommit(transaction);\n        }\n        catch (e) {\n            console.error(e);\n            try {\n                await this.internalRollback(transaction);\n            }\n            catch (rollbackError) {\n                console.error(rollbackError);\n            }\n            throw e;\n        }\n        finally {\n            await this.tearDownTransaction(transaction, context);\n        }\n    }\n    async rollback(transaction, context) {\n        await this.ensureContext(context);\n        try {\n            await this.internalRollback(transaction);\n        }\n        catch (e) {\n            console.error(e);\n            // Do not re-throw the exception, rollback is final (at least for now)\n        }\n        finally {\n            await this.tearDownTransaction(transaction, context);\n        }\n    }\n    async insertValues(portableQuery, context, cachedSqlQueryId) {\n        const splitValues = this.splitValues(portableQuery.jsonQuery.V, context);\n        let numVals = 0;\n        for (const V of splitValues) {\n            let sqlInsertValues = new SQLInsertValues({\n                ...portableQuery.jsonQuery,\n                V\n            }, this.getDialect(context), this.airportDatabase, this.applicationUtils, this.entityStateManager, this.qMetadataUtils, this.qValidator, this.relationManager, this.sqlQueryAdapter, this, context);\n            let sql = sqlInsertValues.toSQL(context);\n            let parameters = sqlInsertValues.getParameters(portableQuery.parameterMap, context);\n            numVals += await this.executeNative(sql, parameters, context);\n        }\n        return numVals;\n    }\n    async deleteWhere(portableQuery, context) {\n        let fieldMap = new SyncApplicationMap();\n        let sqlDelete = new SQLDelete(portableQuery.jsonQuery, this.getDialect(context), this.airportDatabase, this.applicationUtils, this.entityStateManager, this.qMetadataUtils, this.relationManager, this.sqlQueryAdapter, this, context);\n        let sql = sqlDelete.toSQL(context);\n        let parameters = sqlDelete.getParameters(portableQuery.parameterMap, context);\n        let numberOfAffectedRecords = await this.executeNative(sql, parameters, context);\n        this.activeQueries.markQueriesToRerun(fieldMap);\n        return numberOfAffectedRecords;\n    }\n    async updateWhere(portableQuery, internalFragments, context) {\n        let sqlUpdate = new SQLUpdate(portableQuery.jsonQuery, this.getDialect(context), this.airportDatabase, this.applicationUtils, this.entityStateManager, this.qMetadataUtils, this.qValidator, this.relationManager, this.sqlQueryAdapter, this, context);\n        let sql = sqlUpdate.toSQL(internalFragments, context);\n        let parameters = sqlUpdate.getParameters(portableQuery.parameterMap, context);\n        return await this.executeNative(sql, parameters, context);\n    }\n    async find(portableQuery, internalFragments, context, cachedSqlQueryId) {\n        if (context.transaction) {\n            return await context.transaction.find(portableQuery, internalFragments, context, cachedSqlQueryId);\n        }\n        context = await this.ensureContext(context);\n        const sqlQuery = this.getSQLQuery(portableQuery, context);\n        const sql = sqlQuery.toSQL(internalFragments, context);\n        const parameters = sqlQuery.getParameters(portableQuery.parameterMap, context);\n        let results = await this.findNative(sql, parameters, context);\n        results = await sqlQuery.parseQueryResults(results, internalFragments, portableQuery.queryResultType, context);\n        // FIXME: convert to MappedEntityArray if needed\n        return results;\n    }\n    getSQLQuery(portableQuery, context) {\n        let jsonQuery = portableQuery.jsonQuery;\n        let dialect = this.getDialect(context);\n        let resultType = portableQuery.queryResultType;\n        const QueryResType = QueryResultType;\n        switch (resultType) {\n            case QueryResType.ENTITY_GRAPH:\n            case QueryResType.ENTITY_TREE:\n            case QueryResType.MAPPED_ENTITY_GRAPH:\n            case QueryResType.MAPPED_ENTITY_TREE:\n                const dbEntity = this.airportDatabase.applications[portableQuery.applicationIndex]\n                    .currentVersion[0].applicationVersion.entities[portableQuery.tableIndex];\n                return new EntitySQLQuery(jsonQuery, dbEntity, dialect, resultType, this.airportDatabase, this.applicationUtils, this.entityStateManager, this.objectResultParserFactory, this.qMetadataUtils, this.qValidator, this.relationManager, this.sqlQueryAdapter, this, context);\n            case QueryResType.FIELD:\n                return new FieldSQLQuery(jsonQuery, dialect, this.airportDatabase, this.applicationUtils, this.entityStateManager, this.qMetadataUtils, this.qValidator, this.relationManager, this.sqlQueryAdapter, this, this.subStatementQueryGenerator, context);\n            case QueryResType.SHEET:\n                return new SheetSQLQuery(jsonQuery, dialect, this.airportDatabase, this.applicationUtils, this.entityStateManager, this.qMetadataUtils, this.qValidator, this.relationManager, this.sqlQueryAdapter, this, this.subStatementQueryGenerator, context);\n            case QueryResType.TREE:\n                return new TreeSQLQuery(jsonQuery, dialect, this.airportDatabase, this.applicationUtils, this.entityStateManager, this.qMetadataUtils, this.qValidator, this.relationManager, this.sqlQueryAdapter, this, this.subStatementQueryGenerator, context);\n            case QueryResType.RAW:\n            default:\n                throw new Error(`Unknown QueryResultType: ${resultType}`);\n        }\n    }\n    async findOne(portableQuery, internalFragments, context, cachedSqlQueryId) {\n        let results = await this.find(portableQuery, internalFragments, context);\n        if (results.length > 1) {\n            throw new Error(`Expecting a single result, got ${results.length}`);\n        }\n        if (results.length == 1) {\n            return results[0];\n        }\n        return null;\n    }\n    search(portableQuery, internalFragments, context, cachedSqlQueryId) {\n        let resultsSubject = new Subject();\n        // TODO: Remove the query for the list of cached queries, that are checked every\n        //    time a mutation operation is run\n        // let resultsSubject                 = new Subject<EntityArray>(() => {\n        // \tif (resultsSubject.subscriptions.length < 1) {\n        // \t\t\t\t\t// Remove the query for the list of cached queries, that are checked every\n        // \t\t\t\t\t// time a mutation operation is run\n        // \t\t\t\t\tthis.activeQueries.remove(portableQuery)\n        // \t}\n        // })\n        let cachedSqlQuery = {\n            resultsSubject: resultsSubject,\n            runQuery: () => {\n                this.find(portableQuery, internalFragments, context)\n                    .then((results) => {\n                    // FIXME: convert to MappedEntityArray if needed\n                    resultsSubject.next(results);\n                });\n            }\n        };\n        // this.queries.add(portableQuery, cachedSqlQuery);\n        cachedSqlQuery.runQuery();\n        return resultsSubject;\n    }\n    searchOne(portableQuery, internalFragments, context, cachedSqlQueryId) {\n        let resultsSubject = new Subject();\n        // TODO: Remove the query for the list of cached queries, that are checked every\n        //       time a mutation operation is run\n        // let resultsSubject                 = new Subject<E>(() => {\n        // \tif (resultsSubject.subscriptions.length < 1) {\n        // \t\t\t\t\t// Remove the query for the list of cached queries, that are checked every\n        // \t\t\t\t\t// time a mutation operation is run\n        // \t\t\t\t\tthis.activeQueries.remove(portableQuery)\n        // \t}\n        // });\n        let cachedSqlQuery = {\n            resultsSubject: resultsSubject,\n            runQuery: () => {\n                this.findOne(portableQuery, internalFragments, context)\n                    .then((result) => {\n                    resultsSubject.next(result);\n                });\n            }\n        };\n        // this.queries.add(portableQuery, cachedSqlQuery);\n        cachedSqlQuery.runQuery();\n        return resultsSubject;\n    }\n    warn(message) {\n        console.log(message);\n    }\n    splitValues(values, context) {\n        const valuesInRow = values[0].length;\n        const numValues = values.length * valuesInRow;\n        if (numValues <= this.maxValues) {\n            return [values];\n        }\n        let numRowsPerBatch = Math.floor(this.maxValues / valuesInRow);\n        const splitValues = [];\n        for (let i = 0; i < values.length; i += numRowsPerBatch) {\n            const aSplitValues = values.slice(i, i + numRowsPerBatch);\n            splitValues.push(aSplitValues);\n        }\n        return splitValues;\n    }\n    async ensureContext(context) {\n        context = doEnsureContext(context);\n        await this.operationContextLoader.ensure(context);\n        return context;\n    }\n};\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"activeQueries\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"applicationUtils\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"entityStateManager\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"objectResultParserFactory\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"operationContextLoader\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"qMetadataUtils\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"qValidator\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"relationManager\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"transactionManager\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"sqlQueryAdapter\", void 0);\n__decorate([\n    Inject()\n], SqlDriver.prototype, \"subStatementQueryGenerator\", void 0);\nSqlDriver = __decorate([\n    Injected()\n], SqlDriver);\nexport { SqlDriver };\n//# sourceMappingURL=SqlDriver.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nlet QValidator = class QValidator {\n    validateInsertQEntity(dbEntity) {\n    }\n    validateReadFromEntity(relation) {\n    }\n    validateReadProperty(dbColumn) {\n    }\n    validateUpdateProperty(propertyName, dbEntity) {\n    }\n    validateUpdateColumn(dbColumn) {\n    }\n    validateReadQEntityProperty(applicationIndex, tableIndex, columnIndex) {\n    }\n    validateReadQEntityManyToOneRelation(applicationIndex, tableIndex, columnIndex) {\n    }\n    addFunctionAlias(functionAlias) {\n    }\n    addSubQueryAlias(subQueryAlias) {\n    }\n    validateAliasedFieldAccess(fieldAlias) {\n    }\n};\nQValidator = __decorate([\n    Injected()\n], QValidator);\nexport { QValidator };\n//# sourceMappingURL=Validator.js.map","import { lib } from '@airport/direction-indicator';\nimport { SubStatementSqlGenerator } from './sql/core/SubStatementSqlGenerator';\nimport { ObjectResultParserFactory } from './result/entity/ObjectResultParserFactory';\nimport { ActiveQueries } from './store/ActiveQueries';\nimport { IdGenerator } from './store/IdGenerator';\nimport { QValidator } from './validation/Validator';\nimport { SqlDriver } from './store/SqlDriver';\nimport { STORE_DRIVER, TRANSACTION_MANAGER } from '@airport/terminal-map';\nimport { ENTITY_STATE_MANAGER, OPERATION_CONTEXT_LOADER } from '@airport/ground-control';\nimport { SEQUENCE_GENERATOR } from '@airport/check-in';\nimport { SQLWhereBase } from './sql/core/SQLWhereBase';\nimport { AIRPORT_DATABASE, APPLICATION_UTILS, Q_METADATA_UTILS, RELATION_MANAGER } from '@airport/air-traffic-control';\nconst fuelHydrantSystem = lib('fuel-hydrant-system');\nfuelHydrantSystem.autopilot = false;\nexport const ACTIVE_QUERIES = fuelHydrantSystem.token({\n    class: ActiveQueries,\n    interface: 'IActiveQueries',\n    token: 'ACTIVE_QUERIES'\n});\nexport const SUB_STATEMENT_SQL_GENERATOR = fuelHydrantSystem.token({\n    class: SubStatementSqlGenerator,\n    interface: 'ISubStatementSqlGenerator',\n    token: 'SUB_STATEMENT_SQL_GENERATOR'\n});\nexport const ID_GENERATOR = fuelHydrantSystem.token({\n    class: IdGenerator,\n    interface: 'IIdGenerator',\n    token: 'ID_GENERATOR'\n});\nexport const OBJECT_RESULT_PARSER_FACTORY = fuelHydrantSystem.token({\n    class: ObjectResultParserFactory,\n    interface: 'IObjectResultParserFactory',\n    token: 'OBJECT_RESULT_PARSER_FACTORY'\n});\nexport const Q_VALIDATOR = fuelHydrantSystem.token({\n    class: QValidator,\n    interface: 'IValidator',\n    token: 'Q_VALIDATOR'\n});\nexport const SQL_QUERY_ADAPTOR = fuelHydrantSystem.token({\n    class: null,\n    interface: 'ISQLQueryAdaptor',\n    token: 'SQL_QUERY_ADAPTOR'\n});\nexport const ABSTRACT_SQL_DRIVER = fuelHydrantSystem.token({\n    class: SqlDriver,\n    interface: 'class SqlDriver',\n    token: 'ABSTRACT_SQL_DRIVER'\n});\nexport const SQL_WHERE_BASE = fuelHydrantSystem.token({\n    class: SQLWhereBase,\n    interface: 'class SQLWhereBase',\n    token: 'SQL_WHERE_BASE'\n});\nID_GENERATOR.setDependencies({\n    sequenceGenerator: SEQUENCE_GENERATOR\n});\nOBJECT_RESULT_PARSER_FACTORY.setDependencies({\n    applicationUtils: APPLICATION_UTILS,\n    entityStateManager: ENTITY_STATE_MANAGER,\n});\nABSTRACT_SQL_DRIVER.setDependencies({\n    activeQueries: ACTIVE_QUERIES,\n    airportDatabase: AIRPORT_DATABASE,\n    applicationUtils: APPLICATION_UTILS,\n    entityStateManager: ENTITY_STATE_MANAGER,\n    objectResultParserFactory: OBJECT_RESULT_PARSER_FACTORY,\n    operationContextLoader: OPERATION_CONTEXT_LOADER,\n    qMetadataUtils: Q_METADATA_UTILS,\n    qValidator: Q_VALIDATOR,\n    relationManager: RELATION_MANAGER,\n    transactionManager: TRANSACTION_MANAGER,\n    sqlQueryAdapter: SQL_QUERY_ADAPTOR,\n    subStatementQueryGenerator: SUB_STATEMENT_SQL_GENERATOR,\n});\nSQL_WHERE_BASE.setDependencies({\n    qValidator: Q_VALIDATOR,\n    subStatementSqlGenerator: SUB_STATEMENT_SQL_GENERATOR\n});\nSUB_STATEMENT_SQL_GENERATOR.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    applicationUtils: APPLICATION_UTILS,\n    entityStateManager: ENTITY_STATE_MANAGER,\n    operationContextLoader: OPERATION_CONTEXT_LOADER,\n    qMetadataUtils: Q_METADATA_UTILS,\n    qValidator: Q_VALIDATOR,\n    relationManager: RELATION_MANAGER,\n    sqlQueryAdapter: SQL_QUERY_ADAPTOR,\n    storeDriver: STORE_DRIVER,\n    subStatementQueryGenerator: SUB_STATEMENT_SQL_GENERATOR,\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet DebugSynchronizationAdapter = class DebugSynchronizationAdapter {\n    async getTransactionsForRepository(repositorySource, repositoryUuId, sinceSyncTimestamp) {\n        const response = await this.nonhubClient.getRepositoryTransactions(repositorySource, repositoryUuId, sinceSyncTimestamp);\n        const messages = [];\n        // NOTE: syncTimestamp is populated here because file sharing mechanisms\n        // (IPFS) won't be able to modify the messages themselves\n        for (const fragment of response) {\n            if (fragment.repositoryUuId !== repositoryUuId) {\n                console.error(`Got a reponse fragment for repository ${fragment.repositoryUuId}.\r\n    Expecting message fragments for repository: ${repositoryUuId}`);\n                continue;\n            }\n            for (const message of fragment.messages) {\n                message.syncTimestamp = fragment.syncTimestamp;\n                messages.push(message);\n            }\n        }\n        return messages;\n    }\n    async sendTransactions(repositorySource, messagesByRepository) {\n        let allSent = true;\n        for (const [repositoryUuid, messages] of messagesByRepository) {\n            try {\n                if (!await this.sendTransactionsForRepository(repositorySource, repositoryUuid, messages)) {\n                    allSent = false;\n                }\n            }\n            catch (e) {\n                console.error(e);\n                allSent = false;\n            }\n        }\n        return allSent;\n    }\n    async sendTransactionsForRepository(repositorySource, repositoryUuId, messages) {\n        if (!messages || !messages.length) {\n            return false;\n        }\n        const syncTimestamp = await this.nonhubClient.sendRepositoryTransactions(repositorySource, repositoryUuId, messages);\n        if (!syncTimestamp) {\n            return false;\n        }\n        for (const message of messages) {\n            message.syncTimestamp = syncTimestamp;\n        }\n        return true;\n    }\n};\n__decorate([\n    Inject()\n], DebugSynchronizationAdapter.prototype, \"nonhubClient\", void 0);\nDebugSynchronizationAdapter = __decorate([\n    Injected()\n], DebugSynchronizationAdapter);\nexport { DebugSynchronizationAdapter };\n//# sourceMappingURL=DebugSynchronizationAdapter.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet SynchronizationAdapterLoader = class SynchronizationAdapterLoader {\n    async load(synchronizationSource) {\n        switch (synchronizationSource) {\n            case 'IPFS': {\n                throw new Error(`Not Implemented`);\n            }\n            case 'localhost:9000': {\n                return this.debugSynchronizationAdapter;\n            }\n            default:\n                throw new Error(`Unexpected synchronization source: ${synchronizationSource}`);\n        }\n    }\n};\n__decorate([\n    Inject()\n], SynchronizationAdapterLoader.prototype, \"debugSynchronizationAdapter\", void 0);\nSynchronizationAdapterLoader = __decorate([\n    Injected()\n], SynchronizationAdapterLoader);\nexport { SynchronizationAdapterLoader };\n//# sourceMappingURL=SynchronizationAdapterLoader.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet SyncInActorChecker = class SyncInActorChecker {\n    async ensureActors(message) {\n        try {\n            let actorUuids = [];\n            let messageActorIndexMap = new Map();\n            for (let i = 0; i < message.actors.length; i++) {\n                const actor = message.actors[i];\n                if (typeof actor.uuId !== 'string' || actor.uuId.length !== 36) {\n                    throw new Error(`Invalid 'terminal.uuid'`);\n                }\n                this.checkActorApplication(actor, message);\n                this.checkActorTerminal(actor, message);\n                this.checkActorUser(actor, message);\n                actorUuids.push(actor.uuId);\n                messageActorIndexMap.set(actor.uuId, i);\n                // Make sure id field is not in the input\n                delete actor.id;\n            }\n            const actors = await this.actorDao.findByUuIds(actorUuids);\n            for (const actor of actors) {\n                const messageUserIndex = messageActorIndexMap.get(actor.uuId);\n                message.actors[messageUserIndex] = actor;\n            }\n            const missingActors = message.actors\n                .filter(messageActor => !messageActor.id);\n            if (missingActors.length) {\n                await this.actorDao.insert(missingActors);\n            }\n        }\n        catch (e) {\n            console.error(e);\n            return false;\n        }\n        return true;\n    }\n    checkActorApplication(actor, message) {\n        if (typeof actor.application !== 'number') {\n            throw new Error(`Expecting \"in-message index\" (number)\r\n\t\t\tin 'actor.terminal'`);\n        }\n        const application = message.applications[actor.application];\n        if (!application) {\n            throw new Error(`Did not find actor.application with \"in-message index\" ${actor.application}`);\n        }\n        actor.application = application;\n    }\n    checkActorTerminal(actor, message) {\n        if (typeof actor.terminal !== 'number') {\n            throw new Error(`Expecting \"in-message index\" (number)\r\n\t\t\tin 'actor.terminal'`);\n        }\n        const terminal = message.terminals[actor.terminal];\n        if (!terminal) {\n            throw new Error(`Did not find actor.terminal with \"in-message index\" ${actor.terminal}`);\n        }\n        actor.terminal = terminal;\n    }\n    checkActorUser(actor, message) {\n        if (typeof actor.user !== 'number') {\n            throw new Error(`Expecting \"in-message index\" (number)\r\n\t\t\tin 'actor.user'`);\n        }\n        const user = message.users[actor.user];\n        if (!user) {\n            throw new Error(`Did not find actor.user with \"in-message index\" ${actor.user}`);\n        }\n        actor.user = user;\n    }\n};\n__decorate([\n    Inject()\n], SyncInActorChecker.prototype, \"actorDao\", void 0);\nSyncInActorChecker = __decorate([\n    Injected()\n], SyncInActorChecker);\nexport { SyncInActorChecker };\n//# sourceMappingURL=SyncInActorChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ApplicationStatus } from '@airport/ground-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet SyncInApplicationChecker = class SyncInApplicationChecker {\n    async ensureApplications(message) {\n        try {\n            let applicationCheckMap = await this.checkApplicationsAndDomains(message);\n            for (let i = 0; i < message.applications.length; i++) {\n                let application = message.applications[i];\n                message.applications[i] = applicationCheckMap\n                    .get(application.domain.name).get(application.name)\n                    .application;\n            }\n        }\n        catch (e) {\n            console.error(e);\n            return false;\n        }\n        return true;\n    }\n    async checkApplicationsAndDomains(message) {\n        const { allApplicationNames, domainCheckMap, domainNames, applicationCheckMap } = this.getNames(message);\n        const applications = await this.applicationDao\n            .findByDomainNamesAndApplicationNames(domainNames, allApplicationNames);\n        for (let application of applications) {\n            let domainName = application.domain.name;\n            let applicationName = application.name;\n            for (let [_, applicationCheck] of applicationCheckMap.get(domainName)) {\n                if (applicationCheck.applicationName === applicationName) {\n                    let domainCheck = domainCheckMap.get(domainName);\n                    domainCheck.found = true;\n                    domainCheck.domain = application.domain;\n                    applicationCheck.found = true;\n                    applicationCheck.application = application;\n                }\n            }\n        }\n        let domainsToCreate = [];\n        for (let [name, domainCheck] of domainCheckMap) {\n            if (domainCheck.found) {\n                continue;\n            }\n            let domain = {\n                id: null,\n                name\n            };\n            domainCheck.domain = domain;\n            domainsToCreate.push(domain);\n        }\n        if (domainsToCreate.length) {\n            await this.domainDao.insert(domainsToCreate);\n        }\n        let applicationsToCreate = [];\n        for (let [domainName, applicationChecksByName] of applicationCheckMap) {\n            for (let [name, applicationCheck] of applicationChecksByName) {\n                if (applicationCheck.found) {\n                    continue;\n                }\n                let domain = domainCheckMap.get(domainName).domain;\n                let application = {\n                    domain,\n                    index: null,\n                    name,\n                    scope: 'private',\n                    status: ApplicationStatus.STUB,\n                    signature: 'localhost'\n                };\n                applicationCheck.application = application;\n                applicationsToCreate.push(application);\n            }\n        }\n        if (applicationsToCreate.length) {\n            await this.applicationDao.insert(applicationsToCreate);\n        }\n        return applicationCheckMap;\n    }\n    getNames(message) {\n        if (!message.applications || !(message.applications instanceof Array)) {\n            throw new Error(`Did not find applications in RepositorySynchronizationMessage.`);\n        }\n        const domainCheckMap = new Map();\n        const applicationCheckMap = new Map();\n        for (let application of message.applications) {\n            if (typeof application !== 'object') {\n                throw new Error(`Invalid ApplicationVersion.application`);\n            }\n            if (!application.name || typeof application.name !== 'string') {\n                throw new Error(`Invalid ApplicationVersion.Application.name`);\n            }\n            const domain = application.domain;\n            if (typeof domain !== 'object') {\n                throw new Error(`Invalid ApplicationVersion.Application.Domain`);\n            }\n            if (!domain.name || typeof domain.name !== 'string') {\n                throw new Error(`Invalid ApplicationVersion.Application.Domain.name`);\n            }\n            let applicationChecksForDomain = applicationCheckMap.get(domain.name);\n            if (!applicationChecksForDomain) {\n                applicationChecksForDomain = new Map();\n                applicationCheckMap.set(domain.name, applicationChecksForDomain);\n            }\n            if (!applicationChecksForDomain.has(application.name)) {\n                applicationChecksForDomain.set(application.name, {\n                    applicationName: application.name,\n                });\n            }\n            let domainCheck = domainCheckMap.get(domain.name);\n            if (!domainCheck) {\n                domainCheckMap.set(domain.name, {\n                    domainName: domain.name\n                });\n            }\n        }\n        const domainNames = [];\n        const allApplicationNames = [];\n        for (const [domainName, applicationChecksForDomainMap] of applicationCheckMap) {\n            domainNames.push(domainName);\n            for (let [applicationName, _] of applicationChecksForDomainMap) {\n                allApplicationNames.push(applicationName);\n            }\n        }\n        return {\n            allApplicationNames,\n            domainCheckMap,\n            domainNames,\n            applicationCheckMap\n        };\n    }\n};\n__decorate([\n    Inject()\n], SyncInApplicationChecker.prototype, \"applicationDao\", void 0);\n__decorate([\n    Inject()\n], SyncInApplicationChecker.prototype, \"domainDao\", void 0);\nSyncInApplicationChecker = __decorate([\n    Injected()\n], SyncInApplicationChecker);\nexport { SyncInApplicationChecker };\n//# sourceMappingURL=SyncInApplicationChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet SyncInApplicationVersionChecker = class SyncInApplicationVersionChecker {\n    async ensureApplicationVersions(message) {\n        try {\n            let applicationCheckMap = await this.checkVersionsApplicationsDomains(message);\n            for (let i = 0; i < message.applicationVersions.length; i++) {\n                const applicationVersion = message.applicationVersions[i];\n                message.applicationVersions[i] = applicationCheckMap\n                    .get(applicationVersion.application.domain.name).get(applicationVersion.application.name)\n                    .applicationVersion;\n            }\n        }\n        catch (e) {\n            console.error(e);\n            return false;\n        }\n        return true;\n    }\n    async checkVersionsApplicationsDomains(message) {\n        const { allApplicationNames, domainNames, applicationVersionCheckMap } = this.getNames(message);\n        const applicationVersions = await this.applicationVersionDao.findByDomainNamesAndApplicationNames(domainNames, allApplicationNames);\n        let lastDomainName;\n        let lastApplicationName;\n        for (let applicationVersion of applicationVersions) {\n            let domainName = applicationVersion.application.domain.name;\n            let applicationName = applicationVersion.application.name;\n            if (lastDomainName !== domainName\n                && lastApplicationName !== applicationName) {\n                let applicationVersionNumber = applicationVersion.integerVersion;\n                for (let [_, applicationCheck] of applicationVersionCheckMap.get(domainName)) {\n                    if (applicationCheck.applicationName === applicationName) {\n                        applicationCheck.found = true;\n                        if (applicationCheck.applicationVersionNumber > applicationVersionNumber) {\n                            throw new Error(`Installed application ${applicationName} for domain ${domainName}\r\n\tis at a lower version ${applicationVersionNumber} than needed in message ${applicationCheck.applicationVersionNumber}.`);\n                        }\n                        applicationCheck.applicationVersion = applicationVersion;\n                    }\n                }\n                lastDomainName = domainName;\n                lastApplicationName = applicationName;\n            }\n        }\n        for (const [domainName, applicationChecks] of applicationVersionCheckMap) {\n            for (let [_, applicationCheck] of applicationChecks) {\n                if (!applicationCheck.found) {\n                    // TODO: download and install the application\n                    throw new Error(`Application ${applicationCheck.applicationName} for domain ${domainName} is not installed.`);\n                }\n            }\n        }\n        return applicationVersionCheckMap;\n    }\n    getNames(message) {\n        if (!message.applicationVersions || !(message.applicationVersions instanceof Array)) {\n            throw new Error(`Did not find applicationVersions in RepositorySynchronizationMessage.`);\n        }\n        const applicationVersionCheckMap = new Map();\n        for (let applicationVersion of message.applicationVersions) {\n            if (!applicationVersion.integerVersion || typeof applicationVersion.integerVersion !== 'number') {\n                throw new Error(`Invalid ApplicationVersion.integerVersion.`);\n            }\n            const application = message.applications[applicationVersion.application];\n            if (typeof application !== 'object') {\n                throw new Error(`Invalid ApplicationVersion.application`);\n            }\n            applicationVersion.application = application;\n            const domain = application.domain;\n            let applicationChecksForDomain = applicationVersionCheckMap.get(domain.name);\n            if (!applicationChecksForDomain) {\n                applicationChecksForDomain = new Map();\n                applicationVersionCheckMap.set(domain.name, applicationChecksForDomain);\n            }\n            if (!applicationChecksForDomain.has(application.name)) {\n                applicationChecksForDomain.set(application.name, {\n                    applicationName: application.name,\n                    applicationVersionNumber: applicationVersion.integerVersion\n                });\n            }\n        }\n        const domainNames = [];\n        const allApplicationNames = [];\n        for (const [domainName, applicationChecksForDomainMap] of applicationVersionCheckMap) {\n            domainNames.push(domainName);\n            for (let [applicationName, _] of applicationChecksForDomainMap) {\n                allApplicationNames.push(applicationName);\n            }\n        }\n        return {\n            allApplicationNames,\n            domainNames,\n            applicationVersionCheckMap\n        };\n    }\n};\n__decorate([\n    Inject()\n], SyncInApplicationVersionChecker.prototype, \"applicationVersionDao\", void 0);\nSyncInApplicationVersionChecker = __decorate([\n    Injected()\n], SyncInApplicationVersionChecker);\nexport { SyncInApplicationVersionChecker };\n//# sourceMappingURL=SyncInApplicationVersionChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet SyncInChecker = class SyncInChecker {\n    /**\n     * Check the message and load all required auxiliary entities.\n     */\n    async checkMessage(message) {\n        // FIXME: replace as many DB lookups as possible with Terminal State lookups\n        if (!await this.syncInUserChecker.ensureUsers(message)) {\n            return false;\n        }\n        if (!await this.syncInTerminalChecker.ensureTerminals(message)) {\n            return false;\n        }\n        if (!await this.syncInApplicationChecker.ensureApplications(message)) {\n            return false;\n        }\n        if (!await this.syncInActorChecker.ensureActors(message)) {\n            return false;\n        }\n        if (!await this.syncInRepositoryChecker.ensureRepositories(message)) {\n            return false;\n        }\n        if (!await this.syncInApplicationVersionChecker.ensureApplicationVersions(message)) {\n            return false;\n        }\n        if (!await this.syncInDataChecker.checkData(message)) {\n            return false;\n        }\n        return true;\n    }\n};\n__decorate([\n    Inject()\n], SyncInChecker.prototype, \"syncInActorChecker\", void 0);\n__decorate([\n    Inject()\n], SyncInChecker.prototype, \"syncInApplicationChecker\", void 0);\n__decorate([\n    Inject()\n], SyncInChecker.prototype, \"syncInApplicationVersionChecker\", void 0);\n__decorate([\n    Inject()\n], SyncInChecker.prototype, \"syncInDataChecker\", void 0);\n__decorate([\n    Inject()\n], SyncInChecker.prototype, \"syncInRepositoryChecker\", void 0);\n__decorate([\n    Inject()\n], SyncInChecker.prototype, \"syncInTerminalChecker\", void 0);\n__decorate([\n    Inject()\n], SyncInChecker.prototype, \"syncInUserChecker\", void 0);\nSyncInChecker = __decorate([\n    Injected()\n], SyncInChecker);\nexport { SyncInChecker };\n//# sourceMappingURL=SyncInChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ChangeType, repositoryEntity } from '@airport/ground-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getSysWideOpIds } from '@airport/check-in';\nimport { RepositoryTransactionType } from '@airport/holding-pattern';\nlet SyncInDataChecker = class SyncInDataChecker {\n    /**\n     * Every dataMessage.data.repoTransHistories array must be sorted before entering\n     * this method.\n     *\n     * @param {IDataToTM[]} dataMessagesWithCompatibleApplications\n     * @returns {DataCheckResults}\n     */\n    async checkData(message) {\n        const history = message.history;\n        try {\n            if (!history || typeof history !== 'object') {\n                throw new Error(`Invalid RepositorySynchronizationMessage.history`);\n            }\n            if (typeof history.uuId !== 'string' || history.uuId.length !== 36) {\n                return false;\n            }\n            if (!history.operationHistory || !(history.operationHistory instanceof Array)) {\n                return false;\n            }\n            if (!history.saveTimestamp || typeof history.saveTimestamp !== 'number') {\n                throw new Error(`Invalid RepositorySynchronizationMessage.history.saveTimestamp`);\n            }\n            if (history.transactionHistory) {\n                throw new Error(`RepositorySynchronizationMessage.history.transactionHistory cannot be specified`);\n            }\n            if (history.repositoryTransactionType) {\n                throw new Error(`RepositorySynchronizationMessage.history.repositoryTransactionType cannot be specified`);\n            }\n            if (history.syncTimestamp) {\n                throw new Error(`RepositorySynchronizationMessage.history.syncTimestamp cannot be specified`);\n            }\n            // Repository is already set in SyncInRepositoryChecker\n            history.repositoryTransactionType = RepositoryTransactionType.REMOTE;\n            history.syncTimestamp = message.syncTimestamp;\n            delete history.id;\n            const applicationEntityMap = await this.populateApplicationEntityMap(message);\n            await this.checkOperationHistories(message, applicationEntityMap);\n        }\n        catch (e) {\n            console.error(e);\n            return false;\n        }\n        return true;\n    }\n    async populateApplicationEntityMap(message) {\n        const applicationVersionsByIds = this.terminalStore.getAllApplicationVersionsByIds();\n        const applicationEntityMap = new Map();\n        for (const messageApplicationVersion of message.applicationVersions) {\n            const applicationVersion = applicationVersionsByIds[messageApplicationVersion.id];\n            for (const applicationEntity of applicationVersion.entities) {\n                let entitiesForDomain = applicationEntityMap.get(applicationVersion.application.domain.name);\n                if (!entitiesForDomain) {\n                    entitiesForDomain = new Map();\n                    applicationEntityMap.set(applicationVersion.application.domain.name, entitiesForDomain);\n                }\n                let entitiesForApplication = entitiesForDomain.get(applicationVersion.application.name);\n                if (!entitiesForApplication) {\n                    entitiesForApplication = new Map();\n                    entitiesForDomain.set(applicationVersion.application.name, entitiesForApplication);\n                }\n                entitiesForApplication.set(applicationEntity.index, applicationEntity);\n            }\n        }\n        return applicationEntityMap;\n    }\n    async checkOperationHistories(message, applicationEntityMap) {\n        const history = message.history;\n        if (!(history.operationHistory instanceof Array) || !history.operationHistory.length) {\n            throw new Error(`Invalid RepositorySynchronizationMessage.history.operationHistory`);\n        }\n        const systemWideOperationIds = getSysWideOpIds(history.operationHistory.length, this.airportDatabase, this.sequenceGenerator);\n        let orderNumber = 0;\n        for (let i = 0; i < history.operationHistory.length; i++) {\n            const operationHistory = history.operationHistory[i];\n            if (typeof operationHistory !== 'object') {\n                throw new Error(`Invalid operationHistory`);\n            }\n            if (operationHistory.orderNumber) {\n                throw new Error(`RepositorySynchronizationMessage.history -> operationHistory.orderNumber cannot be specified,\r\n\t\t\t\tthe position of orderHistory record determines it's order`);\n            }\n            operationHistory.orderNumber = ++orderNumber;\n            switch (operationHistory.changeType) {\n                case ChangeType.DELETE_ROWS:\n                case ChangeType.INSERT_VALUES:\n                case ChangeType.UPDATE_ROWS:\n                    break;\n                default:\n                    throw new Error(`Invalid operationHistory.changeType: ${operationHistory.changeType}`);\n            }\n            if (typeof operationHistory.entity !== 'object') {\n                throw new Error(`Invalid operationHistory.entity`);\n            }\n            if (typeof operationHistory.entity.applicationVersion !== 'number') {\n                throw new Error(`Expecting \"in-message index\" (number)\r\n\t\t\t\t\tin 'operationHistory.entity.applicationVersion'`);\n            }\n            const actor = message.actors[operationHistory.actor];\n            if (!actor) {\n                throw new Error(`Cannot find Actor for \"in-message id\" RepositorySynchronizationMessage.history.actor`);\n            }\n            operationHistory.actor = actor;\n            const applicationVersion = message.applicationVersions[operationHistory.entity.applicationVersion];\n            if (!applicationVersion) {\n                throw new Error(`Invalid index into message.applicationVersions [${operationHistory.entity.applicationVersion}],\r\n\t\t\t\tin operationHistory.entity.applicationVersion`);\n            }\n            const applicationEntity = applicationEntityMap.get(applicationVersion.application.domain.name)\n                .get(applicationVersion.application.name).get(operationHistory.entity.index);\n            if (!applicationEntity) {\n                throw new Error(`Invalid operationHistory.entity.index: ${operationHistory.entity.index}`);\n            }\n            operationHistory.entity = applicationEntity;\n            if (operationHistory.repositoryTransactionHistory) {\n                throw new Error(`RepositorySynchronizationMessage.history -> operationHistory.repositoryTransactionHistory cannot be specified`);\n            }\n            operationHistory.repositoryTransactionHistory = history;\n            if (operationHistory.systemWideOperationId) {\n                throw new Error(`RepositorySynchronizationMessage.history -> operationHistory.systemWideOperationId cannot be specified`);\n            }\n            operationHistory.systemWideOperationId = systemWideOperationIds[i];\n            delete operationHistory.id;\n            let originalRepositoryColumnIndex;\n            let originalActorColumnIndex;\n            let actorIdColumnMapByIndex = new Map();\n            let repositoryIdColumnMapByIndex = new Map();\n            for (const column of operationHistory.entity.columns) {\n                switch (column.name) {\n                    case repositoryEntity.ORIGINAL_ACTOR_ID:\n                        actorIdColumnMapByIndex.set(column.index, column);\n                        originalActorColumnIndex = column.index;\n                        break;\n                    case repositoryEntity.ORIGINAL_REPOSITORY_ID:\n                        repositoryIdColumnMapByIndex.set(column.index, column);\n                        originalRepositoryColumnIndex = column.index;\n                        break;\n                }\n                if (/.*_AID_[\\d]+$/.test(column.name)\n                    && column.manyRelationColumns.length) {\n                    actorIdColumnMapByIndex.set(column.index, column);\n                }\n                if (/.*_RID_[\\d]+$/.test(column.name)\n                    && column.manyRelationColumns.length) {\n                    repositoryIdColumnMapByIndex.set(column.index, column);\n                }\n            }\n            await this.checkRecordHistories(operationHistory, actorIdColumnMapByIndex, repositoryIdColumnMapByIndex, message);\n        }\n    }\n    async checkRecordHistories(operationHistory, actorIdColumnMapByIndex, repositoryIdColumnMapByIndex, message) {\n        const recordHistories = operationHistory.recordHistory;\n        if (!(recordHistories instanceof Array) || !recordHistories.length) {\n            throw new Error(`Inalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory`);\n        }\n        for (const recordHistory of recordHistories) {\n            if (!recordHistory.actorRecordId || typeof recordHistory.actorRecordId !== 'number') {\n                throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.actorRecordId`);\n            }\n            switch (operationHistory.changeType) {\n                case ChangeType.INSERT_VALUES:\n                    if (recordHistory.actor) {\n                        throw new Error(`Cannot specify RepositorySynchronizationMessage.history -> operationHistory.recordHistory.actor\r\nfor ChangeType.INSERT_VALUES`);\n                    }\n                    recordHistory.actor = operationHistory.actor;\n                    break;\n                case ChangeType.DELETE_ROWS:\n                case ChangeType.UPDATE_ROWS: {\n                    // If no actor is present on record level its the same actor that created the repositoryTransactionHistory\n                    if (recordHistory.actor === undefined) {\n                        recordHistory.actor = operationHistory.actor;\n                    }\n                    else {\n                        const actor = message.actors[recordHistory.actor];\n                        if (!actor) {\n                            throw new Error(`Did find Actor for \"in-message id\" in RepositorySynchronizationMessage.history -> operationHistory.actor`);\n                        }\n                        recordHistory.actor = actor;\n                    }\n                    break;\n                }\n            }\n            if (recordHistory.operationHistory) {\n                throw new Error(`RepositorySynchronizationMessage.history -> operationHistory.recordHistory.operationHistory cannot be specified`);\n            }\n            this.checkNewValues(recordHistory, actorIdColumnMapByIndex, repositoryIdColumnMapByIndex, operationHistory, message);\n            this.checkOldValues(recordHistory, actorIdColumnMapByIndex, repositoryIdColumnMapByIndex, operationHistory, message);\n            recordHistory.operationHistory = operationHistory;\n            delete recordHistory.id;\n        }\n    }\n    checkNewValues(recordHistory, actorIdColumnMapByIndex, repositoryIdColumnMapByIndex, operationHistory, message) {\n        switch (operationHistory.changeType) {\n            case ChangeType.DELETE_ROWS:\n                if (recordHistory.newValues) {\n                    throw new Error(`Cannot specify RepositorySynchronizationMessage.history -> operationHistory.recordHistory.newValues\r\nfor ChangeType.DELETE_ROWS`);\n                }\n                return;\n            case ChangeType.INSERT_VALUES:\n            case ChangeType.UPDATE_ROWS:\n                if (!(recordHistory.newValues instanceof Array) || !recordHistory.newValues.length) {\n                    throw new Error(`Must specify RepositorySynchronizationMessage.history -> operationHistory.recordHistory.newValues\r\nfor ChangeType.INSERT_VALUES|UPDATE_ROWS`);\n                }\n                break;\n        }\n        for (const newValue of recordHistory.newValues) {\n            if (newValue.recordHistory) {\n                throw new Error(`Cannot specify RepositorySynchronizationMessage.history -> operationHistory.recordHistory.newValues.recordHistory`);\n            }\n            newValue.recordHistory = recordHistory;\n            if (typeof newValue.columnIndex !== 'number') {\n                throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.newValues.columnIndex`);\n            }\n            if (typeof newValue.newValue === undefined) {\n                throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.newValues.newValue`);\n            }\n        }\n        for (const newValue of recordHistory.newValues) {\n            const actorIdColumn = actorIdColumnMapByIndex.get(newValue.columnIndex);\n            if (actorIdColumn) {\n                const originalActor = message.actors[newValue.newValue];\n                if (!originalActor) {\n                    throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.newValues.newValue\r\nValue is for ${actorIdColumn.name} and could find RepositorySynchronizationMessage.actors[${newValue.newValue}]`);\n                }\n                newValue.newValue = originalActor.id;\n            }\n            const repositoryIdColumn = repositoryIdColumnMapByIndex.get(newValue.columnIndex);\n            if (repositoryIdColumn) {\n                if (newValue.newValue === -1) {\n                    newValue.newValue = message.history.repository.id;\n                }\n                else {\n                    const originalRepository = message.referencedRepositories[newValue.newValue];\n                    if (!originalRepository) {\n                        throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.newValues.newValue\r\n\tValue is for ${repositoryIdColumn.name} and could find RepositorySynchronizationMessage.referencedRepositories[${newValue.newValue}]`);\n                    }\n                    newValue.newValue = originalRepository.id;\n                }\n            }\n        }\n    }\n    checkOldValues(recordHistory, actorIdColumnMapByIndex, repositoryIdColumnMapByIndex, operationHistory, message) {\n        switch (operationHistory.changeType) {\n            case ChangeType.DELETE_ROWS:\n            case ChangeType.INSERT_VALUES:\n                if (recordHistory.oldValues) {\n                    throw new Error(`Cannot specify RepositorySynchronizationMessage.history -> operationHistory.recordHistory.oldValues\r\nfor ChangeType.DELETE_ROWS|INSERT_VALUES`);\n                }\n                return;\n            case ChangeType.UPDATE_ROWS:\n                if (!(recordHistory.newValues instanceof Array) || !recordHistory.oldValues.length) {\n                    throw new Error(`Must specify RepositorySynchronizationMessage.history -> operationHistory.recordHistory.oldValues\r\nfor ChangeType.UPDATE_ROWS`);\n                }\n                break;\n        }\n        for (const oldValue of recordHistory.oldValues) {\n            if (oldValue.recordHistory) {\n                throw new Error(`Cannot specify RepositorySynchronizationMessage.history -> operationHistory.recordHistory.newValues.recordHistory`);\n            }\n            oldValue.recordHistory = recordHistory;\n            if (typeof oldValue.columnIndex !== 'number') {\n                throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.oldValues.columnIndex`);\n            }\n            if (typeof oldValue.oldValue === undefined) {\n                throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.oldValues.oldValue`);\n            }\n        }\n        for (const oldValue of recordHistory.oldValues) {\n            const actorIdColumn = actorIdColumnMapByIndex.get(oldValue.columnIndex);\n            if (actorIdColumn) {\n                const originalActor = message.actors[oldValue.oldValue];\n                if (!originalActor) {\n                    throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.oldValues.oldValue\r\nValue is for ORIGINAL_ACTOR_ID and could find RepositorySynchronizationMessage.actors[${oldValue.oldValue}]`);\n                }\n                oldValue.oldValue = originalActor.id;\n            }\n            const repositoryIdColumn = repositoryIdColumnMapByIndex.get(oldValue.columnIndex);\n            if (repositoryIdColumn) {\n                const originalRepository = message.referencedRepositories[oldValue.oldValue];\n                if (!originalRepository) {\n                    throw new Error(`Invalid RepositorySynchronizationMessage.history -> operationHistory.recordHistory.oldValues.oldValue\r\nValue is for ORIGINAL_REPOSITORY_ID and could find RepositorySynchronizationMessage.referencedRepositories[${oldValue.oldValue}]`);\n                }\n                oldValue.oldValue = originalRepository.id;\n            }\n        }\n    }\n};\n__decorate([\n    Inject()\n], SyncInDataChecker.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], SyncInDataChecker.prototype, \"sequenceGenerator\", void 0);\n__decorate([\n    Inject()\n], SyncInDataChecker.prototype, \"terminalStore\", void 0);\nSyncInDataChecker = __decorate([\n    Injected()\n], SyncInDataChecker);\nexport { SyncInDataChecker };\n//# sourceMappingURL=SyncInDataChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet SyncInRepositoryChecker = class SyncInRepositoryChecker {\n    async ensureRepositories(message) {\n        try {\n            let repositoryUuids = [];\n            let messageRepositoryIndexMap = new Map();\n            for (let i = 0; i < message.referencedRepositories.length; i++) {\n                this.checkRepository(message.referencedRepositories[i], i, repositoryUuids, messageRepositoryIndexMap, message);\n            }\n            const history = message.history;\n            if (history.isRepositoryCreation) {\n                if (typeof history.repository !== 'object') {\n                    throw new Error(`Serialized RepositorySynchronizationMessage.history.repository should be an object\r\n\tif RepositorySynchronizationMessage.history.isRepositoryCreation === true`);\n                }\n                this.checkRepository(history.repository, null, repositoryUuids, messageRepositoryIndexMap, message);\n            }\n            else {\n                if (typeof history.repository !== 'string') {\n                    throw new Error(`Serialized RepositorySynchronizationMessage.history.repository should be a string\r\n\tif RepositorySynchronizationMessage.history.isRepositoryCreation === false`);\n                }\n                repositoryUuids.push(history.repository);\n            }\n            const repositories = await this.repositoryDao.findByUuIds(repositoryUuids);\n            for (const repository of repositories) {\n                const messageUserIndex = messageRepositoryIndexMap.get(repository.uuId);\n                if (messageUserIndex || messageUserIndex === 0) {\n                    message.referencedRepositories[messageUserIndex] = repository;\n                }\n                else {\n                    // Populating ahead of potential insert is OK, object\n                    // gets modified with required state on an insert\n                    history.repository = repository;\n                }\n            }\n            const missingRepositories = message.referencedRepositories\n                .filter(messageRepository => !messageRepository.id);\n            if (typeof history.repository !== 'object') {\n                throw new Error(`Repository with UuId ${history.repository} is not\r\n\t\t\t\t\tpresent and cannot be synced\r\n\tThis RepositorySynchronizationMessage is for an existing repository and that\r\n\trepository must already be loaded in this database for this message to be\r\n\tprocessed.`);\n            }\n            else if (!history.repository.id) {\n                missingRepositories.push(history.repository);\n            }\n            if (missingRepositories.length) {\n                await this.repositoryDao.insert(missingRepositories);\n            }\n        }\n        catch (e) {\n            console.error(e);\n            return false;\n        }\n        return true;\n    }\n    checkRepository(repository, repositoryIndex, repositoryUuids, messageRepositoryIndexMap, message) {\n        if (typeof repository.ageSuitability !== 'number') {\n            throw new Error(`Invalid 'repository.ageSuitability'`);\n        }\n        if (!repository.createdAt || typeof repository.createdAt !== 'string') {\n            throw new Error(`Invalid 'repository.createdAt'`);\n        }\n        repository.createdAt = new Date(repository.createdAt);\n        if (typeof repository.immutable !== 'boolean') {\n            throw new Error(`Invalid 'repository.immutable'`);\n        }\n        if (!repository.source || typeof repository.source !== 'string') {\n            throw new Error(`Invalid 'repository.source'`);\n        }\n        if (typeof repository.uuId !== 'string' || repository.uuId.length !== 36) {\n            throw new Error(`Invalid 'repository.uuid'`);\n        }\n        if (typeof repository.owner !== 'number') {\n            throw new Error(`Expecting \"in-message index\" (number)\r\n\t\t\t\tin 'repository.owner'`);\n        }\n        const user = message.users[repository.owner];\n        if (!user) {\n            throw new Error(`Did not find repository.owner (User) with \"in-message index\" ${repository.owner}`);\n        }\n        repository.owner = user;\n        repositoryUuids.push(repository.uuId);\n        if (typeof repositoryIndex === 'number') {\n            messageRepositoryIndexMap.set(repository.uuId, repositoryIndex);\n        }\n        // Make sure id field is not in the input\n        delete repository.id;\n    }\n};\n__decorate([\n    Inject()\n], SyncInRepositoryChecker.prototype, \"repositoryDao\", void 0);\nSyncInRepositoryChecker = __decorate([\n    Injected()\n], SyncInRepositoryChecker);\nexport { SyncInRepositoryChecker };\n//# sourceMappingURL=SyncInRepositoryChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet SyncInTerminalChecker = class SyncInTerminalChecker {\n    async ensureTerminals(message) {\n        try {\n            let terminalUuids = [];\n            let messageTerminalIndexMap = new Map();\n            for (let i = 0; i < message.terminals.length; i++) {\n                const terminal = message.terminals[i];\n                if (typeof terminal.owner !== 'number') {\n                    throw new Error(`Expecting \"in-message index\" (number)\r\n\t\t\t\t\tin 'terminal.owner' of RepositorySynchronizationMessage.terminals`);\n                }\n                if (typeof terminal.uuId !== 'string' || terminal.uuId.length !== 36) {\n                    throw new Error(`Invalid 'terminal.uuid' in RepositorySynchronizationMessage.terminals`);\n                }\n                if (terminal.isLocal !== undefined) {\n                    throw new Error(`'terminal.isLocal' cannot defined in RepositorySynchronizationMessage.terminals`);\n                }\n                terminal.isLocal = false;\n                const owner = message.users[terminal.owner];\n                if (!owner) {\n                    throw new Error(`Did not find user for terminal.owner with \"in-message index\" ${terminal.owner}\r\n\t\t\t\t\t\tfor RepositorySynchronizationMessage.terminals`);\n                }\n                terminal.owner = owner;\n                terminalUuids.push(terminal.uuId);\n                messageTerminalIndexMap.set(terminal.uuId, i);\n                // Make sure id field is not in the input\n                delete terminal.id;\n            }\n            const terminals = await this.terminalDao.findByUuIds(terminalUuids);\n            for (const terminal of terminals) {\n                const messageUserIndex = messageTerminalIndexMap.get(terminal.uuId);\n                message.terminals[messageUserIndex] = terminal;\n            }\n            const missingTerminals = message.terminals\n                .filter(messageTerminal => !messageTerminal.id);\n            if (missingTerminals.length) {\n                await this.addMissingTerminals(missingTerminals);\n            }\n        }\n        catch (e) {\n            console.error(e);\n            return false;\n        }\n        return true;\n    }\n    async addMissingTerminals(missingTerminals) {\n        for (const terminal of missingTerminals) {\n            terminal.isLocal = false;\n        }\n        await this.terminalDao.insert(missingTerminals);\n    }\n};\n__decorate([\n    Inject()\n], SyncInTerminalChecker.prototype, \"terminalDao\", void 0);\nSyncInTerminalChecker = __decorate([\n    Injected()\n], SyncInTerminalChecker);\nexport { SyncInTerminalChecker };\n//# sourceMappingURL=SyncInTerminalChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet SyncInUserChecker = class SyncInUserChecker {\n    async ensureUsers(message) {\n        try {\n            let userUuids = [];\n            let messageUserIndexMap = new Map();\n            for (let i = 0; i < message.users.length; i++) {\n                const user = message.users[i];\n                if (typeof user.uuId !== 'string' || user.uuId.length !== 36) {\n                    throw new Error(`Invalid 'user.uuid'`);\n                }\n                if (typeof user.username !== 'string' || user.username.length < 3) {\n                    throw new Error(`Invalid 'user.username'`);\n                }\n                userUuids.push(user.uuId);\n                messageUserIndexMap.set(user.uuId, i);\n                // Make sure id field is not in the input\n                delete user.id;\n            }\n            const users = await this.userDao.findByUuIds(userUuids);\n            for (const user of users) {\n                const messageUserIndex = messageUserIndexMap.get(user.uuId);\n                message.users[messageUserIndex] = user;\n            }\n            const missingUsers = message.users.filter(messageUser => !messageUser.id);\n            if (missingUsers.length) {\n                await this.addMissingUsers(missingUsers);\n            }\n        }\n        catch (e) {\n            console.error(e);\n            return false;\n        }\n        return true;\n    }\n    async addMissingUsers(missingUsers) {\n        for (const user of missingUsers) {\n            if (!user.username || typeof user.username !== 'string') {\n                throw new Error(`Invalid User.username ${user.username}`);\n            }\n        }\n        await this.userDao.insert(missingUsers);\n    }\n};\n__decorate([\n    Inject()\n], SyncInUserChecker.prototype, \"userDao\", void 0);\nSyncInUserChecker = __decorate([\n    Injected()\n], SyncInUserChecker);\nexport { SyncInUserChecker };\n//# sourceMappingURL=SyncInUserChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DbBoolean, DbNumber, DbString, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, OneToMany, Table } from \"@airport/air-traffic-control\";\nlet SynchronizationConflict = class SynchronizationConflict {\n};\n__decorate([\n    GeneratedValue(),\n    Id(),\n    DbNumber()\n], SynchronizationConflict.prototype, \"id\", void 0);\n__decorate([\n    DbString()\n], SynchronizationConflict.prototype, \"type\", void 0);\n__decorate([\n    DbBoolean()\n], SynchronizationConflict.prototype, \"acknowledged\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: \"REPOSITORY_ID\", referencedColumnName: \"ID\" })\n], SynchronizationConflict.prototype, \"repository\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: \"OVERWRITTEN_RECORD_HISTORY_ID\", referencedColumnName: \"ID\" })\n], SynchronizationConflict.prototype, \"overwrittenRecordHistory\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: \"OVERWRITING_RECORD_HISTORY_ID\", referencedColumnName: \"ID\" })\n], SynchronizationConflict.prototype, \"overwritingRecordHistory\", void 0);\n__decorate([\n    OneToMany({ mappedBy: \"SYNCHRONIZATION_CONFLICT_ID\" })\n], SynchronizationConflict.prototype, \"values\", void 0);\nSynchronizationConflict = __decorate([\n    Entity(),\n    Table({ name: \"SYNCHRONIZATION_CONFLICT\" })\n], SynchronizationConflict);\nexport { SynchronizationConflict };\n//# sourceMappingURL=SynchronizationConflict.js.map","export var SynchronizationConflict_Type;\n(function (SynchronizationConflict_Type) {\n    SynchronizationConflict_Type[\"LOCAL_UPDATE_REMOTELY_DELETED\"] = \"LOCAL_UPDATE_REMOTELY_DELETED\";\n    SynchronizationConflict_Type[\"REMOTE_CREATE_REMOTELY_DELETED\"] = \"REMOTE_CREATE_REMOTELY_DELETED\";\n    SynchronizationConflict_Type[\"REMOTE_UPDATE_LOCALLY_DELETED\"] = \"REMOTE_UPDATE_LOCALLY_DELETED\";\n    SynchronizationConflict_Type[\"REMOTE_UPDATE_LOCALLY_UPDATED\"] = \"REMOTE_UPDATE_LOCALLY_UPDATED\";\n})(SynchronizationConflict_Type || (SynchronizationConflict_Type = {}));\n//# sourceMappingURL=SynchronizationConflictType.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DbNumber, Entity, Id, JoinColumn, ManyToOne, Table } from '@airport/air-traffic-control';\nlet SynchronizationConflictValues = class SynchronizationConflictValues {\n};\n__decorate([\n    Id(),\n    ManyToOne(),\n    JoinColumn({ name: 'SYNCHRONIZATION_CONFLICT_ID', referencedColumnName: 'ID' })\n], SynchronizationConflictValues.prototype, \"synchronizationConflict\", void 0);\n__decorate([\n    Id(),\n    DbNumber()\n], SynchronizationConflictValues.prototype, \"columnIndex\", void 0);\nSynchronizationConflictValues = __decorate([\n    Entity(),\n    Table({ name: 'SYNCHRONIZATION_CONFLICT_VALUES' })\n], SynchronizationConflictValues);\nexport { SynchronizationConflictValues };\n//# sourceMappingURL=SynchronizationConflictValues.js.map","export var DataOrigin;\n(function (DataOrigin) {\n    DataOrigin[\"LOCAL\"] = \"LOCAL\";\n    DataOrigin[\"REMOTE\"] = \"REMOTE\";\n})(DataOrigin || (DataOrigin = {}));\n//# sourceMappingURL=DataOrigin.js.map","export var ApplicationChangeStatus;\n(function (ApplicationChangeStatus) {\n    ApplicationChangeStatus[\"CHANGE_NEEDED\"] = \"CHANGE_NEEDED\";\n    ApplicationChangeStatus[\"CHANGE_COMPLETED\"] = \"CHANGE_COMPLETED\";\n})(ApplicationChangeStatus || (ApplicationChangeStatus = {}));\n//# sourceMappingURL=ApplicationChangeStatus.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, Entity, GeneratedValue, Id, JoinColumn, ManyToOne, Table } from '@airport/air-traffic-control';\n/**\n * Used to temporarily store updates during application remotely synced updates\n * to the local terminal.  Values are deleted right after the remote sync updates\n * are applied.\n */\nlet RecordUpdateStage = class RecordUpdateStage {\n};\n__decorate([\n    Id(),\n    GeneratedValue()\n], RecordUpdateStage.prototype, \"id\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'APPLICATION_VERSION_ID', referencedColumnName: 'ID' })\n], RecordUpdateStage.prototype, \"applicationVersion\", void 0);\n__decorate([\n    ManyToOne()\n    // FIXME: verify that these records don't make it into serialized\n    // repository ledger (and hence, that using local ids is safe)\n    ,\n    JoinColumn({ name: 'APPLICATION_ENTITY_ID', referencedColumnName: 'ID' })\n], RecordUpdateStage.prototype, \"entity\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'REPOSITORY_ID', referencedColumnName: 'ID' })\n], RecordUpdateStage.prototype, \"repository\", void 0);\n__decorate([\n    ManyToOne(),\n    JoinColumn({ name: 'ACTOR_ID', referencedColumnName: 'ID' })\n], RecordUpdateStage.prototype, \"actor\", void 0);\n__decorate([\n    Column({ name: 'ACTOR_RECORD_ID' }),\n    DbNumber()\n], RecordUpdateStage.prototype, \"actorRecordId\", void 0);\n__decorate([\n    ManyToOne()\n    // FIXME: verify that these records don't make it into serialized\n    // repository ledger (and hence, that using local ids is safe)\n    ,\n    JoinColumn({ name: 'APPLICATION_COLUMN_ID', referencedColumnName: 'ID' })\n], RecordUpdateStage.prototype, \"column\", void 0);\n__decorate([\n    Column({ name: 'UPDATED_VALUE' })\n], RecordUpdateStage.prototype, \"updatedValue\", void 0);\nRecordUpdateStage = __decorate([\n    Entity(),\n    Table({ name: 'RECORD_UPDATE_STAGE' })\n], RecordUpdateStage);\nexport { RecordUpdateStage };\n//# sourceMappingURL=RecordUpdateStage.js.map","import { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { diSet as dS, duoDiSet as ddS } from '@airport/check-in';\nimport { DEPENDENCY_INJECTION } from '@airport/direction-indicator';\nimport { getFullApplicationName } from '@airport/ground-control';\nimport { RecordUpdateStage, SynchronizationConflict, SynchronizationConflictValues } from '../ddl/ddl';\nconst __constructors__ = {\n    RecordUpdateStage: RecordUpdateStage,\n    SynchronizationConflict: SynchronizationConflict,\n    SynchronizationConflictValues: SynchronizationConflictValues\n};\nexport const Q_APPLICATION = {\n    __constructors__,\n    domain: 'air',\n    name: '@airport/moving-walkway'\n};\nexport const Q = Q_APPLICATION;\nexport function diSet(dbEntityId) {\n    return dS(Q.__dbApplication__, dbEntityId);\n}\nexport function duoDiSet(dbEntityId) {\n    return ddS(Q.__dbApplication__, dbEntityId);\n}\nDEPENDENCY_INJECTION.db().eventuallyGet(AIRPORT_DATABASE).then((airDb) => {\n    airDb.QM[getFullApplicationName(Q_APPLICATION)] = Q;\n});\n//# sourceMappingURL=qApplication.js.map","import { Dao, DaoQueryDecorators, } from '@airport/check-in';\nimport { Q, duoDiSet, } from './qApplication';\n// Application Q object Dependency Injection readiness detection Dao\nexport class SQDIDao extends Dao {\n    constructor(dbEntityId) {\n        super(dbEntityId, Q);\n    }\n}\nexport class BaseRecordUpdateStageDao extends SQDIDao {\n    constructor() {\n        super(2);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(2);\n    }\n}\nBaseRecordUpdateStageDao.Find = new DaoQueryDecorators();\nBaseRecordUpdateStageDao.FindOne = new DaoQueryDecorators();\nBaseRecordUpdateStageDao.Search = new DaoQueryDecorators();\nBaseRecordUpdateStageDao.SearchOne = new DaoQueryDecorators();\nexport class BaseSynchronizationConflictDao extends SQDIDao {\n    constructor() {\n        super(1);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(1);\n    }\n}\nBaseSynchronizationConflictDao.Find = new DaoQueryDecorators();\nBaseSynchronizationConflictDao.FindOne = new DaoQueryDecorators();\nBaseSynchronizationConflictDao.Search = new DaoQueryDecorators();\nBaseSynchronizationConflictDao.SearchOne = new DaoQueryDecorators();\nexport class BaseSynchronizationConflictValuesDao extends SQDIDao {\n    constructor() {\n        super(0);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(0);\n    }\n}\nBaseSynchronizationConflictValuesDao.Find = new DaoQueryDecorators();\nBaseSynchronizationConflictValuesDao.FindOne = new DaoQueryDecorators();\nBaseSynchronizationConflictValuesDao.Search = new DaoQueryDecorators();\nBaseSynchronizationConflictValuesDao.SearchOne = new DaoQueryDecorators();\n//# sourceMappingURL=baseDaos.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseSynchronizationConflictDao, Q } from '../../generated/generated';\nlet SynchronizationConflictDao = class SynchronizationConflictDao extends BaseSynchronizationConflictDao {\n    async insert(synchronizationConflicts) {\n        let sc;\n        const values = [];\n        for (const synchronizationConflict of synchronizationConflicts) {\n            values.push([\n                synchronizationConflict.type,\n                synchronizationConflict.acknowledged,\n                synchronizationConflict.repository.id,\n                synchronizationConflict.overwrittenRecordHistory.id,\n                synchronizationConflict.overwritingRecordHistory.id\n            ]);\n        }\n        const ids = await this.db.insertValuesGenerateIds({\n            insertInto: sc = Q.SynchronizationConflict,\n            columns: [\n                sc.type,\n                sc.acknowledged,\n                sc.repository.id,\n                sc.overwrittenRecordHistory.id,\n                sc.overwritingRecordHistory.id\n            ],\n            values\n        });\n        for (let i = 0; i < synchronizationConflicts.length; i++) {\n            let synchronizationConflict = synchronizationConflicts[i];\n            synchronizationConflict.id = ids[i][0];\n        }\n    }\n};\nSynchronizationConflictDao = __decorate([\n    Injected()\n], SynchronizationConflictDao);\nexport { SynchronizationConflictDao };\n//# sourceMappingURL=SynchronizationConflictDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseSynchronizationConflictValuesDao, Q } from '../../generated/generated';\nlet SynchronizationConflictValuesDao = class SynchronizationConflictValuesDao extends BaseSynchronizationConflictValuesDao {\n    async insert(synchronizationConflictValues) {\n        let scv;\n        const values = [];\n        for (const synchronizationConflictValue of synchronizationConflictValues) {\n            values.push([\n                synchronizationConflictValue.synchronizationConflict.id,\n                synchronizationConflictValue.columnIndex\n            ]);\n        }\n        await this.db.insertValues({\n            insertInto: scv = Q.SynchronizationConflictValues,\n            columns: [\n                scv.synchronizationConflict.id,\n                scv.columnIndex\n            ],\n            values\n        });\n    }\n};\nSynchronizationConflictValuesDao = __decorate([\n    Injected()\n], SynchronizationConflictValuesDao);\nexport { SynchronizationConflictValuesDao };\n//# sourceMappingURL=SynchronizationConflictValuesDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { and, field, or } from '@airport/air-traffic-control';\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseRecordUpdateStageDao, Q } from '../generated/generated';\nlet RecordUpdateStageDao = class RecordUpdateStageDao extends BaseRecordUpdateStageDao {\n    async insertValues(values) {\n        const rus = Q.RecordUpdateStage;\n        const columns = [\n            rus.applicationVersion.id,\n            rus.entity.id,\n            rus.repository.id,\n            rus.actor.id,\n            rus.actorRecordId,\n            rus.column.id,\n            rus.updatedValue\n        ];\n        return await this.db.insertValuesGenerateIds({\n            insertInto: rus,\n            columns,\n            values\n        }, {\n            generateOnSync: true\n        });\n    }\n    async updateEntityWhereIds(applicationIndex, applicationVersionId, tableIndex, idMap, updatedColumnIndexes) {\n        const dbEntity = this.airportDatabase.applications[applicationIndex].currentVersion[0]\n            .applicationVersion.entities[tableIndex];\n        const qEntity = this.airportDatabase.qApplications[applicationIndex][dbEntity.name];\n        const repositoryEquals = [];\n        for (const [repositoryId, idsForRepository] of idMap) {\n            const actorEquals = [];\n            for (const [actorId, idsForActor] of idsForRepository) {\n                actorEquals.push(and(qEntity['actor'].id.equals(actorId), qEntity['actorRecordId'].in(Array.from(idsForActor))));\n            }\n            repositoryEquals.push(and(qEntity['repository'].id.equals(repositoryId), or(...actorEquals)));\n        }\n        const setClause = {};\n        for (const columnIndex of updatedColumnIndexes) {\n            const column = dbEntity.columns[columnIndex];\n            let columnRus = Q.RecordUpdateStage;\n            let columnSetClause = field({\n                from: [\n                    columnRus\n                ],\n                select: columnRus.updatedValue,\n                where: and(columnRus.applicationVersion.id.equals(applicationVersionId), columnRus.entity.id.equals(dbEntity.index), columnRus.repository.id.equals(qEntity.repository.id), columnRus.actor.id.equals(qEntity.actor.id), columnRus.actorRecordId.equals(qEntity.actorRecordId), columnRus.column.id.equals(column.index))\n            });\n            setClause[column.name] = columnSetClause;\n        }\n        await this.db.updateColumnsWhere({\n            update: qEntity,\n            set: setClause,\n            where: or(...repositoryEquals)\n        });\n    }\n    async delete( //\n    ) {\n        return await this.db.deleteWhere({\n            deleteFrom: Q.RecordUpdateStage\n        });\n    }\n};\nRecordUpdateStageDao = __decorate([\n    Injected()\n], RecordUpdateStageDao);\nexport { RecordUpdateStageDao };\n//# sourceMappingURL=RecordUpdateStageDao.js.map","import { lib } from '@airport/direction-indicator';\nimport { SynchronizationConflictDao } from \"./dao/conflict/SynchronizationConflictDao\";\nimport { SynchronizationConflictValuesDao } from \"./dao/conflict/SynchronizationConflictValuesDao\";\nimport { RecordUpdateStageDao } from \"./dao/RecordUpdateStageDao\";\nconst movingWalkway = lib('moving-walkway');\nexport const RECORD_UPDATE_STAGE_DAO = movingWalkway.token({\n    class: RecordUpdateStageDao,\n    interface: 'IRecordUpdateStageDao',\n    token: 'RECORD_UPDATE_STAGE_DAO'\n});\nexport const SYNCHRONIZATION_CONFLICT_DAO = movingWalkway.token({\n    class: SynchronizationConflictDao,\n    interface: 'ISynchronizationConflictDao',\n    token: 'SYNCHRONIZATION_CONFLICT_DAO'\n});\nexport const SYNCHRONIZATION_CONFLICT_VALUES_DAO = movingWalkway.token({\n    class: SynchronizationConflictValuesDao,\n    interface: 'ISynchronizationConflictValuesDao',\n    token: 'SYNCHRONIZATION_CONFLICT_VALUES_DAO'\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getSysWideOpIds } from '@airport/check-in';\nimport { ChangeType, ensureChildArray, ensureChildJsMap, ensureChildJsSet } from '@airport/ground-control';\nimport { SynchronizationConflict_Type } from '@airport/moving-walkway';\nlet Stage1SyncedInDataProcessor = class Stage1SyncedInDataProcessor {\n    /**\n     * In stage one:\n     *\n     *  1)  Unique create/update/delete statement datastructures are generated\n     *  2)  Synchronization conflict datastructure is generated\n     *\n     * @param {Map<RepositoryId, ISyncRepoTransHistory[]>} repositoryTransactionHistoryMapByRepositoryId\n     * @param {Map<Actor_Id, IActor>} actorMayById\n     * @returns {Promise<void>}\n     */\n    async performStage1DataProcessing(repositoryTransactionHistoryMapByRepositoryId, actorMayById) {\n        await this.populateSystemWideOperationIds(repositoryTransactionHistoryMapByRepositoryId);\n        const changedRecordIds = new Map();\n        // query for all local operations on records in a repository (since the earliest\n        // received change time).  Get the\n        // changes by repository ids or by the actual tables and records in those tables\n        // that will be updated or deleted.\n        for (const [repositoryId, repoTransHistoriesForRepo] of repositoryTransactionHistoryMapByRepositoryId) {\n            const changedRecordsForRepo = {\n                ids: new Map(),\n                firstChangeTime: new Date().getTime() + 10000000000\n            };\n            changedRecordIds.set(repositoryId, changedRecordsForRepo);\n            for (const repoTransHistory of repoTransHistoriesForRepo) {\n                // determine the earliest change time of incoming history records\n                const saveMillis = repoTransHistory.saveTimestamp;\n                if (saveMillis\n                    < changedRecordsForRepo.firstChangeTime) {\n                    changedRecordsForRepo.firstChangeTime = repoTransHistory.saveTimestamp;\n                }\n                for (const operationHistory of repoTransHistory.operationHistory) {\n                    // Collect the Actor related ids\n                    const idsForEntity = ensureChildJsMap(changedRecordsForRepo.ids, operationHistory.entity.id);\n                    for (const recordHistory of operationHistory.recordHistory) {\n                        // Collect the Actor related ids\n                        ensureChildJsSet(idsForEntity, recordHistory.actor.id)\n                            .add(recordHistory.actorRecordId);\n                        // add a map of new values\n                        const newValueMap = new Map();\n                        recordHistory.newValueMap = newValueMap;\n                        for (const newValue of recordHistory.newValues) {\n                            newValueMap.set(newValue.columnIndex, newValue);\n                        }\n                    }\n                }\n            }\n        }\n        const allRepoTransHistoryMapByRepoId = new Map();\n        const allRemoteRecordDeletions = this.getDeletedRecordIdsAndPopulateAllHistoryMap(allRepoTransHistoryMapByRepoId, repositoryTransactionHistoryMapByRepositoryId);\n        // find local history for the matching repositories and corresponding time period\n        const localRepoTransHistoryMapByRepositoryId = await this.repositoryTransactionHistoryDao\n            .findAllLocalChangesForRecordIds(changedRecordIds);\n        const allLocalRecordDeletions = this.getDeletedRecordIdsAndPopulateAllHistoryMap(allRepoTransHistoryMapByRepoId, localRepoTransHistoryMapByRepositoryId, true);\n        // Find all actors that modified the locally recorded history, which are not already\n        // in the actorMapById collect actors not already in cache\n        const newlyFoundActorSet = new Set();\n        for (const [repositoryId, repositoryTransactionHistoriesForRepository] of localRepoTransHistoryMapByRepositoryId) {\n            for (const repositoryTransactionHistory of repositoryTransactionHistoriesForRepository) {\n                for (const operationHistory of repositoryTransactionHistory.operationHistory) {\n                    const actorId = operationHistory.actor.id;\n                    if (actorMayById.get(actorId) === undefined) {\n                        newlyFoundActorSet.add(actorId);\n                    }\n                }\n            }\n        }\n        if (newlyFoundActorSet.size) {\n            // cache remaining actors\n            const newActors = await this.actorDao.findWithDetailsAndGlobalIdsByIds(Array.from(newlyFoundActorSet));\n            for (const newActor of newActors) {\n                actorMayById.set(newActor.id, newActor);\n            }\n        }\n        // sort all repository histories in processing order\n        for (const [repositoryId, repoTransHistoriesForRepository] of allRepoTransHistoryMapByRepoId) {\n            this.repositoryTransactionHistoryDuo\n                .sortRepoTransHistories(repoTransHistoriesForRepository, actorMayById);\n        }\n        const recordCreations = new Map();\n        const recordUpdates = new Map();\n        const recordDeletions = new Map();\n        const syncConflictMapByRepoId = new Map();\n        // FIXME: add code to ensure that remote records coming in are performed only\n        // by the actors that claim the operation AND that the records created are\n        // created only by the actors that perform the operation (actorIds match)\n        for (const [repositoryId, repoTransHistoriesForRepo] of allRepoTransHistoryMapByRepoId) {\n            for (const repoTransHistory of repoTransHistoriesForRepo) {\n                for (const operationHistory of repoTransHistory.operationHistory) {\n                    switch (operationHistory.changeType) {\n                        case ChangeType.INSERT_VALUES:\n                            this.processCreation(repositoryId, operationHistory, repoTransHistory.isLocal, recordCreations, recordUpdates, recordDeletions, allRemoteRecordDeletions, allLocalRecordDeletions, syncConflictMapByRepoId);\n                            break;\n                        case ChangeType.UPDATE_ROWS:\n                            this.processUpdate(repositoryId, operationHistory, repoTransHistory.isLocal, recordCreations, recordUpdates, allRemoteRecordDeletions, allLocalRecordDeletions, syncConflictMapByRepoId);\n                            break;\n                        case ChangeType.DELETE_ROWS:\n                            this.processDeletion(repositoryId, operationHistory, recordCreations, recordUpdates, recordDeletions, allLocalRecordDeletions);\n                            break;\n                    }\n                }\n            }\n        }\n        return {\n            recordCreations,\n            recordDeletions,\n            recordUpdates,\n            syncConflictMapByRepoId\n        };\n    }\n    async populateSystemWideOperationIds(repositoryTransactionHistoryMapByRepositoryId) {\n        let numSystemWideOperationIds = 0;\n        for (const [_, repoTransHistoriesForRepo] of repositoryTransactionHistoryMapByRepositoryId) {\n            for (const repositoryTransactionHistory of repoTransHistoriesForRepo) {\n                numSystemWideOperationIds += repositoryTransactionHistory\n                    .operationHistory.length;\n            }\n        }\n        const systemWideOperationIds = await getSysWideOpIds(numSystemWideOperationIds, this.airportDatabase, this.sequenceGenerator);\n        let i = 0;\n        for (const [_, repoTransHistoriesForRepo] of repositoryTransactionHistoryMapByRepositoryId) {\n            for (const repositoryTransactionHistory of repoTransHistoriesForRepo) {\n                for (const operationHistory of repositoryTransactionHistory.operationHistory) {\n                    operationHistory.systemWideOperationId = systemWideOperationIds[i];\n                    i++;\n                }\n            }\n        }\n    }\n    ensureRecordHistoryId(recordHistory, actorRecordIdSetByActor, actorRecordId = recordHistory.actorRecordId) {\n        ensureChildJsMap(actorRecordIdSetByActor, recordHistory.actor.id)\n            .set(actorRecordId, recordHistory.id);\n    }\n    getDeletedRecordIdsAndPopulateAllHistoryMap(allRepoTransHistoryMapByRepoId, repositoryTransactionHistoryMapByRepoId, isLocal = false) {\n        const recordDeletions = new Map();\n        for (const [repositoryId, repoTransHistories] of repositoryTransactionHistoryMapByRepoId) {\n            this.mergeArraysInMap(allRepoTransHistoryMapByRepoId, repositoryId, repoTransHistories);\n            for (const repoTransHistory of repoTransHistories) {\n                repoTransHistory.isLocal = isLocal;\n                for (const operationHistory of repoTransHistory.operationHistory) {\n                    switch (operationHistory.changeType) {\n                        case ChangeType.DELETE_ROWS:\n                            for (const recordHistory of operationHistory.recordHistory) {\n                                this.ensureRecordHistoryId(recordHistory, this.syncInUtils\n                                    .ensureRecordMapForRepoInTable(repositoryId, operationHistory, recordDeletions));\n                            }\n                            break;\n                    }\n                }\n            }\n        }\n        return recordDeletions;\n    }\n    mergeArraysInMap(map, key, array) {\n        let targetArray = map.get(key);\n        if (!targetArray) {\n            targetArray = array;\n        }\n        else {\n            targetArray = targetArray.concat(array);\n        }\n        map.set(key, targetArray);\n    }\n    /*\n    NOTE: local creates are not inputted into this processing.\n     */\n    processCreation(repositoryId, operationHistory, isLocal, recordCreations, recordUpdates, recordDeletions, allRemoteRecordDeletions, allLocalRecordDeletions, syncConflictMapByRepoId) {\n        const recordUpdatesForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, recordUpdates);\n        const recordDeletesForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, recordDeletions);\n        const allRemoteRecordDeletesForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, allRemoteRecordDeletions);\n        const allLocalRecordDeletesForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, allLocalRecordDeletions);\n        const insertsForEntityInRepo = this.syncInUtils.ensureRecordMapForRepoInTable(repositoryId, operationHistory, recordCreations);\n        for (const recordHistory of operationHistory.recordHistory) {\n            if (this.getRecord(recordHistory, insertsForEntityInRepo)) {\n                throw new Error(`A record is being created more than once.\r\n\t\t\t\t\t${this.getRecordInfo(repositoryId, operationHistory, recordHistory)}\r\n\t\t\t\t\tThis is not possible if every remote change is only processed once.\r\n\t\t\t\t\t`);\n            }\n            if (isLocal) {\n                throw new Error(`Remotely mutated record is being created locally.\r\n\t\t\t\t\t${this.getRecordInfo(repositoryId, operationHistory, recordHistory)}\r\n\t\t\t\t\tThis is not possible if changes are never sent to originating TMs.\r\n\t\t\t\t\t`);\n            }\n            if (this.hasRecordId(recordHistory, recordDeletesForRepoInTable)) {\n                throw new Error(`\r\n\t\t\t\tRemotely created record is being deleted remotely before it's been created.\r\n\t\t\t\t\t${this.getRecordInfo(repositoryId, operationHistory, recordHistory)}\r\n\t\t\t\t\tThis is not possible if all server clocks are synced.\r\n\t\t\t\t\t`);\n            }\n            if (this.getRecordHistoryId(recordHistory, allLocalRecordDeletesForRepoInTable)) {\n                throw new Error(`Remotely created record is being deleted locally.\r\n\t\t\t\t\t${this.getRecordInfo(repositoryId, operationHistory, recordHistory)}\r\n\t\t\t\t\tThis is not possible if every remote change is only processed once.\r\n\t\t\t\t\t`);\n            }\n            const remoteDeleteRecordHistoryId = this.getRecordHistoryId(recordHistory, allRemoteRecordDeletesForRepoInTable);\n            if (remoteDeleteRecordHistoryId) {\n                // remotely created record has been remotely deleted\n                this.addSyncConflict(SynchronizationConflict_Type.REMOTE_CREATE_REMOTELY_DELETED, repositoryId, recordHistory, {\n                    id: remoteDeleteRecordHistoryId\n                }, syncConflictMapByRepoId);\n                // If the record has been deleted, do not process the create\n                continue;\n            }\n            const createdRecord = this.ensureColumnValueMap(recordHistory, insertsForEntityInRepo);\n            if (this.getRecord(recordHistory, recordUpdatesForRepoInTable)) {\n                throw new Error(`Remotely created record is being updated BEFORE it is created.\r\n\t\t\t\t\t${this.getRecordInfo(repositoryId, operationHistory, recordHistory)}\r\n\t\t\t\t\tThis is not possible if all server clocks are synced.\r\n\t\t\t\t\t`);\n            }\n            // Record the creation of the record\n            for (const newValue of recordHistory.newValues) {\n                createdRecord.set(newValue.columnIndex, newValue.newValue);\n            }\n        }\n    }\n    /*\n    NOTE: local updates to records NOT in incoming changes do not get inputted into\n    this processing.\n     */\n    processUpdate(repositoryId, operationHistory, isLocal, recordCreations, recordUpdates, allRemoteRecordDeletions, allLocalRecordDeletions, syncConflictMapByRepoId) {\n        const recordCreationsForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, recordCreations);\n        const allRemoteRecordDeletesForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, allRemoteRecordDeletions);\n        const allLocalRecordDeletesForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, allLocalRecordDeletions);\n        const updatesForEntityInRepo = this.syncInUtils.ensureRecordMapForRepoInTable(repositoryId, operationHistory, recordUpdates);\n        for (const recordHistory of operationHistory.recordHistory) {\n            const localDeleteRecordHistoryId = this.getRecordHistoryId(recordHistory, allLocalRecordDeletesForRepoInTable);\n            if (localDeleteRecordHistoryId) {\n                if (!isLocal) {\n                    // A remote update to a record has been locally deleted\n                    this.addSyncConflict(SynchronizationConflict_Type.REMOTE_UPDATE_LOCALLY_DELETED, repositoryId, recordHistory, {\n                        id: localDeleteRecordHistoryId\n                    }, syncConflictMapByRepoId);\n                }\n                // else {a local update to a record has been locally deleted - nothing to do}\n                // If the record has been deleted, do not process the update\n                continue;\n            }\n            const remoteDeleteRecordHistoryId = this.getRecordHistoryId(recordHistory, allRemoteRecordDeletesForRepoInTable);\n            if (remoteDeleteRecordHistoryId) {\n                if (isLocal) {\n                    // A local update for a record that has been deleted remotely\n                    this.addSyncConflict(SynchronizationConflict_Type.LOCAL_UPDATE_REMOTELY_DELETED, repositoryId, recordHistory, {\n                        id: remoteDeleteRecordHistoryId\n                    }, syncConflictMapByRepoId);\n                }\n                // else {remote deletions do not cause conflicts for remotely updated records}\n                // If the record has been deleted, do not process the update\n                continue;\n            }\n            // If the record has been created, update the creation record instead\n            let createdRecord = this.getRecord(recordHistory, recordCreationsForRepoInTable);\n            if (createdRecord) {\n                if (isLocal) {\n                    throw new Error(`Remotely created records are being updated locally.\r\n\t\t\t\t\t${this.getRecordInfo(repositoryId, operationHistory, recordHistory)}\r\n\t\t\t\t\tThis is not possible if every remote change is only processed once.\r\n\t\t\t\t\t`);\n                }\n                else {\n                    // remotely created record is being updated remotely - normal flow\n                    for (const newValue of recordHistory.newValues) {\n                        createdRecord.set(newValue.columnIndex, newValue.newValue);\n                    }\n                }\n                // No need to record updates, already taken into account in the create\n                continue;\n            }\n            // record update\n            let updatedRecord = this.ensureRecord(recordHistory, updatesForEntityInRepo);\n            let synchronizationConflict;\n            for (const newValue of recordHistory.newValues) {\n                if (isLocal) {\n                    const columnIndex = newValue.columnIndex;\n                    const recordUpdate = updatedRecord.get(columnIndex);\n                    if (recordUpdate) {\n                        // remotely updated record value is being updated locally\n                        if (!synchronizationConflict) {\n                            synchronizationConflict = this.addSyncConflict(SynchronizationConflict_Type.REMOTE_UPDATE_LOCALLY_UPDATED, repositoryId, {\n                                id: recordUpdate.recordHistoryId,\n                            }, {\n                                id: remoteDeleteRecordHistoryId\n                            }, syncConflictMapByRepoId);\n                            synchronizationConflict.values = [];\n                        }\n                        synchronizationConflict.values.push({\n                            columnIndex,\n                            synchronizationConflict\n                        });\n                        // no need to update since the value is already there\n                        // Remove the update\n                        updatedRecord.delete(newValue.columnIndex);\n                    }\n                }\n                else {\n                    // remotely updated record value is being updated remotely - normal flow\n                    // replace the older update with the newer one\n                    updatedRecord.set(newValue.columnIndex, {\n                        newValue: newValue.newValue,\n                        recordHistoryId: recordHistory.id\n                    });\n                }\n            }\n        }\n    }\n    /*\n    NOTE: local deletes of records NOT in incoming changes do not get inputted into\n    this processing.\n     */\n    processDeletion(repositoryId, operationHistory, recordCreations, recordUpdates, recordDeletions, allLocalRecordDeletions) {\n        const recordCreationsForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, recordCreations);\n        const recordUpdatesForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, recordUpdates);\n        const allLocalRecordDeletesForRepoInTable = this.getRecordsForRepoInTable(repositoryId, operationHistory, allLocalRecordDeletions);\n        const deletesForEntityInRepo = this.syncInUtils.ensureRecordMapForRepoInTable(repositoryId, operationHistory, recordDeletions);\n        for (const recordHistory of operationHistory.recordHistory) {\n            let recordCreationsForActorInRepoInTable = this.getRecordsForActor(recordHistory, recordCreationsForRepoInTable);\n            // If a remotely deleted record was also created remotely\n            if (recordCreationsForActorInRepoInTable\n                && recordCreationsForActorInRepoInTable.get(recordHistory.actorRecordId)) {\n                // remote deletions do not cause conflicts for remotely created records\n                // Remove the creation of the record\n                recordCreationsForActorInRepoInTable.delete(recordHistory.actorRecordId);\n                // No need to record a deletion for a record that was also created (remotely)\n                continue;\n            }\n            let recordUpdatesForActorInRepoInTable = this.getRecordsForActor(recordHistory, recordUpdatesForRepoInTable);\n            // If a remotely deleted record has been updated (remotely)\n            if (recordUpdatesForActorInRepoInTable\n                && recordUpdatesForActorInRepoInTable.get(recordHistory.actorRecordId)) {\n                // remote deletions do not cause conflicts for remotely updated records\n                // Remove record updates for deleted records\n                recordUpdatesForActorInRepoInTable.delete(recordHistory.actorRecordId);\n            }\n            if (this.getRecordHistoryId(recordHistory, allLocalRecordDeletesForRepoInTable)) {\n                // If the record has been deleted locally, no need to add another delete operation\n                continue;\n            }\n            // record deletion\n            ensureChildJsSet(deletesForEntityInRepo, recordHistory.actor.id)\n                .add(recordHistory.actorRecordId);\n        }\n    }\n    getRecordsForRepoInTable(repositoryId, operationHistory, recordMapByApplicationTableAndRepository) {\n        const recordMapForApplication = recordMapByApplicationTableAndRepository\n            .get(operationHistory.entity.applicationVersion.id);\n        let recordMapForTable;\n        if (recordMapForApplication) {\n            recordMapForTable = recordMapForApplication.get(operationHistory.entity.id);\n        }\n        let recordMapForRepoInTable;\n        if (recordMapForTable) {\n            recordMapForRepoInTable = recordMapForTable.get(repositoryId);\n        }\n        return recordMapForRepoInTable;\n    }\n    getRecord(recordHistory, recordMapByActor) {\n        let recordsForActor = this.getRecordsForActor(recordHistory, recordMapByActor);\n        if (!recordsForActor) {\n            return null;\n        }\n        return recordsForActor.get(recordHistory.actorRecordId);\n    }\n    hasRecordId(recordHistory, actorRecordIdSetByActor) {\n        let actorRecordIdsForActor = this.getRecordsForActor(recordHistory, actorRecordIdSetByActor);\n        if (!actorRecordIdsForActor) {\n            return false;\n        }\n        return actorRecordIdsForActor.has(recordHistory.actorRecordId);\n    }\n    getRecordHistoryId(recordHistory, actorRecordIdSetByActor) {\n        let actorRecordIdsForActor = this.getRecordsForActor(recordHistory, actorRecordIdSetByActor);\n        if (!actorRecordIdsForActor) {\n            return null;\n        }\n        return actorRecordIdsForActor.get(recordHistory.actorRecordId);\n    }\n    getRecordsForActor(recordHistory, recordMapByActor) {\n        let recordsForActor;\n        if (recordMapByActor) {\n            recordsForActor = recordMapByActor.get(recordHistory.actor.id);\n        }\n        return recordsForActor;\n    }\n    getRecordInfo(repositoryId, operationHistory, recordHistory) {\n        return `\r\n\t\tApplication Version ID: ${operationHistory.entity.applicationVersion.id}\r\n\t\tEntity ID:         ${operationHistory.entity.id}\r\n\t\tRepository ID:     ${repositoryId}\r\n\t\tActor ID:          ${recordHistory.actor.id}\r\n\t\tActor Record ID:   ${recordHistory.actorRecordId}\r\n\t\t`;\n    }\n    addSyncConflict(synchronizationConflictType, repositoryId, overwrittenRecordHistory, overwritingRecordHistory, syncConflictMapByRepoId) {\n        const syncConflict = this.createSynchronizationConflict(synchronizationConflictType, repositoryId, overwrittenRecordHistory, overwritingRecordHistory);\n        ensureChildArray(syncConflictMapByRepoId, repositoryId).push(syncConflict);\n        return syncConflict;\n    }\n    createSynchronizationConflict(synchronizationConflictType, repositoryId, overwrittenRecordHistory, overwritingRecordHistory) {\n        return {\n            id: null,\n            overwrittenRecordHistory,\n            overwritingRecordHistory,\n            repository: {\n                id: repositoryId\n            },\n            type: synchronizationConflictType\n        };\n    }\n    ensureColumnValueMap(recordHistory, dataMap) {\n        return ensureChildJsMap(ensureChildJsMap(dataMap, recordHistory.actor.id), recordHistory.actorRecordId);\n    }\n    ensureRecord(recordHistory, recordMapByActor) {\n        return ensureChildJsMap(ensureChildJsMap(recordMapByActor, recordHistory.actor.id), recordHistory.actorRecordId);\n    }\n};\n__decorate([\n    Inject()\n], Stage1SyncedInDataProcessor.prototype, \"actorDao\", void 0);\n__decorate([\n    Inject()\n], Stage1SyncedInDataProcessor.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], Stage1SyncedInDataProcessor.prototype, \"repositoryTransactionHistoryDao\", void 0);\n__decorate([\n    Inject()\n], Stage1SyncedInDataProcessor.prototype, \"repositoryTransactionHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], Stage1SyncedInDataProcessor.prototype, \"sequenceGenerator\", void 0);\n__decorate([\n    Inject()\n], Stage1SyncedInDataProcessor.prototype, \"syncInUtils\", void 0);\nStage1SyncedInDataProcessor = __decorate([\n    Injected()\n], Stage1SyncedInDataProcessor);\nexport { Stage1SyncedInDataProcessor };\n//# sourceMappingURL=Stage1SyncedInDataProcessor.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { and, compareNumbers, or } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { ensureChildJsMap, ensureChildJsSet, repositoryEntity } from '@airport/ground-control';\nlet Stage2SyncedInDataProcessor = class Stage2SyncedInDataProcessor {\n    async applyChangesToDb(stage1Result, applicationsByApplicationVersionIdMap) {\n        const context = {};\n        await this.performCreates(stage1Result.recordCreations, applicationsByApplicationVersionIdMap, context);\n        await this.performUpdates(stage1Result.recordUpdates, applicationsByApplicationVersionIdMap, context);\n        await this.performDeletes(stage1Result.recordDeletions, applicationsByApplicationVersionIdMap, context);\n    }\n    /**\n     * Remote changes come in with ApplicationVersionIds not ApplicationIndexes, so it makes\n     * sense to keep this structure.  NOTE: only one version of a given application is\n     * processed at one time:\n     *\n     *  Changes for a application version below the one in this Terminal must first be upgraded.\n     *  Terminal itself must first be upgraded to newer application versions, before changes\n     *  for that application version are processed.\n     *\n     *  To tie in a given ApplicationVersionId to its ApplicationIndex an additional mapping data\n     *  structure is passed in.\n     */\n    async performCreates(recordCreations, applicationsByApplicationVersionIdMap, context) {\n        for (const [applicationVersionId, creationInApplicationMap] of recordCreations) {\n            for (const [tableIndex, creationInTableMap] of creationInApplicationMap) {\n                const applicationIndex = applicationsByApplicationVersionIdMap\n                    .get(applicationVersionId).index;\n                const dbEntity = this.airportDatabase.applications[applicationIndex].currentVersion[0]\n                    .applicationVersion.entities[tableIndex];\n                const qEntity = this.airportDatabase.qApplications[applicationIndex][dbEntity.name];\n                const columns = [\n                    qEntity.repository.id,\n                    qEntity.actor.id,\n                    qEntity.actorRecordId\n                ];\n                const nonIdColumns = this.getNonIdColumnsInIndexOrder(dbEntity);\n                let creatingColumns = true;\n                let numInserts = 0;\n                const values = [];\n                for (const [repositoryId, creationForRepositoryMap] of creationInTableMap) {\n                    for (const [actorId, creationForActorMap] of creationForRepositoryMap) {\n                        for (const [actorRecordId, creationOfRowMap] of creationForActorMap) {\n                            const rowValues = [\n                                repositoryId,\n                                actorId,\n                                actorRecordId\n                            ];\n                            const columnIndexedValues = [];\n                            for (const [columnIndex, columnValue] of creationOfRowMap) {\n                                columnIndexedValues.push([columnIndex, columnValue]);\n                            }\n                            if (columnIndexedValues.length) {\n                                numInserts++;\n                            }\n                            columnIndexedValues.sort((col1IndexAndValue, col2IndexAndValue) => {\n                                return compareNumbers(col1IndexAndValue[0], col2IndexAndValue[0]);\n                            });\n                            let currentNonIdColumnArrayIndex = 0;\n                            for (const [columnIndex, columnValue] of columnIndexedValues) {\n                                let nonIdColumn = nonIdColumns[currentNonIdColumnArrayIndex];\n                                while (nonIdColumn.index < columnIndex) {\n                                    if (creatingColumns) {\n                                        columns.push(qEntity.__driver__.allColumns[nonIdColumn.index]);\n                                    }\n                                    rowValues.push(null);\n                                    currentNonIdColumnArrayIndex++;\n                                    nonIdColumn = nonIdColumns[currentNonIdColumnArrayIndex];\n                                }\n                                if (creatingColumns) {\n                                    columns.push(qEntity.__driver__.allColumns[columnIndex]);\n                                }\n                                rowValues.push(columnValue);\n                                currentNonIdColumnArrayIndex++;\n                            }\n                            if (columnIndexedValues.length) {\n                                values.push(rowValues);\n                            }\n                            creatingColumns = false;\n                        }\n                    }\n                }\n                if (numInserts) {\n                    const previousDbEntity = context.dbEntity;\n                    context.dbEntity = qEntity\n                        .__driver__.dbEntity;\n                    try {\n                        await this.databaseFacade.insertValues({\n                            insertInto: qEntity,\n                            columns,\n                            values\n                        }, context);\n                    }\n                    finally {\n                        context.dbEntity = previousDbEntity;\n                    }\n                }\n            }\n        }\n    }\n    getNonIdColumnsInIndexOrder(dbEntity) {\n        const nonIdColumns = [];\n        for (const column of dbEntity.columns) {\n            switch (column.name) {\n                case repositoryEntity.ACTOR_ID:\n                case repositoryEntity.ACTOR_RECORD_ID:\n                case repositoryEntity.REPOSITORY_ID:\n                    continue;\n            }\n            nonIdColumns.push(column);\n        }\n        nonIdColumns.sort((column1, column2) => {\n            return compareNumbers(column1.index, column2.index);\n        });\n        return nonIdColumns;\n    }\n    async performUpdates(recordUpdates, applicationsByApplicationVersionIdMap, context) {\n        const finalUpdateMap = new Map();\n        const recordUpdateStage = [];\n        // Build the final update data structure\n        for (const [applicationVersionId, applicationUpdateMap] of recordUpdates) {\n            const finalApplicationUpdateMap = ensureChildJsMap(finalUpdateMap, applicationVersionId);\n            for (const [tableIndex, tableUpdateMap] of applicationUpdateMap) {\n                const finalTableUpdateMap = ensureChildJsMap(finalApplicationUpdateMap, tableIndex);\n                for (const [repositoryId, repositoryUpdateMap] of tableUpdateMap) {\n                    for (const [actorId, actorUpdates] of repositoryUpdateMap) {\n                        for (const [actorRecordId, recordUpdateMap] of actorUpdates) {\n                            const recordKeyMap = this.getRecordKeyMap(recordUpdateMap, finalTableUpdateMap);\n                            ensureChildJsSet(ensureChildJsMap(recordKeyMap, repositoryId), actorId)\n                                .add(actorRecordId);\n                            for (const [columnIndex, columnUpdate] of recordUpdateMap) {\n                                recordUpdateStage.push([\n                                    applicationVersionId,\n                                    tableIndex,\n                                    repositoryId,\n                                    actorId,\n                                    actorRecordId,\n                                    columnIndex,\n                                    columnUpdate.newValue\n                                ]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (!recordUpdateStage.length) {\n            return;\n        }\n        await this.recordUpdateStageDao.insertValues(recordUpdateStage);\n        // Perform the updates\n        for (const [applicationVersionId, updateMapForApplication] of finalUpdateMap) {\n            const application = applicationsByApplicationVersionIdMap.get(applicationVersionId);\n            for (const [tableIndex, updateMapForTable] of updateMapForApplication) {\n                await this.runUpdatesForTable(application.index, applicationVersionId, tableIndex, updateMapForTable);\n            }\n        }\n        await this.recordUpdateStageDao.delete();\n    }\n    async performDeletes(recordDeletions, applicationsByApplicationVersionIdMap, context) {\n        for (const [applicationVersionId, deletionInApplicationMap] of recordDeletions) {\n            const application = applicationsByApplicationVersionIdMap.get(applicationVersionId);\n            for (const [tableIndex, deletionInTableMap] of deletionInApplicationMap) {\n                const dbEntity = this.airportDatabase.applications[application.index].currentVersion[0]\n                    .applicationVersion.entities[tableIndex];\n                const qEntity = this.airportDatabase.qApplications[application.index][dbEntity.name];\n                let numClauses = 0;\n                let repositoryWhereFragments = [];\n                for (const [repositoryId, deletionForRepositoryMap] of deletionInTableMap) {\n                    let actorWhereFragments = [];\n                    for (const [actorId, actorRecordIdSet] of deletionForRepositoryMap) {\n                        numClauses++;\n                        actorWhereFragments.push(and(qEntity.actorRecordId.in(Array.from(actorRecordIdSet)), qEntity.actor.id.equals(actorId)));\n                    }\n                    repositoryWhereFragments.push(and(qEntity.repository.id.equals(repositoryId), or(...actorWhereFragments)));\n                }\n                if (numClauses) {\n                    const previousDbEntity = context.dbEntity;\n                    context.dbEntity = qEntity\n                        .__driver__.dbEntity;\n                    try {\n                        await this.databaseFacade.deleteWhere({\n                            deleteFrom: qEntity,\n                            where: or(...repositoryWhereFragments)\n                        }, context);\n                    }\n                    finally {\n                        context.dbEntity = previousDbEntity;\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Get the record key map (RecordKeyMap = RepositoryId -> Actor_Id\n     * -> RepositoryEntity_ActorRecordId) for the recordUpdateMap (the specified combination\n     * of columns/values being updated)\n     * @param {Map<ColumnIndex, RecordUpdate>} recordUpdateMap\n     * @param {ColumnUpdateKeyMap} finalTableUpdarecordKeyMapteMap\n     * @returns {RecordKeyMap}\n     */\n    getRecordKeyMap(recordUpdateMap, // combination of columns/values\n    // being updated\n    finalTableUpdateMap) {\n        const updatedColumns = [];\n        for (const columnIndex of recordUpdateMap.keys()) {\n            updatedColumns.push(columnIndex);\n        }\n        // Sort the updated columns by column index, to ensure that all records with the\n        // same combination of updated columns are grouped\n        updatedColumns.sort(compareNumbers);\n        // Navigate down the table UpdateKeyMap to find the matching combination of\n        // columns being updated\n        let columnValueUpdate;\n        let updateKeyMap = finalTableUpdateMap;\n        for (const columnIndex of updatedColumns) {\n            columnValueUpdate = updateKeyMap.get(columnIndex);\n            // If no update statements with the specified combination of columns exist yet\n            if (!columnValueUpdate) {\n                columnValueUpdate = {\n                    childColumnUpdateKeyMap: new Map(),\n                    recordKeyMap: new Map(),\n                    updatedColumns: null,\n                };\n                updateKeyMap.set(columnIndex, columnValueUpdate);\n            }\n            // Navigate down\n            updateKeyMap = columnValueUpdate.childColumnUpdateKeyMap;\n        }\n        columnValueUpdate.updatedColumns = updatedColumns;\n        // Return the map of the records for the update statement of the specified combination\n        // of columns/values\n        return columnValueUpdate.recordKeyMap;\n    }\n    /**\n     * Run all updates for a particular table.  One update per updated column combination\n     * is run.\n     *\n     * @param {ApplicationIndex} applicationIndex\n     * @param {TableIndex} tableIndex\n     * @param {ColumnUpdateKeyMap} updateKeyMap\n     * @returns {Promise<void>}\n     */\n    async runUpdatesForTable(applicationIndex, applicationVersionId, tableIndex, updateKeyMap) {\n        for (const columnValueUpdate of updateKeyMap.values()) {\n            const updatedColumns = columnValueUpdate.updatedColumns;\n            if (updatedColumns) {\n                await this.recordUpdateStageDao.updateEntityWhereIds(applicationIndex, applicationVersionId, tableIndex, columnValueUpdate.recordKeyMap, updatedColumns);\n            }\n            // Traverse down into nested column update combinations\n            await this.runUpdatesForTable(applicationIndex, applicationVersionId, tableIndex, columnValueUpdate.childColumnUpdateKeyMap);\n        }\n    }\n};\n__decorate([\n    Inject()\n], Stage2SyncedInDataProcessor.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], Stage2SyncedInDataProcessor.prototype, \"databaseFacade\", void 0);\n__decorate([\n    Inject()\n], Stage2SyncedInDataProcessor.prototype, \"recordUpdateStageDao\", void 0);\nStage2SyncedInDataProcessor = __decorate([\n    Injected()\n], Stage2SyncedInDataProcessor);\nexport { Stage2SyncedInDataProcessor };\n//# sourceMappingURL=Stage2SyncedInDataProcessor.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\n/**\n * Synchronization in Manager implementation.\n */\nlet SynchronizationInManager = class SynchronizationInManager {\n    async receiveMessages(messageMapByUuId, context) {\n        const syncTimestamp = new Date().getTime();\n        const existingRepositoryTransactionHistories = await this.repositoryTransactionHistoryDao\n            .findWhereUuIdsIn([...messageMapByUuId.keys()]);\n        for (const existingRepositoryTransactionHistory of existingRepositoryTransactionHistories) {\n            messageMapByUuId.delete(existingRepositoryTransactionHistory.uuId);\n        }\n        if (!messageMapByUuId.size) {\n            return;\n        }\n        let messagesToProcess = [];\n        const orderedMessages = this.timeOrderMessages(messageMapByUuId);\n        // Split up messages by type\n        for (const message of orderedMessages) {\n            if (!this.isValidLastChangeTime(syncTimestamp, message.syncTimestamp, 'Sync Timestamp')) {\n                continue;\n            }\n            if (!this.isValidLastChangeTime(message.syncTimestamp, message.history.saveTimestamp, 'Sync Timestamp', 'Save Timestamp')) {\n                continue;\n            }\n            let processMessage = true;\n            await this.transactionManager.transactInternal(async (transaction) => {\n                if (!await this.syncInChecker.checkMessage(message)) {\n                    transaction.rollback(null, context);\n                    processMessage = false;\n                    return;\n                }\n            }, context);\n            if (processMessage) {\n                messagesToProcess.push(message);\n            }\n        }\n        await this.transactionManager.transactInternal(async (transaction) => {\n            transaction.isSync = true;\n            await this.twoStageSyncedInDataProcessor.syncMessages(messagesToProcess, transaction);\n        }, context);\n    }\n    timeOrderMessages(messageMapByUuId) {\n        const messages = [...messageMapByUuId.values()];\n        messages.sort((message1, message2) => {\n            if (message1.syncTimestamp < message2.syncTimestamp) {\n                return -1;\n            }\n            if (message1.syncTimestamp > message2.syncTimestamp) {\n                return 1;\n            }\n            let history1 = message1.history;\n            let history2 = message2.history;\n            if (history1.saveTimestamp < history2.saveTimestamp) {\n                return -1;\n            }\n            if (history1.saveTimestamp > history2.saveTimestamp) {\n                return 1;\n            }\n            return 0;\n        });\n        return messages;\n    }\n    isValidLastChangeTime(syncTimestamp, remoteTimestamp, remoteFieldName, syncFieldName = 'Reception Time:') {\n        if (syncTimestamp < remoteTimestamp) {\n            console.error(`Message ${syncFieldName} is less than\r\n\t\t\tthe ${remoteFieldName} in received message:\r\n\t\t\t\t${syncFieldName}:               ${syncTimestamp}\r\n\t\t\t\t${remoteFieldName}:           ${remoteTimestamp}\r\n\t\t\t`);\n            return false;\n        }\n        return true;\n    }\n};\n__decorate([\n    Inject()\n], SynchronizationInManager.prototype, \"repositoryTransactionHistoryDao\", void 0);\n__decorate([\n    Inject()\n], SynchronizationInManager.prototype, \"syncInChecker\", void 0);\n__decorate([\n    Inject()\n], SynchronizationInManager.prototype, \"transactionManager\", void 0);\n__decorate([\n    Inject()\n], SynchronizationInManager.prototype, \"twoStageSyncedInDataProcessor\", void 0);\nSynchronizationInManager = __decorate([\n    Injected()\n], SynchronizationInManager);\nexport { SynchronizationInManager };\n//# sourceMappingURL=SynchronizationInManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { ensureChildJsMap } from '@airport/ground-control';\n/**\n * Result of comparing to versions of a given application.\n */\nexport var ApplicationComparisonResult;\n(function (ApplicationComparisonResult) {\n    // Version specified in the message is lower than it's version in the receiving\n    // Terminal (TM)\n    ApplicationComparisonResult[ApplicationComparisonResult[\"MESSAGE_APPLICATION_VERSION_IS_LOWER\"] = -1] = \"MESSAGE_APPLICATION_VERSION_IS_LOWER\";\n    // Version of the application used i the message is the same as that in the receiving\n    // Terminal (TM)\n    ApplicationComparisonResult[ApplicationComparisonResult[\"MESSAGE_APPLICATION_VERSION_IS_EQUAL\"] = 0] = \"MESSAGE_APPLICATION_VERSION_IS_EQUAL\";\n    // Version specified in the message in higher than it's version in the receiving\n    // Terminal (TM)\n    ApplicationComparisonResult[ApplicationComparisonResult[\"MESSAGE_APPLICATION_VERSION_IS_HIGHER\"] = 1] = \"MESSAGE_APPLICATION_VERSION_IS_HIGHER\";\n})(ApplicationComparisonResult || (ApplicationComparisonResult = {}));\nlet SyncInUtils = class SyncInUtils {\n    ensureRecordMapForRepoInTable(repositoryId, operationHistory, recordMapByApplicationTableAndRepository) {\n        return ensureChildJsMap(ensureChildJsMap(ensureChildJsMap(recordMapByApplicationTableAndRepository, operationHistory.entity.applicationVersion.id), operationHistory.entity.index), repositoryId);\n    }\n};\nSyncInUtils = __decorate([\n    Injected()\n], SyncInUtils);\nexport { SyncInUtils };\n//# sourceMappingURL=SyncInUtils.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { TransactionType } from '@airport/ground-control';\nimport { RepositoryTransactionType } from '@airport/holding-pattern';\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet TwoStageSyncedInDataProcessor = class TwoStageSyncedInDataProcessor {\n    /**\n     * Synchronize the data messages coming to Terminal (new data for this TM)\n     */\n    async syncMessages(messages, transaction) {\n        this.aggregateHistoryRecords(messages, transaction);\n        const { actorMapById, repositoryTransactionHistoryMapByRepositoryId, applicationsByApplicationVersionIdMap } = await this.getDataStructures(messages);\n        await this.updateLocalData(repositoryTransactionHistoryMapByRepositoryId, actorMapById, applicationsByApplicationVersionIdMap);\n    }\n    aggregateHistoryRecords(messages, transaction) {\n        const transactionHistory = transaction.transactionHistory;\n        transactionHistory.transactionType = TransactionType.REMOTE_SYNC;\n        // split messages by repository and record actor information\n        for (const message of messages) {\n            const repositoryTransactionHistory = message.history;\n            transactionHistory.repositoryTransactionHistories.push(repositoryTransactionHistory);\n            repositoryTransactionHistory.repositoryTransactionType = RepositoryTransactionType.REMOTE;\n            transactionHistory.allOperationHistory = transactionHistory\n                .allOperationHistory.concat(repositoryTransactionHistory.operationHistory);\n            repositoryTransactionHistory.operationHistory.forEach((operationHistory) => {\n                transactionHistory.allRecordHistory = transactionHistory\n                    .allRecordHistory.concat(operationHistory.recordHistory);\n                operationHistory.recordHistory.forEach((recordHistory) => {\n                    if (recordHistory.newValues && recordHistory.newValues.length) {\n                        transactionHistory.allRecordHistoryNewValues = transactionHistory\n                            .allRecordHistoryNewValues.concat(recordHistory.newValues);\n                    }\n                    if (recordHistory.oldValues && recordHistory.oldValues.length) {\n                        transactionHistory.allRecordHistoryOldValues = transactionHistory\n                            .allRecordHistoryOldValues.concat(recordHistory.oldValues);\n                    }\n                });\n            });\n        }\n    }\n    async getDataStructures(messages) {\n        const repositoryTransactionHistoryMapByRepositoryId = new Map();\n        const applicationsByApplicationVersionIdMap = new Map();\n        const actorMapById = new Map();\n        const repoTransHistories = [];\n        for (const message of messages) {\n            repoTransHistories.push(message.history);\n            repositoryTransactionHistoryMapByRepositoryId.set(message.history.repository.id, repoTransHistories);\n            for (const actor of message.actors) {\n                actorMapById.set(actor.id, actor);\n            }\n            for (const applicationVersion of message.applicationVersions) {\n                applicationsByApplicationVersionIdMap.set(applicationVersion.id, applicationVersion.application);\n            }\n        }\n        for (const [_, repoTransHistories] of repositoryTransactionHistoryMapByRepositoryId) {\n            this.repositoryTransactionHistoryDuo\n                .sortRepoTransHistories(repoTransHistories, actorMapById);\n        }\n        return {\n            actorMapById,\n            repositoryTransactionHistoryMapByRepositoryId,\n            applicationsByApplicationVersionIdMap\n        };\n    }\n    async updateLocalData(repositoryTransactionHistoryMapByRepositoryId, actorMayById, applicationsByApplicationVersionIdMap) {\n        const stage1Result = await this.stage1SyncedInDataProcessor.performStage1DataProcessing(repositoryTransactionHistoryMapByRepositoryId, actorMayById);\n        let allSyncConflicts = [];\n        let allSyncConflictValues = [];\n        for (const [_, synchronizationConflicts] of stage1Result.syncConflictMapByRepoId) {\n            allSyncConflicts = allSyncConflicts.concat(synchronizationConflicts);\n            for (const synchronizationConflict of synchronizationConflicts) {\n                if (synchronizationConflict.values.length) {\n                    allSyncConflictValues = allSyncConflictValues.concat(synchronizationConflict.values);\n                }\n            }\n        }\n        await this.stage2SyncedInDataProcessor.applyChangesToDb(stage1Result, applicationsByApplicationVersionIdMap);\n        if (allSyncConflicts.length) {\n            await this.synchronizationConflictDao.insert(allSyncConflicts);\n        }\n        if (allSyncConflictValues.length) {\n            await this.synchronizationConflictValuesDao.insert(allSyncConflictValues);\n        }\n    }\n};\n__decorate([\n    Inject()\n], TwoStageSyncedInDataProcessor.prototype, \"repositoryTransactionHistoryDuo\", void 0);\n__decorate([\n    Inject()\n], TwoStageSyncedInDataProcessor.prototype, \"stage1SyncedInDataProcessor\", void 0);\n__decorate([\n    Inject()\n], TwoStageSyncedInDataProcessor.prototype, \"stage2SyncedInDataProcessor\", void 0);\n__decorate([\n    Inject()\n], TwoStageSyncedInDataProcessor.prototype, \"synchronizationConflictDao\", void 0);\n__decorate([\n    Inject()\n], TwoStageSyncedInDataProcessor.prototype, \"synchronizationConflictValuesDao\", void 0);\nTwoStageSyncedInDataProcessor = __decorate([\n    Injected()\n], TwoStageSyncedInDataProcessor);\nexport { TwoStageSyncedInDataProcessor };\n//# sourceMappingURL=TwoStageSyncedInDataProcessor.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { repositoryEntity } from \"@airport/ground-control\";\nimport { RepositoryTransactionType } from \"@airport/holding-pattern\";\nexport const WITH_ID = {};\nexport const WITH_RECORD_HISTORY = {};\nexport const WITH_INDEX = {};\nlet SyncOutDataSerializer = class SyncOutDataSerializer {\n    async serialize(repositoryTransactionHistories) {\n        let historiesToSend = [];\n        const messages = [];\n        for (const repositoryTransactionHistory of repositoryTransactionHistories) {\n            if (repositoryTransactionHistory.repositoryTransactionType !== RepositoryTransactionType.LOCAL) {\n                continue;\n            }\n            const message = await this.serializeMessage(repositoryTransactionHistory);\n            historiesToSend.push(repositoryTransactionHistory);\n            messages.push(message);\n        }\n        return {\n            historiesToSend,\n            messages\n        };\n    }\n    async serializeMessage(repositoryTransactionHistory) {\n        const lookups = {\n            actorInMessageIndexesById: new Map(),\n            applicationVersionInMessageIndexesById: new Map(),\n            applicationVersions: [],\n            lastInMessageActorIndex: -1,\n            lastInMessageApplicationVersionIndex: -1,\n            lastInMessageRepositoryIndex: -1,\n            messageRepository: repositoryTransactionHistory.repository,\n            repositoryInMessageIndexesById: new Map()\n        };\n        const inMessageUserLookup = {\n            inMessageIndexesById: new Map(),\n            lastInMessageIndex: -1\n        };\n        const message = {\n            actors: [],\n            applicationVersions: [],\n            applications: [],\n            history: null,\n            // Repositories may reference records in other repositories\n            referencedRepositories: [],\n            users: [],\n            terminals: []\n        };\n        message.history = this.serializeRepositoryTransactionHistory(repositoryTransactionHistory, message, lookups, inMessageUserLookup);\n        // TODO: replace db lookups with TerminalState lookups where possible\n        await this.serializeRepositories(repositoryTransactionHistory, message, lookups, inMessageUserLookup);\n        const inMessageApplicationLookup = await this.serializeActorsUsersAndTerminals(message, lookups, inMessageUserLookup);\n        await this.serializeApplicationsAndVersions(message, inMessageApplicationLookup, lookups);\n        return message;\n    }\n    async serializeActorsUsersAndTerminals(message, lookups, inMessageUserLookup) {\n        let actorIdsToFindBy = [];\n        for (let actorId of lookups.actorInMessageIndexesById.keys()) {\n            actorIdsToFindBy.push(actorId);\n        }\n        const actors = await this.actorDao.findWithDetailsAndGlobalIdsByIds(actorIdsToFindBy);\n        this.serializeUsers(actors, message, inMessageUserLookup);\n        const terminalInMessageIndexesById = this.serializeTerminals(actors, message, inMessageUserLookup);\n        const inMessageApplicationLookup = {\n            lastInMessageIndex: -1,\n            inMessageIndexesById: new Map()\n        };\n        for (const actor of actors) {\n            const applicationInMessageIndex = this.serializeApplication(actor.application, inMessageApplicationLookup, message);\n            const actorInMessageIndex = lookups.actorInMessageIndexesById.get(actor.id);\n            message.actors[actorInMessageIndex] = {\n                ...WITH_ID,\n                application: applicationInMessageIndex,\n                terminal: terminalInMessageIndexesById.get(actor.terminal.id),\n                user: inMessageUserLookup.inMessageIndexesById.get(actor.user.id),\n                uuId: actor.uuId\n            };\n        }\n        return inMessageApplicationLookup;\n    }\n    serializeTerminals(actors, message, inMessageUserLookup) {\n        let lastInMessageTerminalIndex = -1;\n        const terminalInMessageIndexesById = new Map();\n        for (const actor of actors) {\n            let terminal = actor.terminal;\n            if (terminalInMessageIndexesById.has(terminal.id)) {\n                continue;\n            }\n            const terminalInMessageIndex = ++lastInMessageTerminalIndex;\n            terminalInMessageIndexesById.set(terminal.id, terminalInMessageIndex);\n            message.terminals[terminalInMessageIndex] = {\n                ...WITH_ID,\n                uuId: terminal.uuId,\n                owner: inMessageUserLookup.inMessageIndexesById.get(terminal.owner.id)\n            };\n        }\n        return terminalInMessageIndexesById;\n    }\n    serializeUsers(actors, message, inMessageUserLookup) {\n        for (const actor of actors) {\n            this.addUserToMessage(actor.user, message, inMessageUserLookup);\n            this.addUserToMessage(actor.terminal.owner, message, inMessageUserLookup);\n        }\n    }\n    addUserToMessage(user, message, inMessageUserLookup) {\n        let userInMessageIndex = this.getUserInMessageIndex(user, inMessageUserLookup);\n        message.users[userInMessageIndex] = {\n            ...WITH_ID,\n            username: user.username,\n            uuId: user.uuId\n        };\n        return userInMessageIndex;\n    }\n    getUserInMessageIndex(user, inMessageUserLookup) {\n        if (inMessageUserLookup.inMessageIndexesById.has(user.id)) {\n            return inMessageUserLookup.inMessageIndexesById.get(user.id);\n        }\n        let userInMessageIndex = ++inMessageUserLookup.lastInMessageIndex;\n        inMessageUserLookup.inMessageIndexesById.set(user.id, userInMessageIndex);\n        return userInMessageIndex;\n    }\n    async serializeRepositories(repositoryTransactionHistory, message, lookups, inMessageUserLookup) {\n        let repositoryIdsToFindBy = [];\n        for (let repositoryId of lookups.repositoryInMessageIndexesById.keys()) {\n            repositoryIdsToFindBy.push(repositoryId);\n        }\n        repositoryIdsToFindBy.push(repositoryTransactionHistory.id);\n        const repositories = await this.repositoryDao.findByIds(repositoryIdsToFindBy);\n        for (const repository of repositories) {\n            let userInMessageIndex = this.getUserInMessageIndex(repository.owner, inMessageUserLookup);\n            if (lookups.repositoryInMessageIndexesById.has(repository.id)) {\n                const repositoryInMessageIndex = lookups.repositoryInMessageIndexesById.get(repository.id);\n                message.referencedRepositories[repositoryInMessageIndex] =\n                    this.serializeRepository(repository, userInMessageIndex);\n            }\n            else {\n                message.history.repository.owner = userInMessageIndex;\n                message.history.repository.id = repository.id;\n            }\n        }\n    }\n    serializeApplicationsAndVersions(message, inMessageApplicationLookup, lookups) {\n        for (let i = 0; i < lookups.applicationVersions.length; i++) {\n            const applicationVersion = lookups.applicationVersions[i];\n            const applicationInMessageIndex = this.serializeApplication(applicationVersion.application, inMessageApplicationLookup, message);\n            message.applicationVersions[i] = {\n                ...WITH_ID,\n                application: applicationInMessageIndex,\n                integerVersion: applicationVersion.integerVersion\n            };\n        }\n    }\n    serializeApplication(application, inMessageApplicationLookup, message) {\n        let applicationInMessageIndex;\n        if (inMessageApplicationLookup.inMessageIndexesById.has(application.index)) {\n            applicationInMessageIndex = inMessageApplicationLookup\n                .inMessageIndexesById.get(application.index);\n        }\n        else {\n            applicationInMessageIndex = ++inMessageApplicationLookup.lastInMessageIndex;\n            inMessageApplicationLookup.inMessageIndexesById\n                .set(application.index, applicationInMessageIndex);\n            message.applications[applicationInMessageIndex] = {\n                ...WITH_INDEX,\n                domain: {\n                    ...WITH_ID,\n                    name: application.domain.name\n                },\n                name: application.name\n            };\n        }\n        return applicationInMessageIndex;\n    }\n    serializeRepositoryTransactionHistory(repositoryTransactionHistory, message, lookups, inMessageUserLookup) {\n        repositoryTransactionHistory.operationHistory.sort((operationHistory1, operationHistory2) => {\n            if (operationHistory1.orderNumber < operationHistory2.orderNumber) {\n                return -1;\n            }\n            if (operationHistory1.orderNumber > operationHistory2.orderNumber) {\n                return 1;\n            }\n            return 0;\n        });\n        const serializedOperationHistory = [];\n        for (const operationHistory of repositoryTransactionHistory.operationHistory) {\n            serializedOperationHistory.push(this.serializeOperationHistory(operationHistory, lookups));\n        }\n        return {\n            ...WITH_ID,\n            isRepositoryCreation: repositoryTransactionHistory.isRepositoryCreation,\n            repository: this.serializeHistoryRepository(repositoryTransactionHistory, message, inMessageUserLookup),\n            operationHistory: serializedOperationHistory,\n            saveTimestamp: repositoryTransactionHistory.saveTimestamp,\n            uuId: repositoryTransactionHistory.uuId\n        };\n    }\n    serializeHistoryRepository(repositoryTransactionHistory, message, inMessageUserLookup) {\n        if (repositoryTransactionHistory.isRepositoryCreation) {\n            const repository = repositoryTransactionHistory.repository;\n            let userInMessageIndex = this.addUserToMessage(repository.owner, message, inMessageUserLookup);\n            return this.serializeRepository(repository, userInMessageIndex);\n        }\n        else {\n            // When this repositoryTransactionHistory processed at sync-in \n            // the repository should already be loaded in the target database\n            // if it's not then it's missing the repositoryTransactionHistory\n            // with isRepositoryCreation === true\n            return repositoryTransactionHistory.repository.uuId;\n        }\n    }\n    serializeOperationHistory(operationHistory, lookups) {\n        const dbEntity = operationHistory.entity;\n        const serializedRecordHistory = [];\n        for (const recordHistory of operationHistory.recordHistory) {\n            serializedRecordHistory.push(this.serializeRecordHistory(operationHistory, recordHistory, dbEntity, lookups));\n        }\n        const entity = operationHistory.entity;\n        // Should be populated - coming from TerminalStore\n        // if (typeof entity !== 'object') {\n        // \tthrow new Error(`OperationHistory.entity must be populated`)\n        // }\n        // if (typeof entity.index !== 'number') {\n        // \tthrow new Error(`OperationHistory.entity.index must be present`)\n        // }\n        const applicationVersion = entity.applicationVersion;\n        // Should be populated - coming from TerminalStore\n        // if (typeof applicationVersion !== 'object') {\n        // \tthrow new Error(`OperationHistory.entity.applicationVersion must be populated`)\n        // }\n        // if (typeof applicationVersion.id !== 'number') {\n        // \tthrow new Error(`OperationHistory.entity.applicationVersion.id must be present`)\n        // }\n        let applicationVersionInMessageIndex;\n        if (lookups.applicationVersionInMessageIndexesById.has(applicationVersion.id)) {\n            applicationVersionInMessageIndex = lookups.applicationVersionInMessageIndexesById.get(applicationVersion.id);\n        }\n        else {\n            applicationVersionInMessageIndex = ++lookups.lastInMessageApplicationVersionIndex;\n            lookups.applicationVersionInMessageIndexesById.set(applicationVersion.id, applicationVersionInMessageIndex);\n        }\n        lookups.applicationVersions[applicationVersionInMessageIndex] = applicationVersion;\n        return {\n            ...WITH_ID,\n            actor: this.getActorInMessageIndex(operationHistory.actor, lookups),\n            changeType: operationHistory.changeType,\n            entity: {\n                ...WITH_ID,\n                applicationVersion: applicationVersionInMessageIndex,\n                index: operationHistory.entity.index\n            },\n            recordHistory: serializedRecordHistory\n        };\n    }\n    serializeRecordHistory(operationHistory, recordHistory, dbEntity, lookups) {\n        const dbColumMapByIndex = new Map();\n        for (const dbColumn of dbEntity.columns) {\n            dbColumMapByIndex.set(dbColumn.index, dbColumn);\n        }\n        const newValues = [];\n        for (const newValue of recordHistory.newValues) {\n            const dbColumn = dbColumMapByIndex.get(newValue.columnIndex);\n            newValues.push(this.serializeNewValue(newValue, dbColumn, lookups));\n        }\n        const oldValues = [];\n        for (const oldValue of recordHistory.oldValues) {\n            const dbColumn = dbColumMapByIndex.get(oldValue.columnIndex);\n            oldValues.push(this.serializeOldValue(oldValue, dbColumn, lookups));\n        }\n        const actor = recordHistory.actor;\n        // Actor may be null if it's the same actor as for RepositoryTransactionHistory\n        // if (typeof actor !== 'object') {\n        // \tthrow new Error(`RecordHistory.actor must be populated`)\n        // }\n        const baseObject = {\n            ...WITH_ID,\n        };\n        if (actor.id !== operationHistory.actor.id) {\n            baseObject.actor = this.getActorInMessageIndex(actor, lookups);\n        }\n        if (newValues.length) {\n            baseObject.newValues = newValues;\n        }\n        if (oldValues.length) {\n            baseObject.oldValues = oldValues;\n        }\n        return {\n            ...baseObject,\n            actorRecordId: recordHistory.actorRecordId,\n        };\n    }\n    getActorInMessageIndex(actor, lookups) {\n        if (!actor) {\n            return null;\n        }\n        return this.getActorInMessageIndexById(actor.id, lookups);\n    }\n    getActorInMessageIndexById(actorId, lookups) {\n        let actorInMessageIndex;\n        if (lookups.actorInMessageIndexesById.has(actorId)) {\n            actorInMessageIndex = lookups.actorInMessageIndexesById.get(actorId);\n        }\n        else {\n            actorInMessageIndex = ++lookups.lastInMessageActorIndex;\n            lookups.actorInMessageIndexesById.set(actorId, actorInMessageIndex);\n        }\n        return actorInMessageIndex;\n    }\n    serializeNewValue(newValue, dbColumn, lookups) {\n        return this.serializeValue(newValue, dbColumn, lookups, 'newValue');\n    }\n    serializeOldValue(oldValue, dbColumn, lookups) {\n        return this.serializeValue(oldValue, dbColumn, lookups, 'oldValue');\n    }\n    serializeValue(valueRecord, dbColumn, lookups, valueFieldName) {\n        let value = valueRecord[valueFieldName];\n        let serailizedValue = value;\n        switch (dbColumn.name) {\n            case repositoryEntity.ORIGINAL_ACTOR_ID: {\n                serailizedValue = this.getActorInMessageIndexById(value, lookups);\n                break;\n            }\n            case repositoryEntity.ORIGINAL_REPOSITORY_ID: {\n                serailizedValue = this.getSerializedRepositoryId(value, lookups);\n                break;\n            }\n        }\n        if (/.*_AID_[\\d]+$/.test(dbColumn.name)\n            && dbColumn.manyRelationColumns.length) {\n            serailizedValue = this.getActorInMessageIndexById(value, lookups);\n        }\n        if (/.*_RID_[\\d]+$/.test(dbColumn.name)\n            && dbColumn.manyRelationColumns.length) {\n            serailizedValue = this.getSerializedRepositoryId(value, lookups);\n        }\n        return {\n            ...WITH_RECORD_HISTORY,\n            columnIndex: valueRecord.columnIndex,\n            [valueFieldName]: serailizedValue\n        };\n    }\n    getSerializedRepositoryId(value, lookups) {\n        if (value === lookups.messageRepository.id) {\n            return -1;\n        }\n        let serailizedValue = lookups.repositoryInMessageIndexesById.get(value);\n        if (serailizedValue === undefined) {\n            lookups.lastInMessageRepositoryIndex++;\n            serailizedValue = lookups.lastInMessageRepositoryIndex;\n            lookups.repositoryInMessageIndexesById.set(value, serailizedValue);\n        }\n        return serailizedValue;\n    }\n    serializeRepository(repository, owner) {\n        return {\n            ...WITH_ID,\n            ageSuitability: repository.ageSuitability,\n            createdAt: repository.createdAt,\n            immutable: repository.immutable,\n            owner,\n            source: repository.source,\n            uuId: repository.uuId\n        };\n    }\n};\n__decorate([\n    Inject()\n], SyncOutDataSerializer.prototype, \"actorDao\", void 0);\n__decorate([\n    Inject()\n], SyncOutDataSerializer.prototype, \"repositoryDao\", void 0);\nSyncOutDataSerializer = __decorate([\n    Injected()\n], SyncOutDataSerializer);\nexport { SyncOutDataSerializer };\n//# sourceMappingURL=SyncOutDataSerializer.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { ensureChildArray, ensureChildJsMap } from '@airport/ground-control';\nlet SynchronizationOutManager = class SynchronizationOutManager {\n    async synchronizeOut(repositoryTransactionHistories) {\n        await this.loadHistoryRepositories(repositoryTransactionHistories);\n        const { historiesToSend, messages } = await this.syncOutDataSerializer.serialize(repositoryTransactionHistories);\n        // await this.ensureGlobalRepositoryIdentifiers(repositoryTransactionHistories, messages)\n        const groupMessageMap = this.groupMessagesBySourceAndRepository(messages, historiesToSend);\n        for (const [repositorySource, messageMapForSource] of groupMessageMap) {\n            const synchronizationAdapter = await this.synchronizationAdapterLoader.load(repositorySource);\n            await synchronizationAdapter.sendTransactions(repositorySource, messageMapForSource);\n        }\n        await this.updateRepositoryTransactionHistories(messages, historiesToSend);\n    }\n    async loadHistoryRepositories(repositoryTransactionHistories) {\n        const repositoryIdsToLookup = new Set();\n        const repositoryMapById = new Map();\n        for (const repositoryTransactionHistory of repositoryTransactionHistories) {\n            repositoryIdsToLookup.add(repositoryTransactionHistory.repository.id);\n        }\n        if (!repositoryIdsToLookup.size) {\n            return;\n        }\n        const repositories = await this.repositoryDao.findByIds([\n            ...repositoryIdsToLookup.values()\n        ]);\n        for (const repository of repositories) {\n            repositoryMapById.set(repository.id, repository);\n        }\n        for (const repositoryTransactionHistory of repositoryTransactionHistories) {\n            repositoryTransactionHistory.repository =\n                repositoryMapById.get(repositoryTransactionHistory.repository.id);\n        }\n    }\n    async ensureGlobalRepositoryIdentifiers(repositoryTransactionHistories, messages) {\n        const repositoryIdsToLookup = new Set();\n        const repositoryMapById = new Map();\n        for (const repositoryTransactionHistory of repositoryTransactionHistories) {\n            const repository = repositoryTransactionHistory.repository;\n            if (!repository.source || !repository.uuId) {\n                repositoryIdsToLookup.add(repository.id);\n            }\n            else {\n                repositoryMapById.set(repository.id, repository);\n            }\n        }\n        if (!repositoryIdsToLookup.size) {\n            return;\n        }\n        const repositories = await this.repositoryDao.findByIds([\n            ...repositoryIdsToLookup.values()\n        ]);\n        for (const repository of repositories) {\n            repositoryMapById.set(repository.id, repository);\n        }\n        for (const message of messages) {\n            const repository = message.history.repository;\n            if (!repository.source || !repository.uuId) {\n                const foundRepository = repositoryMapById.get(repository.id);\n                repository.source = foundRepository.source;\n                repository.uuId = foundRepository.uuId;\n                delete repository.id;\n            }\n        }\n    }\n    groupMessagesBySourceAndRepository(messages, historiesToSend) {\n        const groupMessageMap = new Map();\n        for (let i = 0; i < messages.length; i++) {\n            const repository = historiesToSend[i].repository;\n            ensureChildArray(ensureChildJsMap(groupMessageMap, repository.source), repository.uuId).push(messages[i]);\n        }\n        return groupMessageMap;\n    }\n    async updateRepositoryTransactionHistories(messages, repositoryTransactionHistories) {\n        for (let i = 0; i < messages.length; i++) {\n            const message = messages[i];\n            const repositoryTransactionHistory = repositoryTransactionHistories[i];\n            if (message.syncTimestamp) {\n                repositoryTransactionHistory.syncTimestamp = message.syncTimestamp;\n                await this.repositoryTransactionHistoryDao.updateSyncTimestamp(repositoryTransactionHistory);\n            }\n        }\n    }\n};\n__decorate([\n    Inject()\n], SynchronizationOutManager.prototype, \"repositoryDao\", void 0);\n__decorate([\n    Inject()\n], SynchronizationOutManager.prototype, \"repositoryTransactionHistoryDao\", void 0);\n__decorate([\n    Inject()\n], SynchronizationOutManager.prototype, \"synchronizationAdapterLoader\", void 0);\n__decorate([\n    Inject()\n], SynchronizationOutManager.prototype, \"syncOutDataSerializer\", void 0);\nSynchronizationOutManager = __decorate([\n    Injected()\n], SynchronizationOutManager);\nexport { SynchronizationOutManager };\n//# sourceMappingURL=SynchronizationOutManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nlet NonhubClient = class NonhubClient {\n    constructor() {\n        // encryptionKey = process.env.ENCRYPTION_KEY\n        this.serverLocationProtocol = 'http://';\n    }\n    async getRepositoryTransactions(location, repositoryUuId, sinceSyncTimestamp = null) {\n        try {\n            const response = await this.sendMessage(location + '/read', {\n                repositoryUuId,\n                syncTimestamp: sinceSyncTimestamp\n            });\n            if (response.error) {\n                console.error(response.error);\n                return [];\n            }\n            return response.fragments;\n        }\n        catch (e) {\n            console.error(e);\n            return [];\n        }\n    }\n    async sendRepositoryTransactions(location, repositoryUuId, messages) {\n        try {\n            const response = await this.sendMessage(location + '/write', {\n                messages,\n                repositoryUuId\n            });\n            if (response.error) {\n                console.error(response.error);\n                return 0;\n            }\n            return response.syncTimestamp;\n        }\n        catch (e) {\n            console.error(e);\n            return 0;\n        }\n    }\n    async sendMessage(location, request) {\n        let packagedMessage = JSON.stringify(request);\n        // if (this.encryptionKey) {\n        //     packagedMessage = await encryptString(\n        //         packagedMessage, this.encryptionKey)\n        // }\n        const response = await fetch(this.serverLocationProtocol + location, {\n            method: 'PUT',\n            mode: 'cors',\n            // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            // credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            // redirect: 'follow', // manual, *follow, error\n            // referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n            body: packagedMessage // body data type must match \"Content-Type\" header\n        });\n        // let unpackagedMessage = response.text()\n        // if (this.encryptionKey) {\n        //     unpackagedMessage = await decryptString(unpackagedMessage, this.encryptionKey)\n        // }\n        // return JSON.parse(unpackagedMessage)\n        return response.json();\n    }\n};\nNonhubClient = __decorate([\n    Injected()\n], NonhubClient);\nexport { NonhubClient };\n//# sourceMappingURL=NonhubClient.js.map","import { lib } from '@airport/direction-indicator';\nimport { NonhubClient } from './NonhubClient';\n// import {\n//     decryptString,\n//     encryptString,\n// } from \"string-cipher\";\nconst nonhubClient = lib('nonhub-client');\nnonhubClient.autopilot = false;\nexport const NONHUB_CLIENT = nonhubClient.token({\n    class: NonhubClient,\n    interface: 'INonhubClient',\n    token: 'INonhubClient'\n});\n//# sourceMappingURL=tokens.js.map","import { lib } from '@airport/direction-indicator';\nimport { SyncInActorChecker } from './synchronization/in/checker/SyncInActorChecker';\nimport { SyncInChecker } from './synchronization/in/checker/SyncInChecker';\nimport { SyncInDataChecker } from './synchronization/in/checker/SyncInDataChecker';\nimport { SyncInRepositoryChecker } from './synchronization/in/checker/SyncInRepositoryChecker';\nimport { SyncInApplicationChecker } from './synchronization/in/checker/SyncInApplicationChecker';\nimport { SyncInApplicationVersionChecker } from './synchronization/in/checker/SyncInApplicationVersionChecker';\nimport { SyncInTerminalChecker } from './synchronization/in/checker/SyncInTerminalChecker';\nimport { SyncInUserChecker } from './synchronization/in/checker/SyncInUserChecker';\nimport { Stage1SyncedInDataProcessor } from './synchronization/in/Stage1SyncedInDataProcessor';\nimport { Stage2SyncedInDataProcessor } from './synchronization/in/Stage2SyncedInDataProcessor';\nimport { SynchronizationInManager } from './synchronization/in/SynchronizationInManager';\nimport { SyncInUtils } from './synchronization/in/SyncInUtils';\nimport { TwoStageSyncedInDataProcessor } from './synchronization/in/TwoStageSyncedInDataProcessor';\nimport { SynchronizationOutManager } from './synchronization/out/SynchronizationOutManager';\nimport { SynchronizationAdapterLoader } from './adapters/SynchronizationAdapterLoader';\nimport { SyncOutDataSerializer } from './synchronization/out/converter/SyncOutDataSerializer';\nimport { AIRPORT_DATABASE, DATABASE_FACADE } from '@airport/air-traffic-control';\nimport { SEQUENCE_GENERATOR } from '@airport/check-in';\nimport { TERMINAL_STORE, TRANSACTION_MANAGER } from '@airport/terminal-map';\nimport { TERMINAL_DAO, USER_DAO } from '@airport/travel-document-checkpoint-internal';\nimport { APPLICATION_DAO, APPLICATION_VERSION_DAO, DOMAIN_DAO } from '@airport/airspace';\nimport { ACTOR_DAO, REPOSITORY_DAO, REPOSITORY_TRANSACTION_HISTORY_DAO, REPOSITORY_TRANSACTION_HISTORY_DUO } from '@airport/holding-pattern';\nimport { RECORD_UPDATE_STAGE_DAO, SYNCHRONIZATION_CONFLICT_DAO, SYNCHRONIZATION_CONFLICT_VALUES_DAO } from '@airport/moving-walkway';\nimport { DebugSynchronizationAdapter } from './adapters/DebugSynchronizationAdapter';\nimport { NONHUB_CLIENT } from '@airport/nonhub-client';\nconst groundTransport = lib('ground-transport');\ngroundTransport.autopilot = false;\nexport const STAGE1_SYNCED_IN_DATA_PROCESSOR = groundTransport.token({\n    class: Stage1SyncedInDataProcessor,\n    interface: 'IStage1SyncedInDataProcessor',\n    token: 'STAGE1_SYNCED_IN_DATA_PROCESSOR'\n});\nexport const STAGE2_SYNCED_IN_DATA_PROCESSOR = groundTransport.token({\n    class: Stage2SyncedInDataProcessor,\n    interface: 'IStage2SyncedInDataProcessor',\n    token: 'STAGE2_SYNCED_IN_DATA_PROCESSOR'\n});\nexport const SYNC_IN_ACTOR_CHECKER = groundTransport.token({\n    class: SyncInActorChecker,\n    interface: 'ISyncInActorChecker',\n    token: 'SYNC_IN_ACTOR_CHECKER'\n});\nexport const SYNC_IN_CHECKER = groundTransport.token({\n    class: SyncInChecker,\n    interface: 'ISyncInChecker',\n    token: 'SYNC_IN_CHECKER'\n});\nexport const SYNC_IN_DATA_CHECKER = groundTransport.token({\n    class: SyncInDataChecker,\n    interface: 'ISyncInDataChecker',\n    token: 'SYNC_IN_DATA_CHECKER'\n});\nexport const SYNC_IN_TERMINAL_CHECKER = groundTransport.token({\n    class: SyncInTerminalChecker,\n    interface: 'ISyncInTerminalChecker',\n    token: 'SYNC_IN_TERMINAL_CHECKER'\n});\nexport const SYNC_IN_REPOSITORY_CHECKER = groundTransport.token({\n    class: SyncInRepositoryChecker,\n    interface: 'ISyncInRepositoryChecker',\n    token: 'SYNC_IN_REPOSITORY_CHECKER'\n});\nexport const SYNC_IN_APPLICATION_CHECKER = groundTransport.token({\n    class: SyncInApplicationChecker,\n    interface: 'ISyncInApplicationChecker',\n    token: 'SYNC_IN_APPLICATION_CHECKER'\n});\nexport const SYNC_IN_APPLICATION_VERSION_CHECKER = groundTransport.token({\n    class: SyncInApplicationVersionChecker,\n    interface: 'ISyncInApplicationVersionChecker',\n    token: 'SYNC_IN_APPLICATION_VERSION_CHECKER'\n});\nexport const SYNC_IN_USER_CHECKER = groundTransport.token({\n    class: SyncInUserChecker,\n    interface: 'ISyncInUserChecker',\n    token: 'SYNC_IN_USER_CHECKER'\n});\nexport const SYNC_IN_UTILS = groundTransport.token({\n    class: SyncInUtils,\n    interface: 'ISyncInUtils',\n    token: 'SYNC_IN_UTILS'\n});\nexport const SYNCHRONIZATION_IN_MANAGER = groundTransport.token({\n    class: SynchronizationInManager,\n    interface: 'ISynchronizationInManager',\n    token: 'SYNCHRONIZATION_IN_MANAGER'\n});\nexport const SYNCHRONIZATION_OUT_MANAGER = groundTransport.token({\n    class: SynchronizationOutManager,\n    interface: 'ISynchronizationOutManager',\n    token: 'SYNCHRONIZATION_OUT_MANAGER'\n});\nexport const SYNC_OUT_DATA_SERIALIZER = groundTransport.token({\n    class: SyncOutDataSerializer,\n    interface: 'ISyncOutDataSerializer',\n    token: 'SYNC_OUT_DATA_SERIALIZER'\n});\nexport const TWO_STAGE_SYNCED_IN_DATA_PROCESSOR = groundTransport.token({\n    class: TwoStageSyncedInDataProcessor,\n    interface: 'ITwoStageSyncedInDataProcessor',\n    token: 'TWO_STAGE_SYNCED_IN_DATA_PROCESSOR'\n});\nexport const DEBUG_SYNCHRONIZATION_ADAPTER = groundTransport.token({\n    class: DebugSynchronizationAdapter,\n    interface: 'ISynchronizationAdapter',\n    token: 'DEBUG_SYNCHRONIZATION_ADAPTER'\n});\nexport const SYNCHRONIZATION_ADAPTER_LOADER = groundTransport.token({\n    class: SynchronizationAdapterLoader,\n    interface: 'ISynchronizationAdapterLoader',\n    token: 'SYNCHRONIZATION_ADAPTER_LOADER'\n});\nDEBUG_SYNCHRONIZATION_ADAPTER.setDependencies({\n    nonhubClient: NONHUB_CLIENT\n});\nSTAGE1_SYNCED_IN_DATA_PROCESSOR.setDependencies({\n    actorDao: ACTOR_DAO,\n    airportDatabase: AIRPORT_DATABASE,\n    repositoryTransactionHistoryDao: REPOSITORY_TRANSACTION_HISTORY_DAO,\n    repositoryTransactionHistoryDuo: REPOSITORY_TRANSACTION_HISTORY_DUO,\n    sequenceGenerator: SEQUENCE_GENERATOR,\n    syncInUtils: SYNC_IN_UTILS\n});\nSTAGE2_SYNCED_IN_DATA_PROCESSOR.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    databaseFacade: DATABASE_FACADE,\n    recordUpdateStageDao: RECORD_UPDATE_STAGE_DAO\n});\nSYNC_IN_ACTOR_CHECKER.setDependencies({\n    actorDao: ACTOR_DAO,\n});\nSYNC_IN_APPLICATION_CHECKER.setDependencies({\n    applicationDao: APPLICATION_DAO,\n    domainDao: DOMAIN_DAO\n});\nSYNC_IN_APPLICATION_VERSION_CHECKER.setDependencies({\n    applicationVersionDao: APPLICATION_VERSION_DAO\n});\nSYNC_IN_CHECKER.setDependencies({\n    syncInActorChecker: SYNC_IN_ACTOR_CHECKER,\n    syncInApplicationChecker: SYNC_IN_APPLICATION_CHECKER,\n    syncInApplicationVersionChecker: SYNC_IN_APPLICATION_VERSION_CHECKER,\n    syncInDataChecker: SYNC_IN_DATA_CHECKER,\n    syncInRepositoryChecker: SYNC_IN_REPOSITORY_CHECKER,\n    syncInTerminalChecker: SYNC_IN_TERMINAL_CHECKER,\n    syncInUserChecker: SYNC_IN_USER_CHECKER\n});\nSYNC_IN_DATA_CHECKER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    sequenceGenerator: SEQUENCE_GENERATOR,\n    terminalStore: TERMINAL_STORE\n});\nSYNC_IN_REPOSITORY_CHECKER.setDependencies({\n    repositoryDao: REPOSITORY_DAO,\n});\nSYNC_IN_TERMINAL_CHECKER.setDependencies({\n    terminalDao: TERMINAL_DAO\n});\nSYNC_IN_USER_CHECKER.setDependencies({\n    userDao: USER_DAO\n});\nSYNC_OUT_DATA_SERIALIZER.setDependencies({\n    repositoryDao: REPOSITORY_DAO,\n});\nSYNCHRONIZATION_ADAPTER_LOADER.setDependencies({\n    debugSynchronizationAdapter: DEBUG_SYNCHRONIZATION_ADAPTER\n});\nSYNCHRONIZATION_IN_MANAGER.setDependencies({\n    repositoryTransactionHistoryDao: REPOSITORY_TRANSACTION_HISTORY_DAO,\n    syncInChecker: SYNC_IN_CHECKER,\n    transactionManager: TRANSACTION_MANAGER,\n    twoStageSyncedInDataProcessor: TWO_STAGE_SYNCED_IN_DATA_PROCESSOR\n});\nSYNCHRONIZATION_OUT_MANAGER.setDependencies({\n    repositoryDao: REPOSITORY_DAO,\n    repositoryTransactionHistoryDao: REPOSITORY_TRANSACTION_HISTORY_DAO,\n    synchronizationAdapterLoader: SYNCHRONIZATION_ADAPTER_LOADER,\n    syncOutDataSerializer: SYNC_OUT_DATA_SERIALIZER\n});\nTWO_STAGE_SYNCED_IN_DATA_PROCESSOR.setDependencies({\n    repositoryTransactionHistoryDuo: REPOSITORY_TRANSACTION_HISTORY_DUO,\n    stage1SyncedInDataProcessor: STAGE1_SYNCED_IN_DATA_PROCESSOR,\n    stage2SyncedInDataProcessor: STAGE2_SYNCED_IN_DATA_PROCESSOR,\n    synchronizationConflictDao: SYNCHRONIZATION_CONFLICT_DAO,\n    synchronizationConflictValuesDao: SYNCHRONIZATION_CONFLICT_VALUES_DAO\n});\n//# sourceMappingURL=tokens.js.map","import { AIRPORT_DATABASE, APPLICATION_UTILS, FIELD_UTILS, QUERY_FACADE, QUERY_UTILS, Q_METADATA_UTILS, RELATION_MANAGER, REPOSITORY_LOADER } from '@airport/air-traffic-control';\nimport { APPLICATION_DAO, DOMAIN_DAO } from '@airport/airspace';\nimport { CLIENT_QUERY_MANAGER, QUERY_PARAMETER_DESERIALIZER, QUERY_RESULTS_SERIALIZER, SEQUENCE_GENERATOR } from '@airport/check-in';\nimport { DEPENDENCY_INJECTION, lib } from '@airport/direction-indicator';\nimport { ACTIVE_QUERIES, ID_GENERATOR } from '@airport/fuel-hydrant-system';\nimport { ENTITY_STATE_MANAGER, OPERATION_CONTEXT_LOADER, TRANSACTIONAL_CONNECTOR } from '@airport/ground-control';\nimport { SYNCHRONIZATION_ADAPTER_LOADER, SYNCHRONIZATION_IN_MANAGER, SYNCHRONIZATION_OUT_MANAGER } from '@airport/ground-transport';\nimport { ACTOR_DAO, OPERATION_HISTORY_DUO, RECORD_HISTORY_DUO, REPOSITORY_DAO, REPOSITORY_TRANSACTION_HISTORY_DAO, REPOSITORY_TRANSACTION_HISTORY_DUO, TRANSACTION_HISTORY_DUO } from '@airport/holding-pattern';\nimport { APPLICATION_INITIALIZER, STORE_DRIVER, TERMINAL_STORE, TRANSACTIONAL_RECEIVER, TRANSACTIONAL_SERVER, TRANSACTION_MANAGER } from '@airport/terminal-map';\nimport { ClientQueryManager } from './ClientQueryManager';\nimport { RepositoryLoader } from './core/repository/RepositoryLoader';\nimport { RepositoryManager } from './core/repository/RepositoryManager';\nimport { InternalRecordManager } from './data/InternalRecordManager';\nimport { InternalTransactionalConnector } from './net/InternalTransactionalConnector';\nimport { OnlineManager } from './net/OnlineManager';\nimport { TransactionalReceiver } from './net/TransactionalReceiver';\nimport { TransactionalServer } from './net/TransactionalServer';\nimport { AbstractMutationManager } from './orchestration/AbstractMutationManager';\nimport { DatabaseManager } from './orchestration/DatabaseManager';\nimport { DeleteManager } from './orchestration/DeleteManager';\nimport { HistoryManager } from './orchestration/HistoryManager';\nimport { InsertManager } from './orchestration/InsertManager';\nimport { QueryManager } from './orchestration/QueryManager';\nimport { TransactionManager } from './orchestration/TransactionManager';\nimport { UpdateManager } from './orchestration/UpdateManager';\nimport { CascadeGraphVerifier } from './processing/CascadeGraphVerifier';\nimport { DependencyGraphResolver } from './processing/DependencyGraphResolver';\nimport { EntityGraphReconstructor } from './processing/EntityGraphReconstructor';\nimport { OperationContextLoader } from './processing/OperationContext';\nimport { OperationManager } from './processing/OperationManager';\nimport { StructuralEntityValidator } from './processing/StructuralEntityValidator';\nimport { QueryParameterDeserializer } from './serialize/QueryParameterDeserializer';\nimport { QueryResultsSerializer } from './serialize/QueryResultsSerializer';\nconst terminal = lib('terminal');\nterminal.autopilot = false;\nDEPENDENCY_INJECTION.set(CLIENT_QUERY_MANAGER, ClientQueryManager);\nDEPENDENCY_INJECTION.set(REPOSITORY_LOADER, RepositoryLoader);\nDEPENDENCY_INJECTION.set(TRANSACTIONAL_CONNECTOR, InternalTransactionalConnector);\nTRANSACTIONAL_CONNECTOR.setDependencies({\n    terminalStore: TERMINAL_STORE,\n    transactionalServer: TRANSACTIONAL_SERVER\n});\nDEPENDENCY_INJECTION.set(TRANSACTIONAL_SERVER, TransactionalServer);\nDEPENDENCY_INJECTION.set(TRANSACTION_MANAGER, TransactionManager);\nDEPENDENCY_INJECTION.set(OPERATION_CONTEXT_LOADER, OperationContextLoader);\nDEPENDENCY_INJECTION.set(QUERY_PARAMETER_DESERIALIZER, QueryParameterDeserializer);\nDEPENDENCY_INJECTION.set(QUERY_RESULTS_SERIALIZER, QueryResultsSerializer);\nexport const ABSTRACT_MUTATION_MANAGER = terminal.token({\n    class: AbstractMutationManager,\n    interface: 'class AbstractMutationManager',\n    token: 'ABSTRACT_MUTATION_MANAGER'\n});\nexport const ABSTRACT_TRANSACTIONAL_RECIEVER = terminal.token({\n    class: TransactionalReceiver,\n    interface: 'class TransactionalReceiver',\n    token: 'ABSTRACT_TRANSACTIONAL_RECIEVER'\n});\nexport const CASCADE_GRAPH_VERIFIER = terminal.token({\n    class: CascadeGraphVerifier,\n    interface: 'ICascadeGraphVerifier',\n    token: 'CASCADE_GRAPH_VERIFIER'\n});\nexport const DATABASE_MANAGER = terminal.token({\n    class: DatabaseManager,\n    interface: 'IDatabaseManager',\n    token: 'DATABASE_MANAGER'\n});\nexport const DELETE_MANAGER = terminal.token({\n    class: DeleteManager,\n    interface: 'IDeleteManager',\n    token: 'DELETE_MANAGER'\n});\nexport const DEPENDENCY_GRAPH_RESOLVER = terminal.token({\n    class: DependencyGraphResolver,\n    interface: 'IDependencyGraphResolver',\n    token: 'DEPENDENCY_GRAPH_RESOLVER'\n});\nexport const ENTITY_GRAPH_RECONSTRUCTOR = terminal.token({\n    class: EntityGraphReconstructor,\n    interface: 'IEntityGraphReconstructor',\n    token: 'ENTITY_GRAPH_RECONSTRUCTOR'\n});\nexport const HISTORY_MANAGER = terminal.token({\n    class: HistoryManager,\n    interface: 'IHistoryManager',\n    token: 'HISTORY_MANAGER'\n});\nexport const INSERT_MANAGER = terminal.token({\n    class: InsertManager,\n    interface: 'IInsertManager',\n    token: 'INSERT_MANAGER'\n});\nexport const INTERNAL_RECORD_MANAGER = terminal.token({\n    class: InternalRecordManager,\n    interface: 'IInternalRecordManager',\n    token: 'INTERNAL_RECORD_MANAGER'\n});\nexport const ONLINE_MANAGER = terminal.token({\n    class: OnlineManager,\n    interface: 'IOnlineManager',\n    token: 'ONLINE_MANAGER'\n});\nexport const OPERATION_MANAGER = terminal.token({\n    class: OperationManager,\n    interface: 'IOperationManager',\n    token: 'OPERATION_MANAGER'\n});\nexport const QUERY_MANAGER = terminal.token({\n    class: QueryManager,\n    interface: 'IQueryManager',\n    token: 'QUERY_MANAGER'\n});\nexport const REPOSITORY_MANAGER = terminal.token({\n    class: RepositoryManager,\n    interface: 'IRepositoryManager',\n    token: 'REPOSITORY_MANAGER'\n});\nexport const STRUCTURAL_ENTITY_VALIDATOR = terminal.token({\n    class: StructuralEntityValidator,\n    interface: 'IStructuralEntityValidator',\n    token: 'STRUCTURAL_ENTITY_VALIDATOR'\n});\nexport const UPDATE_MANAGER = terminal.token({\n    class: UpdateManager,\n    interface: 'IUpdateManager',\n    token: 'UPDATE_MANAGER'\n});\nABSTRACT_MUTATION_MANAGER.setDependencies({\n    applicationUtils: APPLICATION_UTILS,\n    fieldUtils: FIELD_UTILS,\n    queryUtils: QUERY_UTILS,\n    relationManager: RELATION_MANAGER\n});\nABSTRACT_TRANSACTIONAL_RECIEVER.setDependencies({\n    terminalStore: TERMINAL_STORE,\n    transactionalServer: TRANSACTIONAL_SERVER\n});\nDATABASE_MANAGER.setDependencies({\n    applicationDao: APPLICATION_DAO,\n    applicationInitializer: APPLICATION_INITIALIZER,\n    internalRecordManager: INTERNAL_RECORD_MANAGER,\n    storeDriver: STORE_DRIVER,\n    transactionalServer: TRANSACTIONAL_SERVER\n});\nDELETE_MANAGER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    applicationUtils: APPLICATION_UTILS,\n    historyManager: HISTORY_MANAGER,\n    operationHistoryDuo: OPERATION_HISTORY_DUO,\n    recordHistoryDuo: RECORD_HISTORY_DUO,\n    repositoryTransactionHistoryDuo: REPOSITORY_TRANSACTION_HISTORY_DUO,\n    sequenceGenerator: SEQUENCE_GENERATOR\n});\nDEPENDENCY_GRAPH_RESOLVER.setDependencies({\n    entityStateManager: ENTITY_STATE_MANAGER\n});\nENTITY_GRAPH_RECONSTRUCTOR.setDependencies({\n    entityStateManager: ENTITY_STATE_MANAGER\n});\nHISTORY_MANAGER.setDependencies({\n    transactionHistoryDuo: TRANSACTION_HISTORY_DUO,\n});\nINSERT_MANAGER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    historyManager: HISTORY_MANAGER,\n    operationHistoryDuo: OPERATION_HISTORY_DUO,\n    recordHistoryDuo: RECORD_HISTORY_DUO,\n    repositoryTransactionHistoryDuo: REPOSITORY_TRANSACTION_HISTORY_DUO,\n});\nINTERNAL_RECORD_MANAGER.setDependencies({\n    actorDao: ACTOR_DAO,\n    applicationDao: APPLICATION_DAO,\n    domainDao: DOMAIN_DAO,\n    entityStateManager: ENTITY_STATE_MANAGER,\n    terminalStore: TERMINAL_STORE,\n    transactionManager: TRANSACTION_MANAGER\n});\nONLINE_MANAGER.setDependencies({\n    repositoryDao: REPOSITORY_DAO,\n    repositoryManager: REPOSITORY_MANAGER,\n    repositoryTransactionHistoryDao: REPOSITORY_TRANSACTION_HISTORY_DAO,\n    transactionManager: TRANSACTION_MANAGER\n});\nOPERATION_MANAGER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    applicationUtils: APPLICATION_UTILS,\n    cascadeGraphVerifier: CASCADE_GRAPH_VERIFIER,\n    deleteManager: DELETE_MANAGER,\n    dependencyGraphResolver: DEPENDENCY_GRAPH_RESOLVER,\n    entityGraphReconstructor: ENTITY_GRAPH_RECONSTRUCTOR,\n    entityStateManager: ENTITY_STATE_MANAGER,\n    insertManager: INSERT_MANAGER,\n    qMetadataUtils: Q_METADATA_UTILS,\n    queryFacade: QUERY_FACADE,\n    structuralEntityValidator: STRUCTURAL_ENTITY_VALIDATOR,\n    updateManager: UPDATE_MANAGER\n});\nQUERY_MANAGER.setDependencies({\n    repositoryLoader: REPOSITORY_LOADER,\n    storeDriver: STORE_DRIVER\n});\nREPOSITORY_LOADER.setDependencies({\n    repositoryDao: REPOSITORY_DAO,\n    synchronizationAdapterLoader: SYNCHRONIZATION_ADAPTER_LOADER,\n    synchronizationInManager: SYNCHRONIZATION_IN_MANAGER\n});\nREPOSITORY_MANAGER.setDependencies({\n    repositoryDao: REPOSITORY_DAO,\n});\nSTRUCTURAL_ENTITY_VALIDATOR.setDependencies({\n    applicationUtils: APPLICATION_UTILS,\n    entityStateManager: ENTITY_STATE_MANAGER,\n    repositoryManager: REPOSITORY_MANAGER,\n});\nTRANSACTION_MANAGER.setDependencies({\n    activeQueries: ACTIVE_QUERIES,\n    idGenerator: ID_GENERATOR,\n    synchronizationOutManager: SYNCHRONIZATION_OUT_MANAGER,\n    transactionHistoryDuo: TRANSACTION_HISTORY_DUO,\n});\nTRANSACTIONAL_RECEIVER.setDependencies({\n    databaseManager: DATABASE_MANAGER,\n    internalRecordManager: INTERNAL_RECORD_MANAGER\n});\nTRANSACTIONAL_SERVER.setDependencies({\n    deleteManager: DELETE_MANAGER,\n    insertManager: INSERT_MANAGER,\n    operationContextLoader: OPERATION_CONTEXT_LOADER,\n    operationManager: OPERATION_MANAGER,\n    queryManager: QUERY_MANAGER,\n    repositoryManager: REPOSITORY_MANAGER,\n    updateManager: UPDATE_MANAGER\n});\nUPDATE_MANAGER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    applicationUtils: APPLICATION_UTILS,\n    fieldUtils: FIELD_UTILS,\n    historyManager: HISTORY_MANAGER,\n    operationHistoryDuo: OPERATION_HISTORY_DUO,\n    queryFacade: QUERY_FACADE,\n    queryUtils: QUERY_UTILS,\n    recordHistoryDuo: RECORD_HISTORY_DUO,\n    relationManager: RELATION_MANAGER,\n    repositoryTransactionHistoryDuo: REPOSITORY_TRANSACTION_HISTORY_DUO,\n    sequenceGenerator: SEQUENCE_GENERATOR,\n});\n//# sourceMappingURL=tokens.js.map","import { DEPENDENCY_INJECTION } from '@airport/direction-indicator';\nexport * from './core/repository/RepositoryLoader';\nexport * from './core/repository/RepositoryManager';\nexport * from './data/InternalRecordManager';\nexport * from './net/InternalTransactionalConnector';\nexport * from './net/OnlineManager';\nexport * from './net/TransactionalReceiver';\nexport * from './net/TransactionalServer';\nexport * from './orchestration/AbstractMutationManager';\nexport * from './orchestration/DatabaseManager';\nexport * from './orchestration/DeleteManager';\nexport * from './orchestration/HistoryManager';\nexport * from './orchestration/InsertManager';\nexport * from './orchestration/QueryManager';\nexport * from './orchestration/TransactionManager';\nexport * from './orchestration/UpdateManager';\nexport * from './processing/CascadeGraphVerifier';\nexport * from './processing/DependencyGraphResolver';\nexport * from './processing/EntityGraphReconstructor';\nexport * from './processing/OperationContext';\nexport * from './processing/OperationManager';\nexport * from './processing/StructuralEntityValidator';\nexport * from './serialize/QueryParameterDeserializer';\nexport * from './serialize/QueryResultsSerializer';\nexport * from './shared/logic/DatabaseLogic';\nexport * from './shared/DateUtils';\nexport * from './shared/PlatformUtils';\nexport * from './ClientQueryManager';\n// export * from './Constants'\nexport * from './tokens';\nDEPENDENCY_INJECTION.isFramework = true;\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { container } from \"@airport/direction-indicator\";\nimport { Injected } from '@airport/direction-indicator';\nlet ApiRegistry = class ApiRegistry {\n    initialize(\n    // installedApi: InstalledApi\n    applicationApi) {\n        // this.installedApi = installedApi\n        this.applicationApi = applicationApi;\n    }\n    async findApiObjectAndOperation(domainName, applicationName, apiObjectName, methodName) {\n        const apiObjectDefinition = this.applicationApi.apiObjectMap[apiObjectName];\n        if (!apiObjectDefinition) {\n            throw new Error(`Could not find API object for\r\n        Domain:\r\n            ${domainName}\r\n        Application:\r\n            ${applicationName}\r\n        Token:\r\n            ${apiObjectName}`);\n        }\n        const apiOperation = apiObjectDefinition.operationMap[methodName];\n        if (!apiOperation) {\n            throw new Error(`Could not find API object method for \r\n        Domain:\r\n            ${domainName}\r\n        Application:\r\n            ${applicationName}\r\n        Token:\r\n            ${apiObjectName}\r\n        Method name:\r\n            ${methodName}`);\n        }\n        const apiObject = await container(this)\n            .getByNames(domainName, applicationName, apiObjectName);\n        return {\n            apiObject,\n            apiOperation\n        };\n    }\n};\nApiRegistry = __decorate([\n    Injected()\n], ApiRegistry);\nexport { ApiRegistry };\n//# sourceMappingURL=ApiRegistry.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nlet ApiValidator = class ApiValidator {\n    validate(operation, parameters) {\n        // FIXME: implement (eventually)\n    }\n};\nApiValidator = __decorate([\n    Injected()\n], ApiValidator);\nexport { ApiValidator };\n//# sourceMappingURL=ApiValidator.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet LocalAPIServer = class LocalAPIServer {\n    async handleRequest(request) {\n        let payload;\n        let errorMessage;\n        try {\n            const { apiObject, apiOperation } = await this.apiRegistry.findApiObjectAndOperation(request.domain, request.application, request.objectName, request.methodName);\n            const result = apiObject[request.methodName].apply(apiObject, request.args);\n            if (apiOperation.isAsync) {\n                payload = await result;\n            }\n            else {\n                payload = result;\n            }\n        }\n        catch (e) {\n            errorMessage = e.message;\n            console.error(e);\n        }\n        const response = {\n            application: request.application,\n            category: 'ToClient',\n            domain: request.domain,\n            errorMessage,\n            id: request.id,\n            methodName: request.methodName,\n            objectName: request.objectName,\n            protocol: request.protocol,\n            payload,\n        };\n        return response;\n    }\n};\n__decorate([\n    Inject()\n], LocalAPIServer.prototype, \"apiRegistry\", void 0);\nLocalAPIServer = __decorate([\n    Injected()\n], LocalAPIServer);\nexport { LocalAPIServer };\n//# sourceMappingURL=LocalApiServer.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { EntityRelationType, EntityState, SQLDataType } from \"@airport/ground-control\";\n// TODO: figure out if this is needed - originally written for deserializing\n// Client-side operation entities.  Since then moved to Isolates and generic\n// API calls.  Probably should be used in go-tower to deserialize all of the\n// method argiments passed it (and won't be tied to a query of any kind, API\n// interface is generic, unless already known to contain entity objects.)\nlet OperationDeserializer = class OperationDeserializer {\n    deserialize(entity, dbEntity, entityStateManager, applicationUtils) {\n        const operation = {\n            lookupTable: [],\n        };\n        let deserializedEntity;\n        if (entity instanceof Array) {\n            deserializedEntity = entity.map(anEntity => this.doDeserialize(anEntity, dbEntity, operation, entityStateManager, applicationUtils));\n        }\n        else {\n            deserializedEntity = this.doDeserialize(entity, dbEntity, operation, entityStateManager, applicationUtils);\n        }\n        return deserializedEntity;\n    }\n    doDeserialize(entity, dbEntity, operation, entityStateManager, applicationUtils) {\n        let state = entityStateManager.getEntityState(entity);\n        let operationUniqueId = entityStateManager.getOperationUniqueId(entity);\n        if (!operationUniqueId || typeof operationUniqueId !== 'number'\n            || operationUniqueId < 1 || operationUniqueId % 1 === 0) {\n            throw new Error(`Invalid or missing ${entityStateManager.getUniqueIdFieldName()} field.`);\n        }\n        let alreadyDeserializedEntity = operation.lookupTable[operationUniqueId];\n        switch (state) {\n            case EntityState.STUB: {\n                let alreadyDeserializedEntity = operation.lookupTable[operationUniqueId];\n                if (!alreadyDeserializedEntity) {\n                    throw new Error(`Could not find an already present entity for\r\n\t\t\t\t\t${entityStateManager.getUniqueIdFieldName()} of ${operationUniqueId}`);\n                }\n                return alreadyDeserializedEntity;\n            }\n            default:\n                if (alreadyDeserializedEntity) {\n                    throw new Error(`Entity appears more than once for\r\n\t\t\t\t\t${entityStateManager.getUniqueIdFieldName()} of ${operationUniqueId}`);\n                }\n        }\n        let deserializedEntity = {};\n        operation.lookupTable[operationUniqueId] = deserializedEntity;\n        deserializedEntity[entityStateManager.getStateFieldName()] = state;\n        for (const dbProperty of dbEntity.properties) {\n            let value = entity[dbProperty.name];\n            if (applicationUtils.isEmpty(value)) {\n                continue;\n            }\n            let propertyCopy;\n            if (dbProperty.relation) {\n                const dbRelation = dbProperty.relation[0];\n                switch (dbRelation.relationType) {\n                    case EntityRelationType.ONE_TO_MANY:\n                        if (!(value instanceof Array)) {\n                            throw new Error(`Expecting @OneToMany for an array entity relation`);\n                        }\n                        propertyCopy = value.map(aProperty => this.doDeserialize(aProperty, dbRelation.entity, operation, entityStateManager, applicationUtils));\n                        break;\n                    case EntityRelationType.MANY_TO_ONE:\n                        if (!(value instanceof Object) || value instanceof Array) {\n                            throw new Error(`Expecting @ManyToOne for a non-array entity relation`);\n                        }\n                        propertyCopy = this.doDeserialize(value, dbRelation.entity, operation, entityStateManager, applicationUtils);\n                        break;\n                    default:\n                        throw new Error(`Unknown relation type: ${dbRelation.relationType}`);\n                }\n            }\n            else {\n                const dbColumn = dbProperty.propertyColumns[0].column;\n                switch (dbColumn.type) {\n                    case SQLDataType.JSON:\n                        // propertyCopy = this.cleanJsonObject(value, dbProperty, entityStateManager)\n                        throw new Error('Json properties cannot be deserialized');\n                        break;\n                    case SQLDataType.DATE:\n                        if (!(value instanceof Object)\n                            || value[entityStateManager.getStateFieldName()] !== EntityState.DATE\n                            || !value.value) {\n                            throw new Error(`Invalid Serialized Date format for ${dbEntity.name}.${dbProperty.name}`);\n                        }\n                        try {\n                            propertyCopy = new Date(value);\n                        }\n                        catch (e) {\n                            throw new Error(`Invalid Serialized Date format for ${dbEntity.name}.${dbProperty.name}`);\n                        }\n                        break;\n                    case SQLDataType.ANY:\n                    case SQLDataType.BOOLEAN:\n                    case SQLDataType.NUMBER:\n                    case SQLDataType.STRING:\n                        propertyCopy = value;\n                        break;\n                    default:\n                        throw new Error(`Unexpected data type for ${dbEntity.name}.${dbProperty.name}`);\n                }\n            }\n            deserializedEntity[dbProperty.name] = propertyCopy;\n        }\n        return deserializedEntity;\n    }\n    cleanJsonObject(value, dbProperty, entityStateManager) {\n        let valueCopy;\n        if (value instanceof Object) {\n            if (value instanceof Array) {\n                valueCopy = value.map(aValue => this.cleanJsonObject(aValue, dbProperty, entityStateManager));\n            }\n            else {\n                valueCopy = {};\n                if (value[entityStateManager.getStateFieldName()] === EntityState.STUB) {\n                    throw new Error(`Interlinked object graphs are not supported in @Json() columns \r\n                    ${dbProperty.entity.name}.${dbProperty.name}`);\n                }\n                delete value[entityStateManager.getStateFieldName()];\n                delete value[entityStateManager.getUniqueIdFieldName()];\n                for (const propertyName in value) {\n                    const property = value[propertyName];\n                    valueCopy[propertyName] = this.\n                        cleanJsonObject(property, dbProperty, entityStateManager);\n                }\n            }\n        }\n        else {\n            valueCopy = value;\n        }\n        return valueCopy;\n    }\n};\nOperationDeserializer = __decorate([\n    Injected()\n], OperationDeserializer);\nexport { OperationDeserializer };\n//# sourceMappingURL=OperationDeserializer.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nlet EntityCopier = class EntityCopier {\n    copyEntityForProcessing(entity, dbEntity, entityStateManager, context) {\n        const operation = {\n            processedEntityMap: new Map(),\n            sequence: context.lastOUID ? context.lastOUID : 0,\n        };\n        const copy = this.doCopyEntityForProcessing(entity, dbEntity, entityStateManager, operation);\n        context.lastOUID = operation.sequence;\n        return copy;\n    }\n    doCopyEntityForProcessing(entity, dbEntity, entityStateManager, operation) {\n        if (entity instanceof Array) {\n            return entity.map(anEntity => this.doCopyEntityForProcessing(anEntity, dbEntity, entityStateManager, operation));\n        }\n        else {\n            let entityCopy = {};\n            if (operation.processedEntityMap.has(entity)) {\n                return operation.processedEntityMap.get(entity);\n            }\n            operation.processedEntityMap.set(entity, entityCopy);\n            const operationUniqueId = ++operation.sequence;\n            entityCopy[entityStateManager.getUniqueIdFieldName()] = operationUniqueId;\n            entity[entityStateManager.getUniqueIdFieldName()] = operationUniqueId;\n            entityStateManager.setOriginalValues(entityStateManager.getOriginalValues(entity), entityCopy);\n            for (let dbProperty of dbEntity.properties) {\n                const property = entity[dbProperty.name];\n                if (dbProperty.relation && dbProperty.relation.length && property) {\n                    entityCopy[dbProperty.name] = this.doCopyEntityForProcessing(property, dbProperty.relation[0].relationEntity, entityStateManager, operation);\n                }\n                else {\n                    // No need to clone dates or JSON objects - they\n                    // won't be modified by the save process\n                    entityCopy[dbProperty.name] = property;\n                }\n            }\n            entityCopy[entityStateManager.getStateFieldName()]\n                = entity[entityStateManager.getStateFieldName()];\n            return entityCopy;\n        }\n    }\n};\nEntityCopier = __decorate([\n    Injected()\n], EntityCopier);\nexport { EntityCopier };\n//# sourceMappingURL=EntityCopier.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { EntityRelationType, EntityState, SQLDataType } from \"@airport/ground-control\";\nlet UpdateCacheManager = class UpdateCacheManager {\n    saveOriginalValues(entity, dbEntity) {\n        if (entity instanceof Array) {\n            for (let i = 0; i < entity.length; i++) {\n                this.saveOriginalValues(entity[i], dbEntity);\n            }\n            return;\n        }\n        if (!entity) {\n            return;\n        }\n        const originalValuesObject = {};\n        this.entityStateManager.setOriginalValues(originalValuesObject, entity);\n        for (let dbProperty of dbEntity.properties) {\n            const property = entity[dbProperty.name];\n            if (dbProperty.relation && dbProperty.relation.length) {\n                if (!property) {\n                    continue;\n                }\n                if (dbProperty.relation[0].relationType === EntityRelationType.MANY_TO_ONE) {\n                    // Save the nested child object Ids in the original values of this object\n                    // in case the object behind this relation is changed\n                    this.applicationUtils.forEachColumnTypeOfRelation(dbProperty.relation[0], (_dbColumn, propertyNameChains) => {\n                        for (let propertyNameChain of propertyNameChains) {\n                            let nestedProperty = entity;\n                            let currentPropertyOriginalValue = originalValuesObject;\n                            for (let i = 0; i < propertyNameChain.length; i++) {\n                                const propertyName = propertyNameChain[i];\n                                if (nestedProperty instanceof Object) {\n                                    nestedProperty = nestedProperty[propertyName];\n                                    let originalValue;\n                                    // Nested object continues\n                                    if (i === propertyNameChain.length - 1) {\n                                        originalValue = nestedProperty;\n                                    }\n                                    else {\n                                        originalValue = {};\n                                    }\n                                    currentPropertyOriginalValue[propertyName] = originalValue;\n                                    currentPropertyOriginalValue = currentPropertyOriginalValue[propertyName];\n                                }\n                                else {\n                                    // This is the actual value\n                                    currentPropertyOriginalValue[propertyName] = nestedProperty;\n                                }\n                            }\n                        }\n                    });\n                }\n                this.saveOriginalValues(property, dbProperty.relation[0].relationEntity);\n            }\n            else {\n                originalValuesObject[dbProperty.name] = entity[dbProperty.name];\n            }\n        }\n    }\n    setOperationState(entityCopy, dbEntity, processedEntities) {\n        if (entityCopy instanceof Array) {\n            for (var i = 0; i < entityCopy.length; i++) {\n                this.setOperationState(entityCopy[i], dbEntity, processedEntities);\n            }\n            return;\n        }\n        if (processedEntities.has(entityCopy)) {\n            return;\n        }\n        processedEntities.add(entityCopy);\n        const originalValuesObject = this.entityStateManager\n            .getOriginalValues(entityCopy);\n        let entityState = entityCopy[this.entityStateManager.getStateFieldName()];\n        let hasId = true;\n        let hasGeneratedIds = false;\n        for (const dbProperty of dbEntity.properties) {\n            if (!dbProperty.isId) {\n                continue;\n            }\n            for (const propertyColumn of dbProperty.propertyColumns) {\n                if (propertyColumn.column.isGenerated) {\n                    hasGeneratedIds = true;\n                }\n            }\n            if (dbProperty.relation && dbProperty.relation.length) {\n                this.applicationUtils.forEachColumnTypeOfRelation(dbProperty.relation[0], (_dbColumn, propertyNameChains) => {\n                    for (let propertyNameChain of propertyNameChains) {\n                        let nestedProperty = entityCopy;\n                        for (let i = 0; i < propertyNameChain.length; i++) {\n                            const propertyName = propertyNameChain[i];\n                            if (nestedProperty) {\n                                nestedProperty = nestedProperty[propertyName];\n                            }\n                        }\n                        if (!nestedProperty) {\n                            if (entityState === EntityState.DELETE) {\n                                throw new Error(`Entity is marked for deletion but does not have an @Id() property:\r\n            ${propertyNameChain.join('.')}\r\n                                    `);\n                            }\n                            else {\n                                entityState = EntityState.CREATE;\n                                hasId = false;\n                                return true;\n                            }\n                        }\n                    }\n                });\n            }\n            else if (!entityCopy[dbProperty.name] && entityCopy[dbProperty.name] !== 0) {\n                hasId = false;\n            }\n        }\n        if (originalValuesObject) {\n            for (const dbProperty of dbEntity.properties) {\n                const property = entityCopy[dbProperty.name];\n                if (dbProperty.relation && dbProperty.relation.length) {\n                    if (!property) {\n                        continue;\n                    }\n                    const dbRelation = dbProperty.relation[0];\n                    const propertyOriginalValuesObject = this.entityStateManager\n                        .getOriginalValues(property);\n                    this.applicationUtils.forEachColumnTypeOfRelation(dbRelation, (_dbColumn, propertyNameChains) => {\n                        const propertyOriginalValuesObject = this.entityStateManager\n                            .getOriginalValues(property);\n                        // const firstPropertyNameChain = propertyNameChains[0];\n                        for (const propertyNameChain of propertyNameChains) {\n                            let value = entityCopy;\n                            let originalValue = propertyOriginalValuesObject;\n                            for (let i = 0; i < propertyNameChain.length; i++) {\n                                const propertyName = propertyNameChain[i];\n                                value = value[propertyName];\n                                // Skip the property itself since the original values object\n                                // belongs to the property and not the checked object\n                                // (in the case of relations only)\n                                if (i !== 0) {\n                                    originalValue = originalValue[propertyName];\n                                }\n                                let noValue = value === null || value === undefined;\n                                let noOriginalValue = originalValue === null\n                                    || originalValue === undefined;\n                                if (noValue) {\n                                    if (originalValue) {\n                                        entityState = EntityState.UPDATE;\n                                        return true;\n                                    }\n                                    break;\n                                }\n                                if (noOriginalValue) {\n                                    if (value) {\n                                        entityState = EntityState.UPDATE;\n                                        return true;\n                                    }\n                                    break;\n                                }\n                                // If it's a nested object\n                                if (typeof value === 'object') {\n                                    // If original isn't a nested object\n                                    if (typeof originalValue !== 'object') {\n                                        entityState = EntityState.UPDATE;\n                                        return true;\n                                    }\n                                    // Values should not be dates or json objects, only\n                                    // nested object references to eventual Ids\n                                }\n                                else if (typeof originalValue === 'object') {\n                                    // value is not a nested object but originalValue is\n                                    entityState = EntityState.UPDATE;\n                                    return true;\n                                }\n                                else {\n                                    // Both values are primitives (nested ids)\n                                    if (value !== originalValue) {\n                                        entityState = EntityState.UPDATE;\n                                        return true;\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n                else {\n                    if (entityState) {\n                        continue;\n                    }\n                    let originalValue = originalValuesObject[dbProperty.name];\n                    let propertyValue;\n                    switch (dbProperty.propertyColumns[0].column.type) {\n                        case SQLDataType.DATE:\n                            if (originalValue) {\n                                originalValue = originalValue.getTime();\n                            }\n                            if (property) {\n                                propertyValue = property.getTime();\n                            }\n                            break;\n                        case SQLDataType.JSON:\n                            if (originalValue) {\n                                originalValue = JSON.stringify(originalValue);\n                            }\n                            if (property) {\n                                propertyValue = JSON.stringify(property);\n                            }\n                            break;\n                        default:\n                            propertyValue = property;\n                            break;\n                    }\n                    if (propertyValue !== originalValue) {\n                        entityState = EntityState.UPDATE;\n                    }\n                }\n            }\n        }\n        for (const dbProperty of dbEntity.properties) {\n            const property = entityCopy[dbProperty.name];\n            if (property && dbProperty.relation && dbProperty.relation.length) {\n                this.setOperationState(property, dbProperty.relation[0].relationEntity, processedEntities);\n            }\n        }\n        if (!entityState) {\n            if ((hasId && hasGeneratedIds) || originalValuesObject) {\n                entityState = EntityState.PASS_THROUGH;\n            }\n            else {\n                entityState = EntityState.CREATE;\n            }\n        }\n        entityCopy[this.entityStateManager.getStateFieldName()] = entityState;\n    }\n    afterSaveModifications(entity, dbEntity, saveResult, processedEntities) {\n        this.updateOriginalValuesAfterSave(entity, dbEntity, saveResult, new Set());\n        this.removeDeletedEntities(entity, dbEntity, saveResult, processedEntities);\n    }\n    updateOriginalValuesAfterSave(entity, dbEntity, saveResult, processedEntities) {\n        if (entity instanceof Array) {\n            for (let i = 0; i < entity.length; i++) {\n                this.updateOriginalValuesAfterSave(entity[i], dbEntity, saveResult, processedEntities);\n            }\n        }\n        else {\n            if (processedEntities.has(entity)) {\n                return;\n            }\n            processedEntities.add(entity);\n            let operationUniqueId = this.entityStateManager.getOperationUniqueId(entity, false, dbEntity);\n            let originalValuesObject = {};\n            if (operationUniqueId) {\n                originalValuesObject = this.doUpdateOriginalValuesAfterSave(entity, dbEntity, saveResult, processedEntities, operationUniqueId);\n            }\n            this.entityStateManager.setOriginalValues(originalValuesObject, entity);\n        }\n    }\n    doUpdateOriginalValuesAfterSave(entity, dbEntity, saveResult, processedEntities, operationUniqueId) {\n        let createdRecord = saveResult.created[operationUniqueId];\n        if (createdRecord) {\n            if (createdRecord !== true) {\n                for (const generatedPropertyName in createdRecord) {\n                    entity[generatedPropertyName] = createdRecord[generatedPropertyName];\n                }\n                if (dbEntity.isRepositoryEntity) {\n                    let repositoryEntity = entity;\n                    if (!repositoryEntity.repository || !repositoryEntity.repository.id) {\n                        repositoryEntity.repository = saveResult.newRepository;\n                    }\n                    repositoryEntity.actor = saveResult.actor;\n                }\n            }\n        }\n        else if (saveResult.deleted[operationUniqueId]) {\n            this.entityStateManager.setIsDeleted(true, entity);\n            this.entityStateManager.setOriginalValues(null, entity);\n            return;\n        }\n        let originalValuesObject = {};\n        for (const dbProperty of dbEntity.properties) {\n            const property = entity[dbProperty.name];\n            if (property && dbProperty.relation && dbProperty.relation.length) {\n                if (dbProperty.relation[0].relationType === EntityRelationType.MANY_TO_ONE) {\n                    // Save the nested child object Ids in the original values of this object\n                    // in case the object behind this relation is changed\n                    this.applicationUtils.forEachColumnTypeOfRelation(dbProperty.relation[0], (_dbColumn, propertyNameChains) => {\n                        for (let propertyNameChain of propertyNameChains) {\n                            let nestedProperty = entity;\n                            let currentPropertyOriginalValue = originalValuesObject;\n                            for (let i = 0; i < propertyNameChain.length; i++) {\n                                const propertyName = propertyNameChain[i];\n                                if (nestedProperty instanceof Object) {\n                                    nestedProperty = nestedProperty[propertyName];\n                                    let originalValue;\n                                    // Nested object continues\n                                    if (i === propertyNameChain.length - 1) {\n                                        originalValue = nestedProperty;\n                                    }\n                                    else {\n                                        originalValue = {};\n                                    }\n                                    currentPropertyOriginalValue[propertyName] = originalValue;\n                                    currentPropertyOriginalValue = currentPropertyOriginalValue[propertyName];\n                                }\n                                else {\n                                    // This is the actual value\n                                    currentPropertyOriginalValue[propertyName] = nestedProperty;\n                                }\n                            }\n                        }\n                    });\n                }\n                this.updateOriginalValuesAfterSave(property, dbProperty.relation[0].relationEntity, saveResult, processedEntities);\n            }\n            else {\n                originalValuesObject[dbProperty.name] = property;\n            }\n        }\n        return originalValuesObject;\n    }\n    removeDeletedEntities(entity, dbEntity, saveResult, processedEntities) {\n        if (entity instanceof Array) {\n            for (let i = entity.length - 1; i >= 0; i--) {\n                if (this.removeDeletedEntities(entity[i], dbEntity, saveResult, processedEntities)) {\n                    entity.splice(i, 1);\n                }\n            }\n            return !entity.length;\n        }\n        else {\n            if (processedEntities.has(entity)) {\n                return this.entityStateManager.isDeleted(entity);\n            }\n            processedEntities.add(entity);\n            for (const dbRelation of dbEntity.relations) {\n                const dbRelationProperty = dbRelation.property;\n                const property = entity[dbRelationProperty.name];\n                if (!property) {\n                    continue;\n                }\n                switch (dbRelation.relationType) {\n                    case EntityRelationType.MANY_TO_ONE:\n                        if (this.removeDeletedEntities(property, dbRelation.relationEntity, saveResult, processedEntities)) {\n                            entity[dbRelationProperty.name] = null;\n                        }\n                        break;\n                    case EntityRelationType.ONE_TO_MANY:\n                        this.removeDeletedEntities(property, dbRelation.relationEntity, saveResult, processedEntities);\n                        break;\n                }\n            }\n            return this.entityStateManager.isDeleted(entity);\n        }\n    }\n};\n__decorate([\n    Inject()\n], UpdateCacheManager.prototype, \"entityStateManager\", void 0);\n__decorate([\n    Inject()\n], UpdateCacheManager.prototype, \"applicationUtils\", void 0);\nUpdateCacheManager = __decorate([\n    Injected()\n], UpdateCacheManager);\nexport { UpdateCacheManager };\n//# sourceMappingURL=UpdateCacheManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar EntityStateManager_1;\nimport { Injected } from '@airport/direction-indicator';\nimport { EntityState } from '@airport/ground-control';\nlet EntityStateManager = EntityStateManager_1 = class EntityStateManager {\n    isStub(entity) {\n        return this.getEntityState(entity) === EntityState.STUB;\n    }\n    isParentId(entity) {\n        return this.getEntityState(entity) === EntityState.PARENT_ID;\n    }\n    markForDeletion(entity) {\n        entity[EntityStateManager_1.STATE_FIELD] = EntityState.DELETE;\n    }\n    markToCreate(entity) {\n        entity[EntityStateManager_1.STATE_FIELD] = EntityState.CREATE;\n    }\n    markToUpdate(entity) {\n        entity[EntityStateManager_1.STATE_FIELD] = EntityState.UPDATE;\n    }\n    getEntityState(entity) {\n        return entity[EntityStateManager_1.STATE_FIELD];\n    }\n    getOriginalValues(entity) {\n        return entity[EntityStateManager_1.ORIGINAL_VALUES_PROPERTY];\n    }\n    setOriginalValues(originalValues, entity) {\n        entity[EntityStateManager_1.ORIGINAL_VALUES_PROPERTY] = originalValues;\n    }\n    copyEntityState(fromEntity, toEntity) {\n        toEntity[EntityStateManager_1.STATE_FIELD]\n            = fromEntity[EntityStateManager_1.STATE_FIELD];\n        toEntity[EntityStateManager_1.ORIGINAL_VALUES_PROPERTY]\n            = fromEntity[EntityStateManager_1.ORIGINAL_VALUES_PROPERTY];\n    }\n    getStateFieldName() {\n        return EntityStateManager_1.STATE_FIELD;\n    }\n    getEntityStateTypeAsFlags(entity, dbEntity) {\n        let isCreate, isDelete, isParentId, isPassThrough, isResult, isResultDate, isResultJson, isStub, isUpdate;\n        const entityState = this.getEntityState(entity);\n        switch (entityState) {\n            case EntityState.CREATE:\n                isCreate = true;\n                break;\n            case EntityState.DELETE:\n                isDelete = true;\n                break;\n            case EntityState.PARENT_ID:\n                isParentId = true;\n                break;\n            case EntityState.PASS_THROUGH:\n                isPassThrough = true;\n                break;\n            // case EntityState.RESULT:\n            // \tisResult = true\n            // \tbreak\n            case EntityState.DATE:\n                isResultDate = true;\n                break;\n            // case EntityState.RESULT_JSON:\n            // \tisResultJson = true\n            // \tbreak\n            case EntityState.STUB:\n                isStub = true;\n                break;\n            case EntityState.UPDATE:\n                isUpdate = true;\n                break;\n            default:\n                throw new Error(`Unexpected entity state\r\n\"${this.getStateFieldName()}\" for ${dbEntity.name}: ${entityState}`);\n        }\n        return {\n            isCreate,\n            isDelete,\n            isParentId,\n            isPassThrough,\n            // isResult,\n            isResultDate,\n            isStub,\n            isUpdate,\n        };\n    }\n    setIsDeleted(isDeleted, entity) {\n        entity[EntityStateManager_1.STATE_FIELD] = EntityState.DELETE;\n    }\n    isDeleted(entity) {\n        return entity[EntityStateManager_1.STATE_FIELD] === EntityState.DELETE;\n    }\n    getOperationUniqueId(entity, throwIfNotFound = true, dbEntity = null) {\n        const operationUniqueId = entity[EntityStateManager_1.OPERATION_UNIQUE_ID_FIELD];\n        if (!operationUniqueId || typeof operationUniqueId !== 'number' || operationUniqueId < 1) {\n            if (throwIfNotFound) {\n                let entityDescription;\n                if (dbEntity) {\n                    entityDescription = dbEntity.applicationVersion.application.name + '.' + dbEntity.name;\n                }\n                else {\n                    entityDescription = JSON.stringify(entity);\n                }\n                throw new Error(`Could not find \"${EntityStateManager_1.OPERATION_UNIQUE_ID_FIELD}\" property on DTO:\r\n        \r\n        ${entityDescription}`);\n            }\n        }\n        return operationUniqueId;\n    }\n    copyOperationUniqueId(entity, entityCopy) {\n        const operationUniqueId = entity[EntityStateManager_1.OPERATION_UNIQUE_ID_FIELD];\n        entityCopy[EntityStateManager_1.OPERATION_UNIQUE_ID_FIELD] = operationUniqueId;\n    }\n    markAsStub(entity) {\n        entity[EntityStateManager_1.STATE_FIELD] = EntityState.STUB;\n    }\n    getUniqueIdFieldName() {\n        return EntityStateManager_1.OPERATION_UNIQUE_ID_FIELD;\n    }\n};\nEntityStateManager.DELETED_PROPERTY = '__deleted__';\nEntityStateManager.ORIGINAL_VALUES_PROPERTY = '__originalValues__';\nEntityStateManager.STATE_FIELD = '__state__';\nEntityStateManager.OPERATION_UNIQUE_ID_FIELD = '__OUID__';\nEntityStateManager = EntityStateManager_1 = __decorate([\n    Injected()\n], EntityStateManager);\nexport { EntityStateManager };\nexport function injectEntityStateManager() {\n    console.log('inject EntityStateManager');\n}\n//# sourceMappingURL=EntityStateManager.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Delete, InsertColumnValues, InsertValues, UpdateColumns, UpdateProperties, } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\n/**\n * Created by Papa on 5/23/2016.\n */\nlet DatabaseFacade = class DatabaseFacade {\n    async addRepository(\n    // url: string = null,\n    // platform: PlatformType = PlatformType.GOOGLE_DOCS,\n    // platformConfig: string = null,\n    // distributionStrategy: DistributionStrategy = DistributionStrategy.S3_DISTIBUTED_PUSH,\n    context) {\n        // TODO: figure out how addRepository will work\n        return await this.transactionalConnector.addRepository(\n        // url, platform, platformConfig, distributionStrategy, \n        context);\n    }\n    async insertColumnValues(rawInsertColumnValues, context) {\n        if (!rawInsertColumnValues) {\n            return 0;\n        }\n        if (rawInsertColumnValues instanceof Function) {\n            rawInsertColumnValues = rawInsertColumnValues();\n        }\n        const insertColumnValues = new InsertColumnValues(rawInsertColumnValues);\n        const queryContext = await this.ensureQueryContext(context);\n        const portableQuery = this.queryFacade.getPortableQuery(insertColumnValues, null, queryContext);\n        return await this.transactionalConnector.insertValues(portableQuery, context);\n    }\n    async insertValues(rawInsertValues, context) {\n        if (!rawInsertValues) {\n            return 0;\n        }\n        if (rawInsertValues instanceof Function) {\n            rawInsertValues = rawInsertValues();\n        }\n        const insertValues = new InsertValues(rawInsertValues);\n        const queryContext = await this.ensureQueryContext(context);\n        const portableQuery = this.queryFacade.getPortableQuery(insertValues, null, queryContext);\n        return await this.transactionalConnector.insertValues(portableQuery, context);\n    }\n    async insertColumnValuesGenerateIds(rawInsertColumnValues, context) {\n        if (!rawInsertColumnValues) {\n            return [];\n        }\n        if (rawInsertColumnValues instanceof Function) {\n            rawInsertColumnValues = rawInsertColumnValues();\n        }\n        const insertValues = new InsertColumnValues(rawInsertColumnValues);\n        const queryContext = await this.ensureQueryContext(context);\n        const portableQuery = this.queryFacade.getPortableQuery(insertValues, null, queryContext);\n        return await this.transactionalConnector.insertValuesGetIds(portableQuery, context);\n    }\n    async insertValuesGenerateIds(rawInsertValues, context) {\n        if (!rawInsertValues) {\n            return [];\n        }\n        if (rawInsertValues instanceof Function) {\n            rawInsertValues = rawInsertValues();\n        }\n        const insertValues = new InsertValues(rawInsertValues);\n        const queryContext = await this.ensureQueryContext(context);\n        const portableQuery = this.queryFacade.getPortableQuery(insertValues, null, queryContext);\n        return await this.transactionalConnector.insertValuesGetIds(portableQuery, context);\n    }\n    async deleteWhere(rawDelete, context) {\n        if (!rawDelete) {\n            return 0;\n        }\n        if (rawDelete instanceof Function) {\n            rawDelete = rawDelete();\n        }\n        let deleteWhere = new Delete(rawDelete);\n        const queryContext = await this.ensureQueryContext(context);\n        let portableQuery = this.queryFacade.getPortableQuery(deleteWhere, null, queryContext);\n        return await this.transactionalConnector.deleteWhere(portableQuery, context);\n    }\n    async save(entity, context) {\n        if (!entity) {\n            return null;\n        }\n        const entityCopy = await this.preSaveOperations(entity, context);\n        const saveResult = await this.transactionalConnector.save(entityCopy, context);\n        this.updateCacheManager.afterSaveModifications(entity, context.dbEntity, saveResult, new Set());\n        return saveResult;\n    }\n    async saveToDestination(repositoryDestination, entity, context) {\n        if (!entity) {\n            return null;\n        }\n        const entityCopy = await this.preSaveOperations(entity, context);\n        const saveResult = await this.transactionalConnector\n            .saveToDestination(repositoryDestination, entityCopy, context);\n        this.updateCacheManager.afterSaveModifications(entity, context.dbEntity, saveResult, new Set());\n        return saveResult;\n    }\n    async preSaveOperations(entity, context) {\n        if (!entity) {\n            return null;\n        }\n        const dbEntity = context.dbEntity;\n        const entityCopy = this.entityCopier\n            .copyEntityForProcessing(entity, dbEntity, this.entityStateManager, context);\n        this.updateCacheManager.setOperationState(entityCopy, dbEntity, new Set());\n        return entityCopy;\n    }\n    /**\n     * Updates an entity with a where clause, using a column based set clause\n     * - internal API.  Use the API provided by the IEntityDatabaseFacade.\n     *\n     * @return Number of records updated\n     */\n    async updateColumnsWhere(rawUpdate, context) {\n        if (!rawUpdate) {\n            return 0;\n        }\n        if (rawUpdate instanceof Function) {\n            rawUpdate = rawUpdate();\n        }\n        let updateColumns = new UpdateColumns(rawUpdate);\n        const queryContext = await this.ensureQueryContext(context);\n        const portableQuery = this.queryFacade.getPortableQuery(updateColumns, null, queryContext);\n        return await this.transactionalConnector.updateValues(portableQuery, context);\n    }\n    async updateWhere(rawUpdate, context) {\n        if (!rawUpdate) {\n            return 0;\n        }\n        if (rawUpdate instanceof Function) {\n            rawUpdate = rawUpdate();\n        }\n        let update = new UpdateProperties(rawUpdate);\n        const queryContext = await this.ensureQueryContext(context);\n        const portableQuery = this.queryFacade.getPortableQuery(update, null, queryContext);\n        return await this.transactionalConnector.updateValues(portableQuery, context);\n    }\n    prepare(queryFunction) {\n        return new FunctionWrapper(queryFunction);\n    }\n    async ensureQueryContext(context) {\n        const queryContext = context;\n        return queryContext;\n    }\n};\n__decorate([\n    Inject()\n], DatabaseFacade.prototype, \"entityCopier\", void 0);\n__decorate([\n    Inject()\n], DatabaseFacade.prototype, \"entityStateManager\", void 0);\n__decorate([\n    Inject()\n], DatabaseFacade.prototype, \"queryFacade\", void 0);\n__decorate([\n    Inject()\n], DatabaseFacade.prototype, \"transactionalConnector\", void 0);\n__decorate([\n    Inject()\n], DatabaseFacade.prototype, \"updateCacheManager\", void 0);\nDatabaseFacade = __decorate([\n    Injected()\n], DatabaseFacade);\nexport { DatabaseFacade };\nexport class FunctionWrapper {\n    constructor(queryFunction) {\n        throw new Error('Not Implemented');\n    }\n    find(...params) {\n    }\n}\n//# sourceMappingURL=DatabaseFacade.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet QueryFacade = class QueryFacade {\n    async find(query, queryResultType, context) {\n        await this.ensureContext(context);\n        const result = await this.transactionalConnector.find(this.getPortableQuery(query, queryResultType, context), context);\n        return result;\n    }\n    async findOne(query, queryResultType, context) {\n        await this.ensureContext(context);\n        const result = await this.transactionalConnector.findOne(this.getPortableQuery(query, queryResultType, context), context);\n        return result;\n    }\n    getPortableQuery(query, queryResultType, context) {\n        return {\n            jsonQuery: query.toJSON(this.queryUtils, this.fieldUtils, this.relationManager),\n            parameterMap: query.getParameters(),\n            queryResultType,\n            applicationIndex: context.dbEntity.applicationVersion.application.index,\n            tableIndex: context.dbEntity.index,\n            // values: query.values\n        };\n    }\n    // FIXME: merge update caches on the client\n    async search(query, queryResultType, context) {\n        await this.ensureContext(context);\n        let observable = await this.transactionalConnector.search(this.getPortableQuery(query, queryResultType, context), context);\n        return observable;\n    }\n    async searchOne(query, queryResultType, context) {\n        await this.ensureContext(context);\n        let observable = await this.transactionalConnector.searchOne(this.getPortableQuery(query, queryResultType, context), context);\n        return observable;\n    }\n    async ensureContext(context) {\n    }\n};\n__decorate([\n    Inject()\n], QueryFacade.prototype, \"fieldUtils\", void 0);\n__decorate([\n    Inject()\n], QueryFacade.prototype, \"queryUtils\", void 0);\n__decorate([\n    Inject()\n], QueryFacade.prototype, \"relationManager\", void 0);\n__decorate([\n    Inject()\n], QueryFacade.prototype, \"transactionalConnector\", void 0);\nQueryFacade = __decorate([\n    Injected()\n], QueryFacade);\nexport { QueryFacade };\n//# sourceMappingURL=QueryFacade.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { abs, add, and, avg, bool, concat, count, date, distinct, divide, exists, format, intersect, lcase, len, max, mid, min, minus, modulus, multiply, NonEntityFind, NonEntityFindOne, NonEntitySearch, NonEntitySearchOne, not, now, num, or, replace, round, str, subtract, sum, trim, ucase, union, unionAll, wrapPrimitive, } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nclass EntityAccumulator {\n    constructor(applicationDomain, applicationName, entityMap) {\n        this.applicationDomain = applicationDomain;\n        this.applicationName = applicationName;\n        this.entityMap = entityMap;\n    }\n    add(clazz, index) {\n        this.entityMap.set(clazz, {\n            entity: {\n                index,\n                name: clazz.name,\n            },\n            application: {\n                domain: this.applicationDomain,\n                name: this.applicationName,\n            },\n        });\n    }\n}\nlet AirportDatabase = class AirportDatabase {\n    // private databaseMap: { [databaseName: string]: IDatabaseFacade } = {}\n    // private dbNames: string[]                                        = []\n    // private dbNameSet: { [databaseName: string]: boolean }           = {}\n    // private currentDbName = dbConst.DEFAULT_DB\n    constructor() {\n        this.entityMap = new Map();\n        this.functions = {\n            abs,\n            avg,\n            count,\n            max,\n            min,\n            sum,\n            ucase,\n            lcase,\n            mid,\n            len,\n            round,\n            now,\n            format,\n            replace,\n            trim,\n            distinct,\n            exists,\n            divide,\n            subtract,\n            modulus,\n            multiply,\n            add,\n            concat,\n            union,\n            unionAll,\n            intersect,\n            minus,\n            // logical operators\n            and,\n            not,\n            or,\n            // primitive wrappers\n            bool,\n            date,\n            num,\n            str,\n            wrapPrimitive,\n        };\n        this.applications = [];\n        this.qApplications = [];\n        this.QM = {};\n        this.S = this.applications;\n        this.Q = this.qApplications;\n        this.find = new NonEntityFind();\n        this.findOne = new NonEntityFindOne();\n        this.search = new NonEntitySearch();\n        this.searchOne = new NonEntitySearchOne();\n    }\n    /*\n        registerDatabase(\n            facade: IDatabaseFacade\n        ) {\n            if (!this.dbNameSet[facade.name]) {\n                this.dbNames.push(facade.name)\n            }\n            this.databaseMap[facade.name] = facade\n            this.dbNameSet[facade.name]   = true\n        }\n\n        async registerQApplications(\n            qApplications: QApplication[]\n        ) {\n            for (const qApplication of qApplications) {\n                const fullApplicationName    = getFullApplicationName(qApplication)\n                this.QM[fullApplicationName] = qApplication\n            }\n        }\n\n        setCurrentDb(\n            dbName: string = dbConst.DEFAULT_DB\n        ): void {\n            this.currentDbName = dbName\n        }\n\n        getDbNames(): string[] {\n            return this.dbNames\n        }\n\n        getDbNameSet(): { [databaseName: string]: boolean } {\n            return this.dbNameSet\n        }\n\n        get db(): IDatabaseFacade {\n            let database = this.databaseMap[this.currentDbName]\n            if (!database) {\n                throw new Error(`Did not find database '${this.currentDbName}'`)\n            }\n            return database\n        }\n    */\n    getAccumulator(applicationDomain, applicationName) {\n        return new EntityAccumulator(applicationDomain, applicationName, this.entityMap);\n    }\n    async addRepository(\n    // url: string,\n    // platform: PlatformType,\n    // platformConfig: string,\n    // distributionStrategy: DistributionStrategy,\n    context) {\n        return await this.databaseFacade.addRepository(\n        // url, platform, platformConfig, distributionStrategy, \n        context);\n    }\n    async insertColumnValues(rawInsertValues, context) {\n        return await this.databaseFacade.insertColumnValues(rawInsertValues, context);\n    }\n    async insertValues(rawInsertValues, context) {\n        return await this.databaseFacade.insertValues(rawInsertValues, context);\n    }\n    async insertColumnValuesGenerateIds(rawInsertValues, context) {\n        return await this.databaseFacade.insertColumnValuesGenerateIds(rawInsertValues, context);\n    }\n    async insertValuesGenerateIds(rawInsertValues, context) {\n        return await this.databaseFacade.insertValuesGenerateIds(rawInsertValues, context);\n    }\n    /**\n     * Creates an entity with a where clause - internal API.  Use the\n     *  API provided by the IEntityDatabaseFacade.\n     *\n     * @return Number of records deleted\n     */\n    async deleteWhere(rawDelete, context) {\n        return await this.databaseFacade.deleteWhere(rawDelete, context);\n    }\n    /**\n     * Ether creates or updates an entity - internal API.  Use the\n     *  API provided by the IEntityDatabaseFacade.\n     *\n     * @return Number of records saved (1 or 0)\n     */\n    async save(entity, context, operationName) {\n        return await this.databaseFacade.save(entity, context);\n    }\n    /**\n     * Updates an entity with a where clause, using a column based set clause\n     * - internal API.  Use the API provided by the IEntityDatabaseFacade.\n     *\n     * @return Number of records updated\n     */\n    async updateColumnsWhere(rawUpdateColumns, context) {\n        return await this.databaseFacade.updateColumnsWhere(rawUpdateColumns, context);\n    }\n    /**\n     * Updates an entity with a where clause, using a property based set clause\n     * - internal API.  Use the API provided by the IEntityDatabaseFacade.\n     *\n     * @return Number of records updated\n     */\n    async updateWhere(rawUpdate, context) {\n        return await this.databaseFacade.updateWhere(rawUpdate, context);\n    }\n};\n__decorate([\n    Inject()\n], AirportDatabase.prototype, \"databaseFacade\", void 0);\nAirportDatabase = __decorate([\n    Injected()\n], AirportDatabase);\nexport { AirportDatabase };\nexport function injectAirportDatabase() {\n    console.log('Injecting AirportDatabase');\n}\n//# sourceMappingURL=AirportDatabase.js.map","import { AIRPORT_DATABASE, DATABASE_FACADE, QUERY_FACADE, UPDATE_CACHE_MANAGER } from '@airport/air-traffic-control';\nimport { API_REGISTRY, API_VALIDATOR, OPERATION_DESERIALIZER } from '@airport/check-in';\nimport { DEPENDENCY_INJECTION, lib } from '@airport/direction-indicator';\nimport { ENTITY_STATE_MANAGER } from '@airport/ground-control';\nimport { LOCAL_API_SERVER } from '@airport/apron';\nimport { AirportDatabase } from './AirportDatabase';\nimport { ApiRegistry } from './core/api/ApiRegistry';\nimport { ApiValidator } from './core/api/ApiValidator';\nimport { LocalAPIServer } from './core/api/LocalApiServer';\nimport { OperationDeserializer } from './core/api/OperationDeserializer';\nimport { EntityCopier } from './core/data/EntityCopier';\nimport { UpdateCacheManager } from './core/data/UpdateCacheManager';\nimport { EntityStateManager } from './core/EntityStateManager';\nimport { DatabaseFacade } from './facade/DatabaseFacade';\nimport { QueryFacade } from './facade/QueryFacade';\nconst tower = lib('tower');\ntower.autopilot = false;\nexport const ENTITY_COPIER = tower.token({\n    class: EntityCopier,\n    interface: 'IEntityCopier',\n    token: 'ENTITY_COPIER'\n});\nDEPENDENCY_INJECTION.set(AIRPORT_DATABASE, AirportDatabase);\nDEPENDENCY_INJECTION.set(ENTITY_STATE_MANAGER, EntityStateManager);\nDEPENDENCY_INJECTION.set(API_REGISTRY, ApiRegistry);\nDEPENDENCY_INJECTION.set(API_VALIDATOR, ApiValidator);\nDEPENDENCY_INJECTION.set(LOCAL_API_SERVER, LocalAPIServer);\nDEPENDENCY_INJECTION.set(OPERATION_DESERIALIZER, OperationDeserializer);\nDEPENDENCY_INJECTION.set(UPDATE_CACHE_MANAGER, UpdateCacheManager);\nDEPENDENCY_INJECTION.set(DATABASE_FACADE, DatabaseFacade);\nDATABASE_FACADE.setDependencies({\n    entityCopier: ENTITY_COPIER,\n    queryFacade: QUERY_FACADE\n});\nDEPENDENCY_INJECTION.set(QUERY_FACADE, QueryFacade);\n//# sourceMappingURL=tokens.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isNode = exports.PROMISE_RESOLVED_VOID = exports.PROMISE_RESOLVED_TRUE = exports.PROMISE_RESOLVED_FALSE = void 0;\nexports.isPromise = isPromise;\nexports.microSeconds = microSeconds;\nexports.randomInt = randomInt;\nexports.randomToken = randomToken;\nexports.sleep = sleep;\n\n/**\n * returns true if the given object is a promise\n */\nfunction isPromise(obj) {\n  if (obj && typeof obj.then === 'function') {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nvar PROMISE_RESOLVED_FALSE = Promise.resolve(false);\nexports.PROMISE_RESOLVED_FALSE = PROMISE_RESOLVED_FALSE;\nvar PROMISE_RESOLVED_TRUE = Promise.resolve(true);\nexports.PROMISE_RESOLVED_TRUE = PROMISE_RESOLVED_TRUE;\nvar PROMISE_RESOLVED_VOID = Promise.resolve();\nexports.PROMISE_RESOLVED_VOID = PROMISE_RESOLVED_VOID;\n\nfunction sleep(time, resolveWith) {\n  if (!time) time = 0;\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      return res(resolveWith);\n    }, time);\n  });\n}\n\nfunction randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n/**\n * https://stackoverflow.com/a/8084248\n */\n\n\nfunction randomToken() {\n  return Math.random().toString(36).substring(2);\n}\n\nvar lastMs = 0;\nvar additional = 0;\n/**\n * returns the current time in micro-seconds,\n * WARNING: This is a pseudo-function\n * Performance.now is not reliable in webworkers, so we just make sure to never return the same time.\n * This is enough in browsers, and this function will not be used in nodejs.\n * The main reason for this hack is to ensure that BroadcastChannel behaves equal to production when it is used in fast-running unit tests.\n */\n\nfunction microSeconds() {\n  var ms = new Date().getTime();\n\n  if (ms === lastMs) {\n    additional++;\n    return ms * 1000 + additional;\n  } else {\n    lastMs = ms;\n    additional = 0;\n    return ms * 1000;\n  }\n}\n/**\n * copied from the 'detect-node' npm module\n * We cannot use the module directly because it causes problems with rollup\n * @link https://github.com/iliakan/detect-node/blob/master/index.js\n */\n\n\nvar isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\nexports.isNode = isNode;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.close = close;\nexports.create = create;\nexports.microSeconds = exports[\"default\"] = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.type = void 0;\n\nvar _util = require(\"../util\");\n\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar type = 'native';\nexports.type = type;\n\nfunction create(channelName) {\n  var state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n\n  };\n\n  state.bc.onmessage = function (msg) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data);\n    }\n  };\n\n  return state;\n}\n\nfunction close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\n\nfunction postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return _util.PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\n\nfunction onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\n\nfunction canBeUsed() {\n  /**\n   * in the electron-renderer, isNode will be true even if we are in browser-context\n   * so we also check if window is undefined\n   */\n  if (_util.isNode && typeof window === 'undefined') return false;\n\n  if (typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n\n    return true;\n  } else return false;\n}\n\nfunction averageResponseTime() {\n  return 150;\n}\n\nvar _default = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports[\"default\"] = _default;","/**\n * this is a set which automatically forgets\n * a given entry when a new entry is set and the ttl\n * of the old one is over\n */\nvar ObliviousSet = /** @class */ (function () {\n    function ObliviousSet(ttl) {\n        this.ttl = ttl;\n        this.set = new Set();\n        this.timeMap = new Map();\n    }\n    ObliviousSet.prototype.has = function (value) {\n        return this.set.has(value);\n    };\n    ObliviousSet.prototype.add = function (value) {\n        var _this = this;\n        this.timeMap.set(value, now());\n        this.set.add(value);\n        /**\n         * When a new value is added,\n         * start the cleanup at the next tick\n         * to not block the cpu for more important stuff\n         * that might happen.\n         */\n        setTimeout(function () {\n            removeTooOldValues(_this);\n        }, 0);\n    };\n    ObliviousSet.prototype.clear = function () {\n        this.set.clear();\n        this.timeMap.clear();\n    };\n    return ObliviousSet;\n}());\nexport { ObliviousSet };\n/**\n * Removes all entries from the set\n * where the TTL has expired\n */\nexport function removeTooOldValues(obliviousSet) {\n    var olderThen = now() - obliviousSet.ttl;\n    var iterator = obliviousSet.set[Symbol.iterator]();\n    /**\n     * Because we can assume the new values are added at the bottom,\n     * we start from the top and stop as soon as we reach a non-too-old value.\n     */\n    while (true) {\n        var value = iterator.next().value;\n        if (!value) {\n            return; // no more elements\n        }\n        var time = obliviousSet.timeMap.get(value);\n        if (time < olderThen) {\n            obliviousSet.timeMap.delete(value);\n            obliviousSet.set.delete(value);\n        }\n        else {\n            // We reached a value that is not old enough\n            return;\n        }\n    }\n}\nexport function now() {\n    return new Date().getTime();\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fillOptionsWithDefaults = fillOptionsWithDefaults;\n\nfunction fillOptionsWithDefaults() {\n  var originalOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = JSON.parse(JSON.stringify(originalOptions)); // main\n\n  if (typeof options.webWorkerSupport === 'undefined') options.webWorkerSupport = true; // indexed-db\n\n  if (!options.idb) options.idb = {}; //  after this time the messages get deleted\n\n  if (!options.idb.ttl) options.idb.ttl = 1000 * 45;\n  if (!options.idb.fallbackInterval) options.idb.fallbackInterval = 150; //  handles abrupt db onclose events.\n\n  if (originalOptions.idb && typeof originalOptions.idb.onclose === 'function') options.idb.onclose = originalOptions.idb.onclose; // localstorage\n\n  if (!options.localstorage) options.localstorage = {};\n  if (!options.localstorage.removeTimeout) options.localstorage.removeTimeout = 1000 * 60; // custom methods\n\n  if (originalOptions.methods) options.methods = originalOptions.methods; // node\n\n  if (!options.node) options.node = {};\n  if (!options.node.ttl) options.node.ttl = 1000 * 60 * 2; // 2 minutes;\n\n  /**\n   * On linux use 'ulimit -Hn' to get the limit of open files.\n   * On ubuntu this was 4096 for me, so we use half of that as maxParallelWrites default.\n   */\n\n  if (!options.node.maxParallelWrites) options.node.maxParallelWrites = 2048;\n  if (typeof options.node.useFastPath === 'undefined') options.node.useFastPath = true;\n  return options;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.cleanOldMessages = cleanOldMessages;\nexports.close = close;\nexports.create = create;\nexports.createDatabase = createDatabase;\nexports[\"default\"] = void 0;\nexports.getAllMessages = getAllMessages;\nexports.getIdb = getIdb;\nexports.getMessagesHigherThan = getMessagesHigherThan;\nexports.getOldMessages = getOldMessages;\nexports.microSeconds = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.removeMessageById = removeMessageById;\nexports.type = void 0;\nexports.writeMessage = writeMessage;\n\nvar _util = require(\"../util.js\");\n\nvar _obliviousSet = require(\"oblivious-set\");\n\nvar _options = require(\"../options\");\n\n/**\n * this method uses indexeddb to store the messages\n * There is currently no observerAPI for idb\n * @link https://github.com/w3c/IndexedDB/issues/51\n */\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar DB_PREFIX = 'pubkey.broadcast-channel-0-';\nvar OBJECT_STORE_ID = 'messages';\nvar type = 'idb';\nexports.type = type;\n\nfunction getIdb() {\n  if (typeof indexedDB !== 'undefined') return indexedDB;\n\n  if (typeof window !== 'undefined') {\n    if (typeof window.mozIndexedDB !== 'undefined') return window.mozIndexedDB;\n    if (typeof window.webkitIndexedDB !== 'undefined') return window.webkitIndexedDB;\n    if (typeof window.msIndexedDB !== 'undefined') return window.msIndexedDB;\n  }\n\n  return false;\n}\n\nfunction createDatabase(channelName) {\n  var IndexedDB = getIdb(); // create table\n\n  var dbName = DB_PREFIX + channelName;\n  var openRequest = IndexedDB.open(dbName, 1);\n\n  openRequest.onupgradeneeded = function (ev) {\n    var db = ev.target.result;\n    db.createObjectStore(OBJECT_STORE_ID, {\n      keyPath: 'id',\n      autoIncrement: true\n    });\n  };\n\n  var dbPromise = new Promise(function (res, rej) {\n    openRequest.onerror = function (ev) {\n      return rej(ev);\n    };\n\n    openRequest.onsuccess = function () {\n      res(openRequest.result);\n    };\n  });\n  return dbPromise;\n}\n/**\n * writes the new message to the database\n * so other readers can find it\n */\n\n\nfunction writeMessage(db, readerUuid, messageJson) {\n  var time = new Date().getTime();\n  var writeObject = {\n    uuid: readerUuid,\n    time: time,\n    data: messageJson\n  };\n  var transaction = db.transaction([OBJECT_STORE_ID], 'readwrite');\n  return new Promise(function (res, rej) {\n    transaction.oncomplete = function () {\n      return res();\n    };\n\n    transaction.onerror = function (ev) {\n      return rej(ev);\n    };\n\n    var objectStore = transaction.objectStore(OBJECT_STORE_ID);\n    objectStore.add(writeObject);\n  });\n}\n\nfunction getAllMessages(db) {\n  var objectStore = db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n\n      if (cursor) {\n        ret.push(cursor.value); //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n\n        cursor[\"continue\"]();\n      } else {\n        res(ret);\n      }\n    };\n  });\n}\n\nfunction getMessagesHigherThan(db, lastCursorId) {\n  var objectStore = db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);\n  var ret = [];\n\n  function openCursor() {\n    // Occasionally Safari will fail on IDBKeyRange.bound, this\n    // catches that error, having it open the cursor to the first\n    // item. When it gets data it will advance to the desired key.\n    try {\n      var keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n      return objectStore.openCursor(keyRangeValue);\n    } catch (e) {\n      return objectStore.openCursor();\n    }\n  }\n\n  return new Promise(function (res) {\n    openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n\n      if (cursor) {\n        if (cursor.value.id < lastCursorId + 1) {\n          cursor[\"continue\"](lastCursorId + 1);\n        } else {\n          ret.push(cursor.value);\n          cursor[\"continue\"]();\n        }\n      } else {\n        res(ret);\n      }\n    };\n  });\n}\n\nfunction removeMessageById(db, id) {\n  var request = db.transaction([OBJECT_STORE_ID], 'readwrite').objectStore(OBJECT_STORE_ID)[\"delete\"](id);\n  return new Promise(function (res) {\n    request.onsuccess = function () {\n      return res();\n    };\n  });\n}\n\nfunction getOldMessages(db, ttl) {\n  var olderThen = new Date().getTime() - ttl;\n  var objectStore = db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n\n      if (cursor) {\n        var msgObk = cursor.value;\n\n        if (msgObk.time < olderThen) {\n          ret.push(msgObk); //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n\n          cursor[\"continue\"]();\n        } else {\n          // no more old messages,\n          res(ret);\n          return;\n        }\n      } else {\n        res(ret);\n      }\n    };\n  });\n}\n\nfunction cleanOldMessages(db, ttl) {\n  return getOldMessages(db, ttl).then(function (tooOld) {\n    return Promise.all(tooOld.map(function (msgObj) {\n      return removeMessageById(db, msgObj.id);\n    }));\n  });\n}\n\nfunction create(channelName, options) {\n  options = (0, _options.fillOptionsWithDefaults)(options);\n  return createDatabase(channelName).then(function (db) {\n    var state = {\n      closed: false,\n      lastCursorId: 0,\n      channelName: channelName,\n      options: options,\n      uuid: (0, _util.randomToken)(),\n\n      /**\n       * emittedMessagesIds\n       * contains all messages that have been emitted before\n       * @type {ObliviousSet}\n       */\n      eMIs: new _obliviousSet.ObliviousSet(options.idb.ttl * 2),\n      // ensures we do not read messages in parrallel\n      writeBlockPromise: _util.PROMISE_RESOLVED_VOID,\n      messagesCallback: null,\n      readQueuePromises: [],\n      db: db\n    };\n    /**\n     * Handle abrupt closes that do not originate from db.close().\n     * This could happen, for example, if the underlying storage is\n     * removed or if the user clears the database in the browser's\n     * history preferences.\n     */\n\n    db.onclose = function () {\n      state.closed = true;\n      if (options.idb.onclose) options.idb.onclose();\n    };\n    /**\n     * if service-workers are used,\n     * we have no 'storage'-event if they post a message,\n     * therefore we also have to set an interval\n     */\n\n\n    _readLoop(state);\n\n    return state;\n  });\n}\n\nfunction _readLoop(state) {\n  if (state.closed) return;\n  readNewMessages(state).then(function () {\n    return (0, _util.sleep)(state.options.idb.fallbackInterval);\n  }).then(function () {\n    return _readLoop(state);\n  });\n}\n\nfunction _filterMessage(msgObj, state) {\n  if (msgObj.uuid === state.uuid) return false; // send by own\n\n  if (state.eMIs.has(msgObj.id)) return false; // already emitted\n\n  if (msgObj.data.time < state.messagesCallbackTime) return false; // older then onMessageCallback\n\n  return true;\n}\n/**\n * reads all new messages from the database and emits them\n */\n\n\nfunction readNewMessages(state) {\n  // channel already closed\n  if (state.closed) return _util.PROMISE_RESOLVED_VOID; // if no one is listening, we do not need to scan for new messages\n\n  if (!state.messagesCallback) return _util.PROMISE_RESOLVED_VOID;\n  return getMessagesHigherThan(state.db, state.lastCursorId).then(function (newerMessages) {\n    var useMessages = newerMessages\n    /**\n     * there is a bug in iOS where the msgObj can be undefined some times\n     * so we filter them out\n     * @link https://github.com/pubkey/broadcast-channel/issues/19\n     */\n    .filter(function (msgObj) {\n      return !!msgObj;\n    }).map(function (msgObj) {\n      if (msgObj.id > state.lastCursorId) {\n        state.lastCursorId = msgObj.id;\n      }\n\n      return msgObj;\n    }).filter(function (msgObj) {\n      return _filterMessage(msgObj, state);\n    }).sort(function (msgObjA, msgObjB) {\n      return msgObjA.time - msgObjB.time;\n    }); // sort by time\n\n    useMessages.forEach(function (msgObj) {\n      if (state.messagesCallback) {\n        state.eMIs.add(msgObj.id);\n        state.messagesCallback(msgObj.data);\n      }\n    });\n    return _util.PROMISE_RESOLVED_VOID;\n  });\n}\n\nfunction close(channelState) {\n  channelState.closed = true;\n  channelState.db.close();\n}\n\nfunction postMessage(channelState, messageJson) {\n  channelState.writeBlockPromise = channelState.writeBlockPromise.then(function () {\n    return writeMessage(channelState.db, channelState.uuid, messageJson);\n  }).then(function () {\n    if ((0, _util.randomInt)(0, 10) === 0) {\n      /* await (do not await) */\n      cleanOldMessages(channelState.db, channelState.options.idb.ttl);\n    }\n  });\n  return channelState.writeBlockPromise;\n}\n\nfunction onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n  readNewMessages(channelState);\n}\n\nfunction canBeUsed() {\n  if (_util.isNode) return false;\n  var idb = getIdb();\n  if (!idb) return false;\n  return true;\n}\n\nfunction averageResponseTime(options) {\n  return options.idb.fallbackInterval * 2;\n}\n\nvar _default = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addStorageEventListener = addStorageEventListener;\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.close = close;\nexports.create = create;\nexports[\"default\"] = void 0;\nexports.getLocalStorage = getLocalStorage;\nexports.microSeconds = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.removeStorageEventListener = removeStorageEventListener;\nexports.storageKey = storageKey;\nexports.type = void 0;\n\nvar _obliviousSet = require(\"oblivious-set\");\n\nvar _options = require(\"../options\");\n\nvar _util = require(\"../util\");\n\n/**\n * A localStorage-only method which uses localstorage and its 'storage'-event\n * This does not work inside of webworkers because they have no access to locastorage\n * This is basically implemented to support IE9 or your grandmothers toaster.\n * @link https://caniuse.com/#feat=namevalue-storage\n * @link https://caniuse.com/#feat=indexeddb\n */\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar KEY_PREFIX = 'pubkey.broadcastChannel-';\nvar type = 'localstorage';\n/**\n * copied from crosstab\n * @link https://github.com/tejacques/crosstab/blob/master/src/crosstab.js#L32\n */\n\nexports.type = type;\n\nfunction getLocalStorage() {\n  var localStorage;\n  if (typeof window === 'undefined') return null;\n\n  try {\n    localStorage = window.localStorage;\n    localStorage = window['ie8-eventlistener/storage'] || window.localStorage;\n  } catch (e) {// New versions of Firefox throw a Security exception\n    // if cookies are disabled. See\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1028153\n  }\n\n  return localStorage;\n}\n\nfunction storageKey(channelName) {\n  return KEY_PREFIX + channelName;\n}\n/**\n* writes the new message to the storage\n* and fires the storage-event so other readers can find it\n*/\n\n\nfunction postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    (0, _util.sleep)().then(function () {\n      var key = storageKey(channelState.channelName);\n      var writeObj = {\n        token: (0, _util.randomToken)(),\n        time: new Date().getTime(),\n        data: messageJson,\n        uuid: channelState.uuid\n      };\n      var value = JSON.stringify(writeObj);\n      getLocalStorage().setItem(key, value);\n      /**\n       * StorageEvent does not fire the 'storage' event\n       * in the window that changes the state of the local storage.\n       * So we fire it manually\n       */\n\n      var ev = document.createEvent('Event');\n      ev.initEvent('storage', true, true);\n      ev.key = key;\n      ev.newValue = value;\n      window.dispatchEvent(ev);\n      res();\n    });\n  });\n}\n\nfunction addStorageEventListener(channelName, fn) {\n  var key = storageKey(channelName);\n\n  var listener = function listener(ev) {\n    if (ev.key === key) {\n      fn(JSON.parse(ev.newValue));\n    }\n  };\n\n  window.addEventListener('storage', listener);\n  return listener;\n}\n\nfunction removeStorageEventListener(listener) {\n  window.removeEventListener('storage', listener);\n}\n\nfunction create(channelName, options) {\n  options = (0, _options.fillOptionsWithDefaults)(options);\n\n  if (!canBeUsed()) {\n    throw new Error('BroadcastChannel: localstorage cannot be used');\n  }\n\n  var uuid = (0, _util.randomToken)();\n  /**\n   * eMIs\n   * contains all messages that have been emitted before\n   * @type {ObliviousSet}\n   */\n\n  var eMIs = new _obliviousSet.ObliviousSet(options.localstorage.removeTimeout);\n  var state = {\n    channelName: channelName,\n    uuid: uuid,\n    eMIs: eMIs // emittedMessagesIds\n\n  };\n  state.listener = addStorageEventListener(channelName, function (msgObj) {\n    if (!state.messagesCallback) return; // no listener\n\n    if (msgObj.uuid === uuid) return; // own message\n\n    if (!msgObj.token || eMIs.has(msgObj.token)) return; // already emitted\n\n    if (msgObj.data.time && msgObj.data.time < state.messagesCallbackTime) return; // too old\n\n    eMIs.add(msgObj.token);\n    state.messagesCallback(msgObj.data);\n  });\n  return state;\n}\n\nfunction close(channelState) {\n  removeStorageEventListener(channelState.listener);\n}\n\nfunction onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n}\n\nfunction canBeUsed() {\n  if (_util.isNode) return false;\n  var ls = getLocalStorage();\n  if (!ls) return false;\n\n  try {\n    var key = '__broadcastchannel_check';\n    ls.setItem(key, 'works');\n    ls.removeItem(key);\n  } catch (e) {\n    // Safari 10 in private mode will not allow write access to local\n    // storage and fail with a QuotaExceededError. See\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API#Private_Browsing_Incognito_modes\n    return false;\n  }\n\n  return true;\n}\n\nfunction averageResponseTime() {\n  var defaultTime = 120;\n  var userAgent = navigator.userAgent.toLowerCase();\n\n  if (userAgent.includes('safari') && !userAgent.includes('chrome')) {\n    // safari is much slower so this time is higher\n    return defaultTime * 2;\n  }\n\n  return defaultTime;\n}\n\nvar _default = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.close = close;\nexports.create = create;\nexports.microSeconds = exports[\"default\"] = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.type = void 0;\n\nvar _util = require(\"../util\");\n\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar type = 'simulate';\nexports.type = type;\nvar SIMULATE_CHANNELS = new Set();\n\nfunction create(channelName) {\n  var state = {\n    name: channelName,\n    messagesCallback: null\n  };\n  SIMULATE_CHANNELS.add(state);\n  return state;\n}\n\nfunction close(channelState) {\n  SIMULATE_CHANNELS[\"delete\"](channelState);\n}\n\nfunction postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      var channelArray = Array.from(SIMULATE_CHANNELS);\n      channelArray.filter(function (channel) {\n        return channel.name === channelState.name;\n      }).filter(function (channel) {\n        return channel !== channelState;\n      }).filter(function (channel) {\n        return !!channel.messagesCallback;\n      }).forEach(function (channel) {\n        return channel.messagesCallback(messageJson);\n      });\n      res();\n    }, 5);\n  });\n}\n\nfunction onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\n\nfunction canBeUsed() {\n  return true;\n}\n\nfunction averageResponseTime() {\n  return 5;\n}\n\nvar _default = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.chooseMethod = chooseMethod;\n\nvar _native = _interopRequireDefault(require(\"./methods/native.js\"));\n\nvar _indexedDb = _interopRequireDefault(require(\"./methods/indexed-db.js\"));\n\nvar _localstorage = _interopRequireDefault(require(\"./methods/localstorage.js\"));\n\nvar _simulate = _interopRequireDefault(require(\"./methods/simulate.js\"));\n\n\n\nvar _util = require(\"./util\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// the line below will be removed from es5/browser builds\n// order is important\nvar METHODS = [_native[\"default\"], // fastest\n_indexedDb[\"default\"], _localstorage[\"default\"]];\n\nfunction chooseMethod(options) {\n  var chooseMethods = [].concat(options.methods, METHODS).filter(Boolean); // the line below will be removed from es5/browser builds\n\n\n\n  if (options.type) {\n    if (options.type === 'simulate') {\n      // only use simulate-method if directly chosen\n      return _simulate[\"default\"];\n    }\n\n    var ret = chooseMethods.find(function (m) {\n      return m.type === options.type;\n    });\n    if (!ret) throw new Error('method-type ' + options.type + ' not found');else return ret;\n  }\n  /**\n   * if no webworker support is needed,\n   * remove idb from the list so that localstorage is been chosen\n   */\n\n\n  if (!options.webWorkerSupport && !_util.isNode) {\n    chooseMethods = chooseMethods.filter(function (m) {\n      return m.type !== 'idb';\n    });\n  }\n\n  var useMethod = chooseMethods.find(function (method) {\n    return method.canBeUsed();\n  });\n  if (!useMethod) throw new Error(\"No useable method found in \" + JSON.stringify(METHODS.map(function (m) {\n    return m.type;\n  })));else return useMethod;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OPEN_BROADCAST_CHANNELS = exports.BroadcastChannel = void 0;\nexports.clearNodeFolder = clearNodeFolder;\nexports.enforceOptions = enforceOptions;\n\nvar _util = require(\"./util.js\");\n\nvar _methodChooser = require(\"./method-chooser.js\");\n\nvar _options = require(\"./options.js\");\n\n/**\n * Contains all open channels,\n * used in tests to ensure everything is closed.\n */\nvar OPEN_BROADCAST_CHANNELS = new Set();\nexports.OPEN_BROADCAST_CHANNELS = OPEN_BROADCAST_CHANNELS;\nvar lastId = 0;\n\nvar BroadcastChannel = function BroadcastChannel(name, options) {\n  // identifier of the channel to debug stuff\n  this.id = lastId++;\n  OPEN_BROADCAST_CHANNELS.add(this);\n  this.name = name;\n\n  if (ENFORCED_OPTIONS) {\n    options = ENFORCED_OPTIONS;\n  }\n\n  this.options = (0, _options.fillOptionsWithDefaults)(options);\n  this.method = (0, _methodChooser.chooseMethod)(this.options); // isListening\n\n  this._iL = false;\n  /**\n   * _onMessageListener\n   * setting onmessage twice,\n   * will overwrite the first listener\n   */\n\n  this._onML = null;\n  /**\n   * _addEventListeners\n   */\n\n  this._addEL = {\n    message: [],\n    internal: []\n  };\n  /**\n   * Unsend message promises\n   * where the sending is still in progress\n   * @type {Set<Promise>}\n   */\n\n  this._uMP = new Set();\n  /**\n   * _beforeClose\n   * array of promises that will be awaited\n   * before the channel is closed\n   */\n\n  this._befC = [];\n  /**\n   * _preparePromise\n   */\n\n  this._prepP = null;\n\n  _prepareChannel(this);\n}; // STATICS\n\n/**\n * used to identify if someone overwrites\n * window.BroadcastChannel with this\n * See methods/native.js\n */\n\n\nexports.BroadcastChannel = BroadcastChannel;\nBroadcastChannel._pubkey = true;\n/**\n * clears the tmp-folder if is node\n * @return {Promise<boolean>} true if has run, false if not node\n */\n\nfunction clearNodeFolder(options) {\n  options = (0, _options.fillOptionsWithDefaults)(options);\n  var method = (0, _methodChooser.chooseMethod)(options);\n\n  if (method.type === 'node') {\n    return method.clearNodeFolder().then(function () {\n      return true;\n    });\n  } else {\n    return _util.PROMISE_RESOLVED_FALSE;\n  }\n}\n/**\n * if set, this method is enforced,\n * no mather what the options are\n */\n\n\nvar ENFORCED_OPTIONS;\n\nfunction enforceOptions(options) {\n  ENFORCED_OPTIONS = options;\n} // PROTOTYPE\n\n\nBroadcastChannel.prototype = {\n  postMessage: function postMessage(msg) {\n    if (this.closed) {\n      throw new Error('BroadcastChannel.postMessage(): ' + 'Cannot post message after channel has closed');\n    }\n\n    return _post(this, 'message', msg);\n  },\n  postInternal: function postInternal(msg) {\n    return _post(this, 'internal', msg);\n  },\n\n  set onmessage(fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n\n    _removeListenerObject(this, 'message', this._onML);\n\n    if (fn && typeof fn === 'function') {\n      this._onML = listenObj;\n\n      _addListenerObject(this, 'message', listenObj);\n    } else {\n      this._onML = null;\n    }\n  },\n\n  addEventListener: function addEventListener(type, fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n\n    _addListenerObject(this, type, listenObj);\n  },\n  removeEventListener: function removeEventListener(type, fn) {\n    var obj = this._addEL[type].find(function (obj) {\n      return obj.fn === fn;\n    });\n\n    _removeListenerObject(this, type, obj);\n  },\n  close: function close() {\n    var _this = this;\n\n    if (this.closed) {\n      return;\n    }\n\n    OPEN_BROADCAST_CHANNELS[\"delete\"](this);\n    this.closed = true;\n    var awaitPrepare = this._prepP ? this._prepP : _util.PROMISE_RESOLVED_VOID;\n    this._onML = null;\n    this._addEL.message = [];\n    return awaitPrepare // wait until all current sending are processed\n    .then(function () {\n      return Promise.all(Array.from(_this._uMP));\n    }) // run before-close hooks\n    .then(function () {\n      return Promise.all(_this._befC.map(function (fn) {\n        return fn();\n      }));\n    }) // close the channel\n    .then(function () {\n      return _this.method.close(_this._state);\n    });\n  },\n\n  get type() {\n    return this.method.type;\n  },\n\n  get isClosed() {\n    return this.closed;\n  }\n\n};\n/**\n * Post a message over the channel\n * @returns {Promise} that resolved when the message sending is done\n */\n\nfunction _post(broadcastChannel, type, msg) {\n  var time = broadcastChannel.method.microSeconds();\n  var msgObj = {\n    time: time,\n    type: type,\n    data: msg\n  };\n  var awaitPrepare = broadcastChannel._prepP ? broadcastChannel._prepP : _util.PROMISE_RESOLVED_VOID;\n  return awaitPrepare.then(function () {\n    var sendPromise = broadcastChannel.method.postMessage(broadcastChannel._state, msgObj); // add/remove to unsend messages list\n\n    broadcastChannel._uMP.add(sendPromise);\n\n    sendPromise[\"catch\"]().then(function () {\n      return broadcastChannel._uMP[\"delete\"](sendPromise);\n    });\n    return sendPromise;\n  });\n}\n\nfunction _prepareChannel(channel) {\n  var maybePromise = channel.method.create(channel.name, channel.options);\n\n  if ((0, _util.isPromise)(maybePromise)) {\n    channel._prepP = maybePromise;\n    maybePromise.then(function (s) {\n      // used in tests to simulate slow runtime\n\n      /*if (channel.options.prepareDelay) {\n           await new Promise(res => setTimeout(res, this.options.prepareDelay));\n      }*/\n      channel._state = s;\n    });\n  } else {\n    channel._state = maybePromise;\n  }\n}\n\nfunction _hasMessageListeners(channel) {\n  if (channel._addEL.message.length > 0) return true;\n  if (channel._addEL.internal.length > 0) return true;\n  return false;\n}\n\nfunction _addListenerObject(channel, type, obj) {\n  channel._addEL[type].push(obj);\n\n  _startListening(channel);\n}\n\nfunction _removeListenerObject(channel, type, obj) {\n  channel._addEL[type] = channel._addEL[type].filter(function (o) {\n    return o !== obj;\n  });\n\n  _stopListening(channel);\n}\n\nfunction _startListening(channel) {\n  if (!channel._iL && _hasMessageListeners(channel)) {\n    // someone is listening, start subscribing\n    var listenerFn = function listenerFn(msgObj) {\n      channel._addEL[msgObj.type].forEach(function (listenerObject) {\n        /**\n         * Getting the current time in JavaScript has no good precision.\n         * So instead of only listening to events that happend 'after' the listener\n         * was added, we also listen to events that happended 100ms before it.\n         * This ensures that when another process, like a WebWorker, sends events\n         * we do not miss them out because their timestamp is a bit off compared to the main process.\n         * Not doing this would make messages missing when we send data directly after subscribing and awaiting a response.\n         * @link https://johnresig.com/blog/accuracy-of-javascript-time/\n         */\n        var hundredMsInMicro = 100 * 1000;\n        var minMessageTime = listenerObject.time - hundredMsInMicro;\n\n        if (msgObj.time >= minMessageTime) {\n          listenerObject.fn(msgObj.data);\n        }\n      });\n    };\n\n    var time = channel.method.microSeconds();\n\n    if (channel._prepP) {\n      channel._prepP.then(function () {\n        channel._iL = true;\n        channel.method.onMessage(channel._state, listenerFn, time);\n      });\n    } else {\n      channel._iL = true;\n      channel.method.onMessage(channel._state, listenerFn, time);\n    }\n  }\n}\n\nfunction _stopListening(channel) {\n  if (channel._iL && !_hasMessageListeners(channel)) {\n    // noone is listening, stop subscribing\n    channel._iL = false;\n    var time = channel.method.microSeconds();\n    channel.method.onMessage(channel._state, null, time);\n  }\n}","/* global WorkerGlobalScope */\nfunction add(fn) {\n  if (typeof WorkerGlobalScope === 'function' && self instanceof WorkerGlobalScope) {// this is run inside of a webworker\n  } else {\n    /**\n     * if we are on react-native, there is no window.addEventListener\n     * @link https://github.com/pubkey/unload/issues/6\n     */\n    if (typeof window.addEventListener !== 'function') return;\n    /**\n     * for normal browser-windows, we use the beforeunload-event\n     */\n\n    window.addEventListener('beforeunload', function () {\n      fn();\n    }, true);\n    /**\n     * for iframes, we have to use the unload-event\n     * @link https://stackoverflow.com/q/47533670/3443137\n     */\n\n    window.addEventListener('unload', function () {\n      fn();\n    }, true);\n  }\n  /**\n   * TODO add fallback for safari-mobile\n   * @link https://stackoverflow.com/a/26193516/3443137\n   */\n\n}\n\nexport default {\n  add: add\n};","import isNode from 'detect-node';\nimport BrowserMethod from './browser.js';\nimport NodeMethod from './node.js';\nvar USE_METHOD = isNode ? NodeMethod : BrowserMethod;\nvar LISTENERS = new Set();\nvar startedListening = false;\n\nfunction startListening() {\n  if (startedListening) return;\n  startedListening = true;\n  USE_METHOD.add(runAll);\n}\n\nexport function add(fn) {\n  startListening();\n  if (typeof fn !== 'function') throw new Error('Listener is no function');\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\nexport function runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\nexport function removeAll() {\n  LISTENERS.clear();\n}\nexport function getSize() {\n  return LISTENERS.size;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.beLeader = beLeader;\nexports.createLeaderElection = createLeaderElection;\n\nvar _util = require(\"./util.js\");\n\nvar _unload = require(\"unload\");\n\nvar LeaderElection = function LeaderElection(broadcastChannel, options) {\n  var _this = this;\n\n  this.broadcastChannel = broadcastChannel;\n  this._options = options;\n  this.isLeader = false;\n  this.hasLeader = false;\n  this.isDead = false;\n  this.token = (0, _util.randomToken)();\n  /**\n   * Apply Queue,\n   * used to ensure we do not run applyOnce()\n   * in parallel.\n   */\n\n  this._aplQ = _util.PROMISE_RESOLVED_VOID; // amount of unfinished applyOnce() calls\n\n  this._aplQC = 0; // things to clean up\n\n  this._unl = []; // _unloads\n\n  this._lstns = []; // _listeners\n\n  this._dpL = function () {}; // onduplicate listener\n\n\n  this._dpLC = false; // true when onduplicate called\n\n  /**\n   * Even when the own instance is not applying,\n   * we still listen to messages to ensure the hasLeader flag\n   * is set correctly.\n   */\n\n  var hasLeaderListener = function hasLeaderListener(msg) {\n    if (msg.context === 'leader') {\n      if (msg.action === 'death') {\n        _this.hasLeader = false;\n      }\n\n      if (msg.action === 'tell') {\n        _this.hasLeader = true;\n      }\n    }\n  };\n\n  this.broadcastChannel.addEventListener('internal', hasLeaderListener);\n\n  this._lstns.push(hasLeaderListener);\n};\n\nLeaderElection.prototype = {\n  /**\n   * Returns true if the instance is leader,\n   * false if not.\n   * @async\n   */\n  applyOnce: function applyOnce( // true if the applyOnce() call came from the fallbackInterval cycle\n  isFromFallbackInterval) {\n    var _this2 = this;\n\n    if (this.isLeader) {\n      return (0, _util.sleep)(0, true);\n    }\n\n    if (this.isDead) {\n      return (0, _util.sleep)(0, false);\n    }\n    /**\n     * Already applying more then once,\n     * -> wait for the apply queue to be finished.\n     */\n\n\n    if (this._aplQC > 1) {\n      return this._aplQ;\n    }\n    /**\n     * Add a new apply-run\n     */\n\n\n    var applyRun = function applyRun() {\n      /**\n       * Optimization shortcuts.\n       * Directly return if a previous run\n       * has already elected a leader.\n       */\n      if (_this2.isLeader) {\n        return _util.PROMISE_RESOLVED_TRUE;\n      }\n\n      var stopCriteria = false;\n      var stopCriteriaPromiseResolve;\n      /**\n       * Resolves when a stop criteria is reached.\n       * Uses as a performance shortcut so we do not\n       * have to await the responseTime when it is already clear\n       * that the election failed.\n       */\n\n      var stopCriteriaPromise = new Promise(function (res) {\n        stopCriteriaPromiseResolve = function stopCriteriaPromiseResolve() {\n          stopCriteria = true;\n          res();\n        };\n      });\n      var recieved = [];\n\n      var handleMessage = function handleMessage(msg) {\n        if (msg.context === 'leader' && msg.token != _this2.token) {\n          recieved.push(msg);\n\n          if (msg.action === 'apply') {\n            // other is applying\n            if (msg.token > _this2.token) {\n              /**\n               * other has higher token\n               * -> stop applying and let other become leader.\n               */\n              stopCriteriaPromiseResolve();\n            }\n          }\n\n          if (msg.action === 'tell') {\n            // other is already leader\n            stopCriteriaPromiseResolve();\n            _this2.hasLeader = true;\n          }\n        }\n      };\n\n      _this2.broadcastChannel.addEventListener('internal', handleMessage);\n      /**\n       * If the applyOnce() call came from the fallbackInterval,\n       * we can assume that the election runs in the background and\n       * not critical process is waiting for it.\n       * When this is true, we give the other intances\n       * more time to answer to messages in the election cycle.\n       * This makes it less likely to elect duplicate leaders.\n       * But also it takes longer which is not a problem because we anyway\n       * run in the background.\n       */\n\n\n      var waitForAnswerTime = isFromFallbackInterval ? _this2._options.responseTime * 4 : _this2._options.responseTime;\n\n      var applyPromise = _sendMessage(_this2, 'apply') // send out that this one is applying\n      .then(function () {\n        return Promise.race([(0, _util.sleep)(waitForAnswerTime), stopCriteriaPromise.then(function () {\n          return Promise.reject(new Error());\n        })]);\n      }) // send again in case another instance was just created\n      .then(function () {\n        return _sendMessage(_this2, 'apply');\n      }) // let others time to respond\n      .then(function () {\n        return Promise.race([(0, _util.sleep)(waitForAnswerTime), stopCriteriaPromise.then(function () {\n          return Promise.reject(new Error());\n        })]);\n      })[\"catch\"](function () {}).then(function () {\n        _this2.broadcastChannel.removeEventListener('internal', handleMessage);\n\n        if (!stopCriteria) {\n          // no stop criteria -> own is leader\n          return beLeader(_this2).then(function () {\n            return true;\n          });\n        } else {\n          // other is leader\n          return false;\n        }\n      });\n\n      return applyPromise;\n    };\n\n    this._aplQC = this._aplQC + 1;\n    this._aplQ = this._aplQ.then(function () {\n      return applyRun();\n    }).then(function () {\n      _this2._aplQC = _this2._aplQC - 1;\n    });\n    return this._aplQ.then(function () {\n      return _this2.isLeader;\n    });\n  },\n  awaitLeadership: function awaitLeadership() {\n    if (\n    /* _awaitLeadershipPromise */\n    !this._aLP) {\n      this._aLP = _awaitLeadershipOnce(this);\n    }\n\n    return this._aLP;\n  },\n\n  set onduplicate(fn) {\n    this._dpL = fn;\n  },\n\n  die: function die() {\n    var _this3 = this;\n\n    this._lstns.forEach(function (listener) {\n      return _this3.broadcastChannel.removeEventListener('internal', listener);\n    });\n\n    this._lstns = [];\n\n    this._unl.forEach(function (uFn) {\n      return uFn.remove();\n    });\n\n    this._unl = [];\n\n    if (this.isLeader) {\n      this.hasLeader = false;\n      this.isLeader = false;\n    }\n\n    this.isDead = true;\n    return _sendMessage(this, 'death');\n  }\n};\n/**\n * @param leaderElector {LeaderElector}\n */\n\nfunction _awaitLeadershipOnce(leaderElector) {\n  if (leaderElector.isLeader) {\n    return _util.PROMISE_RESOLVED_VOID;\n  }\n\n  return new Promise(function (res) {\n    var resolved = false;\n\n    function finish() {\n      if (resolved) {\n        return;\n      }\n\n      resolved = true;\n      leaderElector.broadcastChannel.removeEventListener('internal', whenDeathListener);\n      res(true);\n    } // try once now\n\n\n    leaderElector.applyOnce().then(function () {\n      if (leaderElector.isLeader) {\n        finish();\n      }\n    });\n    /**\n     * Try on fallbackInterval\n     * @recursive\n     */\n\n    var tryOnFallBack = function tryOnFallBack() {\n      return (0, _util.sleep)(leaderElector._options.fallbackInterval).then(function () {\n        if (leaderElector.isDead || resolved) {\n          return;\n        }\n\n        if (leaderElector.isLeader) {\n          finish();\n        } else {\n          return leaderElector.applyOnce(true).then(function () {\n            if (leaderElector.isLeader) {\n              finish();\n            } else {\n              tryOnFallBack();\n            }\n          });\n        }\n      });\n    };\n\n    tryOnFallBack(); // try when other leader dies\n\n    var whenDeathListener = function whenDeathListener(msg) {\n      if (msg.context === 'leader' && msg.action === 'death') {\n        leaderElector.hasLeader = false;\n        leaderElector.applyOnce().then(function () {\n          if (leaderElector.isLeader) {\n            finish();\n          }\n        });\n      }\n    };\n\n    leaderElector.broadcastChannel.addEventListener('internal', whenDeathListener);\n\n    leaderElector._lstns.push(whenDeathListener);\n  });\n}\n/**\n * sends and internal message over the broadcast-channel\n */\n\n\nfunction _sendMessage(leaderElector, action) {\n  var msgJson = {\n    context: 'leader',\n    action: action,\n    token: leaderElector.token\n  };\n  return leaderElector.broadcastChannel.postInternal(msgJson);\n}\n\nfunction beLeader(leaderElector) {\n  leaderElector.isLeader = true;\n  leaderElector.hasLeader = true;\n  var unloadFn = (0, _unload.add)(function () {\n    return leaderElector.die();\n  });\n\n  leaderElector._unl.push(unloadFn);\n\n  var isLeaderListener = function isLeaderListener(msg) {\n    if (msg.context === 'leader' && msg.action === 'apply') {\n      _sendMessage(leaderElector, 'tell');\n    }\n\n    if (msg.context === 'leader' && msg.action === 'tell' && !leaderElector._dpLC) {\n      /**\n       * another instance is also leader!\n       * This can happen on rare events\n       * like when the CPU is at 100% for long time\n       * or the tabs are open very long and the browser throttles them.\n       * @link https://github.com/pubkey/broadcast-channel/issues/414\n       * @link https://github.com/pubkey/broadcast-channel/issues/385\n       */\n      leaderElector._dpLC = true;\n\n      leaderElector._dpL(); // message the lib user so the app can handle the problem\n\n\n      _sendMessage(leaderElector, 'tell'); // ensure other leader also knows the problem\n\n    }\n  };\n\n  leaderElector.broadcastChannel.addEventListener('internal', isLeaderListener);\n\n  leaderElector._lstns.push(isLeaderListener);\n\n  return _sendMessage(leaderElector, 'tell');\n}\n\nfunction fillOptionsWithDefaults(options, channel) {\n  if (!options) options = {};\n  options = JSON.parse(JSON.stringify(options));\n\n  if (!options.fallbackInterval) {\n    options.fallbackInterval = 3000;\n  }\n\n  if (!options.responseTime) {\n    options.responseTime = channel.method.averageResponseTime(channel.options);\n  }\n\n  return options;\n}\n\nfunction createLeaderElection(channel, options) {\n  if (channel._leaderElector) {\n    throw new Error('BroadcastChannel already has a leader-elector');\n  }\n\n  options = fillOptionsWithDefaults(options, channel);\n  var elector = new LeaderElection(channel, options);\n\n  channel._befC.push(function () {\n    return elector.die();\n  });\n\n  channel._leaderElector = elector;\n  return elector;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"BroadcastChannel\", {\n  enumerable: true,\n  get: function get() {\n    return _broadcastChannel.BroadcastChannel;\n  }\n});\nObject.defineProperty(exports, \"OPEN_BROADCAST_CHANNELS\", {\n  enumerable: true,\n  get: function get() {\n    return _broadcastChannel.OPEN_BROADCAST_CHANNELS;\n  }\n});\nObject.defineProperty(exports, \"beLeader\", {\n  enumerable: true,\n  get: function get() {\n    return _leaderElection.beLeader;\n  }\n});\nObject.defineProperty(exports, \"clearNodeFolder\", {\n  enumerable: true,\n  get: function get() {\n    return _broadcastChannel.clearNodeFolder;\n  }\n});\nObject.defineProperty(exports, \"createLeaderElection\", {\n  enumerable: true,\n  get: function get() {\n    return _leaderElection.createLeaderElection;\n  }\n});\nObject.defineProperty(exports, \"enforceOptions\", {\n  enumerable: true,\n  get: function get() {\n    return _broadcastChannel.enforceOptions;\n  }\n});\n\nvar _broadcastChannel = require(\"./broadcast-channel\");\n\nvar _leaderElection = require(\"./leader-election\");","\"use strict\";\n\nvar _index = require(\"./index.js\");\n\n/**\n * because babel can only export on default-attribute,\n * we use this for the non-module-build\n * this ensures that users do not have to use\n * var BroadcastChannel = require('broadcast-channel').default;\n * but\n * var BroadcastChannel = require('broadcast-channel');\n */\nmodule.exports = {\n  BroadcastChannel: _index.BroadcastChannel,\n  createLeaderElection: _index.createLeaderElection,\n  clearNodeFolder: _index.clearNodeFolder,\n  enforceOptions: _index.enforceOptions,\n  beLeader: _index.beLeader\n};","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { IOC } from \"@airport/direction-indicator\";\nimport { TERMINAL_STORE } from \"@airport/terminal-map\";\nimport { BroadcastChannel as SoftBroadcastChannel } from '../node_modules/broadcast-channel/dist/lib/index.es5';\nlet WebMesageReceiver = class WebMesageReceiver {\n    constructor() {\n        this.isNativeBroadcastChannel = typeof BroadcastChannel === 'function';\n        const createChannel = () => {\n            this.communicationChannel = new SoftBroadcastChannel('clientCommunication', {\n                idb: {\n                    onclose: () => {\n                        // the onclose event is just the IndexedDB closing.\n                        // you should also close the channel before creating\n                        // a new one.\n                        this.communicationChannel.close();\n                        createChannel();\n                    },\n                },\n            });\n            this.communicationChannel.onmessage = (message) => {\n                this.transactionalReceiver.handleClientRequest(message);\n            };\n        };\n        createChannel();\n        window.addEventListener(\"message\", event => {\n            const message = event.data;\n            this.transactionalReceiver.handleAppRequest(message, event.origin, event.source);\n        }, false);\n    }\n    needMessageSerialization() {\n        return !this.isNativeBroadcastChannel;\n    }\n    sendMessageToClient(message) {\n        this.communicationChannel.postMessage(message);\n    }\n    sendMessageToApp() {\n    }\n};\n__decorate([\n    Inject()\n], WebMesageReceiver.prototype, \"terminalStore\", void 0);\n__decorate([\n    Inject()\n], WebMesageReceiver.prototype, \"transactionalReceiver\", void 0);\nWebMesageReceiver = __decorate([\n    Injected()\n], WebMesageReceiver);\nexport { WebMesageReceiver };\nexport function injectWebReceiver() {\n    const terminalStore = IOC.getSync(TERMINAL_STORE);\n    const webReciever = terminalStore.getWebReceiver();\n    webReciever.localDomain = 'localhost:31717';\n}\n//# sourceMappingURL=WebMessageReceiver.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nlet DomainRetriever = class DomainRetriever {\n    async retrieveDomain(domainName, domainNameMapByName, allDomains, newDomains) {\n        return domainNameMapByName.get(domainName);\n    }\n};\nDomainRetriever = __decorate([\n    Injected()\n], DomainRetriever);\nexport { DomainRetriever };\n//# sourceMappingURL=DomainRetriever.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { EntityRelationType, getFullApplicationNameFromDomainAndName, QueryType, } from '@airport/ground-control';\nlet SqlApplicationBuilder = class SqlApplicationBuilder {\n    async build(jsonApplication, existingApplicationMap, newJsonApplicationMap, context) {\n        await this.createApplication(jsonApplication, context);\n        for (const jsonEntity of jsonApplication.versions[jsonApplication.versions.length - 1].entities) {\n            await this.buildTable(jsonApplication, jsonEntity, existingApplicationMap, context);\n        }\n        const relatedJsonApplicationMap = new Map();\n        for (const jsonEntity of jsonApplication.versions[jsonApplication.versions.length - 1].entities) {\n            await this.buildForeignKeys(jsonApplication, jsonEntity, existingApplicationMap, newJsonApplicationMap, relatedJsonApplicationMap, context);\n        }\n    }\n    async buildTable(jsonApplication, jsonEntity, existingApplicationMap, context) {\n        const primaryKeyColumnNames = [];\n        const tableColumnsDdl = jsonEntity.columns.map((jsonColumn) => {\n            let columnDdl = `${jsonColumn.name} ${this.getColumnSuffix(jsonApplication, jsonEntity, jsonColumn)}`;\n            if (this.isPrimaryKeyColumn(jsonEntity, jsonColumn)) {\n                primaryKeyColumnNames.push(jsonColumn.name);\n            }\n            return columnDdl;\n        });\n        const createTableSuffix = this.getCreateTableSuffix(jsonApplication, jsonEntity);\n        const tableName = this.storeDriver.getTableName(jsonApplication, jsonEntity, context);\n        let primaryKeySubStatement = ``;\n        if (primaryKeyColumnNames.length) {\n            primaryKeySubStatement = this.getPrimaryKeyStatement(primaryKeyColumnNames);\n        }\n        const createTableDdl = `CREATE TABLE ${tableName} (\r\n\t\t${tableColumnsDdl.join(',\\n')}${primaryKeySubStatement}\r\n\t\t)${createTableSuffix}`;\n        await this.storeDriver.query(QueryType.DDL, createTableDdl, [], context, false);\n        let indexNumber = 0;\n        if (jsonEntity.tableConfig.columnIndexes) {\n            for (const indexConfig of jsonEntity.tableConfig.columnIndexes) {\n                const createIndexDdl = this.getIndexSql('idx_' + tableName + '_' + (++indexNumber), tableName, indexConfig.columnList, indexConfig.unique);\n                await this.storeDriver.query(QueryType.DDL, createIndexDdl, [], context, false);\n            }\n        }\n        if (jsonEntity.tableConfig.propertyIndexes) {\n            for (const indexConfig of jsonEntity.tableConfig.propertyIndexes) {\n                const columnNameList = [];\n                for (const jsonColumn of jsonEntity.columns) {\n                    for (const propertyRef of jsonColumn.propertyRefs) {\n                        if (propertyRef.index === indexConfig.propertyIndex) {\n                            columnNameList.push(jsonColumn.name);\n                            break;\n                        }\n                    }\n                }\n                const createIndexDdl = this.getIndexSql('idx_' + tableName + '_' + (++indexNumber), tableName, columnNameList, indexConfig.unique);\n                await this.storeDriver.query(QueryType.DDL, createIndexDdl, [], context, false);\n            }\n        }\n        //\n    }\n    async buildForeignKeys(jsonApplication, jsonEntity, existingApplicationMap, newJsonApplicationMap, relatedJsonApplicationMap, context) {\n        if (!jsonEntity.relations || !jsonEntity.relations.length) {\n            return;\n        }\n        const applicationVersion = jsonApplication.versions[jsonApplication.versions.length - 1];\n        const tableName = this.storeDriver.getTableName(jsonApplication, jsonEntity, context);\n        let foreignKeyNumber = 0;\n        for (const jsonRelation of jsonEntity.relations) {\n            if (jsonRelation.relationType !== EntityRelationType.MANY_TO_ONE) {\n                continue;\n            }\n            let relatedJsonApplication;\n            let relatedJsonEntity;\n            if (jsonRelation.relationTableApplicationIndex\n                || jsonRelation.relationTableApplicationIndex === 0) {\n                const referencedApplication = applicationVersion\n                    .referencedApplications[jsonRelation.relationTableApplicationIndex];\n                let relatedFullApplicationName = getFullApplicationNameFromDomainAndName(referencedApplication.domain, referencedApplication.name);\n                relatedJsonApplication = relatedJsonApplicationMap.get(relatedFullApplicationName);\n                if (!relatedJsonApplication) {\n                    const relatedApplication = existingApplicationMap.get(relatedFullApplicationName);\n                    if (relatedApplication) {\n                        // FIXME: this should be looked up though currentVersion - make sure it's populated\n                        // relatedJsonApplication = relatedApplication.currentVersion[0].applicationVersion.jsonApplication\n                        relatedJsonApplication = relatedApplication.versions[0].jsonApplication;\n                    }\n                    else {\n                        relatedJsonApplication = newJsonApplicationMap.get(relatedFullApplicationName);\n                    }\n                    if (!relatedJsonApplication) {\n                        throw new Error(`Could not find related application ${relatedFullApplicationName}\r\n            in either existing applications or newly installing applications.`);\n                    }\n                    relatedJsonApplicationMap.set(relatedFullApplicationName, relatedJsonApplication);\n                }\n                const relatedApplicationVersion = relatedJsonApplication\n                    .versions[relatedJsonApplication.versions.length - 1];\n                relatedJsonEntity = relatedApplicationVersion.entities[jsonRelation.relationTableIndex];\n            }\n            else {\n                relatedJsonApplication = jsonApplication;\n                relatedJsonEntity = applicationVersion.entities[jsonRelation.relationTableIndex];\n            }\n            let foreignKeyColumnNames = [];\n            for (const jsonColumn of jsonEntity.columns) {\n                for (const propertyRef of jsonColumn.propertyRefs) {\n                    if (propertyRef.index === jsonRelation.propertyRef.index) {\n                        foreignKeyColumnNames.push(jsonColumn.name);\n                        break;\n                    }\n                }\n            }\n            const referencedTableName = this.storeDriver\n                .getTableName(relatedJsonApplication, relatedJsonEntity, context);\n            let referencedColumnNames = [];\n            for (const relatedIdColumnRef of relatedJsonEntity.idColumnRefs) {\n                referencedColumnNames.push(relatedJsonEntity.columns[relatedIdColumnRef.index].name);\n            }\n            const foreignKeySql = this.getForeignKeySql(tableName, 'fk_' + tableName + '_foreignKeyNumber', foreignKeyColumnNames, referencedTableName, referencedColumnNames);\n            if (foreignKeySql) {\n                await this.storeDriver.query(QueryType.DDL, foreignKeySql, [], context, false);\n            }\n        }\n    }\n    async buildForeignKeysForTable() {\n    }\n    isPrimaryKeyColumn(jsonEntity, jsonColumn) {\n        return jsonColumn.propertyRefs.some((propertyRef) => {\n            const jsonProperty = jsonEntity.properties[propertyRef.index];\n            if (jsonProperty.isId) {\n                return true;\n            }\n        });\n    }\n    /*\n    protected abstract isForeignKey(\n      jsonEntity: JsonApplicationEntity,\n      jsonColumn: JsonApplicationColumn\n    ): boolean\n    */\n    getPrimaryKeyStatement(columnNames) {\n        return `,\r\n\t\t\tPRIMARY KEY (\r\n\t\t\t${columnNames.join(',\\n')}\r\n\t\t\t)`;\n    }\n};\n__decorate([\n    Inject()\n], SqlApplicationBuilder.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], SqlApplicationBuilder.prototype, \"sequenceDao\", void 0);\n__decorate([\n    Inject()\n], SqlApplicationBuilder.prototype, \"storeDriver\", void 0);\nSqlApplicationBuilder = __decorate([\n    Injected()\n], SqlApplicationBuilder);\nexport { SqlApplicationBuilder };\n//# sourceMappingURL=SqlApplicationBuilder.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ensureChildJsMap, getFullApplicationName, } from '@airport/ground-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet ApplicationChecker = class ApplicationChecker {\n    async check(jsonApplication) {\n        if (!jsonApplication) {\n            throw new Error(`Json Application not provided`);\n        }\n        if (!(jsonApplication.versions instanceof Array)) {\n            throw new Error('application.versions is not an array');\n        }\n        if (jsonApplication.versions.length !== 1) {\n            // FIXME: add support for application versioning\n            throw new Error('Currently only 1 version of application is supported');\n        }\n        await this.checkDomain(jsonApplication);\n    }\n    async checkDomain(jsonApplication) {\n        // TODO: implement domain checking\n    }\n    async checkDependencies(jsonApplications) {\n        const allReferencedApplicationMap = new Map();\n        const referencedApplicationMapByApplication = new Map();\n        for (const jsonApplication of jsonApplications) {\n            const lastJsonApplicationVersion = jsonApplication.versions[jsonApplication.versions.length - 1];\n            const referencedApplicationMapForApplication = ensureChildJsMap(ensureChildJsMap(referencedApplicationMapByApplication, jsonApplication.domain), jsonApplication.name);\n            for (const jsonReferencedApplication of lastJsonApplicationVersion.referencedApplications) {\n                ensureChildJsMap(allReferencedApplicationMap, jsonReferencedApplication.domain).set(jsonReferencedApplication.name, jsonReferencedApplication);\n                ensureChildJsMap(referencedApplicationMapForApplication, jsonReferencedApplication.domain).set(jsonReferencedApplication.name, jsonReferencedApplication);\n            }\n        }\n        this.pruneInGroupReferences(jsonApplications, allReferencedApplicationMap, referencedApplicationMapByApplication);\n        await this.pruneReferencesToExistingApplications(jsonApplications, allReferencedApplicationMap, referencedApplicationMapByApplication);\n        const applicationsWithValidDependencies = [];\n        const applicationsInNeedOfAdditionalDependencies = [];\n        const neededDependencies = [];\n        for (const dependenciesForDomain of allReferencedApplicationMap.values()) {\n            for (const dependency of dependenciesForDomain.values()) {\n                neededDependencies.push(dependency);\n            }\n        }\n        for (const jsonApplication of jsonApplications) {\n            const referencedApplicationMapForApplication = referencedApplicationMapByApplication.get(jsonApplication.domain).get(jsonApplication.name);\n            if (this.hasReferences(referencedApplicationMapForApplication)) {\n                applicationsInNeedOfAdditionalDependencies.push(jsonApplication);\n            }\n            else {\n                applicationsWithValidDependencies.push(jsonApplication);\n            }\n        }\n        return {\n            applicationsWithValidDependencies,\n            applicationsInNeedOfAdditionalDependencies,\n            neededDependencies\n        };\n    }\n    pruneInGroupReferences(jsonApplications, allReferencedApplicationMap, referencedApplicationMapByApplication) {\n        for (const jsonApplication of jsonApplications) {\n            // Remove every in-group reference for this application\n            for (const [_domainName, referenceMapForApplicationsOfDomain] of referencedApplicationMapByApplication) {\n                for (const [_applicationName, applicationsReferencedByAGivenApplication] of referenceMapForApplicationsOfDomain) {\n                    const applicationReferencesForDomain = applicationsReferencedByAGivenApplication.get(jsonApplication.domain);\n                    if (applicationReferencesForDomain) {\n                        applicationReferencesForDomain.delete(jsonApplication.name);\n                    }\n                }\n            }\n            const allApplicationReferencesForDomain = allReferencedApplicationMap.get(jsonApplication.domain);\n            if (allApplicationReferencesForDomain) {\n                allApplicationReferencesForDomain.delete(jsonApplication.name);\n            }\n        }\n    }\n    async pruneReferencesToExistingApplications(jsonApplications, allReferencedApplicationMap, referencedApplicationMapByApplication) {\n        const existingApplicationInfo = await this.findExistingApplications(allReferencedApplicationMap);\n        for (const applicationName of existingApplicationInfo.existingApplicationMapByName.keys()) {\n            const coreDomainAndApplicationNames = existingApplicationInfo.coreDomainAndApplicationNamesByApplicationName.get(applicationName);\n            // Remove every reference for this existing application\n            for (const referenceMapForApplicationsOfDomain of referencedApplicationMapByApplication.values()) {\n                for (const applicationsReferencedByAGivenApplication of referenceMapForApplicationsOfDomain.values()) {\n                    const applicationReferencesForDomain = applicationsReferencedByAGivenApplication.get(coreDomainAndApplicationNames.domain);\n                    if (applicationReferencesForDomain) {\n                        applicationReferencesForDomain.delete(coreDomainAndApplicationNames.application);\n                    }\n                }\n            }\n            const allApplicationReferencesForDomain = allReferencedApplicationMap.get(coreDomainAndApplicationNames.domain);\n            if (allApplicationReferencesForDomain) {\n                allApplicationReferencesForDomain.delete(coreDomainAndApplicationNames.application);\n            }\n        }\n    }\n    async findExistingApplications(allReferencedApplicationMap) {\n        const fullApplicationNames = [];\n        const coreDomainAndApplicationNamesByApplicationName = new Map();\n        for (const [domainName, allReferencedApplicationsForDomain] of allReferencedApplicationMap) {\n            for (const [coreApplicationName, referencedApplication] of allReferencedApplicationsForDomain) {\n                const fullApplicationName = getFullApplicationName(referencedApplication);\n                fullApplicationNames.push(fullApplicationName);\n                coreDomainAndApplicationNamesByApplicationName.set(fullApplicationName, {\n                    domain: domainName,\n                    application: coreApplicationName\n                });\n            }\n        }\n        let existingApplicationMapByName;\n        if (!fullApplicationNames.length) {\n            existingApplicationMapByName = new Map();\n        }\n        else {\n            existingApplicationMapByName = await this.applicationDao.findMapByFullNames(fullApplicationNames);\n        }\n        return {\n            coreDomainAndApplicationNamesByApplicationName,\n            existingApplicationMapByName\n        };\n    }\n    hasReferences(referencedApplicationMap) {\n        for (const referencesForDomain of referencedApplicationMap.values()) {\n            for (const _ of referencesForDomain) {\n                return true;\n            }\n        }\n        return false;\n    }\n};\n__decorate([\n    Inject()\n], ApplicationChecker.prototype, \"applicationDao\", void 0);\nApplicationChecker = __decorate([\n    Injected()\n], ApplicationChecker);\nexport { ApplicationChecker };\n//# sourceMappingURL=ApplicationChecker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { getFullApplicationNameFromDomainAndName } from '@airport/ground-control';\nimport { Injected } from '@airport/direction-indicator';\nlet ApplicationLocator = class ApplicationLocator {\n    // private terminalStore: ITerminalStore\n    locateExistingApplicationVersionRecord(jsonApplication, terminalStore) {\n        const applicationVersionsForDomainName = terminalStore\n            .getLatestApplicationVersionMapByNames().get(jsonApplication.domain);\n        if (!applicationVersionsForDomainName) {\n            return null;\n        }\n        const fullApplicationName = getFullApplicationNameFromDomainAndName(jsonApplication.domain, jsonApplication.name);\n        const latestApplicationVersionForApplication = applicationVersionsForDomainName.get(fullApplicationName);\n        const jsonApplicationVersion = jsonApplication.versions[0];\n        if (latestApplicationVersionForApplication\n            && latestApplicationVersionForApplication.integerVersion !== jsonApplicationVersion.integerVersion) {\n            throw new Error(`Multiple versions of applications are not yet supported`);\n        }\n        return latestApplicationVersionForApplication;\n    }\n    async locateLatestApplicationVersionByApplicationName(fullApplicationName, terminalStore) {\n        return terminalStore.getLatestApplicationVersionMapByFullApplicationName()\n            .get(fullApplicationName);\n    }\n};\nApplicationLocator = __decorate([\n    Injected()\n], ApplicationLocator);\nexport { ApplicationLocator };\n//# sourceMappingURL=ApplicationLocator.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ApplicationStatus, ensureChildArray, ensureChildJsSet, getFullApplicationName, } from '@airport/ground-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet ApplicationComposer = class ApplicationComposer {\n    async compose(jsonApplications, context) {\n        // NOTE: application name contains domain name as a prefix\n        const jsonApplicationMapByFullName = new Map();\n        const terminalStore = context.terminalStore;\n        const allDomains = terminalStore.getDomains().slice();\n        const domainMapByName = new Map();\n        for (const domain of allDomains) {\n            domainMapByName.set(domain.name, domain);\n        }\n        const allApplications = terminalStore.getApplications().slice();\n        // NOTE: application fullName contains domain name as a prefix\n        const applicationMapByFullName = new Map();\n        for (const application of allApplications) {\n            applicationMapByFullName.set(application.fullName, application);\n        }\n        const newLatestApplicationVersions = [];\n        const newApplicationVersionMapByApplicationName = new Map();\n        const newEntitiesMapByApplicationName = new Map();\n        const newPropertiesMap = new Map();\n        const newRelationsMap = new Map();\n        const newColumnsMap = new Map();\n        const added = {\n            columns: [],\n            domains: [],\n            entities: [],\n            latestApplicationVersions: [],\n            properties: [],\n            propertyColumns: [],\n            relationColumns: [],\n            relations: [],\n            applicationReferences: [],\n            applications: [],\n            applicationVersions: []\n        };\n        const allApplicationVersionsByIds = [...terminalStore.getAllApplicationVersionsByIds()];\n        const all = {\n            columns: [],\n            domains: [],\n            entities: [],\n            latestApplicationVersions: [],\n            properties: [],\n            propertyColumns: [],\n            relationColumns: [],\n            relations: [],\n            applicationReferences: [],\n            applications: [],\n            applicationVersions: [] //\n        };\n        const allDdlObjects = {\n            all,\n            allApplicationVersionsByIds,\n            added\n        };\n        for (const jsonApplication of jsonApplications) {\n            jsonApplicationMapByFullName.set(getFullApplicationName(jsonApplication), jsonApplication);\n            const domain = await this.composeDomain(jsonApplication.domain, allDomains, added.domains, domainMapByName);\n            const application = this.composeApplication(domain, jsonApplication, allApplications, added.applications, applicationMapByFullName);\n            this.composeApplicationVersion(jsonApplication, application, newLatestApplicationVersions, added.applicationVersions, newApplicationVersionMapByApplicationName);\n        }\n        const { newApplicationReferenceMap, newApplicationReferences } = await this.composeApplicationReferences(jsonApplicationMapByFullName, newApplicationVersionMapByApplicationName, terminalStore, allDdlObjects, context.deepTraverseReferences);\n        added.applicationReferences = newApplicationReferences;\n        for (const applicationVersion of allApplicationVersionsByIds) {\n            if (applicationVersion) {\n                this.addApplicationVersionObjects(applicationVersion, all);\n            }\n        }\n        for (const jsonApplication of jsonApplications) {\n            const fullApplicationName = getFullApplicationName(jsonApplication);\n            jsonApplicationMapByFullName.set(fullApplicationName, jsonApplication);\n            const domain = domainMapByName.get(jsonApplication.domain);\n            const application = applicationMapByFullName.get(getFullApplicationName(jsonApplication));\n            if (!application.index) {\n                jsonApplication.lastIds = {\n                    ...this.terminalStore.getLastIds()\n                };\n                application.index = ++this.terminalStore.getLastIds().applications;\n            }\n            if (!domain.id) {\n                domain.id = ++this.terminalStore.getLastIds().domains;\n            }\n            const applicationVersion = newApplicationVersionMapByApplicationName.get(application.fullName);\n            if (!applicationVersion.id) {\n                applicationVersion.id = ++this.terminalStore.getLastIds().applicationVersions;\n                applicationVersion.jsonApplication = jsonApplication;\n            }\n            this.composeApplicationEntities(jsonApplication, applicationVersion, newEntitiesMapByApplicationName, added.entities);\n            this.composeApplicationProperties(jsonApplication, added.properties, newPropertiesMap, newEntitiesMapByApplicationName);\n            await this.composeApplicationRelations(jsonApplication, added.relations, newRelationsMap, newEntitiesMapByApplicationName, newPropertiesMap, newApplicationReferenceMap, terminalStore, allDdlObjects);\n            this.composeApplicationColumns(jsonApplication, added.columns, newColumnsMap, added.propertyColumns, newEntitiesMapByApplicationName, newPropertiesMap);\n            await this.composeApplicationRelationColumns(jsonApplication, added.relationColumns, newApplicationVersionMapByApplicationName, newApplicationReferenceMap, newRelationsMap, newColumnsMap, terminalStore, allDdlObjects);\n        }\n        this.addObjects(allDdlObjects.added, allDdlObjects.all);\n        for (const applicationVersion of allDdlObjects.all.applicationVersions) {\n            allDdlObjects.allApplicationVersionsByIds[applicationVersion.id] = applicationVersion;\n        }\n        return allDdlObjects;\n    }\n    async getExistingLatestApplicationVersion(referencedApplicationName, allDdlObjects) {\n        for (const latestApplicationVersion of allDdlObjects.all.latestApplicationVersions) {\n            if (latestApplicationVersion.application.fullName == referencedApplicationName) {\n                return latestApplicationVersion;\n            }\n        }\n        throw new Error(`Cannot find application \"${referencedApplicationName}\".`);\n    }\n    addApplicationVersionObjects(applicationVersion, ddlObjects) {\n        let foundDomain = false;\n        for (const domain of ddlObjects.domains) {\n            if (domain.name === applicationVersion.application.domain.name) {\n                foundDomain = true;\n                break;\n            }\n        }\n        if (!foundDomain) {\n            ddlObjects.domains.push(applicationVersion.application.domain);\n        }\n        let foundApplication = false;\n        for (const application of ddlObjects.applications) {\n            if (application.domain === applicationVersion.application.domain\n                && application.name === applicationVersion.application.name) {\n                foundApplication = true;\n                break;\n            }\n        }\n        if (!foundApplication) {\n            ddlObjects.applications.push(applicationVersion.application);\n        }\n        ddlObjects.applicationVersions.push(applicationVersion);\n        ddlObjects.latestApplicationVersions.push(applicationVersion);\n        ddlObjects.applicationReferences = ddlObjects.applicationReferences\n            .concat(applicationVersion.references);\n        ddlObjects.entities = ddlObjects.entities.concat(applicationVersion.entities);\n        for (const entity of applicationVersion.entities) {\n            ddlObjects.columns = ddlObjects.columns.concat(entity.columns);\n            ddlObjects.properties = ddlObjects.properties.concat(entity.properties);\n            let entityPropertyColumns = [];\n            for (const property of entity.properties) {\n                entityPropertyColumns = entityPropertyColumns\n                    .concat(property.propertyColumns);\n            }\n            ddlObjects.propertyColumns = ddlObjects.propertyColumns\n                .concat(entityPropertyColumns);\n            ddlObjects.relations = ddlObjects.relations.concat(entity.relations);\n            let entityRelationColumns = [];\n            for (const relation of entity.relations) {\n                entityRelationColumns = entityRelationColumns\n                    .concat(relation.manyRelationColumns);\n            }\n            ddlObjects.relationColumns = ddlObjects.relationColumns\n                .concat(entityRelationColumns);\n        }\n    }\n    addObjects(fromObjects, toObjects) {\n        toObjects.columns = toObjects.columns.concat(fromObjects.columns);\n        for (const fromDomain of fromObjects.domains) {\n            let foundDomain = false;\n            for (const toDomain of toObjects.domains) {\n                if (toDomain.name === fromDomain.name) {\n                    foundDomain = true;\n                    break;\n                }\n            }\n            if (!foundDomain) {\n                toObjects.domains.push(fromDomain);\n            }\n        }\n        toObjects.entities = toObjects.entities.concat(fromObjects.entities);\n        toObjects.latestApplicationVersions = toObjects.latestApplicationVersions\n            .concat(fromObjects.latestApplicationVersions);\n        toObjects.properties = toObjects.properties.concat(fromObjects.properties);\n        toObjects.propertyColumns = toObjects.propertyColumns\n            .concat(fromObjects.propertyColumns);\n        toObjects.relationColumns = toObjects.relationColumns\n            .concat(fromObjects.relationColumns);\n        toObjects.relations = toObjects.relations.concat(fromObjects.relations);\n        for (const fromApplication of fromObjects.applications) {\n            let foundApplication = false;\n            for (const toApplication of toObjects.applications) {\n                if (toApplication.domain === fromApplication.domain\n                    && toApplication.name === fromApplication.name) {\n                    foundApplication = true;\n                    break;\n                }\n            }\n            if (!foundApplication) {\n                toObjects.applications.push(fromApplication);\n            }\n        }\n        toObjects.applicationReferences = toObjects.applicationReferences\n            .concat(fromObjects.applicationReferences);\n        toObjects.applicationVersions = toObjects.applicationVersions\n            .concat(fromObjects.applicationVersions);\n    }\n    async composeDomain(domainName, allDomains, newDomains, domainMapByName) {\n        let domain = await this.domainRetriever.retrieveDomain(domainName, domainMapByName, allDomains, newDomains);\n        if (!domain) {\n            domain = {\n                id: null,\n                name: domainName,\n                applications: []\n            };\n            allDomains.push(domain);\n            newDomains.push(domain);\n            domainMapByName.set(domainName, domain);\n        }\n        return domain;\n    }\n    composeApplication(domain, jsonApplication, allApplications, newApplications, applicationMapByFullName) {\n        const fullApplicationName = getFullApplicationName(jsonApplication);\n        let application = applicationMapByFullName.get(fullApplicationName);\n        if (!application) {\n            application = {\n                domain,\n                index: null,\n                fullName: fullApplicationName,\n                name: jsonApplication.name,\n                scope: 'public',\n                signature: 'localhost',\n                status: ApplicationStatus.CURRENT,\n            };\n            allApplications.push(application);\n            newApplications.push(application);\n            applicationMapByFullName.set(fullApplicationName, application);\n        }\n        return application;\n    }\n    composeApplicationVersion(jsonApplication, application, newLatestApplicationVersions, newApplicationVersions, newApplicationVersionMapByApplicationName) {\n        // Application versions are guaranteed to be new\n        let newApplicationVersion;\n        for (const applicationVersion of jsonApplication.versions) {\n            const versionParts = applicationVersion.versionString.split('.');\n            newApplicationVersion = {\n                id: null,\n                integerVersion: applicationVersion.integerVersion,\n                versionString: applicationVersion.versionString,\n                majorVersion: parseInt(versionParts[0]),\n                minorVersion: parseInt(versionParts[1]),\n                patchVersion: parseInt(versionParts[2]),\n                application,\n                jsonApplication,\n                entities: [],\n                references: [],\n                referencedBy: [],\n                entityMapByName: {},\n                referencesMapByName: {},\n                referencedByMapByName: {},\n            };\n            if (application.versions) {\n                application.versions.push(newApplicationVersion);\n            }\n            else {\n                application.versions = [newApplicationVersion];\n            }\n            newApplicationVersions.push(newApplicationVersion);\n        }\n        let newApplicationCurrentVersion = {\n            application,\n            applicationVersion: newApplicationVersion\n        };\n        // needed for normalOperation only\n        application.currentVersion = [newApplicationCurrentVersion];\n        newLatestApplicationVersions.push(newApplicationVersion);\n        newApplicationVersionMapByApplicationName.set(application.fullName, newApplicationVersion);\n        return newApplicationVersion;\n    }\n    async composeApplicationReferences(jsonApplicationMapByName, newApplicationVersionMapByApplicationName, terminalStore, allDdlObjects, deepTraverseReferences) {\n        const newApplicationReferenceMap = new Map();\n        const newApplicationReferenceLookup = new Map();\n        const newApplicationReferences = [];\n        for (const [applicationName, ownApplicationVersion] of newApplicationVersionMapByApplicationName) {\n            const application = ownApplicationVersion.application;\n            const jsonApplication = jsonApplicationMapByName.get(application.fullName);\n            const lastJsonApplicationVersion = jsonApplication.versions[jsonApplication.versions.length - 1];\n            const applicationReferences = ensureChildArray(newApplicationReferenceMap, applicationName);\n            const applicationReferenceLookup = ensureChildJsSet(newApplicationReferenceLookup, applicationName);\n            for (const jsonReferencedApplication of lastJsonApplicationVersion.referencedApplications) {\n                const referencedFullApplicationName = getFullApplicationName(jsonReferencedApplication);\n                let referencedApplicationVersion = newApplicationVersionMapByApplicationName.get(referencedFullApplicationName);\n                if (!referencedApplicationVersion) {\n                    referencedApplicationVersion = await this.applicationLocator.locateLatestApplicationVersionByApplicationName(referencedFullApplicationName, terminalStore);\n                    if (!referencedApplicationVersion) {\n                        throw new Error(`Could not locate application:\r\n\t\t\t\t\t\t${referencedFullApplicationName}\r\n\t\t\t\t\t\tin either existing applications or applications being currently processed`);\n                    }\n                    this.addApplicationVersionObjects(referencedApplicationVersion, allDdlObjects.all);\n                    if (deepTraverseReferences) {\n                        // This should cause another iteration over the outer loop to process newly added ApplicationVersion\n                        jsonApplicationMapByName.set(referencedFullApplicationName, referencedApplicationVersion.jsonApplication);\n                        newApplicationVersionMapByApplicationName.set(referencedFullApplicationName, referencedApplicationVersion);\n                    }\n                }\n                const applicationReference = {\n                    index: jsonReferencedApplication.index,\n                    ownApplicationVersion,\n                    referencedApplicationVersion\n                };\n                if (!applicationReferenceLookup.has(jsonReferencedApplication.index)) {\n                    applicationReferenceLookup.add(jsonReferencedApplication.index);\n                    newApplicationReferences.push(applicationReference);\n                    applicationReferences.push(applicationReference);\n                }\n            }\n        }\n        return {\n            newApplicationReferenceMap,\n            newApplicationReferences\n        };\n    }\n    composeApplicationEntities(jsonApplication, applicationVersion, newEntitiesMapByApplicationName, newEntities) {\n        const applicationName = getFullApplicationName(jsonApplication);\n        let index = 0;\n        // TODO: verify that jsonApplication.versions is always ordered ascending\n        const currentApplicationVersion = jsonApplication.versions[jsonApplication.versions.length - 1];\n        const jsonEntities = currentApplicationVersion.entities;\n        const newApplicationEntities = [];\n        for (const jsonEntity of jsonEntities) {\n            const entity = {\n                id: ++this.terminalStore.getLastIds().entities,\n                index: index++,\n                applicationVersion,\n                isLocal: jsonEntity.isLocal,\n                isRepositoryEntity: jsonEntity.isRepositoryEntity,\n                name: jsonEntity.name,\n                tableConfig: jsonEntity.tableConfig,\n                // columns: [],\n                // columnMap: {},\n                // idColumns: [],\n                // idColumnMap: {},\n                // relations: [],\n                // properties: [],\n                // propertyMap: {}\n            };\n            // applicationVersion.entities.push(entity)\n            newApplicationEntities.push(entity);\n            newEntities.push(entity);\n        }\n        newEntitiesMapByApplicationName.set(applicationName, newApplicationEntities);\n        applicationVersion.entities = newApplicationEntities;\n    }\n    composeApplicationProperties(jsonApplication, newProperties, newPropertiesMap, newEntitiesMapByApplicationName) {\n        const applicationName = getFullApplicationName(jsonApplication);\n        const currentApplicationVersion = jsonApplication.versions[jsonApplication.versions.length - 1];\n        const jsonEntities = currentApplicationVersion.entities;\n        const entities = newEntitiesMapByApplicationName.get(applicationName);\n        const propertiesByEntityIndex = ensureChildArray(newPropertiesMap, applicationName);\n        jsonEntities.forEach((jsonEntity, tableIndex) => {\n            const entity = entities[tableIndex];\n            const propertiesForEntity = [];\n            propertiesByEntityIndex[tableIndex]\n                = propertiesForEntity;\n            let index = 0;\n            for (const jsonProperty of jsonEntity.properties) {\n                const property = {\n                    id: ++this.terminalStore.getLastIds().properties,\n                    index,\n                    entity,\n                    name: jsonProperty.name,\n                    isId: jsonProperty.isId,\n                };\n                propertiesForEntity[index] = property;\n                index++;\n                newProperties.push(property);\n            }\n        });\n    }\n    async composeApplicationRelations(jsonApplication, newRelations, newRelationsMap, newEntitiesMapByApplicationName, newPropertiesMap, newApplicationReferenceMap, terminalStore, allDdlObjects) {\n        const applicationName = getFullApplicationName(jsonApplication);\n        const currentApplicationVersion = jsonApplication.versions[jsonApplication.versions.length - 1];\n        const jsonEntities = currentApplicationVersion.entities;\n        const entitiesForApplication = newEntitiesMapByApplicationName.get(applicationName);\n        const propertiesByEntityIndex = newPropertiesMap.get(applicationName);\n        const relationsByEntityIndex = ensureChildArray(newRelationsMap, applicationName);\n        const referencesForApplication = newApplicationReferenceMap.get(applicationName);\n        for (let tableIndex = 0; tableIndex < jsonEntities.length; tableIndex++) {\n            const jsonEntity = jsonEntities[tableIndex];\n            const propertiesForEntity = propertiesByEntityIndex[tableIndex];\n            const relationsForEntity = [];\n            relationsByEntityIndex[tableIndex]\n                = relationsForEntity;\n            const entity = entitiesForApplication[tableIndex];\n            let index = 0;\n            const relations = [];\n            for (const jsonRelation of jsonEntity.relations) {\n                const property = propertiesForEntity[jsonRelation.propertyRef.index];\n                let referencedApplicationName = applicationName;\n                if (jsonRelation.relationTableApplicationIndex\n                    || jsonRelation.relationTableApplicationIndex === 0) {\n                    const applicationReference = referencesForApplication[jsonRelation.relationTableApplicationIndex];\n                    referencedApplicationName = applicationReference.referencedApplicationVersion.application.fullName;\n                }\n                let entitiesArray = newEntitiesMapByApplicationName.get(referencedApplicationName);\n                if (!entitiesArray) {\n                    const applicationVersion = await this.getExistingLatestApplicationVersion(referencedApplicationName, allDdlObjects);\n                    entitiesArray = applicationVersion.entities;\n                }\n                const relationEntity = entitiesArray[jsonRelation.relationTableIndex];\n                const relation = {\n                    entity,\n                    id: ++terminalStore.getLastIds().relations,\n                    index,\n                    foreignKey: jsonRelation.foreignKey,\n                    isId: property.isId,\n                    manyToOneElems: jsonRelation.manyToOneElems,\n                    property,\n                    oneToManyElems: jsonRelation.oneToManyElems,\n                    relationEntity,\n                    relationType: jsonRelation.relationType,\n                    // oneRelationColumns: [],\n                    // manyRelationColumns: []\n                };\n                // property.relation               = [relation]\n                // relationEntity.relations.push(relation)\n                relationsForEntity[index] = relation;\n                index++;\n                relations.push(relation);\n                newRelations.push(relation);\n            }\n        }\n    }\n    composeApplicationColumns(jsonApplication, newColumns, newColumnsMap, newPropertyColumns, newEntitiesMapByApplicationName, newPropertiesMap) {\n        const applicationName = getFullApplicationName(jsonApplication);\n        const columnsByTable = [];\n        newColumnsMap.set(applicationName, columnsByTable);\n        const entitiesForApplication = newEntitiesMapByApplicationName.get(applicationName);\n        const currentApplicationVersion = jsonApplication.versions[jsonApplication.versions.length - 1];\n        const jsonEntities = currentApplicationVersion.entities;\n        const propertiesForApplication = newPropertiesMap.get(applicationName);\n        jsonEntities.forEach((jsonEntity, tableIndex) => {\n            const entity = entitiesForApplication[tableIndex];\n            const columnsForTable = [];\n            columnsByTable[tableIndex] = columnsForTable;\n            const idColumnIndexes = [];\n            jsonEntity.idColumnRefs.forEach((idColumnRef, idColumnIndex) => {\n                idColumnIndexes[idColumnRef.index] = idColumnIndex;\n            });\n            const propertiesForEntity = propertiesForApplication[tableIndex];\n            jsonEntity.columns.forEach((jsonColumn, index) => {\n                const idColumndIndex = idColumnIndexes[index];\n                const column = {\n                    allocationSize: jsonColumn.allocationSize,\n                    entity,\n                    id: ++this.terminalStore.getLastIds().columns,\n                    idIndex: idColumndIndex,\n                    index,\n                    isGenerated: jsonColumn.isGenerated,\n                    manyRelationColumns: [],\n                    name: jsonColumn.name,\n                    notNull: jsonColumn.notNull,\n                    oneRelationColumns: [],\n                    precision: jsonColumn.precision,\n                    propertyColumns: [],\n                    scale: jsonColumn.scale,\n                    type: jsonColumn.type,\n                };\n                columnsForTable[index] = column;\n                newColumns.push(column);\n                jsonColumn.propertyRefs.forEach((propertyReference) => {\n                    const property = propertiesForEntity[propertyReference.index];\n                    const propertyColumn = {\n                        column,\n                        property\n                    };\n                    newPropertyColumns.push(propertyColumn);\n                });\n            });\n        });\n    }\n    async composeApplicationRelationColumns(jsonApplication, newRelationColumns, newApplicationVersionMapByApplicationName, newApplicationReferenceMap, newRelationsMap, newColumnsMap, terminalStore, allDdlObjects) {\n        const applicationName = getFullApplicationName(jsonApplication);\n        const currentApplicationVersion = jsonApplication.versions[jsonApplication.versions.length - 1];\n        const jsonEntities = currentApplicationVersion.entities;\n        const columnsForApplication = newColumnsMap.get(applicationName);\n        const relationsForApplication = newRelationsMap.get(applicationName);\n        const applicationReferencesForApplication = newApplicationReferenceMap.get(applicationName);\n        for (let tableIndex = 0; tableIndex < jsonEntities.length; tableIndex++) {\n            const jsonEntity = jsonEntities[tableIndex];\n            const columnsForEntity = columnsForApplication[tableIndex];\n            const relationsForEntity = relationsForApplication[tableIndex];\n            for (let index = 0; index < jsonEntity.columns.length; index++) {\n                const jsonColumn = jsonEntity.columns[index];\n                const manyColumn = columnsForEntity[index];\n                const relationColumns = [];\n                for (const jsonRelationColumn of jsonColumn.manyRelationColumnRefs) {\n                    const manyRelation = relationsForEntity[jsonRelationColumn.manyRelationIndex];\n                    // if (!manyRelation.manyRelationColumns) {\n                    // \tmanyRelation.manyRelationColumns = []\n                    // }\n                    let oneRelationApplicationVersion;\n                    if (jsonRelationColumn.oneApplicationIndex\n                        || jsonRelationColumn.oneApplicationIndex === 0) {\n                        const applicationReference = applicationReferencesForApplication[jsonRelationColumn.oneApplicationIndex];\n                        oneRelationApplicationVersion = applicationReference.referencedApplicationVersion;\n                    }\n                    else {\n                        oneRelationApplicationVersion = newApplicationVersionMapByApplicationName.get(applicationName);\n                    }\n                    const referencedApplicationName = oneRelationApplicationVersion.application.fullName;\n                    const oneTableColumnsMapForApplication = newColumnsMap.get(referencedApplicationName);\n                    let oneTableColumns;\n                    let oneTableRelations;\n                    if (oneTableColumnsMapForApplication) {\n                        oneTableColumns = oneTableColumnsMapForApplication[jsonRelationColumn.oneTableIndex];\n                        oneTableRelations = newRelationsMap.get(oneRelationApplicationVersion.application.fullName)[jsonRelationColumn.oneTableIndex];\n                    }\n                    else {\n                        const applicationVersion = await this.getExistingLatestApplicationVersion(referencedApplicationName, allDdlObjects);\n                        const entitiesArray = applicationVersion.entities;\n                        const entity = entitiesArray[jsonRelationColumn.oneTableIndex];\n                        oneTableColumns = entity.columns;\n                        oneTableRelations = entity.relations;\n                    }\n                    const oneColumn = oneTableColumns[jsonRelationColumn.oneColumnIndex];\n                    // if (!jsonRelationColumn.oneApplicationIndex\n                    // \t&& !oneColumn.oneRelationColumns) {\n                    // \toneColumn.oneRelationColumns = []\n                    // }\n                    const oneRelation = oneTableRelations[jsonRelationColumn.oneRelationIndex];\n                    // if (!jsonRelationColumn.oneApplicationIndex\n                    // \t&& !oneRelation.oneRelationColumns) {\n                    // \toneRelation.oneRelationColumns = []\n                    // }\n                    const relationColumn = {\n                        id: ++terminalStore.getLastIds().relationColumns,\n                        manyColumn,\n                        manyRelation,\n                        oneColumn,\n                        oneRelation,\n                        // FIXME: figure out how to many OneToMany-only relations\n                        parentRelation: manyRelation\n                    };\n                    // manyRelation.manyRelationColumns.push(relationColumn)\n                    // if (!jsonRelationColumn.oneApplicationIndex) {\n                    // \toneColumn.oneRelationColumns.push(relationColumn)\n                    // \toneRelation.oneRelationColumns.push(relationColumn)\n                    // }\n                    relationColumns.push(relationColumn);\n                    newRelationColumns.push(relationColumn);\n                }\n                manyColumn.manyRelationColumns = []; // relationColumns\n            }\n        }\n    }\n};\n__decorate([\n    Inject()\n], ApplicationComposer.prototype, \"applicationLocator\", void 0);\n__decorate([\n    Inject()\n], ApplicationComposer.prototype, \"domainRetriever\", void 0);\n__decorate([\n    Inject()\n], ApplicationComposer.prototype, \"terminalStore\", void 0);\nApplicationComposer = __decorate([\n    Injected()\n], ApplicationComposer);\nexport { ApplicationComposer };\n//# sourceMappingURL=ApplicationComposer.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet ApplicationRecorder = class ApplicationRecorder {\n    async record(ddlObjects, \n    // normalOperation: boolean,\n    context) {\n        await this.transactionManager.transactInternal(async () => {\n            // FIXME: add support for real application versioning\n            this.setDefaultVersioning(ddlObjects);\n            await this.domainDao.checkAndInsertIfNeeded(ddlObjects.domains);\n            await this.applicationDao.insert(ddlObjects.applications);\n            await this.applicationVersionDao.insert(ddlObjects.applicationVersions);\n            await this.applicationReferenceDao.insert(ddlObjects.applicationReferences);\n            await this.applicationEntityDao.insert(ddlObjects.entities);\n            await this.applicationPropertyDao.insert(ddlObjects.properties);\n            await this.applicationRelationDao.insert(ddlObjects.relations);\n            await this.applicationColumnDao.insert(ddlObjects.columns);\n            await this.applicationPropertyColumnDao.insert(ddlObjects.propertyColumns);\n            await this.applicationRelationColumnDao.insert(ddlObjects.relationColumns);\n        }, context);\n    }\n    setDefaultVersioning(ddlObjects) {\n        for (const applicationReference of ddlObjects.applicationReferences) {\n            applicationReference.deprecatedSinceVersion = null;\n            applicationReference.removedInVersion = null;\n            applicationReference.sinceVersion = applicationReference.ownApplicationVersion;\n        }\n        for (const entity of ddlObjects.entities) {\n            entity.deprecatedSinceVersion = null;\n            entity.removedInVersion = null;\n            entity.sinceVersion = entity.applicationVersion;\n        }\n        for (const property of ddlObjects.properties) {\n            property.deprecatedSinceVersion = null;\n            property.removedInVersion = null;\n            property.sinceVersion = property.entity.applicationVersion;\n        }\n        for (const relation of ddlObjects.relations) {\n            relation.deprecatedSinceVersion = null;\n            relation.removedInVersion = null;\n            relation.sinceVersion = relation.entity.applicationVersion;\n        }\n        for (const column of ddlObjects.columns) {\n            column.deprecatedSinceVersion = null;\n            column.removedInVersion = null;\n            column.sinceVersion = column.entity.applicationVersion;\n        }\n        for (const propertyColumn of ddlObjects.propertyColumns) {\n            propertyColumn.deprecatedSinceVersion = null;\n            propertyColumn.removedInVersion = null;\n            propertyColumn.sinceVersion = propertyColumn.property.entity.applicationVersion;\n        }\n        for (const relationColumn of ddlObjects.relationColumns) {\n            relationColumn.deprecatedSinceVersion = null;\n            relationColumn.removedInVersion = null;\n            relationColumn.sinceVersion = relationColumn.parentRelation.entity.applicationVersion;\n        }\n    }\n    async bulkCreate(dao, entities, context) {\n        await dao.save(entities, context);\n    }\n};\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationColumnDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationEntityDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationPropertyColumnDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationPropertyDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationReferenceDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationRelationColumnDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationRelationDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"applicationVersionDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"domainDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationRecorder.prototype, \"transactionManager\", void 0);\nApplicationRecorder = __decorate([\n    Injected()\n], ApplicationRecorder);\nexport { ApplicationRecorder };\n//# sourceMappingURL=ApplicationRecorder.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, Entity, Id, Table } from '@airport/air-traffic-control';\nlet Sequence = class Sequence {\n};\n__decorate([\n    Id(),\n    Column({ name: 'APPLICATION_INDEX', nullable: false }),\n    DbNumber()\n], Sequence.prototype, \"applicationIndex\", void 0);\n__decorate([\n    Id(),\n    Column({ name: 'TABLE_INDEX', nullable: false }),\n    DbNumber()\n], Sequence.prototype, \"tableIndex\", void 0);\n__decorate([\n    Id(),\n    Column({ name: 'COLUMN_INDEX', nullable: false }),\n    DbNumber()\n], Sequence.prototype, \"columnIndex\", void 0);\n__decorate([\n    Column({ name: 'SEQUENCE_INCREMENT_BY', nullable: false })\n], Sequence.prototype, \"incrementBy\", void 0);\n__decorate([\n    Column({ name: 'CURRENT_VALUE', nullable: false })\n], Sequence.prototype, \"currentValue\", void 0);\nSequence = __decorate([\n    Entity(),\n    Table({ name: 'SEQUENCES' })\n], Sequence);\nexport { Sequence };\n//# sourceMappingURL=Sequence.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, DbNumber, Entity, GeneratedValue, Id, Table } from '@airport/air-traffic-control';\n/**\n * No actual records are inserted into this table, only used for the sequence\n */\nlet SystemWideOperationId = class SystemWideOperationId {\n};\n__decorate([\n    Id(),\n    Column({ name: 'ID', nullable: false }),\n    DbNumber(),\n    GeneratedValue()\n], SystemWideOperationId.prototype, \"id\", void 0);\nSystemWideOperationId = __decorate([\n    Entity(),\n    Table({ name: 'SYSTEM_WIDE_OPERATION_IDS' })\n], SystemWideOperationId);\nexport { SystemWideOperationId };\n//# sourceMappingURL=SystemWideOperationId.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Column, Entity, GeneratedValue, Id, Table } from '@airport/air-traffic-control';\n/**\n * A record of the Terminal running (being up at a given point in time)\n */\nlet TerminalRun = class TerminalRun {\n};\n__decorate([\n    Id(),\n    GeneratedValue()\n], TerminalRun.prototype, \"id\", void 0);\n__decorate([\n    Column({ name: 'CREATE_TIMESTAMP', nullable: false })\n], TerminalRun.prototype, \"createTimestamp\", void 0);\n__decorate([\n    Column({ name: 'RANDOM_NUMBER', nullable: false })\n], TerminalRun.prototype, \"randomNumber\", void 0);\nTerminalRun = __decorate([\n    Entity(),\n    Table({ name: 'TERMINAL_RUNS' })\n], TerminalRun);\nexport { TerminalRun };\n//# sourceMappingURL=TerminalRun.js.map","import { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { diSet as dS, duoDiSet as ddS } from '@airport/check-in';\nimport { DEPENDENCY_INJECTION } from '@airport/direction-indicator';\nimport { getFullApplicationName } from '@airport/ground-control';\nimport { Sequence, SystemWideOperationId, TerminalRun } from '../ddl/ddl';\nconst __constructors__ = {\n    Sequence: Sequence,\n    SystemWideOperationId: SystemWideOperationId,\n    TerminalRun: TerminalRun\n};\nexport const Q_APPLICATION = {\n    __constructors__,\n    domain: 'air',\n    name: '@airport/airport-code'\n};\nexport const Q = Q_APPLICATION;\nexport function diSet(dbEntityId) {\n    return dS(Q.__dbApplication__, dbEntityId);\n}\nexport function duoDiSet(dbEntityId) {\n    return ddS(Q.__dbApplication__, dbEntityId);\n}\nDEPENDENCY_INJECTION.db().eventuallyGet(AIRPORT_DATABASE).then((airDb) => {\n    airDb.QM[getFullApplicationName(Q_APPLICATION)] = Q;\n});\n//# sourceMappingURL=qApplication.js.map","import { Dao, DaoQueryDecorators, } from '@airport/check-in';\nimport { Q, duoDiSet, } from './qApplication';\n// Application Q object Dependency Injection readiness detection Dao\nexport class SQDIDao extends Dao {\n    constructor(dbEntityId) {\n        super(dbEntityId, Q);\n    }\n}\nexport class BaseSequenceDao extends SQDIDao {\n    constructor() {\n        super(0);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(0);\n    }\n}\nBaseSequenceDao.Find = new DaoQueryDecorators();\nBaseSequenceDao.FindOne = new DaoQueryDecorators();\nBaseSequenceDao.Search = new DaoQueryDecorators();\nBaseSequenceDao.SearchOne = new DaoQueryDecorators();\nexport class BaseSystemWideOperationIdDao extends SQDIDao {\n    constructor() {\n        super(1);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(1);\n    }\n}\nBaseSystemWideOperationIdDao.Find = new DaoQueryDecorators();\nBaseSystemWideOperationIdDao.FindOne = new DaoQueryDecorators();\nBaseSystemWideOperationIdDao.Search = new DaoQueryDecorators();\nBaseSystemWideOperationIdDao.SearchOne = new DaoQueryDecorators();\nexport class BaseTerminalRunDao extends SQDIDao {\n    constructor() {\n        super(2);\n    }\n    static Save(config) {\n        return Dao.BaseSave(config);\n    }\n    static diSet() {\n        return duoDiSet(2);\n    }\n}\nBaseTerminalRunDao.Find = new DaoQueryDecorators();\nBaseTerminalRunDao.FindOne = new DaoQueryDecorators();\nBaseTerminalRunDao.Search = new DaoQueryDecorators();\nBaseTerminalRunDao.SearchOne = new DaoQueryDecorators();\n//# sourceMappingURL=baseDaos.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseTerminalRunDao } from '../generated/generated';\nlet TerminalRunDao = class TerminalRunDao extends BaseTerminalRunDao {\n};\nTerminalRunDao = __decorate([\n    Injected()\n], TerminalRunDao);\nexport { TerminalRunDao };\n//# sourceMappingURL=TerminalRunDao.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { plus } from '@airport/air-traffic-control';\nimport { Injected } from '@airport/direction-indicator';\nimport { BaseSequenceDao, Q } from '../generated/generated';\nlet SequenceDao = class SequenceDao extends BaseSequenceDao {\n    static diSet() {\n        return Q.__dbApplication__ && Q.__dbApplication__.currentVersion[0]\n            .applicationVersion.entities[0];\n    }\n    async incrementCurrentValues() {\n        const s = Q.Sequence;\n        await this.db.updateWhere({\n            update: s,\n            set: {\n                currentValue: plus(s.currentValue, s.incrementBy)\n            }\n        });\n    }\n    async incrementSequence() {\n        const s = Q.Sequence;\n        await this.db.updateWhere({\n            update: s,\n            set: {\n                currentValue: plus(s.currentValue, s.incrementBy)\n            }\n        });\n    }\n};\nSequenceDao = __decorate([\n    Injected()\n], SequenceDao);\nexport { SequenceDao };\n//# sourceMappingURL=SequenceDao.js.map","import { lib } from '@airport/direction-indicator';\nimport { SequenceDao } from './dao/SequenceDao';\nimport { TerminalRunDao } from './dao/TerminalRunDao';\nconst airportCode = lib('airport-code');\nexport const SEQUENCE_DAO = airportCode.token({\n    class: SequenceDao,\n    interface: 'ISequenceDao',\n    token: 'SEQUENCE_DAO'\n});\nexport const TERMINAL_RUN_DAO = airportCode.token({\n    class: TerminalRunDao,\n    interface: 'ITerminalRunDao',\n    token: 'TERMINAL_RUN_DAO'\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\n// TODO: probably not needed, included application source populates itself\n// May be needed to populate applications from the database\nlet AirportDatabasePopulator = class AirportDatabasePopulator {\n    populate() {\n        // FIXME: implement\n        // this.airDb.applications\n        // this.airDb.qApplications\n    }\n};\nAirportDatabasePopulator = __decorate([\n    Injected()\n], AirportDatabasePopulator);\nexport { AirportDatabasePopulator };\n//# sourceMappingURL=AirportDatabasePopulator.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet DdlObjectLinker = class DdlObjectLinker {\n    link(allDdlObjects) {\n        const { all, allApplicationVersionsByIds, added } = allDdlObjects;\n        const { latestApplicationVersions, properties, relations, applicationReferences, applications } = added;\n        this.linkDomainsAndApplicationsAndVersions(allApplicationVersionsByIds, all.domains, applications, latestApplicationVersions, applicationReferences);\n        const entityArrayById = this.linkEntities(allApplicationVersionsByIds, all.entities, added.entities);\n        const { propertyMapById, relationMapById } = this.linkPropertiesAndRelations(properties, relations, entityArrayById);\n        this.linkColumns(propertyMapById, relationMapById, allDdlObjects, entityArrayById);\n    }\n    linkDomainsAndApplicationsAndVersions(allApplicationVersionsByIds, domains, applications, latestApplicationVersions, applicationReferences) {\n        const domainMapById = new Map();\n        domains.forEach((domain) => {\n            domainMapById.set(domain.id, domain);\n        });\n        const applicationMapByIndex = new Map();\n        applications.forEach((application) => {\n            applicationMapByIndex.set(application.index, application);\n            const domain = domainMapById.get(application.domain.id);\n            application.domain = domain;\n            domain.applications.push(application);\n        });\n        latestApplicationVersions.forEach((applicationVersion) => {\n            const application = applicationMapByIndex.get(applicationVersion.application.index);\n            let applicationCurrentVersion = {\n                application,\n                applicationVersion\n            };\n            application.currentVersion = [applicationCurrentVersion];\n            application.versions = [applicationVersion];\n            applicationVersion.application = application;\n            applicationVersion.entities = [];\n            applicationVersion.references = [];\n            applicationVersion.referencedBy = [];\n            applicationVersion.entityMapByName = {};\n            applicationVersion.referencesMapByName = {};\n            applicationVersion.referencedByMapByName = {};\n        });\n        applicationReferences.forEach((applicationReference) => {\n            const ownApplicationVersion = allApplicationVersionsByIds[applicationReference.ownApplicationVersion.id];\n            const referencedApplicationVersion = allApplicationVersionsByIds[applicationReference.referencedApplicationVersion.id];\n            ownApplicationVersion.references[applicationReference.index] = applicationReference;\n            ownApplicationVersion.referencesMapByName[referencedApplicationVersion.application.fullName] = applicationReference;\n            referencedApplicationVersion.referencedBy.push(applicationReference);\n            referencedApplicationVersion.referencedByMapByName[ownApplicationVersion.application.fullName] = applicationReference;\n            applicationReference.ownApplicationVersion = ownApplicationVersion;\n            applicationReference.referencedApplicationVersion = referencedApplicationVersion;\n        });\n    }\n    linkEntities(allApplicationVersionsByIds, allEntities, // All of the entities of newly created applications\n    addedEntities // All of the entities of newly created applications\n    // from the latest available versions\n    ) {\n        const entityArrayById = [];\n        allEntities.forEach((entity) => {\n            entityArrayById[entity.id] = entity;\n        });\n        addedEntities.forEach((entity) => {\n            const applicationVersion = allApplicationVersionsByIds[entity.applicationVersion.id];\n            entity.applicationVersion = applicationVersion;\n            applicationVersion.entities[entity.index] = entity;\n            applicationVersion.entityMapByName[entity.name] = entity;\n            entityArrayById[entity.id] = entity;\n            entity.columns = [];\n            entity.properties = [];\n            entity.relations = [];\n            entity.relationReferences = [];\n            entity.columnMap = {};\n            entity.idColumns = [];\n            entity.idColumnMap = {};\n            entity.propertyMap = {};\n        });\n        return entityArrayById;\n    }\n    linkPropertiesAndRelations(properties, relations, entityArrayById) {\n        const propertyMapById = new Map();\n        properties.forEach((property) => {\n            // Entity is already property wired in\n            const entity = entityArrayById[property.entity.id];\n            entity.properties[property.index] = property;\n            entity.propertyMap[property.name] = property;\n            property.entity = entity;\n            property.propertyColumns = [];\n            propertyMapById.set(property.id, property);\n        });\n        const relationMapById = new Map();\n        relations.forEach((relation) => {\n            const entity = entityArrayById[relation.entity.id];\n            entity.relations[relation.index] = relation;\n            let relationEntity = entityArrayById[relation.relationEntity.id];\n            if (!relationEntity) {\n                relationEntity = this.terminalStore.getAllEntities()[relation.relationEntity.id];\n            }\n            relationEntity.relationReferences.push(relation);\n            const property = propertyMapById.get(relation.property.id);\n            relation.property = property;\n            property.relation = [relation];\n            relation.entity = entity;\n            relation.relationEntity = relationEntity;\n            relation.manyRelationColumns = [];\n            relation.oneRelationColumns = [];\n            relationMapById.set(relation.id, relation);\n        });\n        return {\n            propertyMapById, relationMapById\n        };\n    }\n    linkColumns(propertyMapById, relationMapById, allDdlObjects, entityArrayById) {\n        const columnMapById = new Map();\n        allDdlObjects.all.columns.forEach((column) => {\n            columnMapById.set(column.id, column);\n        });\n        allDdlObjects.added.columns.forEach((column) => {\n            columnMapById.set(column.id, column);\n            const entity = entityArrayById[column.entity.id];\n            entity.columns[column.index] = column;\n            entity.columnMap[column.name] = column;\n            if (column.idIndex || column.idIndex === 0) {\n                entity.idColumns[column.idIndex] = column;\n                entity.idColumnMap[column.name] = column;\n            }\n            column.entity = entity;\n        });\n        allDdlObjects.added.propertyColumns.forEach((propertyColumn) => {\n            const column = columnMapById.get(propertyColumn.column.id);\n            column.propertyColumns.push(propertyColumn);\n            const property = propertyMapById.get(propertyColumn.property.id);\n            property.propertyColumns.push(propertyColumn);\n            propertyColumn.column = column;\n            propertyColumn.property = property;\n        });\n        allDdlObjects.added.relationColumns.forEach((relationColumn) => {\n            let manyColumn = columnMapById.get(relationColumn.manyColumn.id);\n            if (!manyColumn) {\n                manyColumn = this.terminalStore.getAllColumns()[relationColumn.manyColumn.id];\n            }\n            manyColumn.manyRelationColumns.push(relationColumn);\n            let oneColumn = columnMapById.get(relationColumn.oneColumn.id);\n            if (!oneColumn) {\n                oneColumn = this.terminalStore.getAllColumns()[relationColumn.oneColumn.id];\n            }\n            oneColumn.oneRelationColumns.push(relationColumn);\n            let manyRelation;\n            if (relationColumn.manyRelation && relationColumn.manyRelation.id) {\n                manyRelation = relationMapById.get(relationColumn.manyRelation.id);\n                if (!manyRelation) {\n                    manyRelation = this.terminalStore.getAllRelations()[relationColumn.manyRelation.id];\n                }\n                manyRelation.manyRelationColumns.push(relationColumn);\n            }\n            let oneRelation;\n            if (relationColumn.oneRelation && relationColumn.oneRelation.id) {\n                oneRelation = relationMapById.get(relationColumn.oneRelation.id);\n                if (!oneRelation) {\n                    oneRelation = this.terminalStore.getAllRelations()[relationColumn.oneRelation.id];\n                }\n                oneRelation.oneRelationColumns.push(relationColumn);\n            }\n            relationColumn.manyColumn = manyColumn;\n            relationColumn.manyRelation = manyRelation;\n            relationColumn.oneColumn = oneColumn;\n            relationColumn.oneRelation = oneRelation;\n        });\n    }\n};\n__decorate([\n    Inject()\n], DdlObjectLinker.prototype, \"terminalStore\", void 0);\nDdlObjectLinker = __decorate([\n    Injected()\n], DdlObjectLinker);\nexport { DdlObjectLinker };\n//# sourceMappingURL=DdlObjectLinker.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet DdlObjectRetriever = class DdlObjectRetriever {\n    async retrieveDdlObjects() {\n        const applications = await this.applicationDao.findAllActive();\n        const applicationIndexes = [];\n        const domainIdSet = new Set();\n        applications.forEach(application => {\n            applicationIndexes.push(application.index);\n            domainIdSet.add(application.domain.id);\n        });\n        applications.sort((application1, application2) => {\n            return application1.index - application2.index;\n        });\n        const domains = await this.domainDao.findByIdIn(Array.from(domainIdSet));\n        const allApplicationVersions = await this.applicationVersionDao\n            .findAllActiveOrderByApplicationIndexAndId();\n        let lastApplicationIndex;\n        // const allApplicationVersionsByIds: IApplicationVersion[] = []\n        const latestApplicationVersions = [];\n        const applicationVersions = [];\n        for (const applicationVersion of allApplicationVersions) {\n            if (applicationVersion.application.index !== lastApplicationIndex) {\n                latestApplicationVersions.push(applicationVersion);\n            }\n            // allApplicationVersionsByIds[applicationVersion.id] = applicationVersion\n            lastApplicationIndex = applicationVersion.application.index;\n            applicationVersions.push(applicationVersion);\n        }\n        const latestApplicationVersionIds = latestApplicationVersions.map(applicationVersion => applicationVersion.id);\n        const applicationReferences = await this.applicationReferenceDao\n            .findAllForApplicationVersions(latestApplicationVersionIds);\n        const entities = await this.applicationEntityDao\n            .findAllForApplicationVersions(latestApplicationVersionIds);\n        const entityIds = entities.map(entity => entity.id);\n        /*\n        const entityIds = entities.map(\n    entity => {\n        if (entity.tableConfig) {\n            entity.tableConfig = JSON.parse(entity.tableConfig as any)\n        }\n        return entity.id\n    })\n         */\n        const properties = await this.applicationPropertyDao\n            .findAllForEntities(entityIds);\n        const propertyIds = properties.map(property => property.id);\n        const relations = await this.applicationRelationDao\n            .findAllForProperties(propertyIds);\n        const columns = await this.applicationColumnDao\n            .findAllForEntities(entityIds);\n        const columnIds = columns.map(column => column.id);\n        const propertyColumns = await this.applicationPropertyColumnDao\n            .findAllForColumns(columnIds);\n        const relationColumns = await this.applicationRelationColumnDao\n            .findAllForColumns(columnIds);\n        const lastTerminalState = this.terminalStore.getTerminalState();\n        const lastIds = {\n            columns: columns.length,\n            domains: domains.length,\n            entities: entities.length,\n            properties: properties.length,\n            propertyColumns: propertyColumns.length,\n            relationColumns: relationColumns.length,\n            relations: relations.length,\n            applications: applications.length,\n            applicationVersions: applicationVersions.length,\n        };\n        this.terminalStore.state.next({\n            ...lastTerminalState,\n            lastIds\n        });\n        return {\n            // allDomains: domains,\n            // allApplications: applications,\n            // allApplicationVersionsByIds,\n            columns,\n            domains,\n            entities,\n            latestApplicationVersions,\n            properties,\n            propertyColumns,\n            relationColumns,\n            relations,\n            applicationReferences,\n            applications,\n            applicationVersions\n        };\n    }\n};\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationColumnDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationEntityDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationPropertyColumnDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationPropertyDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationReferenceDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationRelationColumnDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationRelationDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"applicationVersionDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"domainDao\", void 0);\n__decorate([\n    Inject()\n], DdlObjectRetriever.prototype, \"terminalStore\", void 0);\nDdlObjectRetriever = __decorate([\n    Injected()\n], DdlObjectRetriever);\nexport { DdlObjectRetriever };\n//# sourceMappingURL=DdlObjectRetriever.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { orderApplicationsInOrderOfPrecedence, setQApplicationEntities } from '@airport/air-traffic-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet QueryEntityClassCreator = class QueryEntityClassCreator {\n    createAll(applications) {\n        const applicationsToCreate = orderApplicationsInOrderOfPrecedence(applications);\n        applicationsToCreate.map(dbApplication => this.create(dbApplication));\n    }\n    create(dbApplication) {\n        let qApplication = this.airportDatabase.QM[dbApplication.fullName];\n        // If the Application API source has already been loaded\n        if (qApplication) {\n            qApplication.__dbApplication__ = dbApplication;\n        }\n        else {\n            qApplication = {\n                __constructors__: {},\n                __qConstructors__: {},\n                __dbApplication__: dbApplication,\n                name: dbApplication.name,\n                domain: dbApplication.domain.name\n            };\n            this.airportDatabase.QM[dbApplication.fullName] = qApplication;\n        }\n        this.airportDatabase.Q[dbApplication.index] = qApplication;\n        setQApplicationEntities(dbApplication, qApplication, this.airportDatabase.qApplications);\n        return qApplication;\n    }\n};\n__decorate([\n    Inject()\n], QueryEntityClassCreator.prototype, \"airportDatabase\", void 0);\nQueryEntityClassCreator = __decorate([\n    Injected()\n], QueryEntityClassCreator);\nexport { QueryEntityClassCreator };\n//# sourceMappingURL=QueryEntityClassCreator.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nlet QueryObjectInitializer = class QueryObjectInitializer {\n    generateQObjectsAndPopulateStore(allDdlObjects) {\n        this.ddlObjectLinker.link(allDdlObjects);\n        this.queryEntityClassCreator.createAll(allDdlObjects.all.applications);\n        const lastTerminalState = this.terminalStore.getTerminalState();\n        const existingDomainMap = {};\n        for (const domain of lastTerminalState.domains) {\n            existingDomainMap[domain.name] = domain;\n        }\n        for (const domain of allDdlObjects.added.domains) {\n            delete existingDomainMap[domain.name];\n        }\n        const unmodifiedDomains = [];\n        for (const domainName in existingDomainMap) {\n            unmodifiedDomains.push(existingDomainMap[domainName]);\n        }\n        const existingApplicationMap = {};\n        for (const application of lastTerminalState.applications) {\n            existingApplicationMap[application.fullName] = application;\n        }\n        for (const application of allDdlObjects.added.applications) {\n            delete existingApplicationMap[application.fullName];\n        }\n        const unmodifiedApplications = [];\n        for (const applicationName in existingApplicationMap) {\n            unmodifiedApplications.push(existingApplicationMap[applicationName]);\n        }\n        this.terminalStore.state.next({\n            ...lastTerminalState,\n            domains: [\n                ...unmodifiedDomains,\n                ...allDdlObjects.added.domains\n            ],\n            applications: [\n                ...unmodifiedApplications,\n                ...allDdlObjects.added.applications\n            ]\n        });\n    }\n    async initialize() {\n        const ddlObjects = await this.ddlObjectRetriever.retrieveDdlObjects();\n        const allApplicationVersionsByIds = [];\n        for (const applicationVersion of ddlObjects.applicationVersions) {\n            allApplicationVersionsByIds[applicationVersion.id] = applicationVersion;\n        }\n        let allDdlObjects = {\n            all: ddlObjects,\n            allApplicationVersionsByIds,\n            added: ddlObjects\n        };\n        this.generateQObjectsAndPopulateStore(allDdlObjects);\n        return allDdlObjects;\n    }\n};\n__decorate([\n    Inject()\n], QueryObjectInitializer.prototype, \"ddlObjectLinker\", void 0);\n__decorate([\n    Inject()\n], QueryObjectInitializer.prototype, \"ddlObjectRetriever\", void 0);\n__decorate([\n    Inject()\n], QueryObjectInitializer.prototype, \"queryEntityClassCreator\", void 0);\n__decorate([\n    Inject()\n], QueryObjectInitializer.prototype, \"terminalStore\", void 0);\nQueryObjectInitializer = __decorate([\n    Injected()\n], QueryObjectInitializer);\nexport { QueryObjectInitializer };\n//# sourceMappingURL=QueryObjectInitializer.js.map","import { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { APPLICATION_COLUMN_DAO, APPLICATION_DAO, APPLICATION_ENTITY_DAO, APPLICATION_PROPERTY_COLUMN_DAO, APPLICATION_PROPERTY_DAO, APPLICATION_REFERENCE_DAO, APPLICATION_RELATION_COLUMN_DAO, APPLICATION_RELATION_DAO, APPLICATION_VERSION_DAO, DOMAIN_DAO } from '@airport/airspace';\nimport { lib } from '@airport/direction-indicator';\nimport { TERMINAL_STORE } from '@airport/terminal-map';\nimport { AirportDatabasePopulator } from './AirportDatabasePopulator';\nimport { DdlObjectLinker } from './DdlObjectLinker';\nimport { DdlObjectRetriever } from './DdlObjectRetriever';\nimport { QueryEntityClassCreator } from './QueryEntityClassCreator';\nimport { QueryObjectInitializer } from './QueryObjectInitializer';\nconst takeoff = lib('takeoff');\ntakeoff.autopilot = false;\nexport const AIRPORT_DATABASE_POPULATOR = takeoff.token({\n    class: AirportDatabasePopulator,\n    interface: 'IAirportDatabasePopulator',\n    token: 'AIRPORT_DATABASE_POPULATOR'\n});\nexport const DDL_OBJECT_LINKER = takeoff.token({\n    class: DdlObjectLinker,\n    interface: 'IDdlObjectLinker',\n    token: 'DDL_OBJECT_LINKER'\n});\nexport const DDL_OBJECT_RETRIEVER = takeoff.token({\n    class: DdlObjectRetriever,\n    interface: 'IDdlObjectRetriever',\n    token: 'DDL_OBJECT_RETRIEVER'\n});\nexport const QUERY_ENTITY_CLASS_CREATOR = takeoff.token({\n    class: QueryEntityClassCreator,\n    interface: 'IQueryEntityClassCreator',\n    token: 'QUERY_ENTITY_CLASS_CREATOR'\n});\nexport const QUERY_OBJECT_INITIALIZER = takeoff.token({\n    class: QueryObjectInitializer,\n    interface: 'IQueryObjectInitializer',\n    token: 'QUERY_OBJECT_INITIALIZER'\n});\nDDL_OBJECT_LINKER.setDependencies({\n    terminalStore: TERMINAL_STORE\n});\nDDL_OBJECT_RETRIEVER.setDependencies({\n    applicationColumnDao: APPLICATION_COLUMN_DAO,\n    applicationDao: APPLICATION_DAO,\n    applicationEntityDao: APPLICATION_ENTITY_DAO,\n    applicationPropertyColumnDao: APPLICATION_PROPERTY_COLUMN_DAO,\n    applicationPropertyDao: APPLICATION_PROPERTY_DAO,\n    applicationReferenceDao: APPLICATION_REFERENCE_DAO,\n    applicationRelationColumnDao: APPLICATION_RELATION_COLUMN_DAO,\n    applicationRelationDao: APPLICATION_RELATION_DAO,\n    applicationVersionDao: APPLICATION_VERSION_DAO,\n    domainDao: DOMAIN_DAO\n});\nQUERY_ENTITY_CLASS_CREATOR.setDependencies({\n    airportDatabase: AIRPORT_DATABASE\n});\nQUERY_OBJECT_INITIALIZER.setDependencies({\n    ddlObjectLinker: DDL_OBJECT_LINKER,\n    ddlObjectRetriever: DDL_OBJECT_RETRIEVER,\n    queryEntityClassCreator: QUERY_ENTITY_CLASS_CREATOR,\n    terminalStore: TERMINAL_STORE\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getFullApplicationName } from '@airport/ground-control';\nlet ApplicationInitializer = class ApplicationInitializer {\n    addNewApplicationVersionsToAll(ddlObjects) {\n        for (const applicationVersion of ddlObjects.added.applicationVersions) {\n            ddlObjects.allApplicationVersionsByIds[applicationVersion.id] = applicationVersion;\n        }\n    }\n    async hydrate(jsonApplications, context) {\n        await this.stage(jsonApplications, context);\n        // Hydrate all DDL objects and Sequences\n        const ddlObjects = await this.queryObjectInitializer.initialize();\n        this.addNewApplicationVersionsToAll(ddlObjects);\n        this.setAirDbApplications(ddlObjects);\n        await this.sequenceGenerator.initialize();\n    }\n    /*\n     * Initialization scenarios:\n     *\n     * Brand new install - initialize BLUEPRINT applications\n     * Install new App - initialize New application (and any new dependency applications)\n     * Reload existing install - hydrate all applications\n     * Reload exiting App - nothing to do\n     */\n    async initialize(jsonApplications, context, checkDependencies, loadExistingApplications) {\n        const applicationsWithValidDependencies = await this.\n            getApplicationsWithValidDependencies(jsonApplications, checkDependencies);\n        const existingApplicationMap = new Map();\n        if (loadExistingApplications) {\n            const applications = await this.applicationDao.findAllWithJson();\n            for (const application of applications) {\n                existingApplicationMap.set(application.fullName, application);\n            }\n        }\n        const newJsonApplicationMap = new Map();\n        for (const jsonApplication of jsonApplications) {\n            const existingApplication = existingApplicationMap.get(getFullApplicationName(jsonApplication));\n            if (existingApplication) {\n                jsonApplication.lastIds = existingApplication.versions[0].jsonApplication.lastIds;\n            }\n            else {\n                newJsonApplicationMap.set(getFullApplicationName(jsonApplication), jsonApplication);\n            }\n        }\n        let checkedApplicationsWithValidDependencies = [];\n        for (const jsonApplication of applicationsWithValidDependencies) {\n            const existingApplication = existingApplicationMap.get(getFullApplicationName(jsonApplication));\n            if (!existingApplication) {\n                checkedApplicationsWithValidDependencies.push(jsonApplication);\n                await this.applicationBuilder.build(jsonApplication, existingApplicationMap, newJsonApplicationMap, context);\n            }\n        }\n        const allDdlObjects = await this.applicationComposer.compose(checkedApplicationsWithValidDependencies, {\n            terminalStore: this.terminalStore\n        });\n        this.addNewApplicationVersionsToAll(allDdlObjects);\n        this.queryObjectInitializer.generateQObjectsAndPopulateStore(allDdlObjects);\n        this.setAirDbApplications(allDdlObjects);\n        const newSequences = await this.applicationBuilder.buildAllSequences(applicationsWithValidDependencies, context);\n        await this.sequenceGenerator.initialize(newSequences);\n        await this.applicationRecorder.record(allDdlObjects.added, context);\n    }\n    async initializeForAIRportApp(jsonApplication) {\n        const applicationsWithValidDependencies = await this.\n            getApplicationsWithValidDependencies([jsonApplication], false);\n        const ddlObjects = await this.applicationComposer.compose(applicationsWithValidDependencies, {\n            deepTraverseReferences: true,\n            terminalStore: this.terminalStore\n        });\n        this.addNewApplicationVersionsToAll(ddlObjects);\n        this.queryObjectInitializer.generateQObjectsAndPopulateStore(ddlObjects);\n        this.setAirDbApplications(ddlObjects);\n    }\n    async stage(jsonApplications, context) {\n        // Temporarily Initialize application DDL objects and Sequences to allow for normal hydration\n        const tempDdlObjects = await this.applicationComposer.compose(jsonApplications, {\n            terminalStore: this.terminalStore\n        });\n        this.addNewApplicationVersionsToAll(tempDdlObjects);\n        this.queryObjectInitializer.generateQObjectsAndPopulateStore(tempDdlObjects);\n        this.setAirDbApplications(tempDdlObjects);\n        const newSequences = await this.applicationBuilder.stageSequences(jsonApplications, context);\n        await this.sequenceGenerator.tempInitialize(newSequences);\n    }\n    async wait(milliseconds) {\n        return new Promise((resolve, _reject) => {\n            setTimeout(() => {\n                resolve();\n            }, milliseconds);\n        });\n    }\n    async getApplicationsWithValidDependencies(jsonApplications, checkDependencies) {\n        const jsonApplicationsToInstall = [];\n        for (const jsonApplication of jsonApplications) {\n            await this.applicationChecker.check(jsonApplication);\n            const existingApplication = this.applicationLocator.locateExistingApplicationVersionRecord(jsonApplication, this.terminalStore);\n            if (existingApplication) {\n                // Nothing needs to be done, we already have this application version\n                continue;\n            }\n            jsonApplicationsToInstall.push(jsonApplication);\n        }\n        let applicationsWithValidDependencies;\n        if (checkDependencies) {\n            const applicationReferenceCheckResults = await this.applicationChecker\n                .checkDependencies(jsonApplicationsToInstall);\n            if (applicationReferenceCheckResults.applicationsInNeedOfAdditionalDependencies.length) {\n                // const\n                for (let i = 0; i < applicationReferenceCheckResults.neededDependencies.length; i++) {\n                    const neededDependency = applicationReferenceCheckResults.neededDependencies[i];\n                    const fullApplicationName = getFullApplicationName(neededDependency);\n                    await this.nativeInitializeApplication(neededDependency.domain, neededDependency.name, fullApplicationName);\n                }\n            }\n            applicationsWithValidDependencies = [\n                ...applicationReferenceCheckResults.applicationsWithValidDependencies,\n                ...applicationReferenceCheckResults.applicationsInNeedOfAdditionalDependencies\n            ];\n        }\n        else {\n            applicationsWithValidDependencies = jsonApplicationsToInstall;\n        }\n        return applicationsWithValidDependencies;\n    }\n    setAirDbApplications(ddlObjects) {\n        for (let application of ddlObjects.all.applications) {\n            this.airportDatabase.applications[application.index] = application;\n        }\n    }\n};\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"airportDatabase\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"applicationBuilder\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"applicationChecker\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"applicationComposer\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"applicationDao\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"applicationLocator\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"applicationRecorder\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"queryObjectInitializer\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"sequenceGenerator\", void 0);\n__decorate([\n    Inject()\n], ApplicationInitializer.prototype, \"terminalStore\", void 0);\nApplicationInitializer = __decorate([\n    Injected()\n], ApplicationInitializer);\nexport { ApplicationInitializer };\n//# sourceMappingURL=ApplicationInitializer.js.map","import { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { SEQUENCE_DAO } from '@airport/airport-code';\nimport { APPLICATION_COLUMN_DAO, APPLICATION_DAO, APPLICATION_ENTITY_DAO, APPLICATION_PROPERTY_COLUMN_DAO, APPLICATION_PROPERTY_DAO, APPLICATION_REFERENCE_DAO, APPLICATION_RELATION_COLUMN_DAO, APPLICATION_RELATION_DAO, APPLICATION_VERSION_DAO, DOMAIN_DAO } from '@airport/airspace';\nimport { SEQUENCE_GENERATOR } from '@airport/check-in';\nimport { lib } from '@airport/direction-indicator';\nimport { QUERY_OBJECT_INITIALIZER } from '@airport/takeoff';\nimport { DOMAIN_RETRIEVER, STORE_DRIVER, TERMINAL_STORE, TRANSACTION_MANAGER } from '@airport/terminal-map';\nimport { ApplicationInitializer } from './ApplicationInitializer';\nimport { SqlApplicationBuilder } from './builder/SqlApplicationBuilder';\nimport { ApplicationChecker } from './checker/ApplicationChecker';\nimport { ApplicationLocator } from './locator/ApplicationLocator';\nimport { ApplicationComposer } from './recorder/ApplicationComposer';\nimport { ApplicationRecorder } from './recorder/ApplicationRecorder';\nconst landing = lib('landing');\nlanding.autopilot = false;\nexport const ABSTRACT_APPLICATION_INITIALIZER = landing.token({\n    class: ApplicationInitializer,\n    interface: 'class ApplicationInitializer',\n    token: 'ABSTRACT_APPLICATION_INITIALIZER'\n});\nexport const APPLICATION_BUILDER = landing.token({\n    class: null,\n    interface: 'IApplicationBuilder',\n    token: 'APPLICATION_BUILDER'\n});\nexport const APPLICATION_CHECKER = landing.token({\n    class: ApplicationChecker,\n    interface: 'IApplicationChecker',\n    token: 'APPLICATION_CHECKER'\n});\nexport const APPLICATION_COMPOSER = landing.token({\n    class: ApplicationComposer,\n    interface: 'IApplicationComposer',\n    token: 'APPLICATION_COMPOSER'\n});\nexport const APPLICATION_LOCATOR = landing.token({\n    class: ApplicationLocator,\n    interface: 'IApplicationLocator',\n    token: 'APPLICATION_LOCATOR'\n});\nexport const APPLICATION_RECORDER = landing.token({\n    class: ApplicationRecorder,\n    interface: 'IApplicationRecorder',\n    token: 'APPLICATION_RECORDER'\n});\nexport const SQL_APPLICATION_BUILDER = landing.token({\n    class: SqlApplicationBuilder,\n    interface: 'class SqlApplicationBuilder',\n    token: 'SQL_APPLICATION_BUILDER'\n});\nABSTRACT_APPLICATION_INITIALIZER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    applicationBuilder: APPLICATION_BUILDER,\n    applicationChecker: APPLICATION_CHECKER,\n    applicationDao: APPLICATION_DAO,\n    applicationLocator: APPLICATION_LOCATOR,\n    queryObjectInitializer: QUERY_OBJECT_INITIALIZER,\n    sequenceGenerator: SEQUENCE_GENERATOR,\n    terminalStore: TERMINAL_STORE\n});\nAPPLICATION_BUILDER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE\n});\nAPPLICATION_CHECKER.setDependencies({\n    applicationDao: APPLICATION_DAO\n});\nAPPLICATION_COMPOSER.setDependencies({\n    applicationLocator: APPLICATION_LOCATOR,\n    domainRetriever: DOMAIN_RETRIEVER,\n    terminalStore: TERMINAL_STORE\n});\nAPPLICATION_RECORDER.setDependencies({\n    applicationColumnDao: APPLICATION_COLUMN_DAO,\n    applicationDao: APPLICATION_DAO,\n    applicationEntityDao: APPLICATION_ENTITY_DAO,\n    applicationPropertyColumnDao: APPLICATION_PROPERTY_COLUMN_DAO,\n    applicationPropertyDao: APPLICATION_PROPERTY_DAO,\n    applicationRecorder: APPLICATION_RECORDER,\n    applicationReferenceDao: APPLICATION_REFERENCE_DAO,\n    applicationRelationColumnDao: APPLICATION_RELATION_COLUMN_DAO,\n    applicationRelationDao: APPLICATION_RELATION_DAO,\n    applicationVersionDao: APPLICATION_VERSION_DAO,\n    domainDao: DOMAIN_DAO,\n    transactionManager: TRANSACTION_MANAGER\n});\nSQL_APPLICATION_BUILDER.setDependencies({\n    airportDatabase: AIRPORT_DATABASE,\n    sequenceDao: SEQUENCE_DAO,\n    storeDriver: STORE_DRIVER\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Injected } from '@airport/direction-indicator';\nimport { ApplicationInitializer } from \"@airport/landing\";\nlet WebApplicationInitializer = class WebApplicationInitializer extends ApplicationInitializer {\n    constructor() {\n        super(...arguments);\n        this.applicationWindowMap = new Map();\n        this.initializingApplicationMap = new Map();\n    }\n    async nativeInitializeApplication(domain, application, fullApplicationName) {\n        if (this.terminalStore.getReceiver().initializedApps\n            .has(fullApplicationName)) {\n            return;\n        }\n        let appIframes = document.getElementsByName(fullApplicationName);\n        let appIframe;\n        if (!appIframes.length) {\n            appIframe = document.createElement('iframe');\n            appIframe.src = 'http://' + domain + '/AIRport/apps/'\n                + application + '/index.html';\n            appIframe.name = fullApplicationName;\n            appIframe.style.display = 'none';\n            document.body.appendChild(appIframe);\n        }\n        while (!this.terminalStore.getReceiver().initializedApps\n            .has(fullApplicationName)) {\n            await this.wait(100);\n        }\n        this.applicationWindowMap.set(fullApplicationName, appIframe.contentWindow);\n        this.initializingApplicationMap.set(fullApplicationName, false);\n    }\n};\nWebApplicationInitializer = __decorate([\n    Injected()\n], WebApplicationInitializer);\nexport { WebApplicationInitializer };\n//# sourceMappingURL=WebApplicationInitializer.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getFullApplicationNameFromDomainAndName } from '@airport/ground-control';\nimport { IsolateMessageType, } from '@airport/apron';\nimport { TransactionalReceiver } from '@airport/terminal';\nimport { map } from 'rxjs/operators';\nlet WebTransactionalReceiver = class WebTransactionalReceiver extends TransactionalReceiver {\n    constructor() {\n        super();\n        const ownDomain = window.location.hostname;\n        const mainDomainFragments = ownDomain.split('.');\n        if (mainDomainFragments[0] === 'www'\n            || mainDomainFragments[0].startsWith('random_')) {\n            mainDomainFragments.splice(0, 1);\n        }\n        const domainPrefix = '.' + mainDomainFragments.join('.');\n        // set domain to a random value so that an iframe cannot directly invoke logic in this domain\n        if (document.domain !== 'localhost') {\n            document.domain = 'random_' + Math.random() + '_' + Math.random() + domainPrefix;\n        }\n        const webReciever = this.terminalStore.getWebReceiver();\n        webReciever.domainPrefix = domainPrefix;\n        webReciever.mainDomainFragments = mainDomainFragments;\n    }\n    handleClientRequest(message) {\n        if (message.__received__) {\n            return;\n        }\n        message.__received__ = true;\n        // All requests need to have a application signature\n        // to know what application is being communicated to/from\n        if (!this.hasValidApplicationInfo(message)) {\n            return;\n        }\n        if (this.webMessageReciever.needMessageSerialization()) {\n            // FIXME: deserialize message\n        }\n        const webReciever = this.terminalStore.getWebReceiver();\n        if (webReciever.onClientMessageCallback) {\n            const receivedDate = new Date();\n            message.__receivedTime__ = receivedDate.getTime();\n            webReciever.onClientMessageCallback(message);\n        }\n        switch (message.category) {\n            case 'FromClient':\n                const fromClientRedirectedMessage = {\n                    ...message,\n                    __received__: false,\n                    __receivedTime__: null,\n                    category: 'FromClientRedirected'\n                };\n                this.handleFromClientRequest(fromClientRedirectedMessage).then();\n                break;\n            case 'IsConnectionReady':\n                this.ensureConnectionIsReady(message).then();\n                break;\n        }\n    }\n    handleAppRequest(message, messageOrigin, source) {\n        if (message.__received__) {\n            return;\n        }\n        message.__received__ = true;\n        // All requests need to have a application signature\n        // to know what application is being communicated to/from\n        if (!this.hasValidApplicationInfo(message)) {\n            return;\n        }\n        const webReciever = this.terminalStore.getWebReceiver();\n        if (webReciever.onClientMessageCallback) {\n            const receivedDate = new Date();\n            message.__receivedTime__ = receivedDate.getTime();\n            webReciever.onClientMessageCallback(message);\n        }\n        switch (message.category) {\n            case 'ToDb':\n                this.handleIsolateMessage(message, messageOrigin, source).then();\n                break;\n            case 'ToClient':\n                const interAppApiCallRequest = webReciever.pendingInterAppApiCallMessageMap.get(message.id);\n                const context = {};\n                this.endApiCall({\n                    application: message.application,\n                    domain: message.domain,\n                    methodName: message.methodName,\n                    objectName: message.objectName,\n                }, message.errorMessage, context).then((success) => {\n                    if (interAppApiCallRequest) {\n                        if (!success) {\n                            interAppApiCallRequest.reject(message.errorMessage);\n                        }\n                        else if (message.errorMessage) {\n                            interAppApiCallRequest.reject(message.errorMessage);\n                        }\n                        else {\n                            interAppApiCallRequest.resolve(message.payload);\n                        }\n                    }\n                    else {\n                        const toClientRedirectedMessage = {\n                            ...message,\n                            __received__: false,\n                            __receivedTime__: null,\n                            application: message.application,\n                            category: 'ToClientRedirected',\n                            domain: message.domain,\n                            errorMessage: null,\n                            methodName: message.methodName,\n                            objectName: message.objectName,\n                            payload: null,\n                            protocol: null,\n                        };\n                        if (!success) {\n                            toClientRedirectedMessage.errorMessage = context.errorMessage;\n                            toClientRedirectedMessage.payload = null;\n                        }\n                        this.handleToClientRequest(toClientRedirectedMessage, messageOrigin)\n                            .then();\n                    }\n                });\n                break;\n            default:\n                break;\n        }\n    }\n    onMessage(callback) {\n        const webReciever = this.terminalStore.getWebReceiver();\n        webReciever.onClientMessageCallback = callback;\n    }\n    async nativeStartApiCall(message, context) {\n        return await this.startApiCall(message, context, async () => {\n            const fullApplicationName = getFullApplicationNameFromDomainAndName(message.domain, message.application);\n            const frameWindow = this.getFrameWindow(fullApplicationName);\n            if (frameWindow) {\n                // Forward the request to the correct application iframe\n                frameWindow.postMessage(message, '*');\n            }\n            else {\n                throw new Error(`No Application IFrame found for: ${fullApplicationName}`);\n            }\n        });\n    }\n    async nativeHandleApiCall(message, context) {\n        if (!await this.nativeStartApiCall(message, context)) {\n            throw new Error(context.errorMessage);\n        }\n        const webReciever = this.terminalStore.getWebReceiver();\n        return new Promise((resolve, reject) => {\n            webReciever.pendingInterAppApiCallMessageMap.set(message.id, {\n                message,\n                reject,\n                resolve\n            });\n        });\n    }\n    async ensureConnectionIsReady(message) {\n        const fullApplicationName = getFullApplicationNameFromDomainAndName(message.domain, message.application);\n        const applicationInitializing = this.applicationInitializer.initializingApplicationMap.get(fullApplicationName);\n        if (applicationInitializing) {\n            return;\n        }\n        const applicationWindow = this.applicationInitializer.applicationWindowMap.get(fullApplicationName);\n        if (!applicationWindow) {\n            this.applicationInitializer.initializingApplicationMap.set(fullApplicationName, true);\n            await this.applicationInitializer.nativeInitializeApplication(message.domain, message.application, fullApplicationName);\n        }\n        const connectionIsReadyMessage = {\n            application: message.application,\n            category: 'ConnectionIsReady',\n            domain: message.domain,\n            errorMessage: null,\n            id: message.id,\n            methodName: message.methodName,\n            objectName: message.objectName,\n            protocol: window.location.protocol,\n            payload: null,\n        };\n        if (this.webMessageReciever.needMessageSerialization()) {\n            // FIXME: serialize message\n        }\n        this.webMessageReciever.sendMessageToClient(connectionIsReadyMessage);\n    }\n    hasValidApplicationInfo(message) {\n        return typeof message.domain === 'string' && message.domain.length >= 3\n            && typeof message.application === 'string' && message.application.length >= 3;\n    }\n    async handleFromClientRequest(message) {\n        const webReciever = this.terminalStore.getWebReceiver();\n        let numPendingMessagesFromHost = webReciever.pendingHostCounts.get(message.domain);\n        if (!numPendingMessagesFromHost) {\n            numPendingMessagesFromHost = 0;\n        }\n        if (numPendingMessagesFromHost > 4) {\n            // Prevent hosts from making local 'Denial of Service' attacks\n            return;\n        }\n        const fullApplicationName = getFullApplicationNameFromDomainAndName(message.domain, message.application);\n        let numPendingMessagesForApplication = webReciever.pendingApplicationCounts.get(fullApplicationName);\n        if (!numPendingMessagesForApplication) {\n            numPendingMessagesForApplication = 0;\n        }\n        if (numPendingMessagesForApplication === -1) {\n            // Already could not install the application, may be a DOS attack, return right away\n            return;\n        }\n        webReciever.pendingHostCounts.set(message.domain, numPendingMessagesFromHost + 1);\n        webReciever.pendingApplicationCounts.set(fullApplicationName, numPendingMessagesForApplication + 1);\n        if (!await this.ensureApplicationIsInstalled(fullApplicationName)) {\n            this.relyToClientWithError(message, `Application is not installed`);\n            return;\n        }\n        const context = {};\n        if (!await this.nativeStartApiCall(message, context)) {\n            this.relyToClientWithError(message, context.errorMessage);\n        }\n    }\n    relyToClientWithError(message, errorMessage) {\n        const toClientRedirectedMessage = {\n            __received__: false,\n            __receivedTime__: null,\n            application: message.application,\n            category: 'ToClientRedirected',\n            domain: message.domain,\n            errorMessage,\n            id: message.id,\n            methodName: message.methodName,\n            objectName: message.objectName,\n            payload: null,\n            protocol: message.protocol,\n        };\n        this.replyToClientRequest(toClientRedirectedMessage);\n    }\n    getFrameWindow(fullApplicationName) {\n        const iframe = document\n            .getElementsByName(fullApplicationName);\n        if (!iframe || !iframe[0]) {\n            return null;\n        }\n        return iframe[0].contentWindow;\n    }\n    async handleToClientRequest(message, messageOrigin) {\n        if (!await this.messageIsFromValidApp(message, messageOrigin)) {\n            return;\n        }\n        this.replyToClientRequest(message);\n    }\n    replyToClientRequest(message) {\n        const fullApplicationName = getFullApplicationNameFromDomainAndName(message.domain, message.application);\n        const webReciever = this.terminalStore.getWebReceiver();\n        let numMessagesFromHost = webReciever.pendingHostCounts.get(message.domain);\n        if (numMessagesFromHost > 0) {\n            webReciever.pendingHostCounts.set(message.domain, numMessagesFromHost - 1);\n        }\n        let numMessagesForApplication = webReciever.pendingApplicationCounts.get(fullApplicationName);\n        if (numMessagesForApplication > 0) {\n            webReciever.pendingApplicationCounts.set(message.domain, numMessagesForApplication - 1);\n        }\n        // Forward the request to the source client\n        if (this.webMessageReciever.needMessageSerialization()) {\n            // FIXME: serialize message\n        }\n        this.webMessageReciever.sendMessageToClient(message);\n    }\n    async ensureApplicationIsInstalled(fullApplicationName) {\n        if (!fullApplicationName) {\n            return false;\n        }\n        return !!this.applicationInitializer.applicationWindowMap.get(fullApplicationName);\n    }\n    async messageIsFromValidApp(message, messageOrigin) {\n        const applicationDomain = messageOrigin.split('//')[1];\n        const applicationDomainFragments = applicationDomain.split('.');\n        // Allow local debugging\n        if (applicationDomain.split(':')[0] === 'localhost') {\n            return true;\n        }\n        const webReciever = this.terminalStore.getWebReceiver();\n        const fullApplicationName = getFullApplicationNameFromDomainAndName(message.domain, message.application);\n        // Only accept requests from https protocol\n        if (!messageOrigin.startsWith(\"https\")\n            // and from application domains that match the fullApplicationName\n            || applicationDomain !== fullApplicationName + webReciever.domainPrefix) {\n            return false;\n        }\n        // Only accept requests from '${applicationName}.${mainDomainName}'\n        if (applicationDomainFragments.length !== webReciever.mainDomainFragments.length + 1) {\n            return false;\n        }\n        // Only accept requests from non-'www' domain (don't accept requests from self)\n        if (applicationDomainFragments[0] === 'www') {\n            return false;\n        }\n        const applicationDomainFirstFragment = applicationDomainFragments[0];\n        // check application domain-embedded signature and fullApplicationName in message\n        // and make sure they result in a match\n        if (applicationDomainFirstFragment !== fullApplicationName) {\n            return false;\n        }\n        // Make sure the application is installed\n        return !!this.applicationInitializer.applicationWindowMap.get(fullApplicationName);\n    }\n    async handleIsolateMessage(message, messageOrigin, source) {\n        if (!await this.messageIsFromValidApp(message, messageOrigin)) {\n            return;\n        }\n        const webReciever = this.terminalStore.getWebReceiver();\n        const fullApplicationName = getFullApplicationNameFromDomainAndName(message.domain, message.application);\n        switch (message.type) {\n            case IsolateMessageType.SEARCH_UNSUBSCRIBE:\n                let isolateSubscriptionMap = webReciever.subsriptionMap.get(fullApplicationName);\n                if (!isolateSubscriptionMap) {\n                    return;\n                }\n                let subscription = isolateSubscriptionMap.get(message.id);\n                if (!subscription) {\n                    return;\n                }\n                subscription.unsubscribe();\n                isolateSubscriptionMap.delete(message.id);\n                return;\n        }\n        this.processMessage(message).then(response => {\n            if (!response) {\n                return;\n            }\n            const webReciever = this.terminalStore.getWebReceiver();\n            let shemaDomainName = fullApplicationName + '.' + webReciever.localDomain;\n            switch (message.type) {\n                case IsolateMessageType.SEARCH:\n                case IsolateMessageType.SEARCH_ONE:\n                    const observableDataResult = response;\n                    observableDataResult.result.pipe(map(value => {\n                        window.postMessage(value, shemaDomainName);\n                    }));\n                    const subscription = observableDataResult.result.subscribe();\n                    let isolateSubscriptionMap = webReciever.subsriptionMap.get(fullApplicationName);\n                    if (!isolateSubscriptionMap) {\n                        isolateSubscriptionMap = new Map();\n                        webReciever.subsriptionMap.set(fullApplicationName, isolateSubscriptionMap);\n                    }\n                    isolateSubscriptionMap.set(message.id, subscription);\n                    return;\n            }\n            source.postMessage(response, '*');\n        });\n    }\n};\n__decorate([\n    Inject()\n], WebTransactionalReceiver.prototype, \"applicationInitializer\", void 0);\n__decorate([\n    Inject()\n], WebTransactionalReceiver.prototype, \"terminalStore\", void 0);\n__decorate([\n    Inject()\n], WebTransactionalReceiver.prototype, \"webMessageReciever\", void 0);\nWebTransactionalReceiver = __decorate([\n    Injected()\n], WebTransactionalReceiver);\nexport { WebTransactionalReceiver };\n//# sourceMappingURL=WebTransactionalReceiver.js.map","import { DEPENDENCY_INJECTION, lib } from \"@airport/direction-indicator\";\nimport { APPLICATION_INITIALIZER, DOMAIN_RETRIEVER, TERMINAL_STORE, TRANSACTIONAL_RECEIVER } from \"@airport/terminal-map\";\nimport { DomainRetriever } from \"./DomainRetriever\";\nimport { WebApplicationInitializer } from \"./WebApplicationInitializer\";\nimport { WebMesageReceiver } from \"./WebMessageReceiver\";\nimport { WebTransactionalReceiver } from \"./WebTransactionalReceiver\";\nconst webTerminal = lib('web-terminal');\nwebTerminal.autopilot = false;\nDEPENDENCY_INJECTION.set(DOMAIN_RETRIEVER, DomainRetriever);\nDEPENDENCY_INJECTION.set(APPLICATION_INITIALIZER, WebApplicationInitializer);\nexport const WEB_MESSAGE_RECEIVER = webTerminal.token({\n    class: WebMesageReceiver,\n    interface: 'IWebMessageReceiver',\n    token: 'WEB_MESSAGE_RECEIVER'\n});\nWEB_MESSAGE_RECEIVER.setDependencies({\n    transactionalReceiver: TRANSACTIONAL_RECEIVER\n});\nDEPENDENCY_INJECTION.set(TRANSACTIONAL_RECEIVER, WebTransactionalReceiver);\nTRANSACTIONAL_RECEIVER.setDependencies({\n    terminalStore: TERMINAL_STORE,\n    webMessageReciever: WEB_MESSAGE_RECEIVER\n});\n//# sourceMappingURL=tokens.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { setSeqGen } from '@airport/check-in';\nimport { ensureChildArray } from '@airport/ground-control';\nimport { Inject, Injected } from '@airport/direction-indicator';\n/**\n * Assumptions: 7/4/2019\n *\n * 1. Only a single process will be inserting records at any given point in time\n * a)  This means that the service worker running the the background will only\n * receive and temporarily store data (in IndexedDb, but won't be inserting\n * proper relational records)\n * b)  This also means that web-workers won't be doing parallel inserts\n *\n * In general, this is consistent with SqLites policy of only one modifying\n * operation at a time (while possibly multiple read ops)\n *\n *\n * With these assumptions in place, it is safe to synchronize sequence retrieval\n * in-memory.   Hence, SequenceBlocks are retired in favor of a simpler\n * Sequence-only solution\n *\n */\nlet SequenceGenerator = class SequenceGenerator {\n    constructor() {\n        this.sequences = [];\n        this.sequenceBlocks = [];\n        this.generatingSequenceNumbers = false;\n    }\n    exists(dbEntity) {\n        const generatedColumns = dbEntity.columns.filter(dbColumn => dbColumn.isGenerated);\n        if (!generatedColumns.length) {\n            return true;\n        }\n        const applicationSequences = this.sequences[dbEntity.applicationVersion.application.index];\n        if (!applicationSequences) {\n            return false;\n        }\n        const tableSequences = applicationSequences[dbEntity.index];\n        if (!tableSequences) {\n            return false;\n        }\n        return generatedColumns.every(dbColumn => !!tableSequences[dbColumn.index]);\n    }\n    async initialize(sequences) {\n        if (!sequences) {\n            sequences = await this.sequenceDao.findAll();\n        }\n        this.addSequences(sequences);\n        await this.sequenceDao.incrementCurrentValues();\n        setSeqGen(this);\n    }\n    async tempInitialize(sequences) {\n        this.addSequences(sequences);\n        setSeqGen(this);\n    }\n    async generateSequenceNumbers(dbColumns, numSequencesNeeded) {\n        if (!dbColumns.length) {\n            return [];\n        }\n        await this.waitForPreviousGeneration();\n        this.generatingSequenceNumbers = true;\n        try {\n            return await this.doGenerateSequenceNumbers(dbColumns, numSequencesNeeded);\n        }\n        finally {\n            this.generatingSequenceNumbers = false;\n        }\n    }\n    /**\n     * Keeping return value as number[][] in case we ever revert back\n     * to SequenceBlock-like solution\n     * @param dbColumns\n     * @param numSequencesNeeded\n     */\n    async doGenerateSequenceNumbers(dbColumns, numSequencesNeeded) {\n        const sequentialNumbers = [];\n        for (let i = 0; i < dbColumns.length; i++) {\n            const dbColumn = dbColumns[i];\n            let numColumnSequencesNeeded = numSequencesNeeded[i];\n            const columnNumbers = ensureChildArray(sequentialNumbers, i);\n            const dbEntity = dbColumn.propertyColumns[0].property.entity;\n            const application = dbEntity.applicationVersion.application;\n            let sequenceBlock = this.sequenceBlocks[application.index][dbEntity.index][dbColumn.index];\n            const sequence = this.sequences[application.index][dbEntity.index][dbColumn.index];\n            while (numColumnSequencesNeeded && sequenceBlock) {\n                columnNumbers.push(sequence.currentValue - sequenceBlock + 1);\n                numColumnSequencesNeeded--;\n                sequenceBlock--;\n            }\n            this.sequenceBlocks[application.index][dbEntity.index][dbColumn.index] = sequenceBlock;\n            if (numColumnSequencesNeeded) {\n                const numNewSequencesNeeded = sequence.incrementBy + numColumnSequencesNeeded;\n                const newSequence = { ...sequence };\n                newSequence.currentValue += numNewSequencesNeeded;\n                await this.sequenceDao.save(newSequence);\n                this.sequences[application.index][dbEntity.index][dbColumn.index] = newSequence;\n                sequenceBlock = numNewSequencesNeeded;\n                while (numColumnSequencesNeeded) {\n                    columnNumbers.push(sequence.currentValue - sequenceBlock + 1);\n                    numColumnSequencesNeeded--;\n                    sequenceBlock--;\n                }\n                this.sequenceBlocks[application.index][dbEntity.index][dbColumn.index] = sequenceBlock;\n            }\n        }\n        return sequentialNumbers;\n    }\n    waitForPreviousGeneration() {\n        return new Promise(resolve => {\n            this.isDoneGeneratingSeqNums(resolve);\n        });\n    }\n    isDoneGeneratingSeqNums(resolve) {\n        if (this.generatingSequenceNumbers) {\n            setTimeout(() => {\n                this.isDoneGeneratingSeqNums(resolve);\n            }, 20);\n        }\n        else {\n            resolve();\n        }\n    }\n    addSequences(sequences) {\n        for (const sequence of sequences) {\n            ensureChildArray(ensureChildArray(this.sequences, sequence.applicationIndex), sequence.tableIndex)[sequence.columnIndex] = sequence;\n            sequence.currentValue += sequence.incrementBy;\n            ensureChildArray(ensureChildArray(this.sequenceBlocks, sequence.applicationIndex), sequence.tableIndex)[sequence.columnIndex] = sequence.incrementBy;\n        }\n    }\n};\n__decorate([\n    Inject()\n], SequenceGenerator.prototype, \"sequenceDao\", void 0);\nSequenceGenerator = __decorate([\n    Injected()\n], SequenceGenerator);\nexport { SequenceGenerator };\nexport function injectSequenceGenerator() {\n    console.log('injecting SequenceGenerator');\n}\n//# sourceMappingURL=SequenceGenerator.js.map","import { SEQUENCE_DAO } from \"@airport/airport-code\";\nimport { SEQUENCE_GENERATOR } from \"@airport/check-in\";\nimport { DEPENDENCY_INJECTION } from \"@airport/direction-indicator\";\nimport { SequenceGenerator } from \"./SequenceGenerator\";\nDEPENDENCY_INJECTION.set(SEQUENCE_GENERATOR, SequenceGenerator);\nSEQUENCE_GENERATOR.setDependencies({\n    sequenceDao: SEQUENCE_DAO\n});\n//# sourceMappingURL=tokens.js.map","import { QueryType } from '@airport/ground-control';\nimport { SQLDialect, SqlDriver } from '@airport/fuel-hydrant-system';\n/**\n * Created by Papa on 11/27/2016.\n */\nexport class SqLiteDriver extends SqlDriver {\n    constructor() {\n        super();\n        this.maxValues = 999;\n    }\n    composeTableName(applicationName, tableName) {\n        return `${applicationName}__${tableName}`;\n    }\n    async doesTableExist(applicationName, tableName, context) {\n        const matchingTableNames = await this.findNative(\n        // ` SELECT tbl_name, sql from sqlite_master WHERE type = '${tableName}'`,\n        `SELECT\r\n\ttbl_name\r\nfrom\r\n\tsqlite_master\r\nWHERE\r\n\ttype = 'table'\r\n\tAND tbl_name = '${applicationName}__${tableName}'`, [], context);\n        return this.getNumberOfRows(matchingTableNames) === 1;\n    }\n    getNumberOfRows(result) {\n        return this.getRows(result).length;\n    }\n    async dropTable(applicationName, tableName, context) {\n        const matchingTableNames = await this.findNative(`DROP TABLE '${applicationName}__${tableName}'`, [], context);\n        return matchingTableNames.length === 1;\n    }\n    async findNative(sqlQuery, parameters, context) {\n        let nativeParameters = parameters.map((value) => this.convertValueIn(value));\n        return await this.query(QueryType.SELECT, sqlQuery, nativeParameters, context);\n    }\n    async executeNative(sql, parameters, context) {\n        return await this.query(QueryType.MUTATE, sql, parameters, context);\n    }\n    convertValueIn(value) {\n        switch (typeof value) {\n            case 'boolean':\n                return value ? 1 : 0;\n            case 'number':\n            case 'string':\n                return value;\n            case 'undefined':\n                return null;\n            case 'object':\n                if (!value) {\n                    return null;\n                }\n                else if (value instanceof Date) {\n                    return value.getTime();\n                }\n                else {\n                    throw new Error(`Unexpected non-date object ${value}`);\n                }\n            default:\n                throw new Error(`Unexpected typeof value: ${typeof value}`);\n        }\n    }\n    isValueValid(value, sqlDataType, context) {\n        throw new Error('Method not implemented.');\n        // switch (sqlDataType) {\n        // \tcase SQLDataType.DATE:\n        // \tcase SQLDataType.NUMBER:\n        // }\n        // return false\n    }\n    async initTables(createQueries) {\n        for (let i = 0; i < createQueries.length; i++) {\n            let currentQuery = createQueries[i];\n            await currentQuery;\n        }\n    }\n    getDialect() {\n        return SQLDialect.SQLITE;\n    }\n    isServer() {\n        return false;\n    }\n}\n//# sourceMappingURL=SqLiteDriver.js.map","import { AbstractFunctionAdaptor } from '@airport/fuel-hydrant-system';\nimport { SQLDataType, SqlFunction } from '@airport/ground-control';\n/**\n * Created by Papa on 8/27/2016.\n */\nexport class SqLiteQueryAdaptor {\n    constructor() {\n        this.functionAdaptor = new SqlLiteFunctionAdaptor();\n    }\n    getParameterReference(parameterReferences, newReference) {\n        return '?';\n    }\n    dateToDbQuery(date) {\n        let milliseconds = date.getTime();\n        return '' + milliseconds;\n    }\n    getResultArray(rawResponse) {\n        return rawResponse.res.rows;\n    }\n    getResultCellValue(resultRow, columnName, index, dataType, defaultValue) {\n        let value = this.getResultCellRawValue(resultRow, columnName, index, dataType, defaultValue);\n        switch (dataType) {\n            case SQLDataType.BOOLEAN:\n                if (value !== null) {\n                    return !!value;\n                }\n                break;\n            case SQLDataType.DATE:\n                if (value !== null) {\n                    return new Date(value);\n                }\n                break;\n            case SQLDataType.JSON:\n                if (value !== null) {\n                    return JSON.parse(value);\n                }\n                break;\n            case SQLDataType.ANY:\n            case SQLDataType.NUMBER:\n            case SQLDataType.STRING:\n                return value;\n            default:\n                throw new Error(`Unexpected data type for column ${columnName}`);\n        }\n    }\n    getFunctionAdaptor() {\n        return this.functionAdaptor;\n    }\n    getOffsetFragment(offset) {\n        return `\r\nOFFSET\r\n\t${offset}`;\n    }\n    getLimitFragment(limit) {\n        return `\r\nLIMIT\r\n\t${limit}`;\n    }\n    getParameterValue(parameter) {\n        return this.getValue(parameter.value);\n    }\n    getValue(value, allowArrays = true) {\n        switch (typeof value) {\n            case 'boolean':\n                return value ? '1' : '0';\n            case 'number':\n            case 'string':\n                return value;\n            case 'object':\n                if (value instanceof Date) {\n                    return value.getTime();\n                }\n                else if (value instanceof Array) {\n                    return value.map(aValue => this.getValue(aValue, false));\n                }\n                throw new Error(`Unexpected object as a parameter.`);\n            default:\n                throw new Error(`Unexpected type of parameter '${typeof value}.'`);\n        }\n    }\n}\nexport class SqlLiteFunctionAdaptor extends AbstractFunctionAdaptor {\n    getFunctionCall(jsonFunctionCall, value, qEntityMapByAlias, sqlValueProvider, context) {\n        let param2;\n        switch (jsonFunctionCall.ft) {\n            case SqlFunction.ABS:\n                return `ABS(${value})`;\n            case SqlFunction.AVG:\n                return `AVG(${value})`;\n            case SqlFunction.COUNT:\n                return `COUNT(${value})`;\n            case SqlFunction.MAX:\n                return `MAX(${value})`;\n            case SqlFunction.MIN:\n                return `MIN(${value})`;\n            case SqlFunction.SUM:\n                return `SUM(${value})`;\n            case SqlFunction.UCASE:\n                return `UPPER(${value})`;\n            case SqlFunction.LCASE:\n                return `LOWER(${value})`;\n            case SqlFunction.MID:\n                let start = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[0], context);\n                let length = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[1], context);\n                return `SUBSTR(${value}, ${start}, ${length})`;\n            case SqlFunction.LEN:\n                return `LENGTH(${value})`;\n            case SqlFunction.ROUND:\n                let digits = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[0], context);\n                return `ROUND(${value}, ${digits})`;\n            case SqlFunction.NOW:\n                return `DATE('now')`;\n            case SqlFunction.FORMAT:\n                let formatCall = `FORMAT('${value}', `;\n                for (let i = 0; i < jsonFunctionCall.p.length; i++) {\n                    let formatParam = jsonFunctionCall.p[i];\n                    formatParam = sqlValueProvider.getFunctionCallValue(formatParam, context);\n                    formatCall = `${formatCall}, ${formatParam}`;\n                }\n                formatCall += ')';\n                return formatCall;\n            case SqlFunction.REPLACE:\n                let param1 = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[0], context);\n                param2 = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[1], context);\n                return `REPLACE('${value}', ${param1}, ${param2})`;\n            case SqlFunction.TRIM:\n                return `TRIM(${value})`;\n            case SqlFunction.DISTINCT:\n                throw new Error(`Invalid placement of a distinct function`);\n            case SqlFunction.EXISTS:\n                throw new Error(`Invalid placement of an exists function`);\n            case SqlFunction.DIVIDE:\n                param2 = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[0], context);\n                return `${value} / ${param2}`;\n            case SqlFunction.MINUS:\n                param2 = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[0], context);\n                return `${value} - ${param2}`;\n            case SqlFunction.MULTIPLY:\n                param2 = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[0], context);\n                return `${value} * ${param2}`;\n            case SqlFunction.PLUS:\n                param2 = sqlValueProvider.getFunctionCallValue(jsonFunctionCall.p[0], context);\n                return `${value} + ${param2}`;\n            case SqlFunction.CONCATENATE:\n                return jsonFunctionCall.p.reduce((acc, val) => {\n                    let primitiveValue = this.toString(sqlValueProvider.getFunctionCallValue(val, context));\n                    return acc + val;\n                }, this.toString(value));\n            case SqlFunction.COALESCE:\n                throw new Error('Not Implemented');\n            default:\n                throw new Error(`Unknown function type: ${jsonFunctionCall.ft}`);\n        }\n    }\n    toString(val) {\n        switch (typeof val) {\n            case 'string':\n                return val;\n            case 'boolean':\n            case 'number':\n                return val.toString();\n            case 'undefined':\n                return 'null';\n            case 'object':\n                if (val === null) {\n                    return 'null';\n                }\n                if (val instanceof Date) {\n                    return val.toJSON();\n                }\n                throw new Error(`Unsupported value for conversion to string.`);\n            default:\n                throw new Error(`Unsupported value for conversion to string.`);\n        }\n    }\n}\n//# sourceMappingURL=SqLiteQueryAdaptor.js.map","export class AbstractFunctionAdaptor {\n    getFunctionCalls(clause, innerValue, qEntityMapByAlias, sqlValueProvider, context) {\n        clause.appliedFunctions.forEach((appliedFunction) => {\n            innerValue = this.getFunctionCall(appliedFunction, innerValue, qEntityMapByAlias, sqlValueProvider, context);\n        });\n        return innerValue;\n    }\n}\n//# sourceMappingURL=SQLQueryAdaptor.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Inject, Injected } from '@airport/direction-indicator';\nimport { getFullApplicationName, SQLDataType, } from '@airport/ground-control';\nimport { SqlApplicationBuilder } from '@airport/landing';\nlet SqLiteApplicationBuilder = class SqLiteApplicationBuilder extends SqlApplicationBuilder {\n    async createApplication(jsonApplication, context) {\n        // Nothing to do\n    }\n    getColumnSuffix(jsonApplication, jsonEntity, jsonColumn) {\n        let primaryKeySuffix = '';\n        if (jsonColumn.notNull\n            || this.isPrimaryKeyColumn(jsonEntity, jsonColumn)) {\n            primaryKeySuffix = ' NOT NULL';\n        }\n        const suffix = primaryKeySuffix; // + autoincrementSuffix\n        switch (jsonColumn.type) {\n            case SQLDataType.ANY:\n                return suffix;\n            case SQLDataType.BOOLEAN:\n                return `INTEGER ${suffix}`;\n            case SQLDataType.DATE:\n                return `REAL ${suffix}`;\n            case SQLDataType.JSON:\n                return `TEXT ${suffix}`;\n            case SQLDataType.NUMBER:\n                if (suffix) {\n                    return `INTEGER ${suffix}`;\n                }\n                return 'REAL';\n            case SQLDataType.STRING:\n                return `TEXT ${suffix}`;\n            default:\n                throw new Error(`Unexpected data type for ${jsonApplication.name}.${jsonEntity.name}.${jsonColumn.name}`);\n        }\n    }\n    getCreateTableSuffix(jsonApplication, jsonEntity) {\n        return ` WITHOUT ROWID`;\n    }\n    async buildAllSequences(jsonApplications) {\n        console.log('buildAllSequences');\n        let allSequences = [];\n        for (const jsonApplication of jsonApplications) {\n            const qApplication = this.airportDatabase.QM[getFullApplicationName(jsonApplication)];\n            for (const jsonEntity of jsonApplication.versions[jsonApplication.versions.length - 1].entities) {\n                allSequences = allSequences.concat(this.buildSequences(qApplication.__dbApplication__, jsonEntity));\n            }\n        }\n        await this.sequenceDao.save(allSequences);\n        return allSequences;\n    }\n    stageSequences(jsonApplications, context) {\n        console.log('stageSequences');\n        let stagedSequences = [];\n        for (const jsonApplication of jsonApplications) {\n            const qApplication = this.airportDatabase.QM[getFullApplicationName(jsonApplication)];\n            for (const jsonEntity of jsonApplication.versions[jsonApplication.versions.length - 1].entities) {\n                stagedSequences = stagedSequences.concat(this.buildSequences(qApplication.__dbApplication__, jsonEntity));\n            }\n        }\n        return stagedSequences;\n    }\n    buildSequences(dbApplication, jsonEntity) {\n        const sequences = [];\n        for (const jsonColumn of jsonEntity.columns) {\n            if (!jsonColumn.isGenerated) {\n                continue;\n            }\n            let incrementBy = jsonColumn.allocationSize;\n            if (!incrementBy) {\n                incrementBy = 100;\n            }\n            sequences.push({\n                applicationIndex: dbApplication.index,\n                tableIndex: jsonEntity.index,\n                columnIndex: jsonColumn.index,\n                incrementBy,\n                currentValue: 0,\n            });\n        }\n        return sequences;\n    }\n    getIndexSql(indexName, tableName, columnNameList, unique) {\n        let uniquePrefix;\n        if (unique) {\n            uniquePrefix = ' UNIQUE';\n        }\n        else {\n            uniquePrefix = '';\n        }\n        return `CREATE${uniquePrefix} INDEX ${indexName}\r\n    ON ${tableName} (\r\n    ${columnNameList.join(', ')}\r\n    )`;\n    }\n    getForeignKeySql(tableName, foreignKeyName, foreignKeyColumnNames, referencedTableName, referencedColumnNames) {\n        // TODO: investigate adding foreign key support for SqLite.\n        // Right now there is no alter table command and it has to be baked\n        // into the CREATE TALBE command, though techniques for getting\n        // around this do exist:\n        // https://stackoverflow.com/questions/1884818/how-do-i-add-a-foreign-key-to-an-existing-sqlite-table\n        return null;\n    }\n};\n__decorate([\n    Inject()\n], SqLiteApplicationBuilder.prototype, \"airportDatabase\", void 0);\nSqLiteApplicationBuilder = __decorate([\n    Injected()\n], SqLiteApplicationBuilder);\nexport { SqLiteApplicationBuilder };\n//# sourceMappingURL=SqLiteApplicationBuilder.js.map","import { DEPENDENCY_INJECTION } from \"@airport/direction-indicator\";\nimport { APPLICATION_BUILDER } from \"@airport/landing\";\nimport { SqLiteApplicationBuilder } from \"./SqLiteApplicationBuilder\";\nDEPENDENCY_INJECTION.set(APPLICATION_BUILDER, SqLiteApplicationBuilder);\n//# sourceMappingURL=tokens.js.map","import { SqlTransaction } from '@airport/fuel-hydrant-system';\nexport class SqlJsTransaction extends SqlTransaction {\n    isServer(context) {\n        return false;\n    }\n}\n//# sourceMappingURL=SqlJsTransaction.js.map","import { v4 as uuidv4 } from \"uuid\";\nexport class SqlTransaction {\n    constructor(driver, parentTransaction) {\n        this.driver = driver;\n        this.parentTransaction = parentTransaction;\n        this.isSync = false;\n        this.initiator = {\n            application: '',\n            domain: '',\n            methodName: '',\n            objectName: ''\n        };\n        this.__container__ = driver.__container__;\n        this.id = uuidv4();\n        this.type = driver.type;\n        if (parentTransaction) {\n            parentTransaction.childTransaction = this;\n        }\n    }\n    async saveTransaction(transaction) {\n    }\n    async query(queryType, query, params = [], context, saveTransaction = false) {\n        return this.driver.query(queryType, query, params, context, saveTransaction);\n    }\n    async doesTableExist(applicationName, tableName, context) {\n        return await this.driver.doesTableExist(applicationName, tableName, context);\n    }\n    async dropTable(applicationName, tableName, context) {\n        return await this.driver.dropTable(applicationName, tableName, context);\n    }\n    getEntityTableName(dbEntity, context) {\n        return this.driver.getEntityTableName(dbEntity, context);\n    }\n    getTableName(application, table, context) {\n        return this.driver.getTableName(application, table, context);\n    }\n    async initialize(dbName, context) {\n        // Nothing to do\n    }\n    search(portableQuery, internalFragments, context, cachedSqlQueryId) {\n        return this.driver.search(portableQuery, internalFragments, context, cachedSqlQueryId);\n    }\n    searchOne(portableQuery, internalFragments, context, cachedSqlQueryId) {\n        return this.driver.searchOne(portableQuery, internalFragments, context, cachedSqlQueryId);\n    }\n    async startTransaction(transaction, context) {\n        throw new Error(`Nested transactions are not supported`);\n    }\n    async setupTransaction(context, parentTransaction) {\n        throw new Error(`Nested transactions are not supported`);\n    }\n    async tearDownTransaction(transaction, context) {\n        throw new Error(`Nested transactions are not supported`);\n    }\n    async commit(transaction, context) {\n        await this.driver.commit(this, context);\n    }\n    async rollback(transaction, context) {\n        await this.driver.rollback(this, context);\n    }\n    async deleteWhere(portableQuery, context) {\n        return await this.driver.deleteWhere(portableQuery, context);\n    }\n    async find(portableQuery, internalFragments, context, cachedSqlQueryId) {\n        return await this.driver.find(portableQuery, internalFragments, context, cachedSqlQueryId);\n    }\n    async findOne(portableQuery, internalFragments, context, cachedSqlQueryId) {\n        return await this.driver.findOne(portableQuery, internalFragments, context, cachedSqlQueryId);\n    }\n    async findNative(sqlQuery, parameters, context) {\n        return await this.driver.findNative(sqlQuery, parameters, context);\n    }\n    async insertValues(portableQuery, context, cachedSqlQueryId) {\n        return await this.driver.insertValues(portableQuery, context, cachedSqlQueryId);\n    }\n    async updateWhere(portableQuery, internalFragments, context) {\n        return await this.driver.updateWhere(portableQuery, internalFragments, context);\n    }\n    isValueValid(value, sqlDataType, context) {\n        return this.driver.isValueValid(value, sqlDataType, context);\n    }\n}\n//# sourceMappingURL=SqlTransaction.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { SQLDialect } from '@airport/fuel-hydrant-system';\nimport { QueryType, StoreType } from '@airport/ground-control';\nimport { SqLiteDriver } from '@airport/sqlite';\nimport { SqlJsTransaction } from './SqlJsTransaction';\nimport { Injected } from '@airport/direction-indicator';\n/**\n * Created by Papa on 11/27/2016.\n */\nlet SqlJsDriver = class SqlJsDriver extends SqLiteDriver {\n    constructor() {\n        super();\n        this.type = StoreType.SQLJS;\n    }\n    async initialize() {\n        const SQL = await initSqlJs({\n            // Required to load the wasm binary asynchronously. Of course, you can host it wherever you want\n            // You can omit locateFile completely when running in node\n            locateFile: file => `./${file}`\n        });\n        this._db = new SQL.Database();\n    }\n    async setupTransaction(context, parentTransaction) {\n        const transaction = new SqlJsTransaction(this, parentTransaction);\n        await this.internalSetupTransaction(transaction, context);\n        return transaction;\n    }\n    async internalStartTransaction(transaction, context) {\n        this._db.exec(`SAVEPOINT ${transaction.id}`);\n    }\n    async internalCommit(transaction, context) {\n        this._db.exec(`RELEASE SAVEPOINT ${transaction.id}`);\n    }\n    async internalRollback(transaction, context) {\n        this._db.exec(`ROLLBACK TO SAVEPOINT ${transaction.id}`);\n    }\n    async query(queryType, query, params = [], context, saveTransaction = false) {\n        return new Promise((resolve, reject) => {\n            let stmt;\n            try {\n                if (!['TQ_BOOLEAN_FIELD_CHANGE', 'TQ_DATE_FIELD_CHANGE', 'TQ_NUMBER_FIELD_CHANGE', 'TQ_STRING_FIELD_CHANGE',\n                    'TQ_ENTITY_CHANGE', 'TQ_ENTITY_WHERE_CHANGE', 'TQ_TRANSACTION'].some((deltaTableName) => {\n                    return query.indexOf(deltaTableName) > -1;\n                })) {\n                    console.log(query);\n                    console.log(params);\n                }\n                stmt = this._db.prepare(query);\n                stmt.bind(params);\n                let results = [];\n                while (stmt.step()) {\n                    results.push(stmt.get());\n                }\n                console.log(results);\n                resolve(results);\n            }\n            catch (error) {\n                reject(error);\n            }\n            finally {\n                if (stmt) {\n                    stmt.free();\n                }\n            }\n        });\n    }\n    handleError(error) {\n        throw error;\n    }\n    getRows(result) {\n        return result;\n    }\n    getReturnValue(queryType, response) {\n        switch (queryType) {\n            case QueryType.MUTATE:\n                return response.rowsAffected;\n            case QueryType.SELECT:\n                return response.rows;\n            default:\n                return null;\n        }\n    }\n    getDialect() {\n        return SQLDialect.SQLITE;\n    }\n};\nSqlJsDriver = __decorate([\n    Injected()\n], SqlJsDriver);\nexport { SqlJsDriver };\n//# sourceMappingURL=SqlJsDriver.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { SqLiteQueryAdaptor } from \"@airport/sqlite\";\nimport { Injected } from '@airport/direction-indicator';\n/**\n * Created by Papa on 2/8/2017.\n */\nlet SqlJsQueryAdaptor = class SqlJsQueryAdaptor extends SqLiteQueryAdaptor {\n    getResultCellRawValue(resultRow, columnName, index, dataType, defaultValue) {\n        return resultRow[index];\n    }\n};\nSqlJsQueryAdaptor = __decorate([\n    Injected()\n], SqlJsQueryAdaptor);\nexport { SqlJsQueryAdaptor };\n//# sourceMappingURL=SqlJsQueryAdaptor.js.map","import { DEPENDENCY_INJECTION } from \"@airport/direction-indicator\";\nimport { SQL_QUERY_ADAPTOR } from \"@airport/fuel-hydrant-system\";\nimport { STORE_DRIVER } from \"@airport/terminal-map\";\nimport { SqlJsDriver } from \"./SqlJsDriver\";\nimport { SqlJsQueryAdaptor } from \"./SqlJsQueryAdaptor\";\nDEPENDENCY_INJECTION.set(STORE_DRIVER, SqlJsDriver);\nDEPENDENCY_INJECTION.set(SQL_QUERY_ADAPTOR, SqlJsQueryAdaptor);\n//# sourceMappingURL=tokens.js.map","import { injectTransactionalConnector, injectTransactionalServer } from '@airport/terminal';\nimport { injectAirportDatabase, injectEntityStateManager } from '@airport/tower';\nimport { injectWebReceiver } from './WebMessageReceiver';\nexport * from './DomainRetriever';\nexport * from './WebApplicationInitializer';\nexport * from './WebTransactionalReceiver';\nexport * from './WebMessageReceiver';\nexport * from './tokens';\nexport function injectTransactionalReceiver() {\n    console.log('Injecting TransactionalReceiver');\n    // injectMovingWalkway()\n    injectTransactionalConnector();\n    injectAirportDatabase();\n    injectTransactionalServer();\n    injectEntityStateManager();\n    injectWebReceiver();\n}\n//# sourceMappingURL=index.js.map","import App from './App.svelte';\r\nimport { initFramework } from './framework';\r\nconst app = new App({\r\n    target: document.body,\r\n    props: {}\r\n});\r\ninitFramework().then();\r\nexport default app;\r\n","import { IOC } from '@airport/direction-indicator';\r\nimport { TRANSACTIONAL_RECEIVER } from '@airport/terminal-map';\r\nimport { injectTransactionalReceiver } from '@airport/web-terminal';\r\nimport { startDb } from '@airport/sqljs';\r\ninjectTransactionalReceiver();\r\nexport async function initFramework() {\r\n    await startDb('AIRportA-demo-demo-demo-functionalty');\r\n    await IOC.get(TRANSACTIONAL_RECEIVER);\r\n}\r\n","import { AIRPORT_DATABASE } from '@airport/air-traffic-control';\nimport { IOC } from '@airport/direction-indicator';\nimport { injectSequenceGenerator } from '@airport/sequence';\nimport { DATABASE_MANAGER } from '@airport/terminal';\nexport * from './SqlJsDriver';\nexport * from './SqlJsQueryAdaptor';\nexport * from './SqlJsTransaction';\nexport * from './tokens';\ninjectSequenceGenerator();\nexport async function startDb(domainName) {\n    await IOC.get(AIRPORT_DATABASE);\n    const dbManager = await IOC.get(DATABASE_MANAGER);\n    await dbManager.initWithDb(domainName, {});\n}\nexport async function closeDb() {\n}\n//# sourceMappingURL=index.js.map"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","detach","node","parentNode","removeChild","current_component","set_current_component","component","onMount","Error","get_current_component","$$","on_mount","push","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","Set","flush","i","length","update","pop","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","make_dirty","then","fill","init","options","instance","create_fragment","not_equal","props","append_styles","parent_component","bound","on_destroy","on_disconnect","context","Map","callbacks","skip_bound","root","target","ready","ret","rest","value","hydrate","nodes","element","Array","from","childNodes","l","c","intro","block","delete","local","anchor","customElement","m","new_on_destroy","map","filter","mount_component","module","isarray","isArray","arr","prototype","toString","call","pathToRegexp_1","pathToRegexp","parse_1","parse","compile_1","compile","tokensToFunction_1","tokensToFunction","tokensToRegExp_1","tokensToRegExp","PATH_REGEXP","RegExp","join","str","res","tokens","key","index","path","exec","escaped","offset","slice","prefix","name","capture","group","suffix","asterisk","repeat","optional","delimiter","pattern","escapeGroup","substr","matches","obj","data","token","segment","TypeError","j","encodeURIComponent","test","escapeString","replace","attachKeys","re","keys","flags","sensitive","regexpToRegexp","groups","source","match","arrayToRegexp","parts","stringToRegexp","strict","end","route","lastToken","endsWithSlash","loaded","hasDocument","document","hasWindow","window","hasHistory","history","hasProcess","process","clickEvent","ontouchstart","isLocation","location","Page","this","exits","current","len","_decodeURLComponents","_base","_strict","_running","_hashbang","clickHandler","bind","_onpopstate","createPage","pageInstance","pageFn","page","apply","arguments","base","start","stop","show","back","redirect","dispatch","exit","configure","sameOrigin","defineProperty","get","set","val","Context","Route","middleware","unhandled","handled","_window","_getBase","hash","pathname","search","canonicalPath","href","escapeRegExp","s","state","_page","hashbang","pageBase","indexOf","title","querystring","_decodeURLEncodedURIComponent","params","split","globalPage","opts","method","regexp","decodeURLComponents","_popstate","popstate","_click","click","addEventListener","removeEventListener","loc","protocol","enable","url","prev","prevContext","pushState","setTimeout","to","inst","e","save","nextExit","nextEnter","_which","metaKey","ctrlKey","shiftKey","defaultPrevented","el","eventPath","composedPath","nodeName","toUpperCase","svg","constructor","hasAttribute","getAttribute","link","_samePath","baseVal","orig","preventDefault","readyState","undefined","event","which","button","_toURL","URL","anc","createElement","hostname","port","decodeURIComponent","replaceState","self","next","routePath","qsIndex","hasOwnProperty","page_js","default_1","default","factory","__awaiter","thisArg","_arguments","P","generator","console","log","DependencyInjectionToken","application","descriptor","dependencyConfiguration","getInheritedDependencyConfiguration","class","getPath","domain","setDependencies","aClass","parentClass","getPrototypeOf","returnedDependencyConfiguration","InjectionApplication","tokenMap","autopilot","diToken","lib","libraryName","AIRPORT_DOMAIN","app","InjectionDomain","applicationMap","applicationName","getApp","DOMAIN_MAP","domainName","ContextType","id","type","directionIndicator","AUTOPILOT_API_LOADER","interface","ChildContainer","Container","rootContainer","super","objectMap","doEventuallyGet","successCallback","errorCallback","firstDiNotSetClass","firstMissingClassToken","objects","doGetCore","doGet","object","__initialized__","notInitializedObjectIndexes","objectPaths","message","isFramework","getSync","loadApiAutopilot","diSet","setDependencyGetters","__container__","result","_","propertyName","dependencyToken","async","getByNames","tokenName","reject","eventuallyGet","DEPENDENCY_INJECTION","uiContainers","db","dbContainer","dbContainerMap","DB","remove","container","ui","componentName","UI","childContainer","IOC","injectable","iocContainer","UpdateState","RepositoryEntityType","TableMap","applicationVersionId","tableMap","ensure","tableIndex","allColumns","ColumnMapConstructor","ColumnMap","tableColumnMap","existsByStructure","columnIndex","columnMap","getFullApplicationName","getFullApplicationNameFromDomainAndName","endsWith","domainPrefix","lastIndexOf","applicationPrefix","ApplicationMap","ensureEntity","entity","TableMapConstructor","applicationVersion","applicationIndex","SyncColumnMap","SyncTableMap","intersects","otherTableColumnMap","SyncApplicationMap","parseInt","BlockSyncStatus","RepositorySyncStatus","TerminalSyncStatus","column","file","foreignkey","joincolumn","property","onetomany","table","repositoryEntity","JoinType","EntityRelationType","JSONRelationType","SortOrder","SqlFunction","JSONClauseObjectType","SQLDataType","EntityState","OperationCategory","SqlOperator","CRUDOperation","TransactionType","ChangeType","DistributionStrategy","QueryType","PlatformType","StoreType","IdGeneration","JsonStatementType","QueryResultType","OperationType","QueryInputKind","QueryParameterType","ApplicationStatus","ensureChildArray","parentContainer","childArray","ensureChildMap","childObject","ensureChildJsMap","childMap","ensureChildJsSet","childSet","undefinedToNull","NAME","ANY","BOOLEAN","DATE","NUMBER","STRING","ENTITY","TABLE","DATABASES","DEFINITION","VALUE","COLUMN_LIST","UNIQUE","FOREIGN_KEY","REFERENCED_COLUMN_NAME","COLUMN","ENUM_TYPE","ID","JOIN_COLUMN","JOIN_COLUMNS","JSON_TYPE","MANY_TO_ONE","ONE_TO_MANY","SUB_QUERY","MAPPED_BY","INDEXES","PRIMARY_KEY","APPLICATION","ACTOR_ID","ACTOR_RECORD_ID","ENTITY_NAME","LOCAL_ENTITY_NAME","REPOSITORY_ID","ORIGINAL_ACTOR_ID","ORIGINAL_ACTOR_RECORD_ID","ORIGINAL_REPOSITORY_ID","SYS_WIDE_OP_ID_APPLICATION","SYS_WIDE_OP_ID_ENTITY","systemWideOperationId","SYSTEM_WIDE_OPERATION_ID","groundControl","ENTITY_STATE_MANAGER","INTER_APP_API_CLIENT","OPERATION_CONTEXT_LOADER","TRANSACTIONAL_CONNECTOR","extendStatics","d","setPrototypeOf","__proto__","__extends","String","__","fulfilled","step","rejected","done","__generator","body","f","y","t","g","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","__values","o","__read","r","ar","error","__spreadArray","il","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncValues","isFunction","createErrorClass","createImpl","ctorFunc","stack","UnsubscriptionError","_super","errors","err","arrRemove","item","splice","Subscription","initialTeardown","closed","_parentage","_teardowns","empty","unsubscribe","e_1","_a","e_2","_b","_parentage_1","_parentage_1_1","e_1_1","_teardowns_1","_teardowns_1_1","teardown_1","execTeardown","e_2_1","teardown","_hasParent","_addParent","parent","includes","_removeParent","EMPTY","EMPTY_SUBSCRIPTION","isSubscription","config","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","args","_i","delegate","clearTimeout","handle","reportUnhandledError","COMPLETE_NOTIFICATION","createNotification","kind","errorContext","cb","isRoot","errorThrown","captureError","Subscriber","destination","_this","isStopped","EMPTY_OBSERVER","complete","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","observerOrNext","context_1","wrapForErrorHandling","defaultErrorHandler","handler","notification","subscriber","observable","identity","x","pipeFromArray","input","reduce","Observable","subscribe","_subscribe","lift","operator","isObserver","_trySubscribe","sink","promiseCtor","getPromiseCtor","subscription","Symbol_observable","pipe","operations","toPromise","operate","hasLift","liftedSource","OperatorSubscriber","onNext","onComplete","onError","onFinalize","ObjectUnsubscribedError","Subject","observers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","copy","copy_1","copy_1_1","enumerable","configurable","_checkFinalizedStatuses","_innerSubscribe","asObservable","BehaviorSubject","_value","getValue","isArrayLike","isPromise","isInteropObservable","isAsyncIterable","createInvalidObservableTypeError","isIterable","Symbol_iterator","readableStreamLikeToAsyncGenerator","readableStream","reader","getReader","read","releaseLock","isReadableStreamLike","innerFrom","obs","array","promise","fromAsyncIterable","iterable","iterable_1","iterable_1_1","asyncIterable","asyncIterable_1","asyncIterable_1_1","catch","executeSchedule","parentSubscription","scheduler","work","delay","scheduleSubscription","schedule","observeOn","subscribeOn","scheduleAsyncIterable","scheduled","scheduleObservable","scheduleArray","schedulePromise","scheduleIterable","scheduleReadableStreamLike","project","defaultCompare","internalTerminalState","applicationActors","applications","domains","frameworkActor","internalConnector","dbName","internalCredentials","methodName","objectName","serverUrl","lastIds","columns","entities","properties","propertyColumns","relations","relationColumns","applicationVersions","receiver","initializedApps","initializingApps","terminal","transactionManager","pendingTransactionQueue","rootTransactionInProgressMap","transactionInProgressMap","webReceiver","localDomain","mainDomainFragments","onClientMessageCallback","pendingApplicationCounts","pendingHostCounts","pendingInterAppApiCallMessageMap","subsriptionMap","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","TerminalStore","getTerminalState","selectorManager","createRootSelector","getApplicationActors","createSelector","getApplicationActorMapByDomainAndApplicationNames","applicationActorsByDomainAndApplicationNames","applicationActor","applicationActorMapForDomain","actorsForApplication","getDomains","getDomainMapByName","domainsByName","getFrameworkActor","getInternalConnector","terminalState","getLastIds","getLatestApplicationVersionMapByNames","latestApplicationVersionMapByNames","mapForDomain","currentVersion","getLatestApplicationVersionMapByFullApplicationName","latestApplicationVersionMapByFullApplicationName","applicationVersionsForDomainName","values","fullName","getAllApplicationVersionsByIds","allApplicationVersionsByIds","versions","getLatestApplicationVersionsByApplicationIndexes","latestApplicationVersionsByApplicationIndexes","getApplications","getAllEntities","allEntities","latestApplicationVersion","getAllColumns","getAllRelations","allRelations","relation","getReceiver","getTransactionManager","getWebReceiver","tearDown","targetObject","propertyKey","ALIASES","AliasCache","aliasPrefix","reset","getFollowingAlias","currentAlias","lastAlias","currentIndex","aliasString","AliasMap","aliasCache","aliasMap","getNextAlias","hasAliasFor","getExistingAlias","EntityAliases","entityAliasCache","columnAliasCache","parameterAliasCache","parameterAliases","ParameterAliases","getParams","getNewFieldColumnAliases","FieldColumnAliases","__driver__","dbEntity","getOnlyAlias","size","alias","parameter","field","getParameters","parameters","_entityAliases","entityAliases","qField","dbProperty","Operation","category","ValueOperation","equals","lValue","rValue","EQUALS","greaterThan","GREATER_THAN","greaterThanOrEquals","GREATER_THAN_OR_EQUALS","isNotNull","IS_NOT_NULL","isNull","IS_NULL","in","IN","lessThan","LESS_THAN","lessThanOrEquals","LESS_THAN_OR_EQUALS","notEquals","NOT_EQUALS","notIn","NOT_IN","and","LogicalOperation","or","not","verifyChildOps","LOGICAL","AND","OR","NOT","QRelation","dbRelation","parentQ","appliationUtils","relationManager","QRepositoryEntityRelation","innerJoin","getNewQEntity","INNER_JOIN","leftJoin","LEFT_JOIN","joinType","relationEntity","newQEntity","applicationUtils","getQEntityConstructor","getNextChildJoinPosition","parentJoinEntity","thisRelation","other","actor","actorRecordId","repository","extend","BooleanOperation","FieldInOrderBy","sortOrder","toJSON","columnAliases","fa","so","toEntityJSON","ci","dbColumn","pi","ti","si","QField","objectType","__appliedFunctions__","applySqlFunction","sqlFunctionCall","appliedField","getInstance","forSelectClause","queryUtils","fieldUtils","rootEntityPrefix","__fieldSubQuery__","getRootJoinEntity","jsonField","appliedFunctions","appliedFunctionsToJson","ta","getPositionAlias","fromClausePosition","ot","dt","fieldSubQuery","getFieldQueryJson","FIELD_QUERY","asc","ASCENDING","DESCENDING","addSubQuery","subQuery","operableFunctionToJson","functionObject","valueToJSON","copyFunctions","appliedFunction","functionCallToJson","functionCall","ft","fromFunctionObject","Date","QOperableField","operation","Function","QBooleanField","FIELD","qEntity","QBooleanFunction","isQueryParameter","FIELD_FUNCTION","json","parameterAlias","DateOperation","QDateField","QDateFunction","NumberOperation","QNumberField","QNumberFunction","StringOperation","like","LIKE","QStringField","QStringFunction","UntypedOperation","UNTYPED","QUntypedField","sub","methods","getColumnQField","JSON","allQApplications","ChildQEntity","nextChildJoinPosition","qFieldOrRelation","relationType","qIdRelationConstructor","__qIdRelationConstructors__","isRepositoryEntity","QRepositoryEntityOneToManyRelation","QOneToManyRelation","getQRelation","propertyColumn","addColumnQField","QEntity","idIndex","idColumns","getQEntityIdRelationConstructor","QEntityIdRelation","getQEntityIdFields","addToObject","parentProperty","relationColumnMap","manyRelationColumns","relationColumn","oneColumn","manyColumn","isId","originalColumn","applicationDependsOn","dependantApplication","dependsOnApplicationIndex","applicationWithDepsMap","dependencies","repationManager","QNullFunction","bool","primitive","date","num","wrapPrimitive","assertDataType","typesOfData","rowIndex","expectedDataTypes","getColumnName","getSqlFunctionCall","sqlFunction","abs","numeric","AVG","ABS","avg","getFunctionObject","selectClause","select","QDistinctFunction","getSelectClause","count","COUNT","max","MAX","min","MIN","sum","SUM","plus","numeric1","numeric2","PLUS","ucase","stringValue","UCASE","lcase","LCASE","mid","MID","LEN","round","digits","ROUND","now","NOW","format","formatParameters","FORMAT","toReplace","replaceWith","REPLACE","trim","stringField","TRIM","StandAloneFunction","distinct","distinctFunction","DISTINCT","getSelect","parsedSelectClause","DISTINCT_FUNCTION","exists","rawQuery","QExistsFunction","EXISTS","FUNCTION","getQuery","parsedQuery","ob","EXISTS_FUNCTION","divide","DIVIDE","subtract","MINUS","modulus","MODULUS","multiply","MULTIPLY","concat","fragments","firstFragment","restOfFragments","CONCATENATE","union","rawQueries","unionAll","intersect","minus","AbstractQuery","isEntityQuery","getNonEntityQuery","jsonQuery","createSelectCallback","fromClauseToJSON","F","W","whereClauseToJSON","where","GB","groupByClauseToJSON","groupBy","H","having","OB","orderByClauseToJSON","orderBy","L","limit","O","fromClause","fromEntity","QTree","getRelationJson","NON_ENTITY_SELECT_ERROR_MESSAGE","DistinguishableQuery","isHierarchicalEntityQuery","selectClauseToJSON","rawSelect","rawInnerSelect","innerSelect","nonDistinctSelectClauseToJSON","MappableQuery","isChildObject","TreeQuery","S","tree","query","queryDefinition","view","convertMappedEntitySelect","customEntity","selectProxy","fieldPrefix","fieldIndex","customField","JoinFields","joinTo","on","joinOperation","joinWhereClause","QDriver","QEntityDriver","fullJoin","right","FULL_JOIN","rightJoin","RIGHT_JOIN","entityFieldMap","entityRelations","currentChildIndex","jsonRelation","jt","rt","rep","getJoinRelationJson","getEntityRelationJson","getRootRelationJson","ENTITY_JOIN_ON","ENTITY_APPLICATION_RELATION","ri","QTreeDriver","SUB_QUERY_ROOT","ENTITY_ROOT","getQ","joinChild","nextChildPosition","isRootEntity","rootEntity","SUB_QUERY_JOIN_ON","JoinTreeNode","addChildNode","joinTreeNode","childFromClausePositionArray","childPosition","getEntityRelationChildNode","getEntityRelationChildNodeByIndexes","relationIndex","matchingNodes","childNode","jsonEntityRelation","childTreeNode","RelationManager","getAlias","getParentAlias","createRelatedQEntity","joinRelation","getDbEntity","joinParentDriver","Lookup","ensureContext","doEnsureContext","lookup","queryResultType","one","QueryClass","mapResults","queryMethod","entityUtils","getEntityQuery","getQueryResultType","queryFacade","searchOne","findOne","find","baseQueryResultType","ENTITY_GRAPH","MAPPED_ENTITY_GRAPH","ENTITY_TREE","MAPPED_ENTITY_TREE","RAW","TREE","SHEET","startedAt","EntityLookup","dao","setMap","MappedChildClass","isMapped","setNoCache","ChildClass","entityLookup","rawEntityQuery","updateCacheManager","saveOriginalValues","EntityFind","graph","rawGraphQuery","rawTreeQuery","noCache","EntityFindOne","FieldQuery","jsonFieldQuery","getClauseDataType","selectField","SheetQuery","NonEntityFind","rawFieldQuery","sheet","rawSheetQuery","cursorSize","rawNonEntityQuery","NonEntityFindOne","NonEntitySearch","NonEntitySearchOne","AbstractInsertValues","rawInsertValues","columnIndexes","validateColumn","columnName","tableConfig","columnApplication","entityApplication","valuesToJSON","valueSets","dbColumns","valueSet","datesToNumbers","getTime","stringify","getPrimitiveValue","AbstractUpdate","rawUpdate","U","setToJSON","Delete","rawDelete","DF","deleteFrom","EntityQuery","InsertColumnValues","entityDriver","insertInto","II","C","V","InsertValues","driver","UpdateColumns","setClause","dbColumnMap","idDbColumnMap","idColumnMap","UpdateProperties","rawSet","jsonSetClause","dbPropertyMap","propertyMap","setEntityFragmentsToJSON","rawSetFragment","dbPropertyChain","childDbRelationChain","isTopLevelFragment","getPropertyChainDesription","childDbPropertyChain","setFragmentToJSON","dbRelationChain","matchingManyRelationColumn","manyRelationColumn","firstProperty","lastPrefix","ending","maxChainDepth","objectExists","valuesEqual","value1","value2","checkChildObjects","checkedKeys","compareNumbers","number1","number2","EntityUtils","getObjectClassName","getClassName","clazz","isAppliable","getRawQuery","FieldUtils","QMetadataUtils","getAllNonGeneratedColumns","isGenerated","getAllInsertableColumns","getNewEntity","airDb","entityConstructor","qApplications","__constructors__","QueryUtils","whereClause","jsonOperation","logicalOperation","jsonLogicalOperation","functionOperation","valueOperation","jsonValueOperation","convertLRValue","anRValue","Y","airportSelectField","insert","ALL_FIELDS","__allFields__","isY","isN","ApplicationUtils_1","ApplicationUtils","airportDatabase","isActorId","isActorRecordId","isRepositoryId","doCascade","crudOperation","oneToManyElems","CREATE","UPDATE","DELETE","__qConstructors__","getEntityConstructor","isIdEmpty","idValue","isEmpty","isRelationColumn","isManyRelationColumn","isOneRelationColumn","oneRelationColumns","getIdKey","entityObject","failOnNoId","idValueCallback","getIdKeyInfo","arrayByIdColumnIndex","idKeys","mapByIdColumnName","propertyNameChains","getColumnPropertyNameChainsAndValue","forIdKey","generateNegativeIdsForMissing","columnValuesAndPaths","getColumnValuesAndPaths","firstColumnValueAndPath","last","addRelationToEntitySelectClause","allowDefaults","forEachColumnTypeOfRelation","convertTo","propertySelectClause","firstPropertyNameChain","propertyNameLink","propertyObject","reason","entityStateManager","markAsStub","forEachColumnOfRelation","failOnNoValue","dbRelationColumn","getColumnPaths","getSheetSelectFromSetClause","errorPrefix","actorIdColumnIndex","actorRecordIdColumnIndex","repositoryIdColumnIndex","systemWideOperationIdColumn","nonIdColumnSet","some","addColumnToSheetSelect","inQueryColumnIndex","relationObject","breadCrumb","manyRelation","relationBreadCrumb","otherEntityColumn","relationValuesAndPaths","propertyBreadCrumb","TEMP_ID","entitySelectClause","firstColumnPath","handleNoId","noIdValueCallback","deltaConst","dbConst","ConstraintMode","DB_ID_FIELD","CURRENT_DB","DEFAULT_DB","ALL_DBS","OWN_DB_FACADE","airTrafficControl","AIRPORT_DATABASE","APPLICATION_UTILS","DATABASE_FACADE","ENTITY_UTILS","FIELD_UTILS","LOOKUP","Q_METADATA_UTILS","QUERY_FACADE","QUERY_UTILS","RELATION_MANAGER","REPOSITORY_LOADER","UPDATE_CACHE_MANAGER","databaseFacade","transactionalConnector","EntityDatabaseFacade","Q","insertColumnValues","rawInsertColumnValues","withDbEntity","insertValues","insertColumnValuesGenerateIds","insertValuesGenerateIds","updateColumnsWhere","rawUpdateColumns","updateWhere","deleteWhere","saveToDestination","repositoryDestination","previousEntity","DaoFindOneStub","Graph","Tree","DaoFindStub","DaoSearchOneStub","DaoSearchStub","DaoStub","Find","FindOne","Search","SearchOne","Dao","dbEntityId","internal","stub","__dbApplication__","BaseSave","entityId","repositoryId","uuId","ageSuitability","findAll","entityIds","cacheForUpdate","findAllAsTrees","findById","markForDeletion","entityIdInfo","anEntity","DaoQueryDecorators","ApiObjectKind","FieldsSelect","ids","propertyNames","fields","manyToOnes","getRelationSelect","oneToManys","forRelations","selectFragment","Duo","qApplication","getIdStub","getIdStubs","SelectorManager","inputSelectors","sourceObservable","selector","keySelector","comparator","previousKey","first","currentKey","getSelector","stateObservable","currentValue","duoDiSet","dbApplication","getSysWideOpId","sequenceGenerator","getSysWideOpIds","numSequencesNeeded","sysWideOpIdGeneratedColumn","QM","entityMapByName","generateSequenceNumbers","checkIn","API_REGISTRY","API_VALIDATOR","CLIENT_QUERY_MANAGER","DAO","OPERATION_DESERIALIZER","QUERY_PARAMETER_DESERIALIZER","QUERY_RESULTS_SERIALIZER","SELECTOR_MANAGER","SEQUENCE_GENERATOR","terminalMap","APPLICATION_INITIALIZER","DOMAIN_RETRIEVER","STORE_DRIVER","TERMINAL_STORE","TRANSACTION_MANAGER","TRANSACTIONAL_RECEIVER","TRANSACTIONAL_SERVER","terminalStore","storeDriver","applicationInitializer","operationContextLoader","RepositoryLoader","loadRepository","repositorySource","repositoryUuId","repositoryExistenceChecked","repositoryLoadInfo","repositoryDao","getRepositoryLoadInfo","lastSyncTimestamp","immutable","remoteRepositoryTransactionHistory","repositoryTransactionHistory","saveTimestamp","synchronizationAdapter","synchronizationAdapterLoader","load","messages","getTransactionsForRepository","messageMapByUuId","synchronizationInManager","receiveMessages","getRandomValues","rnds8","Uint8Array","rng","crypto","msCrypto","validate","uuid","REGEX","byteToHex","v4","buf","rnds","random","toLowerCase","RepositoryManager","initialize","createRepository","newRepository","createRepositoryRecord","goOffline","getUpdateState","setUpdateStateForAll","updateState","setUpdateState","getRepositoryRecord","createdAt","owner","user","uuidv4","ensureRepositoryScopeOnInsertValues","row","ensureRepositoryLinkOnUpdateWhere","ensureRepositoryScopeOnDeleteWhere","OperationHistory","recordHistory","RecordHistory","newValues","oldValues","RecordHistoryNewValue","RecordHistoryOldValue","RepositoryTransactionType","RepositoryTransactionHistory","repositoryTransactionType","LOCAL","operationHistory","transactionHistory","TransactionHistory","repositoryTransactionHistories","repositoryTransactionHistoryMap","allOperationHistory","allRecordHistory","allRecordHistoryNewValues","allRecordHistoryOldValues","Actor","Repository","RepositoryEntity","RepositoryApplication","ChildRepoRow","ChildRow","ImmutableRepoRow","ImmutableRow","MutableRepoRow","MutableRow","ReferenceRow","Q_APPLICATION","ddS","SQDIDao","BaseActorDao","Save","BaseOperationHistoryDao","BaseRecordHistoryDao","BaseRecordHistoryNewValueDao","BaseRecordHistoryOldValueDao","BaseRepositoryDao","BaseRepositoryApplicationDao","BaseRepositoryTransactionHistoryDao","BaseTransactionHistoryDao","SQDIDuo","BaseOperationHistoryDuo","BaseRecordHistoryDuo","BaseRecordHistoryNewValueDuo","BaseRecordHistoryOldValueDuo","BaseRepositoryTransactionHistoryDuo","BaseTransactionHistoryDuo","RecordHistoryNewValueDao","findByRecordHistoryIdIn","recordHistoryIds","rhnv","RecordHistoryOldValueDao","rhov","RepositoryTransactionHistoryDao","findWhereUuIdsIn","uuIds","rth","findAllLocalChangesForRecordIds","changedRecordIds","repositoryTransactionHistoryMapByRepositoryId","th","oh","ae","av","rh","nv","repositoryEquals","idsForRepository","recordMapForRepository","entityEquals","recordMapForEntity","actorEquals","actorId","recordsForActor","firstChangeTime","repoTransHistories","orderNumber","changeType","newValue","transactionType","repoTransHistory","sort","rth1","rth2","updateSyncTimestamp","syncTimestamp","ActorDao","findWithDetailsAndGlobalIdsByIds","actorIds","findWithDetailsAndGlobalIdsByWhereClause","findMapsWithDetailsByGlobalIds","userIds","terminalIds","actorMap","actorMapById","actors","findWithDetailsByGlobalIds","findByDomainAndApplicationNames","act","findByUuIds","getWhereClause","ap","username","RepositoryDao","REMOTE_SYNC","findReposWithDetailsAndSyncNodeIds","repositoryIds","findByIds","repositories","OperationHistoryDuo","getNewRecord","entityChangeType","rootTransaction","numberOfOperations","ew1","ew2","startId1","startId2","startRecordHistory","recordHistoryDuo","RecordHistoryDuo","addNewValue","recordHistoryNewValue","recordHistoryNewValueDuo","addOldValue","oldValue","recordHistoryOldValue","recordHistoryOldValueDuo","RecordHistoryNewValueDuo","RecordHistoryOldValueDuo","RepositoryTransactionHistoryDuo","isRepositoryCreation","newRecord","sortRepoTransHistories","repoTransHistory1","repoTransHistory2","syncTimeComparison","saveTimeComparison","startOperation","operationHistoryDuo","compareDates","date1","date2","time1","time2","TransactionHistoryDuo","transaction","getRepositoryTransaction","repositoryTransactionHistoryDuo","holdingPattern","ACTOR_DAO","OPERATION_HISTORY_DUO","RECORD_HISTORY_DUO","RECORD_HISTORY_NEW_VALUE_DUO","RECORD_HISTORY_OLD_VALUE_DUO","REPOSITORY_DAO","REPOSITORY_TRANSACTION_HISTORY_DAO","REPOSITORY_TRANSACTION_HISTORY_DUO","TRANSACTION_HISTORY_DUO","Agt","Continent","Country","Terminal","isLocal","TerminalAgt","User","UserTerminal","UserTerminalAgt","BaseAgtDao","BaseContinentDao","BaseCountryDao","BaseTerminalDao","BaseTerminalAgtDao","BaseUserDao","BaseUserTerminalDao","BaseUserTerminalAgtDao","TerminalDao","findByOwnerIdsAndUuIds","ownerIds","terminals","UserDao","findByUserNames","usernames","u","users","AddUserErrorCodes","UserApi","addUser","email","existingUsers","userDao","existingUser","errorCode","USERNAME_TAKEN","findUser","privateId","travelDocumentCheckpoint","USER_API","interAppApiClient","TERMINAL_DAO","USER_DAO","InternalRecordManager","ensureApplicationRecords","transactInternal","_transaction","updateDomain","actorMapForDomain","actorDao","anApplication","applicationDao","findByIndex","lastTerminalState","initTerminal","getOriginalValues","updatedDomain","dbDomain","domainDao","findByName","setOriginalValues","replaced","InternalTransactionalConnector","callApi","addRepository","transactionalServer","portableQuery","cachedSqlQueryId","ensureGeneratedValues","insertValuesGetIds","updateValues","onMessage","OnlineManager","online","repositoryManager","goOnline","offlineDeltaStore","OFFLINE_DELTA_STORE","GO_ONLINE","repoRecords","findReposWithDetailsByIds","goOnlineCalls","repositoryGoOnline","all","deltaStore","remoteChangesSinceInitialGoOnline","transactions","repoTransaction","REMOTE","addRemoteChanges","remoteChangesIter","loadTransactionsSinceLastKnown","lastSyncedTransaction","remoteChanges","hasNext","unsyncedChanges","repositoryTransactionHistoryDao","findUnsyncedTransactions","syncStatus","SYNCHRONIZED","addChanges","changeListConfig","markChangesAsSynced","isOnline","IsolateMessageType","AppState","applicationState","appState","NOT_INITIALIED","hostServer","mainDomain","observableMessageMap","pendingMessageMap","messageCallback","ApplicationStore","apron","LOCAL_API_SERVER","apiRegistry","TransactionalReceiver","processMessage","errorMessage","credentials","CALL_API","nativeHandleApiCall","APP_INITIALIZING","jsonApplication","fullApplicationName","databaseManager","initFeatureApplications","internalRecordManager","APP_INITIALIZED","GET_LATEST_APPLICATION_VERSION_BY_APPLICATION_NAME","RETRIEVE_DOMAIN","ADD_REPOSITORY","DELETE_WHERE","deleteWhereMessage","FIND","findMessage","FIND_ONE","findOneMessage","INSERT_VALUES","insertValuesMessage","INSERT_VALUES_GET_IDS","insertValuesGetIdsMessage","SAVE","SAVE_TO_DESTINATION","saveMessage","saveToDestinationMessage","SEARCH","searchMessage","SEARCH_ONE","searchOneMessage","UPDATE_VALUES","updateValuesMessage","startApiCall","nativeHandleCallback","transactionCredentials","transactionId","startTransaction","initiator","rollback","endApiCall","commit","TransactionalServer","getTransactionFromContextOrCredentials","getActor","queryManager","ensureContextSync","saveResult","operationManager","performSave","numInsertedRecords","insertManager","numUpdatedRecords","updateManager","numDeletedRecords","deleteManager","tempActor","localTerminal","anActor","ensureSync","AbstractMutationManager","getPortableQuery","parameterMap","doInsertValues","columnValueLookups","columnValueLookup","nested","nextColumnValueLookup","BLUEPRINT","sinceVersion","api","apiObjectMap","IApplicationApi","operationMap","testApiDefinitionGeneration","isAsync","manyRelationColumnRefs","notNull","propertyRefs","idColumnRefs","columnRef","integerVersion","referencedApplications","versionString","IUserApi","relationRef","mappedBy","propertyRef","relationTableIndex","manyRelationIndex","oneApplicationIndex","oneTableIndex","oneRelationIndex","oneColumnIndex","propertyIndexes","propertyIndex","unique","allocationSize","columnList","relationTableApplicationIndex","DatabaseManager","initialized","initNoDb","installStarterApplication","stage","initWithDb","doesTableExist","isInitialized","jsonApplications","findAllWithJson","existingApplicationMap","applicationsToCreate","existingApplication","blueprintFile","DeleteManager","deleteCommand","isSync","selectCascadeTree","getCascadeSubTree","jsonDelete","jsonSelect","portableSelect","treesToDelete","recordsToDelete","repositoryIdSet","treeToDelete","recordRepositoryIds","recordTreeToDelete","recordsToDeleteForApplication","recordsToDeleteForRepository","recordToDelete","columnProcessed","childTrees","childDbEntity","childTree","foundValues","applicationRecordsToDelete","entityIndex","entityRecordsToDelete","entityRecordsToDeleteForRepo","historyManager","getNewRepositoryTransactionHistory","DELETE_ROWS","subTree","HistoryManager","getNewTransactionHistory","transactionHistoryDuo","InsertManager","internalInsertValues","verifyNoGeneratedColumns","jsonInsertValues","getIds","validateValueRowLength","columnIndexSet","columnsToPopulate","inStatementIndex","rowNumber","generatedColumns","ensureRepositoryEntityIdValues","generateOnSync","addInsertHistory","numberOfInsertedRecords","firstValuesRow","numValuesInRow","valuesRow","allIds","_entityValues","actorIdColumn","sysWideOperationIdColumn","idColumn","inStatementColumnIndex","isActorIdColumn","entityValues","idValues","generatedColumnIndexes","generatedColumn","generatedSequenceValues","generatedColumnIndex","generatedColumnSequenceValues","insertColumnIndex","generatedValue","actorRecordIdColumn","repositoryIdColumn","repositoryIdColumnQueryIndex","foundActorIdColumn","foundActorRecordIdColumn","foundSystemWideOperationIdColumn","isSaveOperation","missingRepositoryIdErrorMsg","Number","isInteger","operationsByRepo","repositoryIdIndex","actorIdIndex","actorRecordIdIndex","repositoryIdColumnNumber","actorIdColumnNumber","actorRecordIdColumnNumber","columnNumber","QueryManager","ensureRepositoryPresenceAndCurrentState","repositoryLoader","TransactionManager","getInProgressTransactionById","isServer","transactionalCallback","transact","transactionManagerStore","parentTransaction","checkForCircularDependencies","unshift","internalStartTransaction","setupTransaction","clearTransaction","resumeParentOrPendingTransaction","ancestorTransaction","pendingTransaction","childTransactionHistory","parentTransactionHistory","parentRepositoryTransactionRecord","saveRepositoryHistory","saveTransaction","activeQueries","rerunQueries","synchronizationOutManager","synchronizeOut","isSameSource","callHerarchy","getApiName","hierarchyTransaction","nameContainer","transactionHistoryIds","idGenerator","generateTransactionHistoryIds","transactionHistoryId","repositoryHistoryIds","operationHistoryIds","UpdateManager","internalFragments","SET","recordHistoryMap","repositorySheetSelectInfo","addUpdateHistory","numUpdatedRows","previousDbEntity","addNewValueHistory","jsonUpdate","getSheetSelectFromSetClauseResult","recordsToUpdate","recordsByRepositoryId","groupRecordsByRepository","recordHistoryMapByRecordId","recordHistoryMapForRepository","UPDATE_ROWS","recordsForRepositoryId","recordToUpdate","recordHistoryMapForActor","sheetQuery","resultSetIndexByColumnIndex","selectDbColumns","SELECT","updatedRecords","updatedRecord","records","CascadeGraphVerifier","verify","DependencyGraphResolver","getOperationsInOrder","unorderedDependencies","getEntitiesToPersist","resolveCircularDependencies","orderedDependencies","orderEntitiesToPersist","operationNodes","optimizePersistOperations","ensureUpdatesAreGroupedCorrectly","operatedOnEntities","operatedOnPassThroughs","dependsOn","dependency","deleteByCascade","allProcessedNodes","isCreate","isDelete","isParentId","isPassThrough","isStub","isUpdate","getEntityStateTypeAsFlags","operationUniqueId","getOperationUniqueId","getUniqueIdFieldName","dependencyGraphNode","isExistingNode","circleTraversedFor","dependsOnByOUID","dependsOnOUID","relatedEntities","propertyValue","fromDependencyForChild","isDependency","childDeleteByCascade","getStateFieldName","parentState","childDependencyLinkedNodes","nodeOUID","resolveCircularDependenciesForNode","currentlyTraversedNode","nodePath","entityPath","pathNode","entityLongName","orderedNodes","processedNodes","entityUid","nodeProcessed","operationsByApplicationIndex","applicationOperationNodes","entityOperations","canBeCombined","dependencyUid","EntityGraphReconstructor","restoreEntityGraph","entitiesByOperationIndex","processedEntitySet","rootCopy","linkEntityGraph","lastOUID","currentEntities","results","previouslyFoundEntity","entityCopy","copyEntityState","getEntityState","isManyToOne","assertRelationValueIsAnObject","assertManyToOneNotArray","assertOneToManyIsArray","previousDbApplication","propertyDbApplication","propertyCopyValue","relationValue","OperationContextLoader","OperationManager","entityGraph","verifiedTree","cascadeGraphVerifier","entityGraphReconstructor","structuralEntityValidator","dependencyGraphResolver","rootDbEntity","saveActor","ownerActor","created","deleted","updated","internalCreate","internalDelete","internalUpdate","rawInsert","qMetadataUtils","columnIndexesInValues","valuesFragment","columnValue","_propertyNameChains","idsAndGeneratedValues","entitySaveResult","generatedPropertyName","generatedPropertyValue","setFragment","idWhereFragments","runUpdate","originalEntity","updatedValue","propertyOriginalValue","_dbColumn","originalColumnValue","valuePropertyNameChain","childPropertyName","idQProperty","currentSetFragment","originalValue","whereFragment","valuesMapByColumn","entityIdWhereClauses","deletedValue","StructuralEntityValidator","operatedOnEntityIndicator","fromOneToMany","parentRelationProperty","rootRelationRecord","parentRelationRecord","haveRootRelationRecord","record","newRepositoryNeeded","relationIsOneToMany","isRelationNullable","isMissingRepositoryProperty","isRepositoryColumnAndNewRepositoryNeed","parentOneToManyElems","parentMappedBy","manyToOneElems","warn","isIdColumnEmpty","ensureIdValue","ensureNonRelationalValue","ensureRepositoryValidity","originalValues","originalRepository","originalActor","originalActorRecordId","throwUnexpectedProperty","QueryParameterDeserializer","deserialize","queryName","deserializedParameters","deserializedParameter","deserializeParameter","jsonQueryParameter","parameterIndex","checkTypeOfParameter","RESULT_DATE","expectedParameterType","typeOfParameter","QueryResultsSerializer","serialize","lookupTable","sequence","stubLookupTable","serializedEntity","doSerialize","entityStub","STUB","propertyCopy","manyObject","toISOString","ClientQueryManager","getClientQuery","daoName","Domain","Application","VersionedApplicationObject","ApplicationColumn","ApplicationCurrentVersion","ApplicationEntity","relationReferences","ApplicationOperation","ApplicationProperty","ApplicationPropertyColumn","ApplicationReference","ApplicationRelation","ApplicationRelationColumn","ApplicationVersion","references","referencedBy","referencesMapByName","referencedByMapByName","BaseApplicationDao","BaseApplicationColumnDao","BaseApplicationCurrentVersionDao","BaseApplicationEntityDao","BaseApplicationOperationDao","BaseApplicationPropertyDao","BaseApplicationPropertyColumnDao","BaseApplicationReferenceDao","BaseApplicationRelationDao","BaseApplicationRelationColumnDao","BaseApplicationVersionDao","BaseDomainDao","BaseApplicationVersionDuo","DomainDao","findByIdIn","domainIds","findMapByNameWithNames","domainNames","domainMapByNameWithNames","findOneByName","findByNames","names","checkAndInsertIfNeeded","existingDomains","existingDomainMap","existingDomain","newDomains","ApplicationColumnDao","findAllForEntities","applicationColumns","sc","applicationColumn","precision","scale","deprecatedSinceVersion","removedInVersion","ApplicationDao","findAllActive","findMapByVersionIds","applicationVersionIds","applicationMapByIndex","sv","majorVersion","minorVersion","patchVersion","findMaxIndex","findMaxVersionedMapByApplicationAndDomainNames","applicationDomainNames","applicationNames","maxVersionedMapByApplicationAndDomainNames","sMaV","sMiV","applicationLookupRecords","domainId","applicationLookupRecord","setStatusByIndexes","indexes","status","findMapByFullNames","fullApplicationNames","mapByFullName","findByDomainNamesAndApplicationNames","scope","signature","ApplicationEntityDao","findAllForApplicationVersions","se","applicationEntities","applicationEntity","ApplicationPropertyColumnDao","findAllForColumns","columnIds","rc","applicationPropertyColumns","spc","applicationPropertyColumn","ApplicationPropertyDao","applicationProperties","sp","applicationProperty","ApplicationReferenceDao","sr","ownApplicationVersion","applicationReferences","applicationReference","referencedApplicationVersion","ApplicationRelationColumnDao","applicationRelationColumns","src","applicationRelationColumn","oneRelation","parentRelation","ApplicationRelationDao","findAllForProperties","propertyIds","applicationRelations","applicationRelation","foreignKey","ApplicationVersionDao","findAllActiveOrderByApplicationIndexAndId","ApplicationVersionDuo","trafficPattern","DOMAIN_DAO","APPLICATION_COLUMN_DAO","APPLICATION_DAO","APPLICATION_ENTITY_DAO","APPLICATION_PROPERTY_COLUMN_DAO","APPLICATION_PROPERTY_DAO","APPLICATION_REFERENCE_DAO","APPLICATION_RELATION_COLUMN_DAO","APPLICATION_RELATION_DAO","APPLICATION_VERSION_DAO","EntityOrderByParser","rootSelectClauseFragment","qValidator","getCommonOrderByFragment","orderByFields","orderByField","getOrderByFragment","joinTree","qEntityMapByAlias","orderByFragments","selectFragmentQueue","currentSelectFragment","joinNodeQueue","currentJoinNode","tableAlias","currentEntityOrderBy","orderByDbEntity","isForParentNode","validateReadProperty","allColumnsToSortBy","idColumnsToSortBy","dbPropertyColumn","childJoinNode","entityOrderByFragments","buildOrderByFragmentForEntity","finalOrderByColumnsFragments","inputOrderByPropertyNameSet","idColumnName","ExactOrderByParser","validator","validateAliasedFieldAccess","MappedOrderByParser","originalOrderBy","currentSelectFragmentFieldSet","GraphMtoMapper","mtoStubReferenceMap","addMtoReference","mtoStubReference","mtoEntityIdValue","mtoDbEntity","mtoEntitiesForTypeMap","mtoRelationField","populateMtos","entityMap","mtoEntitiesForApplicationMap","mtoEntityId","mtosForEntity","mtoPropertyName","otmDbEntity","otmEntitiesForTypeMap","otmEntity","otmEntityId","mtoParentObject","GraphOtmMapper","mtoEntityReferenceMap","otmEntityReferenceMap","otmEntityField","mtoEntityReferenceMapForEntity","mapForOtmEntity","mtoCollection","addOtmReference","otmStubReference","otmEntityIdValue","otmRecordByPropertyName","otmPropertyName","otmObject","populateOtms","keepMappedEntityArrays","mtoEntityReferenceMapForApplication","entityWithOtmMap","referencedEntitiesByPropertyMap","otmProperty","referencedEntityMap","otmCollection","putAll","AbstractObjectResultParser","addManyToOneStub","resultObject","relationInfos","manyToOneStub","haveAllIds","relationInfo","lastObject","currentObject","propertyNameChain","EntityGraphResultParser","entityMapByApplicationAndTableIndexes","otmStubBuffer","mtoStubBuffer","currentResultRow","otmMapper","mtoMapper","addEntity","entityAlias","addProperty","dataType","bufferManyToOneStub","relationDbEntity","relatedEntityId","bufferManyToOne","bufferBlankManyToOneStub","bufferManyToOneObject","childResultObject","bufferBlankManyToOneObject","bufferOneToManyStub","bufferOneToMany","bufferOneToManyCollection","bufferBlankOneToMany","otmEntityName","flushEntity","selectClauseFragment","entityIdValue","currentEntity","getEntityToFlush","flushRelationStubBuffers","flushRow","bridge","parsedResults","mapped","entityMapForName","existingEntity","mergeEntities","sourceArray","targetArray","sourceSet","sourceChild","sourceChildIdValue","targetChild","targetChildIdValue","put","otmStub","mtoStub","TreeResultParser","currentRowObjectMap","objectEqualityMap","lastRowObjectMap","currentObjectOneToManys","isDifferentOrDoesntExist","addOneToManyCollection","currentOtmCollection","lastOtmCollection","mergeEntity","isSameObjectAsLastRow","oneToManyProperty","currentOneToMany","currentMto","existingOneToMany","EntityTreeResultParser","addManyToOneReference","lastMtoStub","currentMtoStub","ObjectResultParserFactory","getObjectResultParser","TreeQueryResultParser","ClauseType","SQLWhereBase","dialect","sqlQueryAdapter","parameterReferences","fieldMap","jsonRelationMapByAlias","parameterReference","getParameterValue","getFunctionCallValue","rawValue","getFieldValue","FUNCTION_CALL","getFieldFunctionValue","aField","defaultCallback","aValue","isParameterReference","getParameterReference","getFunctionAdaptor","getFunctionCalls","addFunctionAlias","clauseField","clauseType","clauseFieldMember","MAPPED_SELECT_CLAUSE","WHERE_CLAUSE","subQuerySql","subStatementSqlGenerator","getTreeQuerySql","validateReadQEntityProperty","getEntityPropertyColumnName","addField","getComplexColumnFragment","jsonFieldSqlSubQuery","getFieldQuerySql","addSubQueryAlias","MANY_TO_ONE_RELATION","validateReadQEntityManyToOneRelation","getEntityManyToOneColumnName","applyOperator","getWHEREFragment","nestingPrefix","getLogicalWhereFragment","lValueSql","rValueSql","addFieldFromColumn","warning","getSimpleColumnFragment","selectSqlFragment","childOperations","childOperation","NaN","SQLNoJoinQuery","getTableFragment","fromRelation","addAs","firstDbEntity","tableName","getEntityTableName","firstQEntity","fromFragment","SQLDelete","toSQL","SQLInsertValues","validateInsertQEntity","getColumnsFragment","getValuesFragment","valuesClauseFragment","valuesArray","SQLDialect","EntityDefaults","getForAlias","defaultsForAlias","SQLQuery","entityDefaults","getFieldMap","getEntityApplicationRelationFromJoin","leftQEntity","rightQEntity","entityRelation","parentAlias","joinTypeString","allJoinOnColumns","leftDbEntity","rightDbEntity","matchingRelations","manySideRelation","ownColumnName","referencedColumnName","leftColumn","rightColumn","onClause","joinOnColumn","joinWhereClauseOperator","SQLUpdate","updateFragment","getSetFragment","internalSetFragment","setClauseFragment","setFragments","validateUpdateColumn","addSetFragment","fieldValue","isManyToOneRelation","addManyToOneMappings","parentMapping","mappings","mapping","propertyChain","childMappings","SqlFunctionField","jsonClauseField","sqlValueProvider","NonEntitySQLQuery","subStatementQueryGenerator","addQEntityMapByAlias","sourceMap","joinTrees","buildFromJoinTree","getSELECTFragment","getFROMFragments","groupByFragment","getGroupByFragment","havingFragment","orderByFragment","orderByParser","offsetFragment","getOffsetFragment","getLimitFragment","joinRelations","joinNodeMap","jsonTree","jsonTrees","firstRelation","validateReadFromEntity","firstEntity","rightEntity","addFieldsToView","nonJoinedEntity","anotherTree","leftNode","rightNode","viewJoinRelation","viewAlias","addFieldsToViewForSelect","forFieldQueryAlias","hasDistinctClause","fieldName","fieldJson","aliasToSet","addFieldToViewForSelect","fieldQuery","getFieldSelectFragment","nestedObjectCallBack","columnSelectSqlFragment","getFROMFragment","parentTree","currentTree","currentRelation","leftEntity","joinOnClause","viewRelation","groupByField","FieldSQLQuery","parseQueryResults","bridgedQueryConfiguration","parsedResult","parseQueryResult","distinctClause","NON_MAPPED_SELECT_CLAUSE","resultRow","nextFieldIndex","getResultCellValue","TreeSQLQuery","queryParser","numProperties","SubStatementSqlGenerator","jsonTreeQuery","mappedSqlQuery","fieldSqlQuery","EntitySQLQuery","objectResultParserFactory","graphQueryConfiguration","finalSelectTree","setupSelectFields","lastResult","onlyJsonRelation","nextColumnIndex","numNonNullColumns","childSelectClauseFragment","__state__","haveRelationValues","columnAlias","sqlDataType","childEntityAlias","defaultValue","parentDbProperty","retrieveAllOwnFields","ofProperty","allFieldsSpecified","entityDefinitionHasIds","manyToOneRelation","selectSqlFragments","defaults","columnSelect","subSelectFragments","SheetSQLQuery","resultsFromSelect","ActiveQueries","queries","cachedSqlQuery","markQueriesToRerun","sqlQuery","rerun","runQuery","IdGenerator","transactionHistoryIdColumns","populateTransactionHistoryIdColumns","_reject","doPopulateTransactionHistoryIdColumns","transactionHistoryDbEntity","getHoldingPatternDbEntity","repoTransHistoryDbEntity","operationHistoryDbEntity","recordHistoryDbEntity","numRepositoryTransHistories","numOperationTransHistories","numRecordHistories","generatedSequenceNumbers","generateEntityIds","holdingPatternEntityName","CurrentState","SqlDriver","supportsLocalTransactions","getTableName","theTableName","composeTableName","internalSetupTransaction","tearDownTransaction","childTransaction","internalCommit","internalRollback","rollbackError","splitValues","numVals","sqlInsertValues","getDialect","sql","executeNative","sqlDelete","numberOfAffectedRecords","sqlUpdate","getSQLQuery","findNative","resultType","QueryResType","resultsSubject","valuesInRow","maxValues","numRowsPerBatch","Math","floor","aSplitValues","QValidator","validateUpdateProperty","functionAlias","subQueryAlias","fieldAlias","fuelHydrantSystem","ACTIVE_QUERIES","SUB_STATEMENT_SQL_GENERATOR","ID_GENERATOR","OBJECT_RESULT_PARSER_FACTORY","Q_VALIDATOR","SQL_QUERY_ADAPTOR","ABSTRACT_SQL_DRIVER","SQL_WHERE_BASE","DebugSynchronizationAdapter","sinceSyncTimestamp","response","nonhubClient","getRepositoryTransactions","sendTransactions","messagesByRepository","allSent","repositoryUuid","sendTransactionsForRepository","sendRepositoryTransactions","SynchronizationAdapterLoader","synchronizationSource","debugSynchronizationAdapter","SyncInActorChecker","ensureActors","actorUuids","messageActorIndexMap","checkActorApplication","checkActorTerminal","checkActorUser","messageUserIndex","missingActors","messageActor","SyncInApplicationChecker","ensureApplications","applicationCheckMap","checkApplicationsAndDomains","allApplicationNames","domainCheckMap","getNames","applicationCheck","domainCheck","found","domainsToCreate","applicationChecksByName","applicationChecksForDomain","applicationChecksForDomainMap","SyncInApplicationVersionChecker","ensureApplicationVersions","checkVersionsApplicationsDomains","applicationVersionCheckMap","applicationVersionDao","lastDomainName","lastApplicationName","applicationVersionNumber","applicationChecks","SyncInChecker","checkMessage","syncInUserChecker","ensureUsers","syncInTerminalChecker","ensureTerminals","syncInApplicationChecker","syncInActorChecker","syncInRepositoryChecker","ensureRepositories","syncInApplicationVersionChecker","syncInDataChecker","checkData","SyncInDataChecker","applicationEntityMap","populateApplicationEntityMap","checkOperationHistories","applicationVersionsByIds","messageApplicationVersion","entitiesForDomain","entitiesForApplication","systemWideOperationIds","actorIdColumnMapByIndex","repositoryIdColumnMapByIndex","checkRecordHistories","recordHistories","checkNewValues","checkOldValues","referencedRepositories","SyncInRepositoryChecker","repositoryUuids","messageRepositoryIndexMap","checkRepository","missingRepositories","messageRepository","repositoryIndex","SyncInTerminalChecker","terminalUuids","messageTerminalIndexMap","terminalDao","missingTerminals","messageTerminal","addMissingTerminals","SyncInUserChecker","userUuids","messageUserIndexMap","missingUsers","messageUser","addMissingUsers","SynchronizationConflict","SynchronizationConflict_Type","SynchronizationConflictValues","DataOrigin","ApplicationChangeStatus","RecordUpdateStage","BaseRecordUpdateStageDao","BaseSynchronizationConflictDao","BaseSynchronizationConflictValuesDao","SynchronizationConflictDao","synchronizationConflicts","synchronizationConflict","acknowledged","overwrittenRecordHistory","overwritingRecordHistory","SynchronizationConflictValuesDao","synchronizationConflictValues","scv","synchronizationConflictValue","RecordUpdateStageDao","rus","updateEntityWhereIds","idMap","updatedColumnIndexes","idsForActor","columnRus","columnSetClause","movingWalkway","RECORD_UPDATE_STAGE_DAO","SYNCHRONIZATION_CONFLICT_DAO","SYNCHRONIZATION_CONFLICT_VALUES_DAO","Stage1SyncedInDataProcessor","performStage1DataProcessing","actorMayById","populateSystemWideOperationIds","repoTransHistoriesForRepo","changedRecordsForRepo","idsForEntity","newValueMap","allRepoTransHistoryMapByRepoId","allRemoteRecordDeletions","getDeletedRecordIdsAndPopulateAllHistoryMap","localRepoTransHistoryMapByRepositoryId","allLocalRecordDeletions","newlyFoundActorSet","repositoryTransactionHistoriesForRepository","newActors","newActor","repoTransHistoriesForRepository","recordCreations","recordUpdates","recordDeletions","syncConflictMapByRepoId","processCreation","processUpdate","processDeletion","numSystemWideOperationIds","ensureRecordHistoryId","actorRecordIdSetByActor","repositoryTransactionHistoryMapByRepoId","mergeArraysInMap","syncInUtils","ensureRecordMapForRepoInTable","recordUpdatesForRepoInTable","getRecordsForRepoInTable","recordDeletesForRepoInTable","allRemoteRecordDeletesForRepoInTable","allLocalRecordDeletesForRepoInTable","insertsForEntityInRepo","getRecord","getRecordInfo","hasRecordId","getRecordHistoryId","remoteDeleteRecordHistoryId","addSyncConflict","REMOTE_CREATE_REMOTELY_DELETED","createdRecord","ensureColumnValueMap","recordCreationsForRepoInTable","updatesForEntityInRepo","localDeleteRecordHistoryId","REMOTE_UPDATE_LOCALLY_DELETED","LOCAL_UPDATE_REMOTELY_DELETED","ensureRecord","recordUpdate","REMOTE_UPDATE_LOCALLY_UPDATED","recordHistoryId","deletesForEntityInRepo","recordCreationsForActorInRepoInTable","getRecordsForActor","recordUpdatesForActorInRepoInTable","recordMapByApplicationTableAndRepository","recordMapForApplication","recordMapForTable","recordMapForRepoInTable","recordMapByActor","actorRecordIdsForActor","synchronizationConflictType","syncConflict","createSynchronizationConflict","dataMap","Stage2SyncedInDataProcessor","applyChangesToDb","stage1Result","applicationsByApplicationVersionIdMap","performCreates","performUpdates","performDeletes","creationInApplicationMap","creationInTableMap","nonIdColumns","getNonIdColumnsInIndexOrder","creatingColumns","numInserts","creationForRepositoryMap","creationForActorMap","creationOfRowMap","rowValues","columnIndexedValues","col1IndexAndValue","col2IndexAndValue","currentNonIdColumnArrayIndex","nonIdColumn","column1","column2","finalUpdateMap","recordUpdateStage","applicationUpdateMap","finalApplicationUpdateMap","tableUpdateMap","finalTableUpdateMap","repositoryUpdateMap","actorUpdates","recordUpdateMap","getRecordKeyMap","columnUpdate","recordUpdateStageDao","updateMapForApplication","updateMapForTable","runUpdatesForTable","deletionInApplicationMap","deletionInTableMap","numClauses","repositoryWhereFragments","deletionForRepositoryMap","actorWhereFragments","actorRecordIdSet","updatedColumns","columnValueUpdate","updateKeyMap","childColumnUpdateKeyMap","recordKeyMap","SynchronizationInManager","existingRepositoryTransactionHistories","existingRepositoryTransactionHistory","messagesToProcess","orderedMessages","timeOrderMessages","isValidLastChangeTime","syncInChecker","twoStageSyncedInDataProcessor","syncMessages","message1","message2","history1","history2","remoteTimestamp","remoteFieldName","syncFieldName","ApplicationComparisonResult","SyncInUtils","TwoStageSyncedInDataProcessor","aggregateHistoryRecords","getDataStructures","updateLocalData","stage1SyncedInDataProcessor","allSyncConflicts","allSyncConflictValues","stage2SyncedInDataProcessor","synchronizationConflictDao","synchronizationConflictValuesDao","WITH_ID","WITH_RECORD_HISTORY","WITH_INDEX","SyncOutDataSerializer","historiesToSend","serializeMessage","lookups","actorInMessageIndexesById","applicationVersionInMessageIndexesById","lastInMessageActorIndex","lastInMessageApplicationVersionIndex","lastInMessageRepositoryIndex","repositoryInMessageIndexesById","inMessageUserLookup","inMessageIndexesById","lastInMessageIndex","serializeRepositoryTransactionHistory","serializeRepositories","inMessageApplicationLookup","serializeActorsUsersAndTerminals","serializeApplicationsAndVersions","actorIdsToFindBy","serializeUsers","terminalInMessageIndexesById","serializeTerminals","applicationInMessageIndex","serializeApplication","actorInMessageIndex","lastInMessageTerminalIndex","terminalInMessageIndex","addUserToMessage","userInMessageIndex","getUserInMessageIndex","repositoryIdsToFindBy","repositoryInMessageIndex","serializeRepository","operationHistory1","operationHistory2","serializedOperationHistory","serializeOperationHistory","serializeHistoryRepository","serializedRecordHistory","serializeRecordHistory","applicationVersionInMessageIndex","getActorInMessageIndex","dbColumMapByIndex","serializeNewValue","serializeOldValue","baseObject","getActorInMessageIndexById","serializeValue","valueRecord","valueFieldName","serailizedValue","getSerializedRepositoryId","SynchronizationOutManager","loadHistoryRepositories","syncOutDataSerializer","groupMessageMap","groupMessagesBySourceAndRepository","messageMapForSource","updateRepositoryTransactionHistories","repositoryIdsToLookup","repositoryMapById","ensureGlobalRepositoryIdentifiers","foundRepository","NonhubClient","serverLocationProtocol","sendMessage","request","packagedMessage","fetch","mode","headers","NONHUB_CLIENT","groundTransport","STAGE1_SYNCED_IN_DATA_PROCESSOR","STAGE2_SYNCED_IN_DATA_PROCESSOR","SYNC_IN_ACTOR_CHECKER","SYNC_IN_CHECKER","SYNC_IN_DATA_CHECKER","SYNC_IN_TERMINAL_CHECKER","SYNC_IN_REPOSITORY_CHECKER","SYNC_IN_APPLICATION_CHECKER","SYNC_IN_APPLICATION_VERSION_CHECKER","SYNC_IN_USER_CHECKER","SYNC_IN_UTILS","SYNCHRONIZATION_IN_MANAGER","SYNCHRONIZATION_OUT_MANAGER","SYNC_OUT_DATA_SERIALIZER","TWO_STAGE_SYNCED_IN_DATA_PROCESSOR","DEBUG_SYNCHRONIZATION_ADAPTER","SYNCHRONIZATION_ADAPTER_LOADER","ABSTRACT_MUTATION_MANAGER","ABSTRACT_TRANSACTIONAL_RECIEVER","CASCADE_GRAPH_VERIFIER","DATABASE_MANAGER","DELETE_MANAGER","DEPENDENCY_GRAPH_RESOLVER","ENTITY_GRAPH_RECONSTRUCTOR","HISTORY_MANAGER","INSERT_MANAGER","INTERNAL_RECORD_MANAGER","ONLINE_MANAGER","OPERATION_MANAGER","QUERY_MANAGER","REPOSITORY_MANAGER","STRUCTURAL_ENTITY_VALIDATOR","UPDATE_MANAGER","ApiRegistry","applicationApi","findApiObjectAndOperation","apiObjectName","apiObjectDefinition","apiOperation","apiObject","ApiValidator","LocalAPIServer","handleRequest","payload","OperationDeserializer","deserializedEntity","doDeserialize","alreadyDeserializedEntity","aProperty","cleanJsonObject","valueCopy","EntityCopier","copyEntityForProcessing","processedEntityMap","doCopyEntityForProcessing","UpdateCacheManager","originalValuesObject","nestedProperty","currentPropertyOriginalValue","setOperationState","processedEntities","entityState","hasId","hasGeneratedIds","propertyOriginalValuesObject","noOriginalValue","PASS_THROUGH","afterSaveModifications","updateOriginalValuesAfterSave","removeDeletedEntities","doUpdateOriginalValuesAfterSave","setIsDeleted","isDeleted","dbRelationProperty","EntityStateManager_1","EntityStateManager","PARENT_ID","STATE_FIELD","markToCreate","markToUpdate","ORIGINAL_VALUES_PROPERTY","toEntity","isResultDate","throwIfNotFound","OPERATION_UNIQUE_ID_FIELD","entityDescription","copyOperationUniqueId","DELETED_PROPERTY","DatabaseFacade","queryContext","ensureQueryContext","preSaveOperations","entityCopier","updateColumns","prepare","queryFunction","FunctionWrapper","QueryFacade","EntityAccumulator","applicationDomain","AirportDatabase","functions","getAccumulator","operationName","tower","ENTITY_COPIER","exports","ms","lastMs","additional","substring","time","resolveWith","PROMISE_RESOLVED_FALSE","PROMISE_RESOLVED_TRUE","PROMISE_RESOLVED_VOID","isNode","__esModule","_typeof","averageResponseTime","canBeUsed","close","postMessage","microSeconds","_util","channelName","messagesCallback","bc","BroadcastChannel","subFns","onmessage","msg","channelState","messageJson","_pubkey","_default","ObliviousSet","ttl","timeMap","removeTooOldValues","obliviousSet","olderThen","originalOptions","webWorkerSupport","idb","fallbackInterval","onclose","localstorage","removeTimeout","maxParallelWrites","useFastPath","cleanOldMessages","createDatabase","objectStore","OBJECT_STORE_ID","openCursor","onsuccess","ev","cursor","getIdb","getMessagesHigherThan","getOldMessages","removeMessageById","writeMessage","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","openRequest","open","onupgradeneeded","createObjectStore","keyPath","autoIncrement","rej","onerror","readerUuid","writeObject","oncomplete","lastCursorId","keyRangeValue","IDBKeyRange","Infinity","msgObk","tooOld","msgObj","_options","fillOptionsWithDefaults","randomToken","eMIs","_obliviousSet","writeBlockPromise","readQueuePromises","_readLoop","readNewMessages","sleep","newerMessages","messagesCallbackTime","_filterMessage","msgObjA","msgObjB","randomInt","addStorageEventListener","getLocalStorage","removeStorageEventListener","storageKey","localStorage","writeObj","setItem","createEvent","initEvent","dispatchEvent","listener","ls","removeItem","userAgent","navigator","defaultTime","SIMULATE_CHANNELS","channel","chooseMethods","METHODS","Boolean","_simulate","useMethod","_native","_interopRequireDefault","_indexedDb","require$$1","_localstorage","require$$2","require$$3","_methodChooser","chooseMethod","clearNodeFolder","ENFORCED_OPTIONS","OPEN_BROADCAST_CHANNELS","lastId","maybePromise","_iL","_onML","_addEL","_uMP","_befC","_prepP","_state","_post","broadcastChannel","sendPromise","_hasMessageListeners","_addListenerObject","listenerFn","listenerObject","hundredMsInMicro","minMessageTime","_startListening","_removeListenerObject","_stopListening","postInternal","listenObj","awaitPrepare","isClosed","USE_METHOD","WorkerGlobalScope","LISTENERS","startedListening","runAll","promises","beLeader","_leaderElector","responseTime","elector","LeaderElection","die","isLeader","hasLeader","isDead","_aplQ","_aplQC","_unl","_lstns","_dpL","_dpLC","hasLeaderListener","action","_sendMessage","leaderElector","msgJson","unloadFn","_unload","isLeaderListener","applyOnce","isFromFallbackInterval","_this2","stopCriteriaPromiseResolve","stopCriteria","stopCriteriaPromise","handleMessage","waitForAnswerTime","race","applyRun","awaitLeadership","_aLP","resolved","finish","whenDeathListener","tryOnFallBack","_awaitLeadershipOnce","onduplicate","_this3","uFn","_broadcastChannel","_leaderElection","createLeaderElection","enforceOptions","_index","WebMesageReceiver","isNativeBroadcastChannel","createChannel","communicationChannel","SoftBroadcastChannel","transactionalReceiver","handleClientRequest","handleAppRequest","origin","needMessageSerialization","sendMessageToClient","sendMessageToApp","DomainRetriever","retrieveDomain","domainNameMapByName","allDomains","SqlApplicationBuilder","build","newJsonApplicationMap","createApplication","jsonEntity","buildTable","relatedJsonApplicationMap","buildForeignKeys","primaryKeyColumnNames","tableColumnsDdl","jsonColumn","columnDdl","getColumnSuffix","isPrimaryKeyColumn","createTableSuffix","getCreateTableSuffix","primaryKeySubStatement","getPrimaryKeyStatement","createTableDdl","DDL","indexNumber","indexConfig","createIndexDdl","getIndexSql","columnNameList","relatedJsonApplication","relatedJsonEntity","referencedApplication","relatedFullApplicationName","relatedApplication","foreignKeyColumnNames","referencedTableName","referencedColumnNames","relatedIdColumnRef","foreignKeySql","getForeignKeySql","buildForeignKeysForTable","columnNames","ApplicationChecker","check","checkDomain","checkDependencies","allReferencedApplicationMap","referencedApplicationMapByApplication","lastJsonApplicationVersion","referencedApplicationMapForApplication","jsonReferencedApplication","pruneInGroupReferences","pruneReferencesToExistingApplications","applicationsWithValidDependencies","applicationsInNeedOfAdditionalDependencies","neededDependencies","dependenciesForDomain","hasReferences","_domainName","referenceMapForApplicationsOfDomain","_applicationName","applicationsReferencedByAGivenApplication","applicationReferencesForDomain","allApplicationReferencesForDomain","existingApplicationInfo","findExistingApplications","existingApplicationMapByName","coreDomainAndApplicationNames","coreDomainAndApplicationNamesByApplicationName","allReferencedApplicationsForDomain","coreApplicationName","referencedApplicationMap","referencesForDomain","ApplicationLocator","locateExistingApplicationVersionRecord","latestApplicationVersionForApplication","jsonApplicationVersion","locateLatestApplicationVersionByApplicationName","ApplicationComposer","compose","jsonApplicationMapByFullName","domainMapByName","allApplications","applicationMapByFullName","newLatestApplicationVersions","newApplicationVersionMapByApplicationName","newEntitiesMapByApplicationName","newPropertiesMap","newRelationsMap","newColumnsMap","added","latestApplicationVersions","allDdlObjects","composeDomain","composeApplication","composeApplicationVersion","newApplicationReferenceMap","newApplicationReferences","composeApplicationReferences","deepTraverseReferences","addApplicationVersionObjects","composeApplicationEntities","composeApplicationProperties","composeApplicationRelations","composeApplicationColumns","composeApplicationRelationColumns","addObjects","getExistingLatestApplicationVersion","referencedApplicationName","ddlObjects","foundDomain","foundApplication","entityPropertyColumns","entityRelationColumns","fromObjects","toObjects","fromDomain","toDomain","fromApplication","toApplication","domainRetriever","newApplications","CURRENT","newApplicationVersions","newApplicationVersion","versionParts","newApplicationCurrentVersion","jsonApplicationMapByName","newApplicationReferenceLookup","applicationReferenceLookup","referencedFullApplicationName","applicationLocator","newEntities","jsonEntities","newApplicationEntities","newProperties","propertiesByEntityIndex","propertiesForEntity","jsonProperty","newRelations","relationsByEntityIndex","referencesForApplication","relationsForEntity","entitiesArray","newColumns","newPropertyColumns","columnsByTable","propertiesForApplication","columnsForTable","idColumnIndexes","idColumnRef","idColumnIndex","idColumndIndex","propertyReference","newRelationColumns","columnsForApplication","relationsForApplication","applicationReferencesForApplication","columnsForEntity","jsonRelationColumn","oneRelationApplicationVersion","oneTableColumnsMapForApplication","oneTableColumns","oneTableRelations","ApplicationRecorder","setDefaultVersioning","applicationReferenceDao","applicationEntityDao","applicationPropertyDao","applicationRelationDao","applicationColumnDao","applicationPropertyColumnDao","applicationRelationColumnDao","bulkCreate","Sequence","SystemWideOperationId","TerminalRun","BaseSequenceDao","BaseSystemWideOperationIdDao","BaseTerminalRunDao","TerminalRunDao","SequenceDao","incrementCurrentValues","incrementBy","incrementSequence","airportCode","SEQUENCE_DAO","AirportDatabasePopulator","populate","DdlObjectLinker","linkDomainsAndApplicationsAndVersions","entityArrayById","linkEntities","propertyMapById","relationMapById","linkPropertiesAndRelations","linkColumns","domainMapById","applicationCurrentVersion","addedEntities","columnMapById","DdlObjectRetriever","retrieveDdlObjects","applicationIndexes","domainIdSet","application1","application2","allApplicationVersions","lastApplicationIndex","latestApplicationVersionIds","QueryEntityClassCreator","createAll","applicationsWithDeps","applicationWithDependencies","orderedApplication1","orderedApplication2","applicationWithDeps","orderApplicationsInOrderOfPrecedence","relatedEntity","qConstructor","getOwnPropertyNames","setQApplicationEntities","QueryObjectInitializer","generateQObjectsAndPopulateStore","ddlObjectLinker","queryEntityClassCreator","unmodifiedDomains","unmodifiedApplications","ddlObjectRetriever","takeoff","DDL_OBJECT_LINKER","DDL_OBJECT_RETRIEVER","QUERY_ENTITY_CLASS_CREATOR","QUERY_OBJECT_INITIALIZER","ApplicationInitializer","addNewApplicationVersionsToAll","queryObjectInitializer","setAirDbApplications","loadExistingApplications","getApplicationsWithValidDependencies","checkedApplicationsWithValidDependencies","applicationBuilder","applicationComposer","newSequences","buildAllSequences","applicationRecorder","initializeForAIRportApp","tempDdlObjects","stageSequences","tempInitialize","wait","milliseconds","jsonApplicationsToInstall","applicationChecker","applicationReferenceCheckResults","neededDependency","nativeInitializeApplication","landing","ABSTRACT_APPLICATION_INITIALIZER","APPLICATION_BUILDER","APPLICATION_CHECKER","APPLICATION_COMPOSER","APPLICATION_LOCATOR","APPLICATION_RECORDER","SQL_APPLICATION_BUILDER","sequenceDao","WebApplicationInitializer","applicationWindowMap","initializingApplicationMap","appIframe","getElementsByName","style","display","appendChild","contentWindow","WebTransactionalReceiver","startsWith","webReciever","__received__","hasValidApplicationInfo","webMessageReciever","receivedDate","__receivedTime__","fromClientRedirectedMessage","handleFromClientRequest","ensureConnectionIsReady","messageOrigin","handleIsolateMessage","interAppApiCallRequest","success","toClientRedirectedMessage","handleToClientRequest","nativeStartApiCall","frameWindow","getFrameWindow","connectionIsReadyMessage","numPendingMessagesFromHost","numPendingMessagesForApplication","ensureApplicationIsInstalled","relyToClientWithError","replyToClientRequest","iframe","messageIsFromValidApp","numMessagesFromHost","numMessagesForApplication","applicationDomainFragments","SEARCH_UNSUBSCRIBE","isolateSubscriptionMap","shemaDomainName","observableDataResult","webTerminal","WEB_MESSAGE_RECEIVER","SequenceGenerator","sequences","sequenceBlocks","generatingSequenceNumbers","applicationSequences","tableSequences","every","addSequences","waitForPreviousGeneration","doGenerateSequenceNumbers","sequentialNumbers","numColumnSequencesNeeded","columnNumbers","sequenceBlock","numNewSequencesNeeded","newSequence","isDoneGeneratingSeqNums","SqLiteDriver","matchingTableNames","getNumberOfRows","getRows","dropTable","nativeParameters","convertValueIn","MUTATE","isValueValid","initTables","createQueries","currentQuery","SQLITE","SqlLiteFunctionAdaptor","clause","innerValue","getFunctionCall","jsonFunctionCall","param2","formatCall","formatParam","param1","acc","COALESCE","SqLiteApplicationBuilder","primaryKeySuffix","allSequences","buildSequences","stagedSequences","indexName","uniquePrefix","foreignKeyName","SqlJsTransaction","queryType","SqlJsDriver","SQLJS","SQL","initSqlJs","locateFile","_db","Database","stmt","deltaTableName","free","handleError","getReturnValue","rowsAffected","rows","SqlJsQueryAdaptor","functionAdaptor","newReference","dateToDbQuery","getResultArray","rawResponse","getResultCellRawValue","allowArrays","$destroy","detaching","destroy_component","$on","$set","$$props","$$set","dbManager","startDb","initFramework"],"mappings":"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"}